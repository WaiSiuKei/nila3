(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,e){if(this==null)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if(r===0)return!1;for(var n=0|e,s=Math.max(n>=0?n:r-Math.abs(n),0);s<r;){if(function(o,a){return o===a||typeof o=="number"&&typeof a=="number"&&isNaN(o)&&isNaN(a)}(t[s],i))return!0;s++}return!1}});String.prototype.startsWith||(String.prototype.startsWith=function(i,e){return e=e||0,this.substr(e,i.length)===i});var P=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bD(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Zv(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var n=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return i[r]}})}),t}(function(i){var e=function(){try{return!!Symbol.iterator}catch{return!1}},t=e(),r=function(l){var c={next:function(){var h=l.shift();return{done:h===void 0,value:h}}};return t&&(c[Symbol.iterator]=function(){return c}),c},n=function(l){return encodeURIComponent(l).replace(/%20/g,"+")},s=function(l){return decodeURIComponent(String(l).replace(/\+/g," "))},o=function(){var l=function(h){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var u=typeof h;if(u!=="undefined")if(u==="string")h!==""&&this._fromString(h);else if(h instanceof l){var p=this;h.forEach(function(g,_){p.append(_,g)})}else if(h!==null&&u==="object")if(Object.prototype.toString.call(h)==="[object Array]")for(var d=0;d<h.length;d++){var f=h[d];if(Object.prototype.toString.call(f)==="[object Array]"||f.length!==2)this.append(f[0],f[1]);else throw new TypeError("Expected [string, any] as entry at index "+d+" of URLSearchParams's input")}else for(var m in h)h.hasOwnProperty(m)&&this.append(m,h[m]);else throw new TypeError("Unsupported input's type for URLSearchParams")},c=l.prototype;c.append=function(h,u){h in this._entries?this._entries[h].push(String(u)):this._entries[h]=[String(u)]},c.delete=function(h){delete this._entries[h]},c.get=function(h){return h in this._entries?this._entries[h][0]:null},c.getAll=function(h){return h in this._entries?this._entries[h].slice(0):[]},c.has=function(h){return h in this._entries},c.set=function(h,u){this._entries[h]=[String(u)]},c.forEach=function(h,u){var p;for(var d in this._entries)if(this._entries.hasOwnProperty(d)){p=this._entries[d];for(var f=0;f<p.length;f++)h.call(u,p[f],d,this)}},c.keys=function(){var h=[];return this.forEach(function(u,p){h.push(p)}),r(h)},c.values=function(){var h=[];return this.forEach(function(u){h.push(u)}),r(h)},c.entries=function(){var h=[];return this.forEach(function(u,p){h.push([p,u])}),r(h)},t&&(c[Symbol.iterator]=c.entries),c.toString=function(){var h=[];return this.forEach(function(u,p){h.push(n(p)+"="+n(u))}),h.join("&")},i.URLSearchParams=l};(!("URLSearchParams"in i)||new i.URLSearchParams("?a=1").toString()!=="a=1")&&o();var a=i.URLSearchParams.prototype;typeof a.sort!="function"&&(a.sort=function(){var l=this,c=[];this.forEach(function(u,p){c.push([p,u]),l._entries||l.delete(p)}),c.sort(function(u,p){return u[0]<p[0]?-1:u[0]>p[0]?1:0}),l._entries&&(l._entries={});for(var h=0;h<c.length;h++)this.append(c[h][0],c[h][1])}),typeof a._fromString!="function"&&Object.defineProperty(a,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(l){if(this._entries)this._entries={};else{var c=[];this.forEach(function(d,f){c.push(f)});for(var h=0;h<c.length;h++)this.delete(c[h])}l=l.replace(/^\?/,"");for(var u=l.split("&"),p,h=0;h<u.length;h++)p=u[h].split("="),this.append(s(p[0]),p.length>1?s(p[1]):"")}})})(typeof P<"u"?P:typeof window<"u"?window:typeof self<"u"?self:P);(function(i){var e=function(){try{var n=new i.URL("b","http://a");return n.pathname="c%20d",n.href==="http://a/c%20d"&&n.searchParams}catch{return!1}},t=function(){var n=i.URL,s=function(l,c){typeof l!="string"&&(l=String(l));var h=document,u;if(c&&(i.location===void 0||c!==i.location.href)){h=document.implementation.createHTMLDocument(""),u=h.createElement("base"),u.href=c,h.head.appendChild(u);try{if(u.href.indexOf(c)!==0)throw new Error(u.href)}catch(v){throw new Error("URL unable to set base "+c+" due to "+v)}}var p=h.createElement("a");if(p.href=l,u&&(h.body.appendChild(p),p.href=p.href),p.protocol===":"||!/:/.test(p.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:p});var d=new i.URLSearchParams(this.search),f=!0,m=!0,g=this;["append","delete","set"].forEach(function(v){var y=d[v];d[v]=function(){y.apply(d,arguments),f&&(m=!1,g.search=d.toString(),m=!0)}}),Object.defineProperty(this,"searchParams",{value:d,enumerable:!0});var _=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==_&&(_=this.search,m&&(f=!1,this.searchParams._fromString(this.search),f=!0))}})},o=s.prototype,a=function(l){Object.defineProperty(o,l,{get:function(){return this._anchorElement[l]},set:function(c){this._anchorElement[l]=c},enumerable:!0})};["hash","host","hostname","port","protocol"].forEach(function(l){a(l)}),Object.defineProperty(o,"search",{get:function(){return this._anchorElement.search},set:function(l){this._anchorElement.search=l,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(o,{toString:{get:function(){var l=this;return function(){return l.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(l){this._anchorElement.href=l,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(l){this._anchorElement.pathname=l},enumerable:!0},origin:{get:function(){var l={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],c=this._anchorElement.port!=l&&this._anchorElement.port!=="";return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(c?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(l){},enumerable:!0},username:{get:function(){return""},set:function(l){},enumerable:!0}}),s.createObjectURL=function(l){return n.createObjectURL.apply(n,arguments)},s.revokeObjectURL=function(l){return n.revokeObjectURL.apply(n,arguments)},i.URL=s};if(e()||t(),i.location!==void 0&&!("origin"in i.location)){var r=function(){return i.location.protocol+"//"+i.location.hostname+(i.location.port?":"+i.location.port:"")};try{Object.defineProperty(i.location,"origin",{get:r,enumerable:!0})}catch{setInterval(function(){i.location.origin=r()},100)}}})(typeof P<"u"?P:typeof window<"u"?window:typeof self<"u"?self:P);(function(i){var e=i.URLSearchParams?i.URLSearchParams:null,t=e&&new e({a:1}).toString()==="a=1",r=e&&new e("s=%2B").get("s")==="+",n="__URLSearchParams__",s=e?function(){var _=new e;return _.append("s"," &"),_.toString()==="s=+%26"}():!0,o=l.prototype,a=!!(i.Symbol&&i.Symbol.iterator);if(e&&t&&r&&s)return;function l(_){_=_||"",(_ instanceof URLSearchParams||_ instanceof l)&&(_=_.toString()),this[n]=m(_)}o.append=function(_,v){g(this[n],_,v)},o.delete=function(_){delete this[n][_]},o.get=function(_){var v=this[n];return _ in v?v[_][0]:null},o.getAll=function(_){var v=this[n];return _ in v?v[_].slice(0):[]},o.has=function(_){return _ in this[n]},o.set=function(v,y){this[n][v]=[""+y]},o.toString=function(){var _=this[n],v=[],y,x,A,w;for(x in _)for(A=p(x),y=0,w=_[x];y<w.length;y++)v.push(A+"="+p(w[y]));return v.join("&")};var c=!r,h=!c&&e&&!t&&i.Proxy;i.URLSearchParams=h?new Proxy(e,{construct:function(_,v){return new _(new l(v[0]).toString())}}):l;var u=i.URLSearchParams.prototype;u.polyfill=!0,u.forEach=u.forEach||function(_,v){var y=m(this.toString());Object.getOwnPropertyNames(y).forEach(function(x){y[x].forEach(function(A){_.call(v,A,x,this)},this)},this)},u.sort=u.sort||function(){var _=m(this.toString()),v=[],y,x,A;for(y in _)v.push(y);for(v.sort(),x=0;x<v.length;x++)this.delete(v[x]);for(x=0;x<v.length;x++){var w=v[x],D=_[w];for(A=0;A<D.length;A++)this.append(w,D[A])}},u.keys=u.keys||function(){var _=[];return this.forEach(function(v,y){_.push(y)}),f(_)},u.values=u.values||function(){var _=[];return this.forEach(function(v){_.push(v)}),f(_)},u.entries=u.entries||function(){var _=[];return this.forEach(function(v,y){_.push([y,v])}),f(_)},a&&(u[i.Symbol.iterator]=u[i.Symbol.iterator]||u.entries);function p(_){var v={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(_).replace(/[!'\(\)~]|%20|%00/g,function(y){return v[y]})}function d(_){return decodeURIComponent(_.replace(/\+/g," "))}function f(_){var v={next:function(){var y=_.shift();return{done:y===void 0,value:y}}};return a&&(v[i.Symbol.iterator]=function(){return v}),v}function m(_){var v={};if(typeof _=="object")for(var y in _)_.hasOwnProperty(y)&&g(v,y,_[y]);else{_.indexOf("?")===0&&(_=_.slice(1));for(var x=_.split("&"),A=0;A<x.length;A++){var w=x[A],D=w.indexOf("=");-1<D?g(v,d(w.slice(0,D)),d(w.slice(D+1))):w&&g(v,d(w),"")}}return v}function g(_,v,y){var x=typeof y=="string"?y:y!=null&&typeof y.toString=="function"?y.toString():JSON.stringify(y);v in _?_[v].push(x):_[v]=[x]}})(typeof P<"u"?P:typeof window<"u"?window:P);const Cl={number:"number",string:"string",undefined:"undefined",object:"object",function:"function"};function Ki(i){return Array.isArray?Array.isArray(i):!!(i&&typeof i.length===Cl.number&&i.constructor===Array)}function ci(i){return typeof i===Cl.string||i instanceof String}function lr(i){return typeof i===Cl.object&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function ll(i){return(typeof i===Cl.number||i instanceof Number)&&!isNaN(i)}function Tr(i){return typeof i===Cl.undefined}function At(i){return Tr(i)||i===null}const SD=Object.prototype.hasOwnProperty;function ED(i){if(!lr(i))return!1;for(let e in i)if(SD.call(i,e))return!1;return!0}function $s(i){return typeof i===Cl.function}function AD(i,e){const t=Math.min(i.length,e.length);for(let r=0;r<t;r++)DD(i[r],e[r])}function DD(i,e){if(ci(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if($s(e)){if(i instanceof e||i&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function ye(i,...e){return Array.isArray(i)?(i.forEach(t=>t&&t.dispose()),[]):e.length===0?i?(i.dispose(),i):void 0:(ye(i),ye(e),[])}function H0(i){return{dispose:()=>ye(i)}}function z0(i){return{dispose(){i()}}}const Ix=class Ix{constructor(){this._toDispose=[],this._lifecycle_disposable_isDisposed=!1}get toDispose(){return this._toDispose}dispose(){this._lifecycle_disposable_isDisposed=!0,this._toDispose=ye(this._toDispose)}_register(e){return this._lifecycle_disposable_isDisposed?(console.warn("Registering disposable on object that has already been disposed."),e.dispose()):this._toDispose.push(e),e}};Ix.None=Object.freeze({dispose(){}});let Je=Ix;var V=(i=>(i[i.Null=0]="Null",i[i.Tab=9]="Tab",i[i.LineFeed=10]="LineFeed",i[i.CarriageReturn=13]="CarriageReturn",i[i.Space=32]="Space",i[i.ExclamationMark=33]="ExclamationMark",i[i.DoubleQuote=34]="DoubleQuote",i[i.Hash=35]="Hash",i[i.DollarSign=36]="DollarSign",i[i.PercentSign=37]="PercentSign",i[i.Ampersand=38]="Ampersand",i[i.SingleQuote=39]="SingleQuote",i[i.OpenParen=40]="OpenParen",i[i.CloseParen=41]="CloseParen",i[i.Asterisk=42]="Asterisk",i[i.Plus=43]="Plus",i[i.Comma=44]="Comma",i[i.Dash=45]="Dash",i[i.Period=46]="Period",i[i.Slash=47]="Slash",i[i.Digit0=48]="Digit0",i[i.Digit1=49]="Digit1",i[i.Digit2=50]="Digit2",i[i.Digit3=51]="Digit3",i[i.Digit4=52]="Digit4",i[i.Digit5=53]="Digit5",i[i.Digit6=54]="Digit6",i[i.Digit7=55]="Digit7",i[i.Digit8=56]="Digit8",i[i.Digit9=57]="Digit9",i[i.Colon=58]="Colon",i[i.Semicolon=59]="Semicolon",i[i.LessThan=60]="LessThan",i[i.Equals=61]="Equals",i[i.GreaterThan=62]="GreaterThan",i[i.QuestionMark=63]="QuestionMark",i[i.AtSign=64]="AtSign",i[i.A=65]="A",i[i.B=66]="B",i[i.C=67]="C",i[i.D=68]="D",i[i.E=69]="E",i[i.F=70]="F",i[i.G=71]="G",i[i.H=72]="H",i[i.I=73]="I",i[i.J=74]="J",i[i.K=75]="K",i[i.L=76]="L",i[i.M=77]="M",i[i.N=78]="N",i[i.O=79]="O",i[i.P=80]="P",i[i.Q=81]="Q",i[i.R=82]="R",i[i.S=83]="S",i[i.T=84]="T",i[i.U=85]="U",i[i.V=86]="V",i[i.W=87]="W",i[i.X=88]="X",i[i.Y=89]="Y",i[i.Z=90]="Z",i[i.OpenSquareBracket=91]="OpenSquareBracket",i[i.Backslash=92]="Backslash",i[i.CloseSquareBracket=93]="CloseSquareBracket",i[i.Caret=94]="Caret",i[i.Underline=95]="Underline",i[i.BackTick=96]="BackTick",i[i.a=97]="a",i[i.b=98]="b",i[i.c=99]="c",i[i.d=100]="d",i[i.e=101]="e",i[i.f=102]="f",i[i.g=103]="g",i[i.h=104]="h",i[i.i=105]="i",i[i.j=106]="j",i[i.k=107]="k",i[i.l=108]="l",i[i.m=109]="m",i[i.n=110]="n",i[i.o=111]="o",i[i.p=112]="p",i[i.q=113]="q",i[i.r=114]="r",i[i.s=115]="s",i[i.t=116]="t",i[i.u=117]="u",i[i.v=118]="v",i[i.w=119]="w",i[i.x=120]="x",i[i.y=121]="y",i[i.z=122]="z",i[i.OpenCurlyBrace=123]="OpenCurlyBrace",i[i.Pipe=124]="Pipe",i[i.CloseCurlyBrace=125]="CloseCurlyBrace",i[i.Tilde=126]="Tilde",i[i.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",i[i.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",i[i.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",i[i.U_Combining_Tilde=771]="U_Combining_Tilde",i[i.U_Combining_Macron=772]="U_Combining_Macron",i[i.U_Combining_Overline=773]="U_Combining_Overline",i[i.U_Combining_Breve=774]="U_Combining_Breve",i[i.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",i[i.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",i[i.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",i[i.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",i[i.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",i[i.U_Combining_Caron=780]="U_Combining_Caron",i[i.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",i[i.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",i[i.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",i[i.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",i[i.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",i[i.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",i[i.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",i[i.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",i[i.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",i[i.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",i[i.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",i[i.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",i[i.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",i[i.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",i[i.U_Combining_Horn=795]="U_Combining_Horn",i[i.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",i[i.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",i[i.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",i[i.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",i[i.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",i[i.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",i[i.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",i[i.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",i[i.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",i[i.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",i[i.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",i[i.U_Combining_Cedilla=807]="U_Combining_Cedilla",i[i.U_Combining_Ogonek=808]="U_Combining_Ogonek",i[i.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",i[i.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",i[i.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",i[i.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",i[i.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",i[i.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",i[i.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",i[i.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",i[i.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",i[i.U_Combining_Low_Line=818]="U_Combining_Low_Line",i[i.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",i[i.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",i[i.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",i[i.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",i[i.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",i[i.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",i[i.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",i[i.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",i[i.U_Combining_Square_Below=827]="U_Combining_Square_Below",i[i.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",i[i.U_Combining_X_Above=829]="U_Combining_X_Above",i[i.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",i[i.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",i[i.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",i[i.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",i[i.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",i[i.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",i[i.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",i[i.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",i[i.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",i[i.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",i[i.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",i[i.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",i[i.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",i[i.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",i[i.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",i[i.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",i[i.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",i[i.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",i[i.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",i[i.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",i[i.U_Combining_Fermata=850]="U_Combining_Fermata",i[i.U_Combining_X_Below=851]="U_Combining_X_Below",i[i.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",i[i.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",i[i.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",i[i.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",i[i.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",i[i.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",i[i.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",i[i.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",i[i.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",i[i.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",i[i.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",i[i.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",i[i.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",i[i.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",i[i.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",i[i.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",i[i.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",i[i.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",i[i.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",i[i.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",i[i.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",i[i.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",i[i.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",i[i.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",i[i.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",i[i.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",i[i.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",i[i.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",i[i.LINE_SEPARATOR_2028=8232]="LINE_SEPARATOR_2028",i[i.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",i[i.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",i[i.U_DIAERESIS=168]="U_DIAERESIS",i[i.U_MACRON=175]="U_MACRON",i[i.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",i[i.U_CEDILLA=184]="U_CEDILLA",i[i.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",i[i.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",i[i.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",i[i.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",i[i.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",i[i.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",i[i.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",i[i.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",i[i.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",i[i.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",i[i.U_BREVE=728]="U_BREVE",i[i.U_DOT_ABOVE=729]="U_DOT_ABOVE",i[i.U_RING_ABOVE=730]="U_RING_ABOVE",i[i.U_OGONEK=731]="U_OGONEK",i[i.U_SMALL_TILDE=732]="U_SMALL_TILDE",i[i.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",i[i.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",i[i.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",i[i.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",i[i.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",i[i.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",i[i.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",i[i.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",i[i.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",i[i.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",i[i.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",i[i.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",i[i.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",i[i.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",i[i.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",i[i.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",i[i.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",i[i.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",i[i.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",i[i.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",i[i.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",i[i.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",i[i.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",i[i.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",i[i.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",i[i.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",i[i.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",i[i.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",i[i.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",i[i.U_GREEK_TONOS=900]="U_GREEK_TONOS",i[i.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",i[i.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",i[i.U_GREEK_PSILI=8127]="U_GREEK_PSILI",i[i.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",i[i.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",i[i.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",i[i.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",i[i.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",i[i.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",i[i.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",i[i.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",i[i.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",i[i.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",i[i.U_GREEK_VARIA=8175]="U_GREEK_VARIA",i[i.U_GREEK_OXIA=8189]="U_GREEK_OXIA",i[i.U_GREEK_DASIA=8190]="U_GREEK_DASIA",i[i.U_OVERLINE=8254]="U_OVERLINE",i[i.UTF8_BOM=65279]="UTF8_BOM",i))(V||{});const TD="";function qS(i){return!i||typeof i!="string"?!0:i.trim().length===0}const CD=/{(\d+)}/g;function XS(i,...e){return e.length===0?i:i.replace(CD,function(t,r){let n=parseInt(r,10);return isNaN(n)||n<0||n>=e.length?t:e[n]})}function ZS(i){return i.replace(/[<|>|&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function QS(i){return i.replace(/[\-\\\{\}\*\+\?\|\^\$\.\[\]\(\)\#]/g,"\\$&")}function PD(i,e=" "){let t=JS(i,e);return e2(t,e)}function JS(i,e){if(!i||!e)return i;let t=e.length;if(t===0||i.length===0)return i;let r=0,n=i.indexOf(e,r);for(;n===r;)r=r+t,n=i.indexOf(e,r);return i.substring(r)}function e2(i,e){if(!i||!e)return i;let t=e.length,r=i.length;if(t===0||r===0)return i;let n=r,s=-1;for(;s=i.lastIndexOf(e,n-1),!(s===-1||s+t!==n);){if(s===0)return"";n=s}return i.substring(0,n)}function ID(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function OD(i,e){if(i.length<e.length)return!1;if(i===e)return!0;for(let t=0;t<e.length;t++)if(i[t]!==e[t])return!1;return!0}function MD(i,e){let t=i.length-e.length;return t>0?i.indexOf(e,t)===t:t===0?i===e:!1}function t2(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=QS(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let r="";return t.global&&(r+="g"),t.matchCase||(r+="i"),t.multiline&&(r+="m"),new RegExp(i,r)}function ND(i,e){return i<e?-1:i>e?1:0}function RD(i){return i>=V.a&&i<=V.z}function LD(i){return i>=V.A&&i<=V.Z}function Nx(i){return RD(i)||LD(i)}function kD(i,e){const t=i?i.length:0,r=e?e.length:0;return t!==r?!1:i2(i,e)}function i2(i,e,t=i.length){if(typeof i!="string"||typeof e!="string")return!1;for(let r=0;r<t;r++){const n=i.charCodeAt(r),s=e.charCodeAt(r);if(n!==s){if(Nx(n)&&Nx(s)){let o=Math.abs(n-s);if(o!==0&&o!==32)return!1}else if(String.fromCharCode(n).toLowerCase()!==String.fromCharCode(s).toLowerCase())return!1}}return!0}function r2(i,e){const t=e.length;return e.length>i.length?!1:i2(i,e,t)}function BD(i){return i&&i.length>0&&i.charCodeAt(0)===V.UTF8_BOM}function FD(i){return btoa(encodeURIComponent(i))}function UD(i,e){let t="";for(let r=0;r<e;r++)t+=i;return t}var KD=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g;function HD(i){return i.replace(KD,function(e){return"-"+e.toLowerCase()})}const zD=Object.freeze(Object.defineProperty({__proto__:null,compare:ND,convertSimple2RegExpPattern:ID,createRegExp:t2,empty:TD,endsWith:MD,equalsIgnoreCase:kD,escape:ZS,escapeRegExpCharacters:QS,format:XS,isFalsyOrWhitespace:qS,kebabCase:HD,ltrim:JS,repeat:UD,rtrim:e2,safeBtoa:FD,startsWith:OD,startsWithIgnoreCase:r2,startsWithUTF8BOM:BD,trim:PD},Symbol.toStringTag,{value:"Module"}));function or(i,e){if(!i||i===null)throw new Error(e?"Assertion failed ("+e+")":"Assertion Failed")}let Qv=!1,Jv=!1,jD,ey=navigator.userAgent;Qv=ey.indexOf("Windows")>=0;Jv=ey.indexOf("Macintosh")>=0;ey.indexOf("Linux")>=0;const j0=Qv,en=Jv,Yh=typeof self=="object"?self:global,fu=Yh;let bd=null;function $D(i){return bd===null&&(fu.setImmediate?bd=fu.setImmediate.bind(fu):bd=fu.setTimeout.bind(fu)),bd(i)}const VD=Yh.setTimeout.bind(Yh);Yh.clearTimeout.bind(Yh);var yt=(i=>(i[i.Windows=1]="Windows",i[i.Macintosh=2]="Macintosh",i[i.Linux=3]="Linux",i))(yt||{});const Ft=Jv?2:Qv?1:3;class WD{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){VD(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}let ty=new WD;function Rx(i){ty.setUnexpectedErrorHandler(i)}function Pl(i){n2(i)||ty.onUnexpectedError(i)}function GD(i){n2(i)||ty.onUnexpectedExternalError(i)}const b_="Canceled";function n2(i){return i instanceof Error&&i.name===b_&&i.message===b_}function s2(){let i=new Error(b_);return i.name=i.message,i}function YD(i){return new Error(`Illegal argument: ${i}`)}function qD(i){return new Error(`Illegal state: ${i}`)}const vh={done:!0,value:void 0};var Lx;(i=>{const e={next(){return vh}};function t(){return e}i.empty=t;function r(c,h=0,u=c.length){return{next(){return h>=u?vh:{done:!1,value:c[h++]}}}}i.fromArray=r;function n(c){return c?Array.isArray(c)?i.fromArray(c):c:i.empty()}i.from=n;function s(c,h){return{next(){const u=c.next();return u.done?vh:{done:!1,value:h(u.value)}}}}i.map=s;function o(c,h){return{next(){for(;;){const u=c.next();if(u.done)return vh;if(h(u.value))return{done:!1,value:u.value}}}}}i.filter=o;function a(c,h){for(let u=c.next();!u.done;u=c.next())h(u.value)}i.forEach=a;function l(c){const h=[];return a(c,u=>h.push(u)),h}i.collect=l})(Lx||(Lx={}));let og=class{constructor(e){this.element=e}};class o2{constructor(){this._size=0}get size(){return this._size}isEmpty(){return!this._first}clear(){this._first=void 0,this._last=void 0,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const r=new og(e);if(!this._first)this._first=r,this._last=r;else if(t){const n=this._last;this._last=r,r.prev=n,n.next=r}else{const n=this._first;this._first=r,r.next=n,n.prev=r}return this._size+=1,this._remove.bind(this,r)}shift(){if(this._first){const e=this._first.element;return this._remove(this._first),e}else return}pop(){if(this._last){const e=this._last.element;return this._remove(this._last),e}else return}_remove(e){let t=this._first;for(;t instanceof og;){if(t!==e){t=t.next;continue}if(t.prev&&t.next){let r=t.prev;r.next=t.next,t.next.prev=r}else!t.prev&&!t.next?(this._first=void 0,this._last=void 0):t.next?t.prev||(this._first=this._first.next,this._first.prev=void 0):(this._last=this._last.prev,this._last.next=void 0);this._size-=1;break}}iterator(){let e,t=this._first;return{next(){return t?(e?e.value=t.element:e={done:!1,value:t.element},t=t.next,e):vh}}}toArray(){let e=[];for(let t=this._first;t instanceof og;t=t.next)e.push(t.element);return e}}var Ve;(i=>{const e={dispose(){}};i.None=function(){return e};function t(y){return(x,A=null,w)=>{let D=!1,b;return b=y(S=>{if(!D)return b?b.dispose():D=!0,x.call(A,S)},null,w),D&&b.dispose(),b}}i.once=t;function r(y,x){return(A,w=null,D)=>y(b=>A.call(w,x(b)),null,D)}i.map=r;function n(y,x){return(A,w=null,D)=>y(b=>{x(b),A.call(w,b)},null,D)}i.forEach=n;function s(y,x){return(A,w=null,D)=>y(b=>x(b)&&A.call(w,b),null,D)}i.filter=s;function o(y){return y}i.signal=o;function a(...y){return(x,A=null,w)=>H0(y.map(D=>D(b=>x.call(A,b),null,w)))}i.any=a;function l(y,x,A){let w=A;return r(y,D=>(w=x(w,D),w))}i.reduce=l;function c(y,x,A=100,w=!1,D){let b,S,T,C=0;const I=new ve({leakWarningThreshold:D,onFirstListenerAdd(){b=y(M=>{C++,S=x(S,M),w&&!T&&I.fire(S),clearTimeout(T),T=setTimeout(()=>{let k=S;S=void 0,T=void 0,(!w||C>1)&&I.fire(k),C=0},A)})},onLastListenerRemove(){b.dispose()}});return I.event}i.debounce=c;function h(y){const x=new Date().getTime();return r(t(y),A=>new Date().getTime()-x)}i.stopwatch=h;function u(y){let x=!0,A;return s(y,w=>{let D=x||w!==A;return x=!1,A=w,D})}i.latch=u;function p(y,x=!1,A=[]){let w=A.slice(),D=y(T=>{w?w.push(T):S.fire(T)});const b=()=>{w&&w.forEach(T=>S.fire(T)),w=null},S=new ve({onFirstListenerAdd(){D||(D=y(T=>S.fire(T)))},onFirstListenerDidAdd(){w&&(x?setTimeout(b):b())},onLastListenerRemove(){D&&D.dispose(),D=null}});return S.event}i.buffer=p;function d(y,x=!1,A=[]){A=A.slice(),y(b=>{A.push(b),D.fire(b)});const w=(b,S)=>A.forEach(T=>b.call(S,T)),D=new ve({onListenerDidAdd(b,S,T){x?setTimeout(()=>w(S,T)):w(S,T)}});return D.event}i.echo=d;class f{constructor(x){this._event=x}get event(){return this._event}map(x){return new f(r(this._event,x))}forEach(x){return new f(n(this._event,x))}filter(x){return new f(s(this._event,x))}reduce(x,A){return new f(l(this._event,x,A))}latch(){return new f(u(this._event))}on(x,A,w){return this._event(x,A,w)}once(x,A,w){return t(this._event)(x,A,w)}}function m(y){return new f(y)}i.chain=m;function g(y,x,A=w=>w){const w=(...T)=>S.fire(A(...T)),D=()=>y.on(x,w),b=()=>y.removeListener(x,w),S=new ve({onFirstListenerAdd:D,onLastListenerRemove:b});return S.event}i.fromNodeEventEmitter=g;function _(y){const x=new ve;let A=!1;return y.then(void 0,()=>null).then(()=>{A?x.fire(void 0):setTimeout(()=>x.fire(void 0),0)}),A=!0,x.event}i.fromPromise=_;function v(y){return new Promise(x=>t(y)(x))}i.toPromise=v})(Ve||(Ve={}));const c0=class c0{constructor(e){this._disposed=!1,this._options=e,this._leakageMon=void 0}get event(){return this._event||(this._event=(e,t,r)=>{this._listeners||(this._listeners=new o2);const n=this._listeners.isEmpty();n&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const s=this._listeners.push(t?[e,t]:e);n&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);let o;this._leakageMon&&(o=this._leakageMon.check(this._listeners.size));let a;return a={dispose:()=>{o&&o(),a.dispose=c0._noop,this._disposed||(s(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))}},Array.isArray(r)&&r.push(a),a}),this._event}fire(e){if(this._listeners){this._deliveryQueue||(this._deliveryQueue=[]);for(let t=this._listeners.iterator(),r=t.next();!r.done;r=t.next())this._deliveryQueue.push([r.value,e]);for(;this._deliveryQueue.length>0;){const[t,r]=this._deliveryQueue.shift();try{typeof t=="function"?t.call(void 0,r):t[0].call(t[1],r)}catch(n){Pl(n)}}}}dispose(){this._listeners&&(this._listeners=void 0),this._deliveryQueue&&(this._deliveryQueue.length=0),this._leakageMon&&this._leakageMon.dispose(),this._disposed=!0}};c0._noop=function(){};let ve=c0;class XD{constructor(){this.buffers=[]}wrapEvent(e){return(t,r,n)=>e(s=>{const o=this.buffers[this.buffers.length-1];o?o.push(()=>t.call(r,s)):t.call(r,s)},void 0,n)}bufferEvents(e){const t=[];this.buffers.push(t);const r=e();return this.buffers.pop(),t.forEach(n=>n()),r}}class kx extends Je{constructor(){super(),this._onDidChangeToTrue=this._register(new ve),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new ve),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){let t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}const a2=Object.freeze(function(i,e){let t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}});var qh;(i=>{i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ve.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:a2})})(qh||(qh={}));class ZD{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a2:(this._emitter||(this._emitter=new ve),this._emitter.event)}}class l2{get token(){return this._token||(this._token=new ZD),this._token}cancel(){this._token?this._token.cancel():this._token=qh.Cancelled}dispose(){this.cancel()}}function u2(i){return i&&typeof i.then=="function"}class QD{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,n)=>{this.doResolve=r,this.doReject=n}).then(()=>{this.completionPromise=null,this.doResolve=null;const r=this.task;return this.task=null,r()})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject(s2()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancelTimeout()}}class JD{constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}function eT(i,e=r=>!!r,t=null){let r=0;const n=i.length,s=()=>{if(r>=n)return Promise.resolve(t);const o=i[r++];return Promise.resolve(o()).then(l=>e(l)?Promise.resolve(l):s())};return s()}class ul extends Je{constructor(e,t){super(),this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),super.dispose()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class h2 extends Je{constructor(){super(),this._token=-1}dispose(){this.cancel(),super.dispose()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class S_{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}const d0=class d0{constructor(){this._zoomLevel=0,this._zoomFactor=0,this._pixelRatioCache=0,this._pixelRatioComputed=!1,this._onDidChangeZoomLevel=new ve,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._onDidChangeFullscreen=new ve,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(e){this._zoomLevel!==e&&(this._zoomLevel=e,this._pixelRatioComputed=!1,this._onDidChangeZoomLevel.fire(this._zoomLevel))}getZoomFactor(){return this._zoomFactor}setZoomFactor(e){this._zoomFactor=e}getPixelRatio(){return this._pixelRatioComputed||(this._pixelRatioCache=this._computePixelRatio(),this._pixelRatioComputed=!0),this._pixelRatioCache}_computePixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/r}setFullscreen(e){this._fullscreen!==e&&(this._fullscreen=e,this._onDidChangeFullscreen.fire())}isFullscreen(){return this._fullscreen}};d0.INSTANCE=new d0;let E_=d0;function tT(){return E_.INSTANCE.getZoomLevel()}const hl=navigator.userAgent,Dt=hl.indexOf("Trident")>=0;hl.indexOf("Edge/")>=0;const c2=hl.indexOf("Firefox")>=0,tf=hl.indexOf("AppleWebKit")>=0,iT=hl.indexOf("Chrome")===-1&&hl.indexOf("Safari")>=0;var E=(i=>(i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.KEY_0=21]="KEY_0",i[i.KEY_1=22]="KEY_1",i[i.KEY_2=23]="KEY_2",i[i.KEY_3=24]="KEY_3",i[i.KEY_4=25]="KEY_4",i[i.KEY_5=26]="KEY_5",i[i.KEY_6=27]="KEY_6",i[i.KEY_7=28]="KEY_7",i[i.KEY_8=29]="KEY_8",i[i.KEY_9=30]="KEY_9",i[i.KEY_A=31]="KEY_A",i[i.KEY_B=32]="KEY_B",i[i.KEY_C=33]="KEY_C",i[i.KEY_D=34]="KEY_D",i[i.KEY_E=35]="KEY_E",i[i.KEY_F=36]="KEY_F",i[i.KEY_G=37]="KEY_G",i[i.KEY_H=38]="KEY_H",i[i.KEY_I=39]="KEY_I",i[i.KEY_J=40]="KEY_J",i[i.KEY_K=41]="KEY_K",i[i.KEY_L=42]="KEY_L",i[i.KEY_M=43]="KEY_M",i[i.KEY_N=44]="KEY_N",i[i.KEY_O=45]="KEY_O",i[i.KEY_P=46]="KEY_P",i[i.KEY_Q=47]="KEY_Q",i[i.KEY_R=48]="KEY_R",i[i.KEY_S=49]="KEY_S",i[i.KEY_T=50]="KEY_T",i[i.KEY_U=51]="KEY_U",i[i.KEY_V=52]="KEY_V",i[i.KEY_W=53]="KEY_W",i[i.KEY_X=54]="KEY_X",i[i.KEY_Y=55]="KEY_Y",i[i.KEY_Z=56]="KEY_Z",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.NumLock=78]="NumLock",i[i.ScrollLock=79]="ScrollLock",i[i.US_SEMICOLON=80]="US_SEMICOLON",i[i.US_EQUAL=81]="US_EQUAL",i[i.US_COMMA=82]="US_COMMA",i[i.US_MINUS=83]="US_MINUS",i[i.US_DOT=84]="US_DOT",i[i.US_SLASH=85]="US_SLASH",i[i.US_BACKTICK=86]="US_BACKTICK",i[i.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",i[i.US_BACKSLASH=88]="US_BACKSLASH",i[i.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",i[i.US_QUOTE=90]="US_QUOTE",i[i.OEM_8=91]="OEM_8",i[i.OEM_102=92]="OEM_102",i[i.NUMPAD_0=93]="NUMPAD_0",i[i.NUMPAD_1=94]="NUMPAD_1",i[i.NUMPAD_2=95]="NUMPAD_2",i[i.NUMPAD_3=96]="NUMPAD_3",i[i.NUMPAD_4=97]="NUMPAD_4",i[i.NUMPAD_5=98]="NUMPAD_5",i[i.NUMPAD_6=99]="NUMPAD_6",i[i.NUMPAD_7=100]="NUMPAD_7",i[i.NUMPAD_8=101]="NUMPAD_8",i[i.NUMPAD_9=102]="NUMPAD_9",i[i.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",i[i.NUMPAD_ADD=104]="NUMPAD_ADD",i[i.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",i[i.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",i[i.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",i[i.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",i[i.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",i[i.ABNT_C1=110]="ABNT_C1",i[i.ABNT_C2=111]="ABNT_C2",i[i.MAX_VALUE=112]="MAX_VALUE",i))(E||{});class iy{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const A_=new iy,D_=new iy,T_=new iy;(function(){function i(e,t,r=t,n=r){A_.define(e,t),D_.define(e,r),T_.define(e,n)}i(0,"unknown"),i(1,"Backspace"),i(2,"Tab"),i(3,"Enter"),i(4,"Shift"),i(5,"Ctrl"),i(6,"Alt"),i(7,"PauseBreak"),i(8,"CapsLock"),i(9,"Escape"),i(10,"Space"),i(11,"PageUp"),i(12,"PageDown"),i(13,"End"),i(14,"Home"),i(15,"LeftArrow","Left"),i(16,"UpArrow","Up"),i(17,"RightArrow","Right"),i(18,"DownArrow","Down"),i(19,"Insert"),i(20,"Delete"),i(21,"0"),i(22,"1"),i(23,"2"),i(24,"3"),i(25,"4"),i(26,"5"),i(27,"6"),i(28,"7"),i(29,"8"),i(30,"9"),i(31,"A"),i(32,"B"),i(33,"C"),i(34,"D"),i(35,"E"),i(36,"F"),i(37,"G"),i(38,"H"),i(39,"I"),i(40,"J"),i(41,"K"),i(42,"L"),i(43,"M"),i(44,"N"),i(45,"O"),i(46,"P"),i(47,"Q"),i(48,"R"),i(49,"S"),i(50,"T"),i(51,"U"),i(52,"V"),i(53,"W"),i(54,"X"),i(55,"Y"),i(56,"Z"),i(57,"Meta"),i(58,"ContextMenu"),i(59,"F1"),i(60,"F2"),i(61,"F3"),i(62,"F4"),i(63,"F5"),i(64,"F6"),i(65,"F7"),i(66,"F8"),i(67,"F9"),i(68,"F10"),i(69,"F11"),i(70,"F12"),i(71,"F13"),i(72,"F14"),i(73,"F15"),i(74,"F16"),i(75,"F17"),i(76,"F18"),i(77,"F19"),i(78,"NumLock"),i(79,"ScrollLock"),i(80,";",";","OEM_1"),i(81,"=","=","OEM_PLUS"),i(82,",",",","OEM_COMMA"),i(83,"-","-","OEM_MINUS"),i(84,".",".","OEM_PERIOD"),i(85,"/","/","OEM_2"),i(86,"`","`","OEM_3"),i(110,"ABNT_C1"),i(111,"ABNT_C2"),i(87,"[","[","OEM_4"),i(88,"\\","\\","OEM_5"),i(89,"]","]","OEM_6"),i(90,"'","'","OEM_7"),i(91,"OEM_8"),i(92,"OEM_102"),i(93,"NumPad0"),i(94,"NumPad1"),i(95,"NumPad2"),i(96,"NumPad3"),i(97,"NumPad4"),i(98,"NumPad5"),i(99,"NumPad6"),i(100,"NumPad7"),i(101,"NumPad8"),i(102,"NumPad9"),i(103,"NumPad_Multiply"),i(104,"NumPad_Add"),i(105,"NumPad_Separator"),i(106,"NumPad_Subtract"),i(107,"NumPad_Decimal"),i(108,"NumPad_Divide")})();var lt;(i=>{function e(o){return A_.keyCodeToStr(o)}i.toString=e;function t(o){return A_.strToKeyCode(o)}i.fromString=t;function r(o){return D_.keyCodeToStr(o)}i.toUserSettingsUS=r;function n(o){return T_.keyCodeToStr(o)}i.toUserSettingsGeneral=n;function s(o){return D_.strToKeyCode(o)||T_.strToKeyCode(o)}i.fromUserSettings=s})(lt||(lt={}));var dr=(i=>(i[i.CtrlCmd=2048]="CtrlCmd",i[i.Shift=1024]="Shift",i[i.Alt=512]="Alt",i[i.WinCtrl=256]="WinCtrl",i))(dr||{});function Bx(i,e){if(i===0)return null;const t=(i&65535)>>>0,r=(i&4294901760)>>>16;return r!==0?new ry(ag(t,e),ag(r,e)):ag(t,e)}function ag(i,e){const t=!!(i&2048),r=!!(i&256),n=e===yt.Macintosh?r:t,s=!!(i&1024),o=!!(i&512),a=e===yt.Macintosh?t:r,l=i&255;return new Ar(n,s,o,a,l)}var yc=(i=>(i[i.Simple=1]="Simple",i[i.Chord=2]="Chord",i))(yc||{});class Ar{constructor(e,t,r,n,s){this.type=1,this.ctrlKey=e,this.shiftKey=t,this.altKey=r,this.metaKey=n,this.keyCode=s}equals(e){return e.type!==1?!1:this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){let e=this.ctrlKey?"1":"0",t=this.shiftKey?"1":"0",r=this.altKey?"1":"0",n=this.metaKey?"1":"0";return`${e}${t}${r}${n}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class ry{constructor(e,t){this.type=2,this.firstPart=e,this.chordPart=t}getHashCode(){return`${this.firstPart.getHashCode()};${this.chordPart.getHashCode()}`}}class ny{constructor(e,t,r,n,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=r,this.metaKey=n,this.keyLabel=s,this.keyAriaLabel=o}}class sy{}let d2=new Array(230),lg=new Array(E.MAX_VALUE);(function(){for(let e=0;e<lg.length;e++)lg[e]=-1;function i(e,t){d2[e]=t,lg[t]=e}i(3,E.PauseBreak),i(8,E.Backspace),i(9,E.Tab),i(13,E.Enter),i(16,E.Shift),i(17,E.Ctrl),i(18,E.Alt),i(19,E.PauseBreak),i(20,E.CapsLock),i(27,E.Escape),i(32,E.Space),i(33,E.PageUp),i(34,E.PageDown),i(35,E.End),i(36,E.Home),i(37,E.LeftArrow),i(38,E.UpArrow),i(39,E.RightArrow),i(40,E.DownArrow),i(45,E.Insert),i(46,E.Delete),i(48,E.KEY_0),i(49,E.KEY_1),i(50,E.KEY_2),i(51,E.KEY_3),i(52,E.KEY_4),i(53,E.KEY_5),i(54,E.KEY_6),i(55,E.KEY_7),i(56,E.KEY_8),i(57,E.KEY_9),i(65,E.KEY_A),i(66,E.KEY_B),i(67,E.KEY_C),i(68,E.KEY_D),i(69,E.KEY_E),i(70,E.KEY_F),i(71,E.KEY_G),i(72,E.KEY_H),i(73,E.KEY_I),i(74,E.KEY_J),i(75,E.KEY_K),i(76,E.KEY_L),i(77,E.KEY_M),i(78,E.KEY_N),i(79,E.KEY_O),i(80,E.KEY_P),i(81,E.KEY_Q),i(82,E.KEY_R),i(83,E.KEY_S),i(84,E.KEY_T),i(85,E.KEY_U),i(86,E.KEY_V),i(87,E.KEY_W),i(88,E.KEY_X),i(89,E.KEY_Y),i(90,E.KEY_Z),i(93,E.ContextMenu),i(96,E.NUMPAD_0),i(97,E.NUMPAD_1),i(98,E.NUMPAD_2),i(99,E.NUMPAD_3),i(100,E.NUMPAD_4),i(101,E.NUMPAD_5),i(102,E.NUMPAD_6),i(103,E.NUMPAD_7),i(104,E.NUMPAD_8),i(105,E.NUMPAD_9),i(106,E.NUMPAD_MULTIPLY),i(107,E.NUMPAD_ADD),i(108,E.NUMPAD_SEPARATOR),i(109,E.NUMPAD_SUBTRACT),i(110,E.NUMPAD_DECIMAL),i(111,E.NUMPAD_DIVIDE),i(112,E.F1),i(113,E.F2),i(114,E.F3),i(115,E.F4),i(116,E.F5),i(117,E.F6),i(118,E.F7),i(119,E.F8),i(120,E.F9),i(121,E.F10),i(122,E.F11),i(123,E.F12),i(124,E.F13),i(125,E.F14),i(126,E.F15),i(127,E.F16),i(128,E.F17),i(129,E.F18),i(130,E.F19),i(144,E.NumLock),i(145,E.ScrollLock),i(186,E.US_SEMICOLON),i(187,E.US_EQUAL),i(188,E.US_COMMA),i(189,E.US_MINUS),i(190,E.US_DOT),i(191,E.US_SLASH),i(192,E.US_BACKTICK),i(193,E.ABNT_C1),i(194,E.ABNT_C2),i(219,E.US_OPEN_SQUARE_BRACKET),i(220,E.US_BACKSLASH),i(221,E.US_CLOSE_SQUARE_BRACKET),i(222,E.US_QUOTE),i(223,E.OEM_8),i(226,E.OEM_102),i(229,E.KEY_IN_COMPOSITION),Dt?i(91,E.Meta):c2?(i(59,E.US_SEMICOLON),i(107,E.US_EQUAL),i(109,E.US_MINUS),en&&i(224,E.Meta)):tf&&(i(91,E.Meta),i(en?93:92,E.Meta))})();function rT(i){if(i.charCode){let e=String.fromCharCode(i.charCode).toUpperCase();return lt.fromString(e)}return d2[i.keyCode]||E.Unknown}const nT=en?dr.WinCtrl:dr.CtrlCmd,sT=dr.Alt,oT=dr.Shift,aT=en?dr.CtrlCmd:dr.WinCtrl;class _i{constructor(e){let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=rT(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===E.Ctrl,this.altKey=this.altKey||this.keyCode===E.Alt,this.shiftKey=this.shiftKey||this.keyCode===E.Shift,this.metaKey=this.metaKey||this.keyCode===E.Meta,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=E.Unknown;this.keyCode!==E.Ctrl&&this.keyCode!==E.Shift&&this.keyCode!==E.Alt&&this.keyCode!==E.Meta&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=nT),this.altKey&&(t|=sT),this.shiftKey&&(t|=oT),this.metaKey&&(t|=aT),t|=e,t}_computeRuntimeKeybinding(){let e=E.Unknown;return this.keyCode!==E.Ctrl&&this.keyCode!==E.Shift&&this.keyCode!==E.Alt&&this.keyCode!==E.Meta&&(e=this.keyCode),new Ar(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let C_=!1,ba=null;function lT(i){if(!i.parent||i.parent===i)return null;try{let e=i.location,t=i.parent.location;if(e.protocol!==t.protocol||e.hostname!==t.hostname||e.port!==t.port)return C_=!0,null}catch{return C_=!0,null}return i.parent}function uT(i,e){let t=i.document.getElementsByTagName("iframe"),r;for(let n=0,s=t.length;n<s;n++)if(r=t[n],r.contentWindow===e)return r;return null}class P_{static getSameOriginWindowChain(){if(!ba){ba=[];let e=window,t;do t=lT(e),t?ba.push({window:e,iframeElement:uT(t,e)}):ba.push({window:e,iframeElement:null}),e=t;while(e)}return ba.slice(0)}static hasDifferentOriginAncestor(){return ba||this.getSameOriginWindowChain(),C_}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let r=0,n=0,s=this.getSameOriginWindowChain();for(let o=0;o<s.length;o++){let a=s[o];if(a.window===t||!a.iframeElement)break;let l=a.iframeElement.getBoundingClientRect();r+=l.top,n+=l.left}return{top:r,left:n}}}class br{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=P_.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}}class Xh{constructor(e,t=0,r=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=r,this.deltaX=t,e){let n=e,s=e;typeof n.wheelDeltaY<"u"?this.deltaY=n.wheelDeltaY/120:typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS&&(this.deltaY=-s.detail/3),typeof n.wheelDeltaX<"u"?iT&&j0?this.deltaX=-(n.wheelDeltaX/120):this.deltaX=n.wheelDeltaX/120:typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS&&(this.deltaX=-e.detail/3),this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}}const dt=(i,e,t)=>{const r=s=>n.fire(s),n=new ve({onFirstListenerAdd:()=>{i.addEventListener(e,r,t)},onLastListenerRemove:()=>{i.removeEventListener(e,r,t)}});return n.event};function kh(i,e){const t=e.getBoundingClientRect();return{x:i.clientX-t.left,y:i.clientY-t.top}}function Li(i,e=0){return i[i.length-(1+e)]}function f2(i,e,t=(r,n)=>r===n){if(i.length!==e.length)return!1;for(let r=0,n=i.length;r<n;r++)if(!t(i[r],e[r]))return!1;return!0}function p2(i){return i&&i.filter(e=>!!e)}function m2(i){return!Array.isArray(i)||i.length===0}function g2(i,e){return i.filter((t,r)=>i.indexOf(t)===r)}function cs(i,e){for(let t=0,r=i.length;t<r;t++){const n=i[t];if(e(n))return t}return-1}function _2(i,e=0){const t=[];for(let r=e;r<i;r++)t.push(r);return t}function Cr(i){if(i)return i.length}function oy(i){for(;i.firstChild;)i.removeChild(i.firstChild)}const hT=new class{_findClassName(i,e){let t=i.className;if(!t){this._lastStart=-1;return}e=e.trim();let r=t.length,n=e.length;if(n===0){this._lastStart=-1;return}if(r<n){this._lastStart=-1;return}if(t===e){this._lastStart=0,this._lastEnd=r;return}let s=-1,o;for(;(s=t.indexOf(e,s+1))>=0;){if(o=s+n,(s===0||t.charCodeAt(s-1)===V.Space)&&t.charCodeAt(o)===V.Space){this._lastStart=s,this._lastEnd=o+1;return}if(s>0&&t.charCodeAt(s-1)===V.Space&&o===r){this._lastStart=s-1,this._lastEnd=o;return}if(s===0&&o===r){this._lastStart=0,this._lastEnd=o;return}}this._lastStart=-1}hasClass(i,e){return this._findClassName(i,e),this._lastStart!==-1}addClasses(i,...e){e.forEach(t=>t.split(" ").forEach(r=>this.addClass(i,r)))}addClass(i,e){i.className?(this._findClassName(i,e),this._lastStart===-1&&(i.className=i.className+" "+e)):i.className=e}removeClass(i,e){this._findClassName(i,e),this._lastStart!==-1&&(i.className=i.className.substring(0,this._lastStart)+i.className.substring(this._lastEnd))}removeClasses(i,...e){e.forEach(t=>t.split(" ").forEach(r=>this.removeClass(i,r)))}toggleClass(i,e,t){this._findClassName(i,e),this._lastStart!==-1&&(t===void 0||!t)&&this.removeClass(i,e),this._lastStart===-1&&(t===void 0||t)&&this.addClass(i,e)}},cT=new class{hasClass(i,e){return e&&i.classList&&i.classList.contains(e)}addClasses(i,...e){e.forEach(t=>t.split(" ").forEach(r=>this.addClass(i,r)))}addClass(i,e){e&&i.classList&&i.classList.add(e)}removeClass(i,e){e&&i.classList&&i.classList.remove(e)}removeClasses(i,...e){e.forEach(t=>t.split(" ").forEach(r=>this.removeClass(i,r)))}toggleClass(i,e,t){i.classList&&i.classList.toggle(e,t)}},fr=Dt?hT:cT,$0=fr.hasClass.bind(fr),Pe=fr.addClass.bind(fr),pr=fr.addClasses.bind(fr),ut=fr.removeClass.bind(fr),Zh=fr.removeClasses.bind(fr),wn=fr.toggleClass.bind(fr);class dT{constructor(e,t,r,n){this._node=e,this._type=t,this._handler=r,this._useCapture=n||!1,this._node.addEventListener(this._type,this._handler,this._useCapture)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._useCapture),this._node=null,this._handler=null)}}function me(i,e,t,r){return new dT(i,e,t,r)}function fT(i){return function(e){return i(new br(e))}}function pT(i){return function(e){return i(new _i(e))}}let Fx=function(e,t,r,n){let s=r;return t==="click"||t==="mousedown"?s=fT(r):(t==="keydown"||t==="keypress"||t==="keyup")&&(s=pT(r)),me(e,t,s,n)};function mT(i,e){return me(i,"mouseout",t=>{let r=t.relatedTarget||t.toElement;for(;r&&r!==i;)r=r.parentNode;r!==i&&e(t)})}const gT=function(){let i=a=>window.setTimeout(()=>a(new Date().getTime()),0),e=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame,t=a=>{},r=self.cancelAnimationFrame||self.cancelRequestAnimationFrame||self.msCancelAnimationFrame||self.msCancelRequestAnimationFrame||self.webkitCancelAnimationFrame||self.webkitCancelRequestAnimationFrame||self.mozCancelAnimationFrame||self.mozCancelRequestAnimationFrame||self.oCancelAnimationFrame||self.oCancelRequestAnimationFrame,n=!!e,s=e||i,o=r||t;return{isNative:n,request:a=>s(a),cancel:a=>o(a)}}();let V0;class Ux{constructor(e,t){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Pl(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let i=[],e=null,t=!1,r=()=>{for(t=!1,e=i,i=[];e.length>0;)e.sort(Ux.sort),e.shift().execute()};V0=(n,s=0)=>{let o=new Ux(n,s);return i.push(o),t||(t=!0,gT.request(r)),o}})();const _T=16,vT=function(i,e){return e};class yT extends Je{constructor(e,t,r,n=vT,s=_T){super();let o=null,a=0,l=this._register(new ul),c=()=>{a=new Date().getTime(),r(o),o=null};this._register(me(e,t,h=>{o=n(o,h);let u=new Date().getTime()-a;u>=s?(l.cancel(),c()):l.setIfNotSet(c,s-u)}))}}function xT(i,e,t,r,n){return new yT(i,e,t,r,n)}function v2(i){return document.defaultView.getComputedStyle(i,null)}const wT=function(){return function(i,e){return parseFloat(e)||0}}();function tr(i,e,t){let r=v2(i),n="0";return r&&(r.getPropertyValue?n=r.getPropertyValue(e):n=r.getAttribute(t)),wT(i,n)}const ur={getBorderLeftWidth:function(i){return tr(i,"border-left-width","borderLeftWidth")},getBorderTopWidth:function(i){return tr(i,"border-top-width","borderTopWidth")},getBorderRightWidth:function(i){return tr(i,"border-right-width","borderRightWidth")},getBorderBottomWidth:function(i){return tr(i,"border-bottom-width","borderBottomWidth")},getPaddingLeft:function(i){return tr(i,"padding-left","paddingLeft")},getPaddingTop:function(i){return tr(i,"padding-top","paddingTop")},getPaddingRight:function(i){return tr(i,"padding-right","paddingRight")},getPaddingBottom:function(i){return tr(i,"padding-bottom","paddingBottom")},getMarginLeft:function(i){return tr(i,"margin-left","marginLeft")},getMarginTop:function(i){return tr(i,"margin-top","marginTop")},getMarginRight:function(i){return tr(i,"margin-right","marginRight")},getMarginBottom:function(i){return tr(i,"margin-bottom","marginBottom")},__commaSentinel:!1};class Ci{constructor(e,t){this.width=e,this.height=t}}function gf(i){let e=i.getBoundingClientRect();return{left:e.left+Kx.scrollX,top:e.top+Kx.scrollY,width:e.width,height:e.height}}const Kx=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function I_(i){let e=ur.getBorderLeftWidth(i)+ur.getBorderRightWidth(i),t=ur.getPaddingLeft(i)+ur.getPaddingRight(i);return i.offsetWidth-e-t}function y2(i){let e=ur.getMarginLeft(i)+ur.getMarginRight(i);return i.offsetWidth+e}function x2(i){let e=ur.getBorderTopWidth(i)+ur.getBorderBottomWidth(i),t=ur.getPaddingTop(i)+ur.getPaddingBottom(i);return i.offsetHeight-e-t}function w2(i){let e=ur.getMarginTop(i)+ur.getMarginBottom(i);return i.offsetHeight+e}function ds(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function b2(i=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",i.appendChild(e),e}b2();function Bh(i){return typeof HTMLElement=="object"?i instanceof HTMLElement:i&&typeof i=="object"&&i.nodeType===1&&typeof i.nodeName=="string"}const ue={CLICK:"click",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:tf?"webkitAnimationStart":"animationstart",ANIMATION_END:tf?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:tf?"webkitAnimationIteration":"animationiteration"},mi={stop:function(i,e){i.preventDefault?i.preventDefault():i.returnValue=!1,e&&(i.stopPropagation?i.stopPropagation():i.cancelBubble=!0)}};let bT=class{constructor(e){this._onDidFocus=new ve,this.onDidFocus=this._onDidFocus.event,this._onDidBlur=new ve,this.onDidBlur=this._onDidBlur.event,this.disposables=[];let t=!1,r=!1,n=()=>{r=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(r=!0,window.setTimeout(()=>{r&&(r=!1,t=!1,this._onDidBlur.fire())},0))};dt(e,ue.FOCUS,!0)(n,null,this.disposables),dt(e,ue.BLUR,!0)(s,null,this.disposables)}dispose(){this.disposables=ye(this.disposables),this._onDidFocus.dispose(),this._onDidBlur.dispose()}};function ST(i){return new bT(i)}function Wi(i,...e){return e.forEach(t=>i.appendChild(t)),e[e.length-1]}const ET=/([\w\-]+)?(#([\w\-]+))?((.([\w\-]+))*)/;function oi(i,e,...t){let r=ET.exec(i);if(!r)throw new Error("Bad use of emmet");let n=document.createElement(r[1]||"div");return r[3]&&(n.id=r[3]),r[4]&&(n.className=r[4].replace(/\./g," ").trim()),e=e||{},Object.keys(e).forEach(s=>{const o=e[s];/^on\w+$/.test(s)?n[s]=o:s==="selected"?o&&n.setAttribute(s,"true"):n.setAttribute(s,o)}),p2(t).forEach(s=>{s instanceof Node?n.appendChild(s):n.appendChild(document.createTextNode(s))}),n}function rs(...i){for(let e of i)e.style.display=""}function Gr(...i){for(let e of i)e.style.display="none"}function S2(i){i.parentNode&&i.parentNode.removeChild(i)}function AT(i,e){for(;i;){if(i instanceof HTMLElement&&i.hasAttribute(e))return i;i=i.parentNode}return null}function E2(i){if(!(!i||!i.hasAttribute("tabIndex"))){if(document.activeElement===i){let e=AT(i.parentElement,"tabIndex");e&&e.focus()}i.removeAttribute("tabindex")}}function ay(i){if(i!==document.body)return new Ci(i.clientWidth,i.clientHeight);if(window.innerWidth&&window.innerHeight)return new Ci(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientWidth)return new Ci(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new Ci(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}function Ls(i,e,t){typeof e=="number"&&(i.style.width=`${e}px`),typeof t=="number"&&(i.style.height=`${t}px`)}function ks(i,e,t,r,n,s="absolute"){typeof e=="number"&&(i.style.top=`${e}px`),typeof t=="number"&&(i.style.right=`${t}px`),typeof r=="number"&&(i.style.bottom=`${r}px`),typeof n=="number"&&(i.style.left=`${n}px`),i.style.position=s}function DT(i){return i.parentNode&&i.parentNode.removeChild(i),i}let Qa="_msDataKey",Sd="__$listeners",Ed="__$visibility";function Fh(i){return i[Qa]||(i[Qa]={}),i[Qa]}function rf(i){return!!i[Qa]}class gi{constructor(e,t){this.offdom=t,this.container=e,this.currentElement=e,this.createdElements=[],this.toDispose={},this.captureToDispose={}}asContainer(){return A2(this,this.offdom)}clone(){let e=new gi(this.container,this.offdom);return e.currentElement=this.currentElement,e.createdElements=this.createdElements,e.captureToDispose=this.captureToDispose,e.toDispose=this.toDispose,e}build(e,t){or(this.offdom,"This builder was not created off-dom, so build() can not be called."),e?e instanceof gi&&(e=e.getHTMLElement()):e=this.container,or(e,"Builder can only be build() with a container provided."),or(Bh(e),"The container must either be a HTMLElement or a Builder.");let r=e,n,s,o=r.childNodes;if(ll(t)&&t<o.length)for(n=0,s=this.createdElements.length;n<s;n++)r.insertBefore(this.createdElements[n],o[t++]);else for(n=0,s=this.createdElements.length;n<s;n++)r.appendChild(this.createdElements[n]);return this}appendTo(e,t){e?e instanceof gi&&(e=e.getHTMLElement()):e=this.container,or(e,"Builder can only be build() with a container provided."),or(Bh(e),"The container must either be a HTMLElement or a Builder.");let r=e;this.currentElement.parentNode&&this.currentElement.parentNode.removeChild(this.currentElement);let n=r.childNodes;return ll(t)&&t<n.length?r.insertBefore(this.currentElement,n[t]):r.appendChild(this.currentElement),this}append(e,t){return or(e,"Need a child to append"),Bh(e)&&(e=Ja(e)),or(e instanceof gi||e instanceof Yr,"Need a child to append"),e.appendTo(this,t),this}offDOM(){return this.currentElement.parentNode&&this.currentElement.parentNode.removeChild(this.currentElement),this}getHTMLElement(){return this.currentElement}getContainer(){return this.container}div(e,t){return this.doElement("div",e,t)}p(e,t){return this.doElement("p",e,t)}ul(e,t){return this.doElement("ul",e,t)}li(e,t){return this.doElement("li",e,t)}span(e,t){return this.doElement("span",e,t)}img(e,t){return this.doElement("img",e,t)}a(e,t){return this.doElement("a",e,t)}element(e,t,r){return this.doElement(e,t,r)}doElement(e,t,r){let n=document.createElement(e);if(this.currentElement=n,this.offdom&&this.createdElements.push(n),lr(t)&&this.attr(t),$s(t)&&(r=t),$s(r)){let s=new gi(n);r.call(s,s)}return this.offdom||this.container.appendChild(n),this}domFocus(){return this.currentElement.focus(),this}domBlur(){return this.currentElement.blur(),this}on(e,t,r,n){if(Ki(e))e.forEach(s=>{this.on(s,t,r,n)});else{let s=e,o=me(this.currentElement,s,l=>{t(l,this,o)},n||!1);n?(this.captureToDispose[s]||(this.captureToDispose[s]=[]),this.captureToDispose[s].push(o)):(this.toDispose[s]||(this.toDispose[s]=[]),this.toDispose[s].push(o));let a=this.getProperty(Sd,[]);a.push(o),this.setProperty(Sd,a),r&&Ki(r)&&r.push(o)}return this}off(e,t){if(Ki(e))e.forEach(r=>{this.off(r)});else{let r=e;t?this.captureToDispose[r]&&(this.captureToDispose[r]=ye(this.captureToDispose[r])):this.toDispose[r]&&(this.toDispose[r]=ye(this.toDispose[r]))}return this}once(e,t,r,n){if(Ki(e))e.forEach(s=>{this.once(s,t)});else{let s=e,o=me(this.currentElement,s,a=>{t(a,this,o),o.dispose()},n||!1);r&&Ki(r)&&r.push(o)}return this}attr(e,t){if(lr(e)){for(let r in e)if(e.hasOwnProperty(r)){let n=e[r];this.doSetAttr(r,n)}return this}return ci(e)&&!ci(t)?this.currentElement.getAttribute(e):(ci(e)&&(ci(t)||(t=String(t)),this.doSetAttr(e,t)),this)}doSetAttr(e,t){e==="class"&&(e="addClass"),this[e]?Ki(t)?this[e].apply(this,t):this[e].call(this,t):this.currentElement.setAttribute(e,t)}removeAttribute(e){this.currentElement.removeAttribute(e)}id(e){return this.currentElement.setAttribute("id",e),this}title(e){return this.currentElement.setAttribute("title",e),this}type(e){return this.currentElement.setAttribute("type",e),this}value(e){return this.currentElement.setAttribute("value",e),this}tabindex(e){return this.currentElement.setAttribute("tabindex",e.toString()),this}style(e,t){if(lr(e)){for(let n in e)if(e.hasOwnProperty(n)){let s=e[n];this.doSetStyle(n,s)}return this}const r=ci(e);return r&&Tr(t)?this.currentElement.style[this.cssKeyToJavaScriptProperty(e)]:(r&&this.doSetStyle(e,t),this)}doSetStyle(e,t){if(e.indexOf("-")>=0){let r=e.split("-");e=r[0];for(let n=1;n<r.length;n++){let s=r[n];e=e+s.charAt(0).toUpperCase()+s.substr(1)}}this.currentElement.style[this.cssKeyToJavaScriptProperty(e)]=t}cssKeyToJavaScriptProperty(e){if(e.indexOf("-")>=0){let t=e.split("-");e=t[0];for(let r=1;r<t.length;r++){let n=t[r];e=e+n.charAt(0).toUpperCase()+n.substr(1)}}else e==="float"&&(e="cssFloat");return e}getComputedStyle(){return v2(this.currentElement)}addClass(...e){return e.forEach(t=>{t.split(" ").forEach(n=>{Pe(this.currentElement,n)})}),this}setClass(e,t=null){return t===null?this.currentElement.className=e:t?this.addClass(e):this.removeClass(e),this}hasClass(e){return $0(this.currentElement,e)}removeClass(...e){return e.forEach(t=>{t.split(" ").forEach(n=>{ut(this.currentElement,n)})}),this}toggleClass(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e),this}color(e){return this.currentElement.style.color=e,this}padding(e,t,r,n){return ci(e)&&e.indexOf(" ")>=0?this.padding.apply(this,e.split(" ")):(At(e)||(this.currentElement.style.paddingTop=this.toPixel(e)),At(t)||(this.currentElement.style.paddingRight=this.toPixel(t)),At(r)||(this.currentElement.style.paddingBottom=this.toPixel(r)),At(n)||(this.currentElement.style.paddingLeft=this.toPixel(n)),this)}margin(e,t,r,n){return ci(e)&&e.indexOf(" ")>=0?this.margin.apply(this,e.split(" ")):(At(e)||(this.currentElement.style.marginTop=this.toPixel(e)),At(t)||(this.currentElement.style.marginRight=this.toPixel(t)),At(r)||(this.currentElement.style.marginBottom=this.toPixel(r)),At(n)||(this.currentElement.style.marginLeft=this.toPixel(n)),this)}position(e,t,r,n,s){return ci(e)&&e.indexOf(" ")>=0?this.position.apply(this,e.split(" ")):(At(e)||(this.currentElement.style.top=this.toPixel(e)),At(t)||(this.currentElement.style.right=this.toPixel(t)),At(r)||(this.currentElement.style.bottom=this.toPixel(r)),At(n)||(this.currentElement.style.left=this.toPixel(n)),s||(s="absolute"),this.currentElement.style.position=s,this)}size(e,t){return ci(e)&&e.indexOf(" ")>=0?this.size.apply(this,e.split(" ")):(At(e)||(this.currentElement.style.width=this.toPixel(e)),At(t)||(this.currentElement.style.height=this.toPixel(t)),this)}display(e){return this.currentElement.style.display=e,this}show(){return this.hasClass("nila-builder-hidden")&&this.removeClass("nila-builder-hidden"),this.attr("aria-hidden","false"),this.cancelVisibilityTimeout(),this}showDelayed(e){this.cancelVisibilityTimeout();const t=setTimeout(()=>{this.removeProperty(Ed),this.show()},e);return this.setProperty(Ed,z0(()=>clearTimeout(t))),this}hide(){return this.hasClass("nila-builder-hidden")||this.addClass("nila-builder-hidden"),this.attr("aria-hidden","true"),this.cancelVisibilityTimeout(),this}isHidden(){return this.hasClass("nila-builder-hidden")||this.currentElement.style.display==="none"}cancelVisibilityTimeout(){const e=this.getProperty(Ed);e&&(e.dispose(),this.removeProperty(Ed))}toPixel(e){return e.toString().indexOf("px")===-1?e.toString()+"px":e}innerHtml(e,t){return t?this.currentElement.innerHTML+=e:this.currentElement.innerHTML=e,this}text(e,t){return t?this.currentElement.children.length===0?this.currentElement.textContent+=e:this.currentElement.appendChild(document.createTextNode(e)):this.currentElement.textContent=e,this}safeInnerHtml(e,t){return this.innerHtml(ZS(e),t)}setProperty(e,t){return TT(this.currentElement,e,t),this}getProperty(e,t){return CT(this.currentElement,e,t)}removeProperty(e){return rf(this.currentElement)&&delete Fh(this.currentElement)[e],this}child(e=0){let t=this.currentElement.children;return Ja(t.item(e))}unbindDescendants(e){if(e&&e.children)for(let t=0,r=e.children.length;t<r;t++){let n=e.children.item(t);if(rf(n)){let s=Fh(n)[Sd];if(Ki(s))for(;s.length;)s.pop().dispose();delete n[Qa]}this.unbindDescendants(n)}}empty(){return this.unbindDescendants(this.currentElement),this.clearChildren(),this.offdom&&(this.createdElements=[]),this}clearChildren(){return this.currentElement&&oy(this.currentElement),this}destroy(){if(this.currentElement&&(this.currentElement.parentNode&&this.currentElement.parentNode.removeChild(this.currentElement),this.empty(),rf(this.currentElement))){let t=Fh(this.currentElement)[Sd];if(Ki(t))for(;t.length;)t.pop().dispose();delete this.currentElement[Qa]}let e;for(e in this.toDispose)this.toDispose.hasOwnProperty(e)&&Ki(this.toDispose[e])&&(this.toDispose[e]=ye(this.toDispose[e]));for(e in this.captureToDispose)this.captureToDispose.hasOwnProperty(e)&&Ki(this.captureToDispose[e])&&(this.captureToDispose[e]=ye(this.captureToDispose[e]));this.currentElement=null,this.container=null,this.offdom=null,this.createdElements=null,this.captureToDispose=null,this.toDispose=null}dispose(){this.destroy()}getTotalSize(){let e=y2(this.currentElement),t=w2(this.currentElement);return new Ci(e,t)}getClientArea(){return ay(this.currentElement)}}class Yr extends gi{constructor(e){if(or(Ki(e)||e instanceof Yr,"Expected Array or MultiBuilder as parameter"),super(),this.length=0,this.builders=[],Ki(e))for(let n=0;n<e.length;n++)e[n]instanceof HTMLElement?this.push(Ja(e[n])):this.push(e[n]);else for(let n=0;n<e.length;n++)this.push(e.item(n));let t=this,r=n=>{t[n]=function(){let s=Array.prototype.slice.call(arguments),o,a=!1;for(let l=0;l<t.length;l++){let c=t.item(l)[n].apply(t.item(l),s);if(c instanceof Yr){o||(o=[]),a=!0;for(let h=0;h<c.length;h++)o.push(c.item(h))}else!Tr(c)&&!(c instanceof gi)&&(o||(o=[]),o.push(c))}return o&&a?new Yr(o):o||t}};for(let n in gi.prototype)n!=="clone"&&n!=="and"&&gi.prototype.hasOwnProperty(n)&&$s(gi.prototype[n])&&r(n)}item(e){return this.builders[e]}push(...e){for(let t=0;t<e.length;t++)this.builders.push(e[t]);this.length=this.builders.length}clone(){return new Yr(this)}}function A2(i,e){return i instanceof Yr?new Yr(i):new gi(i.getHTMLElement(),e)}function Ja(i,e){return new gi(i,e)}function ug(){return new gi(null,!0)}function TT(i,e,t){Fh(i)[e]=t}function CT(i,e,t){if(rf(i)){let r=Fh(i)[e];if(!Tr(r))return r}return t}let PT=/([\w\-]+)?(#([\w\-]+))?((.([\w\-]+))*)/;const Le=function(i){if(Tr(i))return ug();if(!i)throw new Error("Bad use of $");if(Bh(i)||i===window)return Ja(i);if(Ki(i))return new Yr(i);if(i instanceof gi)return A2(i);if(ci(i))if(i[0]==="<"){let e,t=document.createElement("div");if(t.innerHTML=XS.apply(zD,arguments),t.children.length===0)throw new Error("Bad use of $");if(t.children.length===1)return e=t.firstChild,t.removeChild(e),Ja(e);let r=[];for(;t.firstChild;)e=t.firstChild,t.removeChild(e),r.push(Ja(e));return new Yr(r)}else if(arguments.length===1){let e=PT.exec(i);if(!e)throw new Error("Bad use of $");let t=e[1]||"div",r=e[3]||void 0,n=(e[4]||"").replace(/\./g," "),s={};return r&&(s.id=r),n&&(s.class=n),ug().element(t,s)}else{let e=ug();return e.element.apply(e,arguments),e}else throw new Error("Bad use of $")};function hg(i,e){return i.message?e&&(i.stack||i.stacktrace)?`${Hx(i)}: ${i.stack||i.stacktrace}`:Hx(i):"An unknown error occurred. Please consult the log for more details."}function Hx(i){return typeof i.code=="string"&&typeof i.errno=="number"&&typeof i.syscall=="string"?`A system error occured (${i.message})`:i.message}function D2(i=null,e=!1){if(!i)return"An unknown error occurred. Please consult the log for more details.";if(Array.isArray(i)){let t=p2(i),r=D2(t[0],e);return t.length>1?`${r} (${t.length} errors in total)`:r}if(ci(i))return i;if(i.detail){let t=i.detail;if(t.error)return hg(t.error,e);if(t.exception)return hg(t.exception,e)}return i.stack?hg(i,e):i.message?i.message:"An unknown error occurred. Please consult the log for more details."}class IT{constructor(e){this._staticArguments=e}appendStaticArguments(e){this._staticArguments.push.apply(this._staticArguments,e)}staticArguments(e){return isNaN(e)?this._staticArguments.slice(0):this._staticArguments[e]}_validate(e){if(!e)throw YD("can not be falsy")}}class yr extends IT{constructor(e,...t){super(t),this._ctor=e}get ctor(){return this._ctor}bind(...e){let t=[];return t=t.concat(this.staticArguments()),t=t.concat(e),new yr(this._ctor,...t)}}const OT=(i,...e)=>new yr(i,...e);var Hi;(i=>{function e(s,o){if(s.start>=o.end||o.start>=s.end)return{start:0,end:0};const a=Math.max(s.start,o.start),l=Math.min(s.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=e;function t(s){return s.end-s.start<=0}i.isEmpty=t;function r(s,o){return!t(e(s,o))}i.intersects=r;function n(s,o){const a=[],l={start:s.start,end:Math.min(o.start,s.end)},c={start:Math.max(o.end,s.start),end:s.end};return t(l)||a.push(l),t(c)||a.push(c),a}i.relativeComplement=n})(Hi||(Hi={}));var W0=(i=>(i[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT",i))(W0||{}),G0=(i=>(i[i.BELOW=0]="BELOW",i[i.ABOVE=1]="ABOVE",i))(G0||{});function zx(i,e,t){const r=t.offset+t.size;return t.position===0?e<=i-r?r:e<=t.offset?t.offset-e:Math.max(i-e,0):e<=t.offset?t.offset-e:e<=i-r?r:0}const Za=class Za extends Je{constructor(e){super(),this.view=oi(".context-view"),Gr(this.view),this.setContainer(e),this._register(z0(()=>this.setContainer(null)))}setContainer(e){if(this.container&&(this.toDisposeOnSetContainer=ye(this.toDisposeOnSetContainer),this.container.removeChild(this.view),this.container=null),e){this.container=e,this.container.appendChild(this.view);const t=[];Za.BUBBLE_UP_EVENTS.forEach(r=>{t.push(Fx(this.container,r,n=>{this.onDOMEvent(n,document.activeElement,!1)}))}),Za.BUBBLE_DOWN_EVENTS.forEach(r=>{t.push(Fx(this.container,r,n=>{this.onDOMEvent(n,document.activeElement,!0)},!0))}),this.toDisposeOnSetContainer=H0(t)}}show(e){this.isVisible()&&this.hide(),oy(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",rs(this.view),this.toDisposeOnClean=e.render(this.view),this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(Bh(e)){let p=gf(e);t={top:p.top,left:p.left,width:p.width,height:p.height}}else{let p=e;t={top:p.y,left:p.x,width:p.width||1,height:p.height||2}}const r=y2(this.view),n=w2(this.view),s=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a={offset:t.top-window.pageYOffset,size:t.height,position:s===0?0:1};let l;o===0?l={offset:t.left,size:0,position:0}:l={offset:t.left+t.width,size:0,position:1};const c=zx(window.innerHeight,n,a)+window.pageYOffset;Hi.intersects({start:c,end:c+n},{start:a.offset,end:a.offset+a.size})&&(l.size=t.width);const h=zx(window.innerWidth,r,l);Zh(this.view,"top","bottom","left","right"),Pe(this.view,s===0?"bottom":"top"),Pe(this.view,o===0?"left":"right");const u=gf(this.container);this.view.style.top=`${c-u.top}px`,this.view.style.left=`${h-u.left}px`,this.view.style.width="initial"}hide(e){this.delegate&&this.delegate.onHide&&this.delegate.onHide(e),this.delegate=null,this.toDisposeOnClean&&(this.toDisposeOnClean.dispose(),this.toDisposeOnClean=null),Gr(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t,r){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):r&&!ds(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};Za.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],Za.BUBBLE_DOWN_EVENTS=["click"];let O_=Za;class MT{constructor(e){this.contextView=new O_(e)}dispose(){this.contextView.dispose(),this.contextView=null}setContainer(e){this.contextView.setContainer(e)}showContextView(e){this.contextView.show(e)}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}}var Sr;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e})(Sr||(Sr={}));const Nt=Et("instantiationService");function T2(i,e,t,r){e[Sr.DI_TARGET]===e?e[Sr.DI_DEPENDENCIES].push({id:i,index:t,optional:r}):(e[Sr.DI_DEPENDENCIES]=[{id:i,index:t,optional:r}],e[Sr.DI_TARGET]=e)}function Et(i){if(Sr.serviceIds.has(i))return Sr.serviceIds.get(i);const e=function(t,r,n){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");T2(e,t,n,!1)};return e.toString=()=>i,Sr.serviceIds.set(i,e),e}function NT(i){return function(e,t,r){if(arguments.length!==3)throw new Error("@optional-decorator can only be used to decorate a parameter");T2(i,e,r,!0)}}const RT="storageService",LT=Et(RT);class Qh{constructor(...e){this._entries=new Map;for(let[t,r]of e)this.set(t,r)}set(e,t){const r=this._entries.get(e);return this._entries.set(e,t),r}forEach(e){this._entries.forEach((t,r)=>e(r,t))}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}clear(){this._entries.clear()}}function M_(i){return"%"+i.charCodeAt(0).toString(16).toUpperCase()}function kT(i){return encodeURIComponent(i).replace(/[!'()*]/g,M_)}function BT(i){return i}const Oe=class Oe{static isUri(e){return e instanceof Oe?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string":!1}constructor(){this._scheme=Oe._empty,this._authority=Oe._empty,this._path=Oe._empty,this._query=Oe._empty,this._fragment=Oe._empty,this._formatted=null,this._fsPath=null}get scheme(){return this._scheme}get authority(){return this._authority}get path(){return this._path}get query(){return this._query}get fragment(){return this._fragment}get fsPath(){if(!this._fsPath){var e;this._authority&&this._path&&this.scheme==="file"?e=`//${this._authority}${this._path}`:Oe._driveLetterPath.test(this._path)?e=this._path[1].toLowerCase()+this._path.substr(2):e=this._path,j0&&(e=e.replace(/\//g,"\\")),this._fsPath=e}return this._fsPath}with(e){if(!e)return this;let{scheme:t,authority:r,path:n,query:s,fragment:o}=e;if(t===void 0?t=this.scheme:t===null&&(t=""),r===void 0?r=this.authority:r===null&&(r=""),n===void 0?n=this.path:n===null&&(n=""),s===void 0?s=this.query:s===null&&(s=""),o===void 0?o=this.fragment:o===null&&(o=""),t===this.scheme&&r===this.authority&&n===this.path&&s===this.query&&o===this.fragment)return this;const a=new Oe;return a._scheme=t,a._authority=r,a._path=n,a._query=s,a._fragment=o,Oe._validate(a),a}static parse(e){const t=new Oe,r=Oe._parseComponents(e);return t._scheme=r.scheme,t._authority=decodeURIComponent(r.authority),t._path=decodeURIComponent(r.path),t._query=decodeURIComponent(r.query),t._fragment=decodeURIComponent(r.fragment),Oe._validate(t),t}static file(e){const t=new Oe;if(t._scheme="file",e=e.replace(/\\/g,Oe._slash),e[0]===Oe._slash&&e[0]===e[1]){let r=e.indexOf(Oe._slash,2);r===-1?t._authority=e.substring(2):(t._authority=e.substring(2,r),t._path=e.substring(r))}else t._path=e;return t._path[0]!==Oe._slash&&(t._path=Oe._slash+t._path),Oe._validate(t),t}static _parseComponents(e){const t={scheme:Oe._empty,authority:Oe._empty,path:Oe._empty,query:Oe._empty,fragment:Oe._empty},r=Oe._regexp.exec(e);return r&&(t.scheme=r[2]||t.scheme,t.authority=r[4]||t.authority,t.path=r[5]||t.path,t.query=r[7]||t.query,t.fragment=r[9]||t.fragment),t}static from(e){return new Oe().with(e)}static _validate(e){if(e.scheme&&!Oe._schemePattern.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!Oe._singleSlashStart.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Oe._doubleSlashStart.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}toString(e=!1){return e?Oe._asFormatted(this,!0):(this._formatted||(this._formatted=Oe._asFormatted(this,!1)),this._formatted)}static _asFormatted(e,t){const r=t?BT:kT,n=[];let{scheme:s,authority:o,path:a,query:l,fragment:c}=e;if(s&&n.push(s,":"),(o||s==="file")&&n.push("//"),o){o=o.toLowerCase();let h=o.indexOf(":");h===-1?n.push(r(o)):n.push(r(o.substr(0,h)),o.substr(h))}if(a){const h=Oe._upperCaseDrive.exec(a);h&&(h[1]?a="/"+h[2].toLowerCase()+a.substr(3):a=h[2].toLowerCase()+a.substr(2));let u=0;for(;;){let p=a.indexOf(Oe._slash,u);if(p===-1){n.push(r(a.substring(u)).replace(/[#?]/,M_));break}n.push(r(a.substring(u,p)).replace(/[#?]/,M_),Oe._slash),u=p+1}}return l&&n.push("?",r(l)),c&&n.push("#",r(c)),n.join(Oe._empty)}toJSON(){const e={fsPath:this.fsPath,external:this.toString(),$mid:1};return this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}static revive(e){let t=new Oe;return t._scheme=e.scheme||Oe._empty,t._authority=e.authority||Oe._empty,t._path=e.path||Oe._empty,t._query=e.query||Oe._empty,t._fragment=e.fragment||Oe._empty,t._fsPath=e.fsPath,t._formatted=e.external,Oe._validate(t),t}};Oe._empty="",Oe._slash="/",Oe._regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Oe._driveLetterPath=/^\/[a-zA-z]:/,Oe._upperCaseDrive=/^(\/)?([A-Z]:)/,Oe._schemePattern=/^\w[\w\d+.-]*$/,Oe._singleSlashStart=/^\//,Oe._doubleSlashStart=/^\/\//;let _f=Oe;const pt={JSONContribution:"base.contributions.json",Configuration:"base.contributions.configuration",WorkbenchActions:"workbench.contributions.actions",Toolbar:"workbench.contributions.toolbar",Workbench:"workbench.contributions.kind",EditorModes:"platform.keybindingsRegistry",Charts:"workbench.contributions.charts",Actionbar:"workbench.contributions.actionbar",Viewlet:"workbench.contributions.viewlet",ChartCommonContributions:"chart.commonContributions",Quickopen:""};class FT{constructor(){this.data={}}add(e,t){or(ci(e)),or(lr(t)),or(!this.data.hasOwnProperty(e),"There is already an extension with this id"),this.data[e]=t}knows(e){return this.data.hasOwnProperty(e)}as(e){return this.data[e]||null}}const Qe=new FT;function Ia(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;const e=Array.isArray(i)?[]:{};return Object.keys(i).forEach(t=>{i[t]&&typeof i[t]=="object"?e[t]=Ia(i[t]):e[t]=i[t]}),e}function UT(i){if(!i||typeof i!="object")return i;const e=[i];for(;e.length>0;){let t=e.shift();Object.freeze(t);for(const r in t)if(KT.call(t,r)){let n=t[r];typeof n=="object"&&!Object.isFrozen(n)&&e.push(n)}}return i}const KT=Object.prototype.hasOwnProperty;function ly(i,e,t=!0){return lr(i)?(lr(e)&&Object.keys(e).forEach(r=>{r in i?t&&(lr(i[r])&&lr(e[r])?ly(i[r],e[r],t):i[r]=e[r]):i[r]=e[r]}),i):e}function Sn(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,r;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!Sn(i[t],e[t]))return!1}else{const n=[];for(r in i)n.push(r);n.sort();const s=[];for(r in e)s.push(r);if(s.sort(),!Sn(n,s))return!1;for(t=0;t<n.length;t++)if(!Sn(i[n[t]],e[n[t]]))return!1}return!0}function pu(i,e,t=null){const r=e(i);return typeof r>"u"?t:r}const it=Et("configurationService"),HT="override",C2="\\[.*\\]$",zT="\\[(${0})\\]$",Y0=new RegExp(C2);var Fa=(i=>(i[i.APPLICATION=1]="APPLICATION",i[i.WINDOW=2]="WINDOW",i[i.RESOURCE=3]="RESOURCE",i))(Fa||{});function cg(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof _f)}var Be=(i=>(i[i.USER=1]="USER",i[i.WORKSPACE=2]="WORKSPACE",i[i.DEFAULT=3]="DEFAULT",i[i.MEMORY=4]="MEMORY",i))(Be||{});function jx(i,e){const t=e.keys.filter(s=>i.keys.indexOf(s)===-1),r=i.keys.filter(s=>e.keys.indexOf(s)===-1),n=[];for(const s of i.keys){const o=N_(i.contents,s),a=N_(e.contents,s);Sn(o,a)||n.push(s)}return{added:t,removed:r,updated:n}}function jT(i,e){const t=[],r=Qe.as(pt.Configuration).getConfigurationProperties();for(const n of Object.keys(i))if(Y0.test(n)){const s={};for(const o in i[n])r[o]&&r[o].overridable&&(s[o]=i[n][o]);t.push({identifiers:[I2(n).trim()],contents:q0(s,e)})}return t}function q0(i,e){const t=Object.create(null);for(let r in i)uy(t,r,i[r],e);return t}function uy(i,e,t,r){const n=e.split("."),s=n.pop();let o=i;for(let a=0;a<n.length;a++){let l=n[a],c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":break;default:r(`Ignoring ${e} as ${n.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}typeof o=="object"?o[s]=t:r(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(o)}`)}function $T(i,e){const t=e.split(".");P2(i,t)}function P2(i,e){const t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){const r=i[t];typeof r=="object"&&!Array.isArray(r)&&(P2(r,e),Object.keys(r).length===0&&delete i[t])}}function N_(i,e,t){function r(o,a){let l=o;for(let c=0;c<a.length;c++){if(typeof l!="object"||l===null)return;l=l[a[c]]}return l}const n=e.split("."),s=r(i,n);return typeof s>"u"?t:s}function VT(){const i=Qe.as(pt.Configuration).getConfigurationProperties();return Object.keys(i)}function WT(){const i=Object.create(null),e=Qe.as(pt.Configuration).getConfigurationProperties();for(let t in e){let r=e[t].default;uy(i,t,r,n=>console.error(`Conflict in default settings: ${n}`))}return i}function I2(i){return i.substring(1,i.length-1)}function GT(i){return`[${i}]`}const xc=Et("environmentService");class YT{constructor(e,t="default"){this.token=e,this.sessionId=t}get isBuilt(){return jD.env.NODE_ENV!=="development"}get isEmbeded(){return window.top!==window}}const qT=Object.prototype.hasOwnProperty;function Ad(i,e){for(var t in i)if(qT.call(i,t)&&e({key:t,value:i[t]},function(){delete i[t]})===!1)return}function fs(i,e){if(Array.isArray(i))for(let t=0,r=i.length;t<r;t++){let n=i[t];if(e(n))return n}else if(typeof i=="object"){let t=Object.keys(i);for(let r=0,n=t.length;r<n;r++){let s=i[t[r]];if(e(s))return s}}}function $x(i,e){return i.filter(t=>e.indexOf(t)===-1)}function di(i){return i.length?i[i.length-1]:void 0}function XT(i){return{data:i,incoming:Object.create(null),outgoing:Object.create(null)}}class ZT{constructor(e){this._hashFn=e,this._nodes=Object.create(null)}roots(){var e=[];return Ad(this._nodes,t=>{ED(t.value.outgoing)&&e.push(t.value)}),e}traverse(e,t,r){var n=this.lookup(e);n&&this._traverse(n,t,Object.create(null),r)}_traverse(e,t,r,n){var s=this._hashFn(e.data);if(!r[s]){r[s]=!0,n(e.data);var o=t?e.outgoing:e.incoming;Ad(o,a=>this._traverse(a.value,t,r,n))}}insertEdge(e,t){var r=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);r.outgoing[this._hashFn(t)]=n,n.incoming[this._hashFn(e)]=r}removeNode(e){var t=this._hashFn(e);delete this._nodes[t],Ad(this._nodes,r=>{delete r.value.outgoing[t],delete r.value.incoming[t]})}lookupOrInsertNode(e){const t=this._hashFn(e);let r=this._nodes[t];return r||(r=XT(e),this._nodes[t]=r),r}lookup(e){return this._nodes[this._hashFn(e)]}get length(){return Object.keys(this._nodes).length}toString(){let e=[];return Ad(this._nodes,t=>{e.push(`${t.key}, (incoming)[${Object.keys(t.value.incoming).join(", ")}], (outgoing)[${Object.keys(t.value.outgoing).join(",")}]`)}),e.join(`
`)}}class hy{constructor(e=new Qh,t=!1){this._services=e,this._strict=t,this._services.set(Nt,this)}createChild(e){return this._services.forEach((t,r)=>{e.has(t)||(r instanceof yr&&(r=this._createAndCacheServiceInstance(t,r)),e.set(t,r))}),new hy(e,this._strict)}invokeFunction(e,...t){let r;try{return r={get:(n,s)=>{const o=this._getOrCreateServiceInstance(n);if(!o&&s!==NT)throw new Error(`[invokeFunction] unkown service '${n}'`);return o}},e.apply(void 0,[r].concat(t))}finally{r.get=function(){throw qD("service accessor is only valid during the invocation of its target method")}}}createInstance(e,...t){return e instanceof yr?this._createInstance(e,t):this._createInstance(new yr(e),t)}_createInstance(e,t){let r=e.staticArguments().concat(t),n=Sr.getServiceDependencies(e.ctor).sort((a,l)=>a.index-l.index),s=[];for(const a of n){let l=this._getOrCreateServiceInstance(a.id);if(!l&&this._strict&&!a.optional)throw new Error(`[createInstance] ${e.ctor.name} depends on UNKNOWN service ${a.id}.`);s.push(l)}let o=n.length>0?n[0].index:r.length;if(r.length!==o){console.warn(`[createInstance] First service dependency of ${e.ctor.name} at position ${o+1} conflicts with ${r.length} static arguments`);let a=o-r.length;a>0?r=r.concat(new Array(a)):r=r.slice(0,o)}return new e.ctor(...r,...s)}_getOrCreateServiceInstance(e){let t=this._services.get(e);return t instanceof yr?this._createAndCacheServiceInstance(e,t):t}_createAndCacheServiceInstance(e,t){or(this._services.get(e)instanceof yr);const r=new ZT(a=>a.id.toString());function n(){const a=new Error("[createInstance] cyclic dependency between services");throw a.message=r.toString(),a}let s=0;const o=[{id:e,desc:t}];for(;o.length;){const a=o.pop();r.lookupOrInsertNode(a),s++>100&&n();let l=Sr.getServiceDependencies(a.desc.ctor);for(let c of l){let h=this._services.get(c.id);if(h||console.warn(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`),h instanceof yr){const u={id:c.id,desc:h};r.insertEdge(a,u),o.push(u)}}}for(;;){let a=r.roots();if(a.length===0){r.length!==0&&n();break}for(let l of a){const c=this._createInstance(l.data.desc,[]);this._services.set(l.data.id,c),r.removeNode(l.data)}}return this._services.get(e)}dispose(){this._services.clear()}}class QT extends Je{constructor(){super()}store(e,t,r,n,s){return Promise.resolve(null)}swap(e,t,r,n,s){}remove(e,t){}get(e,t,r){return""}clear(e,t){}}const JT=Et("storageService"),X0=Et("lifecycleService");var R_=(i=>(i[i.CLOSE=0]="CLOSE",i[i.QUIT=1]="QUIT",i[i.RELOAD=2]="RELOAD",i[i.LOAD=3]="LOAD",i))(R_||{}),Ti=(i=>(i[i.Starting=1]="Starting",i[i.Restoring=2]="Restoring",i[i.Running=3]="Running",i[i.Eventually=4]="Eventually",i))(Ti||{});function e6(i,e){if(i.length===0)return Promise.resolve(!1);const t=[];let r=!1;for(let n of i){if(n===!0)return Promise.resolve(!0);u2(n)&&t.push(n.then(s=>{s&&(r=!0)},s=>{e(s),r=!0}))}return Promise.all(t).then(()=>r)}class t6{constructor(){this._onWillShutdown=new ve,this._onShutdown=new ve,this._phase=Ti.Starting,this._phaseWhen=new Map,this._toDispose=[],this.registerListeners()}registerListeners(){this._toDispose.push(me(window,"onbeforeunload",()=>{const e=R_.CLOSE;this.onBeforeUnload(e).then(t=>{t||this._onShutdown.fire(e)})}))}shutdown(e=R_.CLOSE){this.onBeforeUnload(e).then(t=>{t||this._onShutdown.fire(e)})}onBeforeUnload(e){const t=[];return this._onWillShutdown.fire({veto(r){t.push(r)},reason:e}),e6(t,r=>console.error(r))}get phase(){return this._phase}set phase(e){if(e<this.phase)throw new Error("Lifecycle cannot go backwards");this._phase!==e&&(this._phase=e,this._phaseWhen.has(this._phase)&&(this._phaseWhen.get(this._phase).open(),this._phaseWhen.delete(this._phase)))}when(e){if(e<=this._phase)return Promise.resolve();let t=this._phaseWhen.get(e);return t||(t=new JD,this._phaseWhen.set(e,t)),t.wait()}get onWillShutdown(){return this._onWillShutdown.event}get onShutdown(){return this._onShutdown.event}dispose(){ye(this._toDispose),this._toDispose.length=0}}const ms=Et("commandService"),Rt=new class{constructor(){this._commands=new Map}registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.description){const s=[];for(let a of i.description.args)s.push(a.constraint);const o=i.handler;i.handler=function(a,...l){return AD(l,s),o(a,...l)}}const{id:t}=i;let r=this._commands.get(t);r||(r=new o2,this._commands.set(t,r));let n=r.unshift(i);return{dispose:()=>{n(),this._commands.get(t).isEmpty()&&this._commands.delete(t)}}}getCommand(i){const e=this._commands.get(i);if(!(!e||e.isEmpty()))return e.iterator().next().value}getCommands(){const i=Object.create(null);return this._commands.forEach((e,t)=>{i[t]=this.getCommand(t)}),i}};var i6=Object.defineProperty,r6=Object.getOwnPropertyDescriptor,n6=(i,e,t,r)=>{for(var n=r>1?void 0:r?r6(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&i6(e,t,n),n},s6=(i,e)=>(t,r)=>e(t,r,i);let L_=class extends Je{constructor(i){super(),this._instantiationService=i,this._onWillExecuteCommand=this._register(new ve),this.onWillExecuteCommand=this._onWillExecuteCommand.event}executeCommand(i,...e){return this._tryExecuteCommand(i,e)}_tryExecuteCommand(i,e){const t=this._getCommand(i);if(!t)return Promise.reject(new Error(`command '${i}' not found`));try{this._onWillExecuteCommand.fire({commandId:i});const r=this._instantiationService.invokeFunction.apply(this._instantiationService,[t.handler].concat(e));return Promise.resolve(r)}catch(r){return Promise.reject(r)}}_getCommand(i){return Rt.getCommand(i)}};L_=n6([s6(0,Nt)],L_);const Z0=Et("contextViewService"),wc=Et("contextMenuService");class Re{constructor(e,t="",r="",n=!0,s,o,a){this._onDidChange=new ve,this._id=e,this._label=t,this._cssClass=r,this._enabled=n,this._actionCallback=s,this._icon=o,this._checked=a}dispose(){this._onDidChange.dispose()}get onDidChange(){return this._onDidChange.event}get id(){return this._id}get icon(){return this._icon}set icon(e){this._icon=e}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}get radio(){return this._radio}set radio(e){this._setRadio(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}_setRadio(e){this._radio!==e&&(this._radio=e,this._onDidChange.fire({radio:e}))}get order(){return this._order}set order(e){this._order=e}run(e){return this._actionCallback!==void 0?this._actionCallback(e):Promise.resolve(!0)}}class cy{constructor(){this._onDidBeforeRun=new ve,this._onDidRun=new ve}get onDidRun(){return this._onDidRun.event}get onDidBeforeRun(){return this._onDidBeforeRun.event}run(e,t){return e.enabled?(this._onDidBeforeRun.fire({action:e}),this.runAction(e,t).then(r=>{this._onDidRun.fire({action:e,result:r})},r=>{this._onDidRun.fire({action:e,error:r})})):Promise.resolve(null)}runAction(e,t){const r=t?e.run(t):e.run();return u2(r)?r:Promise.resolve(r)}dispose(){this._onDidBeforeRun.dispose(),this._onDidRun.dispose()}}function ii(i,e,t){let r=null,n=null;if(typeof t.value=="function"?(r="value",n=t.value,n.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(r="get",n=t.get),!n)throw new Error("not supported");const s=`$memoize$${e}`;t[r]=function(...o){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:n.apply(this,o)}),this[s]}}var o6=Object.defineProperty,a6=Object.getOwnPropertyDescriptor,l6=(i,e,t,r)=>{for(var n=a6(e,t),s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&o6(e,t,n),n},$i;(i=>{i.Tap="-nila-gesturetap",i.Change="-nila-gesturechange",i.Start="-nila-gesturestart",i.End="-nila-gesturesend",i.Contextmenu="-nila-gesturecontextmenu"})($i||($i={}));var si;const O2=(si=class{constructor(){this.toDispose=[],this.activeTouches={},this.handle=null,this.targets=[],this.toDispose.push(me(document,"touchstart",e=>this.onTouchStart(e))),this.toDispose.push(me(document,"touchend",e=>this.onTouchEnd(e))),this.toDispose.push(me(document,"touchmove",e=>this.onTouchMove(e)))}static addTarget(e){si.isTouchDevice()&&(si.INSTANCE||(si.INSTANCE=new si),si.INSTANCE.targets.push(e))}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),ye(this.toDispose),this.handle=null)}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let r=0,n=e.targetTouches.length;r<n;r++){let s=e.targetTouches.item(r);this.activeTouches[s.identifier]={id:s.identifier,initialTarget:s.target,initialTimeStamp:t,initialPageX:s.pageX,initialPageY:s.pageY,rollingTimestamps:[t],rollingPageX:[s.pageX],rollingPageY:[s.pageY]};let o=this.newGestureEvent($i.Start,s.target);o.pageX=s.pageX,o.pageY=s.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),r=Object.keys(this.activeTouches).length;for(let n=0,s=e.changedTouches.length;n<s;n++){let o=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("move of an UNKNOWN touch",o);continue}let a=this.activeTouches[o.identifier],l=Date.now()-a.initialTimeStamp;if(l<si.HOLD_DELAY&&Math.abs(a.initialPageX-Li(a.rollingPageX))<30&&Math.abs(a.initialPageY-Li(a.rollingPageY))<30){let c=this.newGestureEvent($i.Tap,a.initialTarget);c.pageX=Li(a.rollingPageX),c.pageY=Li(a.rollingPageY),this.dispatchEvent(c)}else if(l>=si.HOLD_DELAY&&Math.abs(a.initialPageX-Li(a.rollingPageX))<30&&Math.abs(a.initialPageY-Li(a.rollingPageY))<30){let c=this.newGestureEvent($i.Contextmenu,a.initialTarget);c.pageX=Li(a.rollingPageX),c.pageY=Li(a.rollingPageY),this.dispatchEvent(c)}else if(r===1){let c=Li(a.rollingPageX),h=Li(a.rollingPageY),u=Li(a.rollingTimestamps)-a.rollingTimestamps[0],p=c-a.rollingPageX[0],d=h-a.rollingPageY[0];const f=this.targets.filter(m=>a.initialTarget instanceof Node&&m.contains(a.initialTarget));this.inertia(f,t,Math.abs(p)/u,p>0?1:-1,c,Math.abs(d)/u,d>0?1:-1,h)}this.dispatchEvent(this.newGestureEvent($i.End,a.initialTarget)),delete this.activeTouches[o.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let r=document.createEvent("CustomEvent");return r.initEvent(e,!1,!0),r.initialTarget=t,r}dispatchEvent(e){this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,r,n,s,o,a,l){this.handle=V0(()=>{let c=Date.now(),h=c-t,u=0,p=0,d=!0;r+=si.SCROLL_FRICTION*h,o+=si.SCROLL_FRICTION*h,r>0&&(d=!1,u=n*r*h),o>0&&(d=!1,p=a*o*h);let f=this.newGestureEvent($i.Change);f.translationX=u,f.translationY=p,e.forEach(m=>m.dispatchEvent(f)),d||this.inertia(e,c,r,n,s+u,o,a,l+p)})}onTouchMove(e){let t=Date.now();for(let r=0,n=e.changedTouches.length;r<n;r++){let s=e.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("end of an UNKNOWN touch",s);continue}let o=this.activeTouches[s.identifier],a=this.newGestureEvent($i.Change,o.initialTarget);a.translationX=s.pageX-Li(o.rollingPageX),a.translationY=s.pageY-Li(o.rollingPageY),a.pageX=s.pageX,a.pageY=s.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(s.pageX),o.rollingPageY.push(s.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}},si.SCROLL_FRICTION=-.005,si.HOLD_DELAY=700,si);l6([ii],O2,"isTouchDevice");let Q0=O2;function u6(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,(r,n)=>{let s=n[0];return typeof e[s]<"u"?e[s]:r}),t}function h6(i,e,...t){return u6(e,t)}const de={localize:h6};class na extends Je{constructor(e,t,r){super(),this.options=r,this._context=e||this,this._action=t,t instanceof Re&&this._register(t.onDidChange(n=>{this.element&&this.handleActionChangeEvent(n)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.icon!==void 0&&this.updateIcon(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}set actionRunner(e){this._actionRunner=e}get actionRunner(){return this._actionRunner}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){this.element=e,Q0.addTarget(e);const t=this.options&&this.options.draggable;t&&(e.draggable=!0),this._register(me(this.element,$i.Tap,r=>this.onClick(r))),this._register(me(this.element,ue.MOUSE_DOWN,r=>{t||mi.stop(r,!0),this._action.enabled&&r.button===0&&this.element&&Pe(this.element,"active")})),this._register(me(this.element,ue.CLICK,r=>{mi.stop(r,!0),this.options&&this.options.isMenu?this.onClick(r):$D(()=>this.onClick(r))})),this._register(me(this.element,ue.DBLCLICK,r=>{mi.stop(r,!0)})),[ue.MOUSE_UP,ue.MOUSE_OUT].forEach(r=>{this._register(me(this.element,r,n=>{mi.stop(n),ut(this.element,"active")}))})}onClick(e){mi.stop(e,!0);let t;At(this._context)?t=e:(t=this._context,lr(t)&&(t.event=e)),this._actionRunner.run(this._action,t)}focus(){this.element&&(this.element.focus(),Pe(this.element,"focused"))}blur(){this.element&&(this.element.blur(),ut(this.element,"focused"))}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}updateIcon(){}dispose(){this.element&&(S2(this.element),this.element=void 0),super.dispose()}}const f0=class f0 extends Re{constructor(e){super(f0.ID,e,e?"separator text":"separator"),this.checked=!1,this.radio=!1,this.enabled=!1}};f0.ID="vs.actions.separator";let Tn=f0;class J0 extends na{constructor(e,t,r={}){super(e,t,r),this.options=r,this.options.icon=r.icon!==void 0?r.icon:!1,this.options.label=r.label!==void 0?r.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=Wi(this.element,oi("a.action-label"))),this._action.id===Tn.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button"),this.options.label&&this.options.keybinding&&this.element&&(Wi(this.element,oi("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){super.focus(),this.label.focus()}updateLabel(){this.options.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=de.localize({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&(this.label.title=e)}updateClass(){this.cssClass&&Zh(this.label,this.cssClass),this.options.icon?(this.cssClass=this.getAction().class,Pe(this.label,"icon"),this.cssClass&&pr(this.label,this.cssClass),this.updateEnabled()):ut(this.label,"icon")}updateEnabled(){this.getAction().enabled?(this.label.removeAttribute("aria-disabled"),this.element&&ut(this.element,"disabled"),ut(this.label,"disabled"),this.label.tabIndex=0):(this.label.setAttribute("aria-disabled","true"),this.element&&Pe(this.element,"disabled"),Pe(this.label,"disabled"),E2(this.label))}updateChecked(){this.getAction().checked?Pe(this.label,"checked"):ut(this.label,"checked")}}var bc=(i=>(i[i.HORIZONTAL=0]="HORIZONTAL",i[i.HORIZONTAL_REVERSE=1]="HORIZONTAL_REVERSE",i[i.VERTICAL=2]="VERTICAL",i[i.VERTICAL_REVERSE=3]="VERTICAL_REVERSE",i))(bc||{});const Vx={orientation:0,context:null,triggerKeys:{keys:[E.Enter,E.Space],keyDown:!1}};class ep extends Je{constructor(e,t=Vx){super(),this._onDidBlur=this._register(new ve),this._onDidCancel=this._register(new ve),this._onDidRun=this._register(new ve),this._onDidBeforeRun=this._register(new ve),this.options=t,this._context=t.context,this.options.triggerKeys||(this.options.triggerKeys=Vx.triggerKeys),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new cy,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(s=>this._onDidRun.fire(s))),this._register(this._actionRunner.onDidBeforeRun(s=>this._onDidBeforeRun.fire(s))),this.items=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="nila-action-bar",t.animated!==!1&&Pe(this.domNode,"animated");let r,n;switch(this.options.orientation){case 0:r=E.LeftArrow,n=E.RightArrow;break;case 1:r=E.RightArrow,n=E.LeftArrow,this.domNode.className+=" reverse";break;case 2:r=E.UpArrow,n=E.DownArrow,this.domNode.className+=" vertical";break;case 3:r=E.DownArrow,n=E.UpArrow,this.domNode.className+=" vertical reverse";break}this._register(me(this.domNode,ue.KEY_DOWN,s=>{const o=new _i(s);let a=!0;o.equals(r)?this.focusPrevious():o.equals(n)?this.focusNext():o.equals(E.Escape)?this.cancel():this.isTriggerKeyEvent(o)?this.options.triggerKeys&&this.options.triggerKeys.keyDown&&this.doTrigger(o):a=!1,a&&(o.preventDefault(),o.stopPropagation())})),this._register(me(this.domNode,ue.KEY_UP,s=>{const o=new _i(s);this.isTriggerKeyEvent(o)?(this.options.triggerKeys&&!this.options.triggerKeys.keyDown&&this.doTrigger(o),o.preventDefault(),o.stopPropagation()):(o.equals(E.Tab)||o.equals(dr.Shift|E.Tab))&&this.updateFocusedItem()})),this.focusTracker=this._register(ST(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(document.activeElement===this.domNode||!ds(document.activeElement,this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}get onDidBlur(){return this._onDidBlur.event}get onDidCancel(){return this._onDidCancel.event}get onDidRun(){return this._onDidRun.event}get onDidBeforeRun(){return this._onDidBeforeRun.event}setAriaLabel(e){e?this.actionsList.setAttribute("aria-label",e):this.actionsList.removeAttribute("aria-label")}isTriggerKeyEvent(e){let t=!1;return this.options.triggerKeys&&this.options.triggerKeys.keys.forEach(r=>{t=t||e.equals(r)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(ds(document.activeElement,t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.items.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.items.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const r=Array.isArray(e)?e:[e];let n=ll(t.index)?t.index:null;r.forEach(s=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation"),this._register(me(o,ue.CONTEXT_MENU,l=>{l.preventDefault(),l.stopPropagation()}));let a=null;this.options.actionItemProvider&&(a=this.options.actionItemProvider(s)),a||(a=new J0(this.context,s,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),n===null||n<0||n>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.items.push(a)):(this.actionsList.insertBefore(o,this.actionsList.children[n]),this.items.splice(n,0,a),n++)})}getWidth(e){if(e>=0&&e<this.actionsList.children.length){const t=this.actionsList.children.item(e);if(t)return t.clientWidth}return 0}getHeight(e){if(e>=0&&e<this.actionsList.children.length){const t=this.actionsList.children.item(e);if(t)return t.clientHeight}return 0}pull(e){e>=0&&e<this.items.length&&(this.actionsList.removeChild(this.actionsList.childNodes[e]),ye(this.items.splice(e,1)))}clear(){this.items=ye(this.items),oy(this.actionsList)}length(){return this.items.length}isEmpty(){return this.items.length===0}focus(e){let t=!1,r;e===void 0?t=!0:typeof e=="number"?r=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"?(this.focusedItem=this.items.length-1,this.focusNext()):(r!==void 0&&(this.focusedItem=r),this.updateFocus())}focusNext(){typeof this.focusedItem>"u"&&(this.focusedItem=this.items.length-1);const e=this.focusedItem;let t;do this.focusedItem=(this.focusedItem+1)%this.items.length,t=this.items[this.focusedItem];while(this.focusedItem!==e&&!t.isEnabled());this.focusedItem===e&&!t.isEnabled()&&(this.focusedItem=void 0),this.updateFocus()}focusPrevious(){typeof this.focusedItem>"u"&&(this.focusedItem=0);const e=this.focusedItem;let t;do this.focusedItem=this.focusedItem-1,this.focusedItem<0&&(this.focusedItem=this.items.length-1),t=this.items[this.focusedItem];while(this.focusedItem!==e&&!t.isEnabled());this.focusedItem===e&&!t.isEnabled()&&(this.focusedItem=void 0),this.updateFocus(!0)}updateFocus(e){typeof this.focusedItem>"u"&&this.actionsList.focus();for(let t=0;t<this.items.length;t++){const n=this.items[t];t===this.focusedItem?$s(n.isEnabled)&&(n.isEnabled()&&$s(n.focus)?n.focus(e):this.actionsList.focus()):$s(n.blur)&&n.blur()}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.items[this.focusedItem];if(t instanceof na){const r=t._context===null||t._context===void 0?e:t._context;this.run(t._action,r)}}cancel(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this._onDidCancel.fire()}run(e,t){return this._actionRunner.run(e,t)}dispose(){ye(this.items),this.items=[],S2(this.getContainer()),super.dispose()}}class c6{constructor(){this.actionBarContributorConstructors=[],this.actionBarContributorInstances=Object.create(null)}setInstantiationService(e){for(this.instantiationService=e;this.actionBarContributorConstructors.length>0;){let t=this.actionBarContributorConstructors.shift();this.createActionBarContributor(t.scope,t.ctor)}}createActionBarContributor(e,t){const r=this.instantiationService.createInstance(t);let n=this.actionBarContributorInstances[e];n||(n=this.actionBarContributorInstances[e]=[]),n.push(r)}getContributors(e){return this.actionBarContributorInstances[e]||[]}getActionBarActionsForContext(e,t){let r=[];return this.getContributors(e).forEach(n=>{n.hasActions(t)&&r.push(...n.getActions(t))}),r}getSecondaryActionBarActionsForContext(e,t){let r=[];return this.getContributors(e).forEach(n=>{n.hasSecondaryActions(t)&&r.push(...n.getSecondaryActions(t))}),r}getActionItemForContext(e,t,r){let n=this.getContributors(e);for(let s=0;s<n.length;s++){let a=n[s].getActionItem(t,r);if(a)return a}return null}registerActionBarContributor(e,t){this.instantiationService?this.createActionBarContributor(e,t):this.actionBarContributorConstructors.push({scope:e,ctor:t})}getActionBarContributors(e){return this.getContributors(e).slice(0)}}Qe.add(pt.Actionbar,new c6);function d6(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}class f6{constructor(){this._onDidChangeSchema=new ve,this.onDidChangeSchema=this._onDidChangeSchema.event,this.schemasById={}}registerSchema(e,t){this.schemasById[d6(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}}const M2=new f6;Qe.add(pt.JSONContribution,M2);const Ks={properties:{},patternProperties:{}},dg={properties:{},patternProperties:{}},nf={properties:{},patternProperties:{}},sf={properties:{},patternProperties:{}},mu="vscode://schemas/settings/chart";class p6{constructor(){this.overrideIdentifiers=[],this._onDidSchemaChange=new ve,this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidRegisterConfiguration=new ve,this.onDidRegisterConfiguration=this._onDidRegisterConfiguration.event,this.configurationContributors=[],this.editorConfigurationSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting"},this.configurationProperties={},this.excludedConfigurationProperties={},this.computeOverridePropertyPattern(),M2.registerSchema(mu,this.editorConfigurationSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],[],t)}registerConfigurations(e,t,r=!0){const n=this.toConfiguration(t);n&&e.push(n);const s=[];e.forEach(o=>{s.push(...this.validateAndRegisterProperties(o,r)),this.configurationContributors.push(o),this.registerJSONConfiguration(o),this.updateSchemaForOverrideSettingsConfiguration(o)}),this._onDidRegisterConfiguration.fire(s)}notifyConfigurationSchemaUpdated(e){Qe.as(pt.JSONContribution).notifySchemaChanged(mu)}registerOverrideIdentifiers(e){this.overrideIdentifiers.push(...e),this.updateOverridePropertyPatternKey()}toConfiguration(e){const t={id:"defaultOverrides",title:de.localize("defaultConfigurations.title","Default Configuration Overrides"),properties:{}};for(const r of e)for(const n in r.defaults){const s=r.defaults[n];Y0.test(n)&&typeof s=="object"&&(t.properties[n]={type:"object",default:s,description:de.localize("overrideSettings.description","Configure editor settings to be overridden for {0} language.",n),$ref:mu})}return Object.keys(t.properties).length?t:null}validateAndRegisterProperties(e,t=!0,r=Fa.WINDOW,n=!1){r=e.scope!==void 0&&e.scope!==null?e.scope:r,n=e.overridable||n;let s=[],o=e.properties;if(o)for(let l in o){let c;if(t&&(c=m6(l))){console.warn(c),delete o[l];continue}let h=o[l],u=h.default;if(Tr(u)&&(h.default=g6(h.type)),n&&(h.overridable=!0),h.scope===void 0&&(h.scope=r),o[l].hasOwnProperty("included")&&!o[l].included){this.excludedConfigurationProperties[l]=o[l],delete o[l];continue}else this.configurationProperties[l]=o[l];s.push(l)}let a=e.allOf;if(a)for(let l of a)s.push(...this.validateAndRegisterProperties(l,t,r,n));return s}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}registerJSONConfiguration(e){function t(r){let n=r.properties;if(n)for(let o in n)switch(Ks.properties[o]=n[o],n[o].scope){case Fa.APPLICATION:dg.properties[o]=n[o];break;case Fa.WINDOW:nf.properties[o]=n[o];break;case Fa.RESOURCE:sf.properties[o]=n[o];break}let s=r.allOf;s&&s.forEach(t)}t(e),this._onDidSchemaChange.fire()}updateSchemaForOverrideSettingsConfiguration(e){e.id!==HT&&(this.update(e),Qe.as(pt.JSONContribution).registerSchema(mu,this.editorConfigurationSchema))}updateOverridePropertyPatternKey(){let e=Ks.patternProperties[this.overridePropertyPattern];e||(e={type:"object",description:de.localize("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:"Unknown Identifier. Use language identifiers",$ref:mu}),delete Ks.patternProperties[this.overridePropertyPattern],delete dg.patternProperties[this.overridePropertyPattern],delete nf.patternProperties[this.overridePropertyPattern],delete sf.patternProperties[this.overridePropertyPattern],this.computeOverridePropertyPattern(),Ks.patternProperties[this.overridePropertyPattern]=e,dg.patternProperties[this.overridePropertyPattern]=e,nf.patternProperties[this.overridePropertyPattern]=e,sf.patternProperties[this.overridePropertyPattern]=e,this._onDidSchemaChange.fire()}update(e){let t=e.properties;if(t)for(let n in t)t[n].overridable&&(this.editorConfigurationSchema.properties[n]=this.getConfigurationProperties()[n]);let r=e.allOf;r&&r.forEach(n=>this.update(n))}computeOverridePropertyPattern(){this.overridePropertyPattern=this.overrideIdentifiers.length?zT.replace("${0}",this.overrideIdentifiers.map(e=>t2(e,!1).source).join("|")):C2}}function m6(i){return Y0.test(i)?de.localize("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):N2.getConfigurationProperties()[i]!==void 0?de.localize("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):null}function g6(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const N2=new p6;Qe.add(pt.Configuration,N2);class Uh{constructor(){this.WEIGHT={chartCore:(e=0)=>0+e,chartContrib:(e=0)=>100+e,workbenchContrib:(e=0)=>200+e,builtinExtension:(e=0)=>300+e,externalExtension:(e=0)=>400+e},this._keybindings=[],this._keybindingsSorted=!0}static bindToCurrentPlatform(e){if(Ft===yt.Windows){if(e&&e.win)return e.win}else if(Ft===yt.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}static bindToCurrentPlatform2(e){if(Ft===yt.Windows){if(e&&e.win)return e.win}else if(Ft===yt.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e,t=0){let r=Uh.bindToCurrentPlatform(e);if(r&&r.primary&&this._registerDefaultKeybinding(Bx(r.primary,Ft),e.id,e.weight,0,e.when,t),r&&Array.isArray(r.secondary))for(let n=0,s=r.secondary.length;n<s;n++){const o=r.secondary[n];this._registerDefaultKeybinding(Bx(o,Ft),e.id,e.weight,-n-1,e.when,t)}}registerKeybindingRule2(e,t=0){let r=Uh.bindToCurrentPlatform2(e);r&&r.primary&&this._registerDefaultKeybinding(r.primary,e.id,e.weight,0,e.when,t)}registerCommandAndKeybindingRule(e,t=0){this.registerKeybindingRule(e,t),Rt.registerCommand(e)}static _mightProduceChar(e){return e>=E.KEY_0&&e<=E.KEY_9||e>=E.KEY_A&&e<=E.KEY_Z?!0:e===E.US_SEMICOLON||e===E.US_EQUAL||e===E.US_COMMA||e===E.US_MINUS||e===E.US_DOT||e===E.US_SLASH||e===E.US_BACKTICK||e===E.ABNT_C1||e===E.ABNT_C2||e===E.US_OPEN_SQUARE_BRACKET||e===E.US_BACKSLASH||e===E.US_CLOSE_SQUARE_BRACKET||e===E.US_QUOTE||e===E.OEM_8||e===E.OEM_102}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&Uh._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,r,n,s,o){o===0&&Ft===yt.Windows&&(e.type===yc.Chord?this._assertNoCtrlAlt(e.firstPart,t):this._assertNoCtrlAlt(e,t)),this._keybindings.push({keybinding:e,command:t,commandArgs:void 0,when:s,weight1:r,weight2:n}),this._keybindingsSorted=!1}getDefaultKeybindings(){return this._keybindingsSorted||(this._keybindings.sort(v6),this._keybindingsSorted=!0),this._keybindings.slice(0)}}const Er=new Uh,_6={ChartModes:"platform.keybindingsRegistry"};Qe.add(_6.ChartModes,Er);function v6(i,e){return i.weight1!==e.weight1?i.weight1-e.weight1:i.command<e.command?-1:i.command>e.command?1:i.weight2-e.weight2}Qe.add(pt.WorkbenchActions,new class{registerWorkbenchAction(i,e,t){return this._registerWorkbenchCommandFromAction(i,e,t)}_registerWorkbenchCommandFromAction(i,e,t){let r=[];r.push(Rt.registerCommand(i.id,this._createCommandHandler(i)));const n=i.keybindingContext,s=typeof i.keybindingWeight>"u"?Er.WEIGHT.workbenchContrib():i.keybindingWeight,o=i.keybindings;return Er.registerKeybindingRule({id:i.id,weight:s,when:n,primary:o&&o.primary,secondary:o&&o.secondary,win:o&&o.win,mac:o&&o.mac,linux:o&&o.linux}),H0(r)}_createCommandHandler(i){return(e,t)=>{const r=e.get(Nt),n=e.get(X0);Promise.resolve(this._triggerAndDisposeAction(r,n,i,t)).then(null,s=>{console.error(s)})}}_triggerAndDisposeAction(i,e,t,r){return e.when(Ti.Running).then(()=>{const n=i.createInstance(t.syncDescriptor);try{if(n.label=t.label||n.label,!n.enabled){n.dispose();return}return Promise.resolve(n.run(void 0)).then(()=>{n.dispose()},s=>(n.dispose(),Promise.reject(s)))}catch(s){return n.dispose(),Promise.reject(s)}})}});class y6{constructor(){this.toBeInstantiated=new Map,this.toDispose=[],this.isDisposed=!1}registerWorkbenchContribution(e,t=Ti.Starting){if(this.instantiationService&&this.lifecycleService&&this.lifecycleService.phase>=t)this.toDispose.push(this.instantiationService.createInstance(e));else{let r=this.toBeInstantiated.get(t);r||(r=[],this.toBeInstantiated.set(t,r)),r.push(e)}}start(e,t){this.instantiationService=e,this.lifecycleService=t,this.isDisposed=!1,[Ti.Starting,Ti.Restoring,Ti.Running,Ti.Eventually].forEach(r=>{this.instantiateByPhase(e,t,r)})}reset(){this.instantiationService=null,this.lifecycleService=null,ye(this.toDispose),this.toDispose.length=0,this.isDisposed=!0}instantiateByPhase(e,t,r){this.isDisposed||(t.phase>=r?this.doInstantiateByPhase(e,r):t.when(r).then(()=>{this.doInstantiateByPhase(e,r)}))}doInstantiateByPhase(e,t){let r=this.toBeInstantiated.get(t);r&&r.forEach(n=>{this.toDispose.push(e.createInstance(n))})}}Qe.add(pt.Workbench,new y6);var cl=(i=>(i[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT",i))(cl||{});class dy{constructor(e,t,r){this.syncDescriptor=OT(e),this.alignment=t||0,this.priority=r||0}}class x6{constructor(){this._items=[]}get items(){return this._items}registerItem(e){this._items.push(e)}}Qe.add(pt.Toolbar,new x6);class Kh{static has(e){return new Lo(e)}static equals(e,t){return new vf(e,t)}static notEquals(e,t){return new yf(e,t)}static regex(e,t){return new xf(e,t)}static not(e){return new dl(e)}static and(...e){return new ns(e)}static deserialize(e){if(!e)return null;let t=e.split("&&");return new ns(t.map(n=>this._deserializeOne(n))).normalize()}static _deserializeOne(e){if(e=e.trim(),e.indexOf("!=")>=0){let t=e.split("!=");return new yf(t[0].trim(),this._deserializeValue(t[1]))}if(e.indexOf("==")>=0){let t=e.split("==");return new vf(t[0].trim(),this._deserializeValue(t[1]))}if(e.indexOf("=~")>=0){let t=e.split("=~");return new xf(t[0].trim(),this._deserializeRegexValue(t[1]))}return/^\!\s*/.test(e)?new dl(e.substr(1).trim()):new Lo(e)}static _deserializeValue(e){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let t=/^'([^']*)'$/.exec(e);return t?t[1].trim():e}static _deserializeRegexValue(e){if(qS(e))return console.warn("missing regexp-value for =~-expression"),null;let t=e.indexOf("/"),r=e.lastIndexOf("/");if(t===r||t<0)return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null;let n=e.slice(t+1,r),s=e[r+1]==="i"?"i":"";try{return new RegExp(n,s)}catch(o){return console.warn(`bad regexp-value '${e}', parse error: ${o}`),null}}}function w6(i,e){let t=i.getType(),r=e.getType();if(t!==r)return t-r;switch(t){case 1:return i.cmp(e);case 2:return i.cmp(e);case 3:return i.cmp(e);case 4:return i.cmp(e);case 6:return i.cmp(e);default:throw new Error("Unknown ContextKeyExpr!")}}class Lo{constructor(e){this.key=e}getType(){return 1}cmp(e){return this.key<e.key?-1:this.key>e.key?1:0}equals(e){return e instanceof Lo?this.key===e.key:!1}evaluate(e){return!!e.getValue(this.key)}normalize(){return this}serialize(){return this.key}keys(){return[this.key]}}class vf{constructor(e,t){this.key=e,this.value=t}getType(){return 3}cmp(e){return this.key<e.key?-1:this.key>e.key?1:this.value<e.value?-1:this.value>e.value?1:0}equals(e){return e instanceof vf?this.key===e.key&&this.value===e.value:!1}evaluate(e){return e.getValue(this.key)==this.value}normalize(){return typeof this.value=="boolean"?this.value?new Lo(this.key):new dl(this.key):this}serialize(){return typeof this.value=="boolean"?this.normalize().serialize():this.key+" == '"+this.value+"'"}keys(){return[this.key]}}class yf{constructor(e,t){this.key=e,this.value=t}getType(){return 4}cmp(e){return this.key<e.key?-1:this.key>e.key?1:this.value<e.value?-1:this.value>e.value?1:0}equals(e){return e instanceof yf?this.key===e.key&&this.value===e.value:!1}evaluate(e){return e.getValue(this.key)!=this.value}normalize(){return typeof this.value=="boolean"?this.value?new dl(this.key):new Lo(this.key):this}serialize(){return typeof this.value=="boolean"?this.normalize().serialize():this.key+" != '"+this.value+"'"}keys(){return[this.key]}}class dl{constructor(e){this.key=e}getType(){return 2}cmp(e){return this.key<e.key?-1:this.key>e.key?1:0}equals(e){return e instanceof dl?this.key===e.key:!1}evaluate(e){return!e.getValue(this.key)}normalize(){return this}serialize(){return"!"+this.key}keys(){return[this.key]}}class xf{constructor(e,t){this.key=e,this.regexp=t}getType(){return 6}cmp(e){if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:void 0;return t<e.regexp.source?-1:t>e.regexp.source?1:0}equals(e){if(e instanceof xf){const t=this.regexp?this.regexp.source:void 0;return this.key===e.key&&t===e.regexp.source}return!1}evaluate(e){return this.regexp?this.regexp.test(e.getValue(this.key)):!1}normalize(){return this}serialize(){return`${this.key} =~ /${this.regexp?this.regexp.source:"<invalid>"}/${this.regexp.ignoreCase?"i":""}`}keys(){return[this.key]}}class ns{constructor(e){this.expr=ns._normalizeArr(e)}getType(){return 5}equals(e){if(e instanceof ns){if(this.expr.length!==e.expr.length)return!1;for(let t=0,r=this.expr.length;t<r;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}evaluate(e){for(let t=0,r=this.expr.length;t<r;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e){let t=[];if(e){for(let r=0,n=e.length;r<n;r++){let s=e[r];if(s&&(s=s.normalize(),!!s)){if(s instanceof ns){t=t.concat(s.expr);continue}t.push(s)}}t.sort(w6)}return t}normalize(){return this.expr.length===0?null:this.expr.length===1?this.expr[0]:this}serialize(){return this.expr.length===0?"":this.expr.length===1?this.normalize().serialize():this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}}class sr extends Lo{constructor(e,t){super(e),this._defaultValue=t}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return Kh.not(this.key)}isEqualTo(e){return Kh.equals(this.key,e)}notEqualsTo(e){return Kh.notEquals(this.key,e)}}const mr=Et("contextKeyService"),b6="setContext",Ue=Et("chartsService");class S6{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._description=e.description}toCommandAndKeybindingRule(e){const t=this._kbOpts||{primary:0};let r=t.kbExpr;this.precondition&&(r?r=Kh.and(r,this.precondition):r=this.precondition);const n=typeof t.weight=="number"?t.weight:e;return{id:this.id,handler:(s,o)=>this.runCommand(s,o),weight:n,when:r,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac,description:this._description}}}class ko extends S6{static bindToContribution(e){return class extends ko{constructor(r){super(r),this._callback=r.handler}runChartCommand(r,n,s){e(n)&&this._callback(e(n))}}}runCommand(e,t){const r=e.get(Ue);let n=r.currentChart.currentActivePart||r.currentChart.currentPart;if(n)return n.invokeWithinContext(s=>{if(s.get(mr).contextMatchesRules(this.precondition))return this.runChartCommand(s,n,t)})}}class R2 extends ko{constructor(e){super(e),this.label=e.label,this.alias=e.alias}runChartCommand(e,t,r){return this.run(e,t,r||{})}}function wf(i){return En.INSTANCE.registerChartCommand(i),i}function L2(i){En.INSTANCE.registerChartAction(new i)}function fy(i){En.INSTANCE.registerChartContribution(i)}var bf;(i=>{function e(n){return En.INSTANCE.getChartCommand(n)}i.getChartCommand=e;function t(){return En.INSTANCE.getChartActions()}i.getChartActions=t;function r(){return En.INSTANCE.getChartContributions()}i.getChartContributions=r})(bf||(bf={}));const E6={ChartCommonContributions:"chart.contributions"},p0=class p0{constructor(){this.chartContributions=[],this.chartActions=[],this.chartCommands=Object.create(null)}registerChartContribution(e){this.chartContributions.push(e)}registerChartAction(e){Er.registerCommandAndKeybindingRule(e.toCommandAndKeybindingRule(Er.WEIGHT.chartContrib())),this.chartActions.push(e)}getChartContributions(){return this.chartContributions.slice(0)}getChartActions(){return this.chartActions.slice(0)}registerChartCommand(e){Er.registerCommandAndKeybindingRule(e.toCommandAndKeybindingRule(Er.WEIGHT.chartContrib())),this.chartCommands[e.id]=e}getChartCommand(e){return this.chartCommands[e]||null}};p0.INSTANCE=new p0;let En=p0;Qe.add(E6.ChartCommonContributions,En.INSTANCE);var jt;(i=>{i.focus=new sr("chartFocus",!1),i.inTransformMode=new sr("chartTransform",!1),i.readOnly=new sr("chartReadonly",!1),i.editable=i.readOnly.toNegated(),i.hasNonEmptySelection=new sr("chartHasSelection",!1),i.hasMultipleSelections=new sr("chartHasMultipleSelections",!1),i.hasSeriesSelection=new sr("chartHasSeriesSelection",!1),i.hasDrawingSelection=new sr("chartHasDrawingSelection",!1),i.hasOrderSelection=new sr("chartHasOrderSelection",!1)})(jt||(jt={}));var ar={},Il={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(){this.sizeHint=0,this.minSize=0,this.maxSize=1/0,this.stretch=1,this.size=0,this.done=!1}return t}();i.BoxSizer=e,function(t){function r(a,l){var c=a.length;if(c===0)return l;for(var h=0,u=0,p=0,d=0,f=0,m=0;m<c;++m){var g=a[m],_=g.minSize,v=g.maxSize,y=g.sizeHint;g.done=!1,g.size=Math.max(_,Math.min(y,v)),p+=g.size,h+=_,u+=v,g.stretch>0&&(d+=g.stretch,f++)}if(l===p)return 0;if(l<=h){for(var m=0;m<c;++m){var g=a[m];g.size=g.minSize}return l-h}if(l>=u){for(var m=0;m<c;++m){var g=a[m];g.size=g.maxSize}return l-u}var x=.01,A=c;if(l<p){for(var w=p-l;f>0&&w>x;)for(var D=w,b=d,m=0;m<c;++m){var g=a[m];if(!(g.done||g.stretch===0)){var S=g.stretch*D/b;g.size-S<=g.minSize?(w-=g.size-g.minSize,d-=g.stretch,g.size=g.minSize,g.done=!0,A--,f--):(w-=S,g.size-=S)}}for(;A>0&&w>x;)for(var S=w/A,m=0;m<c;++m){var g=a[m];g.done||(g.size-S<=g.minSize?(w-=g.size-g.minSize,g.size=g.minSize,g.done=!0,A--):(w-=S,g.size-=S))}}else{for(var w=l-p;f>0&&w>x;)for(var D=w,b=d,m=0;m<c;++m){var g=a[m];if(!(g.done||g.stretch===0)){var S=g.stretch*D/b;g.size+S>=g.maxSize?(w-=g.maxSize-g.size,d-=g.stretch,g.size=g.maxSize,g.done=!0,A--,f--):(w-=S,g.size+=S)}}for(;A>0&&w>x;)for(var S=w/A,m=0;m<c;++m){var g=a[m];g.done||(g.size+S>=g.maxSize?(w-=g.maxSize-g.size,g.size=g.maxSize,g.done=!0,A--):(w-=S,g.size+=S))}}return 0}t.calc=r;function n(a,l,c){a.length===0||c===0||(c>0?s(a,l,c):o(a,l,-c))}t.adjust=n;function s(a,l,c){for(var h=0,u=0;u<=l;++u){var p=a[u];h+=p.maxSize-p.size}for(var d=0,u=l+1,f=a.length;u<f;++u){var p=a[u];d+=p.size-p.minSize}c=Math.min(c,h,d);for(var m=c,u=l;u>=0&&m>0;--u){var p=a[u],g=p.maxSize-p.size;g>=m?(p.sizeHint=p.size+m,m=0):(p.sizeHint=p.size+g,m-=g)}for(var _=c,u=l+1,f=a.length;u<f&&_>0;++u){var p=a[u],g=p.size-p.minSize;g>=_?(p.sizeHint=p.size-_,_=0):(p.sizeHint=p.size-g,_-=g)}}function o(a,l,c){for(var h=0,u=l+1,p=a.length;u<p;++u){var d=a[u];h+=d.maxSize-d.size}for(var f=0,u=0;u<=l;++u){var d=a[u];f+=d.size-d.minSize}c=Math.min(c,h,f);for(var m=c,u=l+1,p=a.length;u<p&&m>0;++u){var d=a[u],g=d.maxSize-d.size;g>=m?(d.sizeHint=d.size+m,m=0):(d.sizeHint=d.size+g,m-=g)}for(var _=c,u=l;u>=0&&_>0;--u){var d=a[u],g=d.size-d.minSize;g>=_?(d.sizeHint=d.size-_,_=0):(d.sizeHint=d.size-g,_-=g)}}}(i.BoxEngine||(i.BoxEngine={}))})(Il);var tp={},mt={},k2={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),function(e){function t(b,S,T,C){T===void 0&&(T=0),C===void 0&&(C=-1);var I=b.length;if(I===0)return-1;T<0?T=Math.max(0,T+I):T=Math.min(T,I-1),C<0?C=Math.max(0,C+I):C=Math.min(C,I-1);var M;C<T?M=C+1+(I-T):M=C-T+1;for(var k=0;k<M;++k){var H=(T+k)%I;if(b[H]===S)return H}return-1}e.firstIndexOf=t;function r(b,S,T,C){T===void 0&&(T=-1),C===void 0&&(C=0);var I=b.length;if(I===0)return-1;T<0?T=Math.max(0,T+I):T=Math.min(T,I-1),C<0?C=Math.max(0,C+I):C=Math.min(C,I-1);var M;T<C?M=T+1+(I-C):M=T-C+1;for(var k=0;k<M;++k){var H=(T-k+I)%I;if(b[H]===S)return H}return-1}e.lastIndexOf=r;function n(b,S,T,C){T===void 0&&(T=0),C===void 0&&(C=-1);var I=b.length;if(I===0)return-1;T<0?T=Math.max(0,T+I):T=Math.min(T,I-1),C<0?C=Math.max(0,C+I):C=Math.min(C,I-1);var M;C<T?M=C+1+(I-T):M=C-T+1;for(var k=0;k<M;++k){var H=(T+k)%I;if(S(b[H],H))return H}return-1}e.findFirstIndex=n;function s(b,S,T,C){T===void 0&&(T=-1),C===void 0&&(C=0);var I=b.length;if(I===0)return-1;T<0?T=Math.max(0,T+I):T=Math.min(T,I-1),C<0?C=Math.max(0,C+I):C=Math.min(C,I-1);var M;T<C?M=T+1+(I-C):M=T-C+1;for(var k=0;k<M;++k){var H=(T-k+I)%I;if(S(b[H],H))return H}return-1}e.findLastIndex=s;function o(b,S,T,C){T===void 0&&(T=0),C===void 0&&(C=-1);var I=n(b,S,T,C);return I!==-1?b[I]:void 0}e.findFirstValue=o;function a(b,S,T,C){T===void 0&&(T=-1),C===void 0&&(C=0);var I=s(b,S,T,C);return I!==-1?b[I]:void 0}e.findLastValue=a;function l(b,S,T,C,I){C===void 0&&(C=0),I===void 0&&(I=-1);var M=b.length;if(M===0)return 0;C<0?C=Math.max(0,C+M):C=Math.min(C,M-1),I<0?I=Math.max(0,I+M):I=Math.min(I,M-1);for(var k=C,H=I-C+1;H>0;){var Y=H>>1,O=k+Y;T(b[O],S)<0?(k=O+1,H-=Y+1):H=Y}return k}e.lowerBound=l;function c(b,S,T,C,I){C===void 0&&(C=0),I===void 0&&(I=-1);var M=b.length;if(M===0)return 0;C<0?C=Math.max(0,C+M):C=Math.min(C,M-1),I<0?I=Math.max(0,I+M):I=Math.min(I,M-1);for(var k=C,H=I-C+1;H>0;){var Y=H>>1,O=k+Y;T(b[O],S)>0?H=Y:(k=O+1,H-=Y+1)}return k}e.upperBound=c;function h(b,S,T){if(b===S)return!0;if(b.length!==S.length)return!1;for(var C=0,I=b.length;C<I;++C)if(T?!T(b[C],S[C]):b[C]!==S[C])return!1;return!0}e.shallowEqual=h;function u(b,S){S===void 0&&(S={});var T=S.start,C=S.stop,I=S.step;if(I===void 0&&(I=1),I===0)throw new Error("Slice `step` cannot be zero.");var M=b.length;T===void 0?T=I<0?M-1:0:T<0?T=Math.max(T+M,I<0?-1:0):T>=M&&(T=I<0?M-1:M),C===void 0?C=I<0?-1:M:C<0?C=Math.max(C+M,I<0?-1:0):C>=M&&(C=I<0?M-1:M);var k;I<0&&C>=T||I>0&&T>=C?k=0:I<0?k=Math.floor((C-T+1)/I+1):k=Math.floor((C-T-1)/I+1);for(var H=[],Y=0;Y<k;++Y)H[Y]=b[T+Y*I];return H}e.slice=u;function p(b,S,T){var C=b.length;if(!(C<=1)&&(S<0?S=Math.max(0,S+C):S=Math.min(S,C-1),T<0?T=Math.max(0,T+C):T=Math.min(T,C-1),S!==T)){for(var I=b[S],M=S<T?1:-1,k=S;k!==T;k+=M)b[k]=b[k+M];b[T]=I}}e.move=p;function d(b,S,T){S===void 0&&(S=0),T===void 0&&(T=-1);var C=b.length;if(!(C<=1))for(S<0?S=Math.max(0,S+C):S=Math.min(S,C-1),T<0?T=Math.max(0,T+C):T=Math.min(T,C-1);S<T;){var I=b[S],M=b[T];b[S++]=M,b[T--]=I}}e.reverse=d;function f(b,S,T,C){T===void 0&&(T=0),C===void 0&&(C=-1);var I=b.length;if(!(I<=1)&&(T<0?T=Math.max(0,T+I):T=Math.min(T,I-1),C<0?C=Math.max(0,C+I):C=Math.min(C,I-1),!(T>=C))){var M=C-T+1;if(S>0?S=S%M:S<0&&(S=(S%M+M)%M),S!==0){var k=T+S;d(b,T,k-1),d(b,k,C),d(b,T,C)}}}e.rotate=f;function m(b,S,T,C){T===void 0&&(T=0),C===void 0&&(C=-1);var I=b.length;if(I!==0){T<0?T=Math.max(0,T+I):T=Math.min(T,I-1),C<0?C=Math.max(0,C+I):C=Math.min(C,I-1);var M;C<T?M=C+1+(I-T):M=C-T+1;for(var k=0;k<M;++k)b[(T+k)%I]=S}}e.fill=m;function g(b,S,T){var C=b.length;S<0?S=Math.max(0,S+C):S=Math.min(S,C);for(var I=C;I>S;--I)b[I]=b[I-1];b[S]=T}e.insert=g;function _(b,S){var T=b.length;if(S<0&&(S+=T),!(S<0||S>=T)){for(var C=b[S],I=S+1;I<T;++I)b[I-1]=b[I];return b.length=T-1,C}}e.removeAt=_;function v(b,S,T,C){T===void 0&&(T=0),C===void 0&&(C=-1);var I=t(b,S,T,C);return I!==-1&&_(b,I),I}e.removeFirstOf=v;function y(b,S,T,C){T===void 0&&(T=-1),C===void 0&&(C=0);var I=r(b,S,T,C);return I!==-1&&_(b,I),I}e.removeLastOf=y;function x(b,S,T,C){T===void 0&&(T=0),C===void 0&&(C=-1);var I=b.length;if(I===0)return 0;T<0?T=Math.max(0,T+I):T=Math.min(T,I-1),C<0?C=Math.max(0,C+I):C=Math.min(C,I-1);for(var M=0,k=0;k<I;++k)T<=C&&k>=T&&k<=C&&b[k]===S||C<T&&(k<=C||k>=T)&&b[k]===S?M++:M>0&&(b[k-M]=b[k]);return M>0&&(b.length=I-M),M}e.removeAllOf=x;function A(b,S,T,C){T===void 0&&(T=0),C===void 0&&(C=-1);var I,M=n(b,S,T,C);return M!==-1&&(I=_(b,M)),{index:M,value:I}}e.removeFirstWhere=A;function w(b,S,T,C){T===void 0&&(T=-1),C===void 0&&(C=0);var I,M=s(b,S,T,C);return M!==-1&&(I=_(b,M)),{index:M,value:I}}e.removeLastWhere=w;function D(b,S,T,C){T===void 0&&(T=0),C===void 0&&(C=-1);var I=b.length;if(I===0)return 0;T<0?T=Math.max(0,T+I):T=Math.min(T,I-1),C<0?C=Math.max(0,C+I):C=Math.min(C,I-1);for(var M=0,k=0;k<I;++k)T<=C&&k>=T&&k<=C&&S(b[k],k)||C<T&&(k<=C||k>=T)&&S(b[k],k)?M++:M>0&&(b[k-M]=b[k]);return M>0&&(b.length=I-M),M}e.removeAllWhere=D}(i.ArrayExt||(i.ArrayExt={}))})(k2);var ip={},st={};Object.defineProperty(st,"__esModule",{value:!0});function Ol(i){var e;return typeof i.iter=="function"?e=i.iter():e=new B2(i),e}st.iter=Ol;function A6(i){return new F2(i)}st.iterKeys=A6;function D6(i){return new U2(i)}st.iterValues=D6;function T6(i){return new K2(i)}st.iterItems=T6;function C6(i){return new H2(i)}st.iterFn=C6;function P6(i,e){for(var t=0,r=Ol(i),n;(n=r.next())!==void 0;)if(e(n,t++)===!1)return}st.each=P6;function I6(i,e){for(var t=0,r=Ol(i),n;(n=r.next())!==void 0;)if(!e(n,t++))return!1;return!0}st.every=I6;function O6(i,e){for(var t=0,r=Ol(i),n;(n=r.next())!==void 0;)if(e(n,t++))return!0;return!1}st.some=O6;function M6(i){for(var e=0,t=[],r=Ol(i),n;(n=r.next())!==void 0;)t[e++]=n;return t}st.toArray=M6;function N6(i){for(var e=Ol(i),t,r={};(t=e.next())!==void 0;)r[t[0]]=t[1];return r}st.toObject=N6;var B2=function(){function i(e){this._index=0,this._source=e}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source);return e._index=this._index,e},i.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},i}();st.ArrayIterator=B2;var F2=function(){function i(e,t){t===void 0&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source,this._keys);return e._index=this._index,e},i.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},i}();st.KeyIterator=F2;var U2=function(){function i(e,t){t===void 0&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source,this._keys);return e._index=this._index,e},i.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},i}();st.ValueIterator=U2;var K2=function(){function i(e,t){t===void 0&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source,this._keys);return e._index=this._index,e},i.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},i}();st.ItemIterator=K2;var H2=function(){function i(e){this._fn=e}return i.prototype.iter=function(){return this},i.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},i.prototype.next=function(){return this._fn.call(void 0)},i}();st.FnIterator=H2;Object.defineProperty(ip,"__esModule",{value:!0});var Wx=st;function R6(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return new z2(Wx.iter(i.map(Wx.iter)))}ip.chain=R6;var z2=function(){function i(e){this._cloned=!1,this._source=e,this._active=void 0}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source.clone());return e._active=this._active&&this._active.clone(),e._cloned=!0,this._cloned=!0,e},i.prototype.next=function(){if(this._active===void 0){var e=this._source.next();if(e===void 0)return;this._active=this._cloned?e.clone():e}var t=this._active.next();return t!==void 0?t:(this._active=void 0,this.next())},i}();ip.ChainIterator=z2;var rp={};Object.defineProperty(rp,"__esModule",{value:!0});function L6(){return new j2}rp.empty=L6;var j2=function(){function i(){}return i.prototype.iter=function(){return this},i.prototype.clone=function(){return new i},i.prototype.next=function(){},i}();rp.EmptyIterator=j2;var np={};Object.defineProperty(np,"__esModule",{value:!0});var k6=st;function B6(i,e){return e===void 0&&(e=0),new $2(k6.iter(i),e)}np.enumerate=B6;var $2=function(){function i(e,t){this._source=e,this._index=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){return new i(this._source.clone(),this._index)},i.prototype.next=function(){var e=this._source.next();if(e!==void 0)return[this._index++,e]},i}();np.EnumerateIterator=$2;var sp={};Object.defineProperty(sp,"__esModule",{value:!0});var F6=st;function U6(i,e){return new V2(F6.iter(i),e)}sp.filter=U6;var V2=function(){function i(e,t){this._index=0,this._source=e,this._fn=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source.clone(),this._fn);return e._index=this._index,e},i.prototype.next=function(){for(var e=this._fn,t=this._source,r;(r=t.next())!==void 0;)if(e(r,this._index++))return r},i}();sp.FilterIterator=V2;var sa={};Object.defineProperty(sa,"__esModule",{value:!0});var Sc=st;function K6(i,e){for(var t=0,r=Sc.iter(i),n;(n=r.next())!==void 0;)if(e(n,t++))return n}sa.find=K6;function H6(i,e){for(var t=0,r=Sc.iter(i),n;(n=r.next())!==void 0;)if(e(n,t++))return t-1;return-1}sa.findIndex=H6;function z6(i,e){var t=Sc.iter(i),r=t.next();if(r!==void 0){for(var n=r;(r=t.next())!==void 0;)e(r,n)<0&&(n=r);return n}}sa.min=z6;function j6(i,e){var t=Sc.iter(i),r=t.next();if(r!==void 0){for(var n=r;(r=t.next())!==void 0;)e(r,n)>0&&(n=r);return n}}sa.max=j6;function $6(i,e){var t=Sc.iter(i),r=t.next();if(r!==void 0){for(var n=r,s=r;(r=t.next())!==void 0;)e(r,n)<0?n=r:e(r,s)>0&&(s=r);return[n,s]}}sa.minmax=$6;var op={};Object.defineProperty(op,"__esModule",{value:!0});var V6=st;function W6(i,e){return new W2(V6.iter(i),e)}op.map=W6;var W2=function(){function i(e,t){this._index=0,this._source=e,this._fn=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source.clone(),this._fn);return e._index=this._index,e},i.prototype.next=function(){var e=this._source.next();if(e!==void 0)return this._fn.call(void 0,e,this._index++)},i}();op.MapIterator=W2;var ap={};Object.defineProperty(ap,"__esModule",{value:!0});function G6(i,e,t){return e===void 0?new of(0,i,1):t===void 0?new of(i,e,1):new of(i,e,t)}ap.range=G6;var of=function(){function i(e,t,r){this._index=0,this._start=e,this._stop=t,this._step=r,this._length=k_.rangeLength(e,t,r)}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._start,this._stop,this._step);return e._index=this._index,e},i.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},i}();ap.RangeIterator=of;var k_;(function(i){function e(t,r,n){return n===0?1/0:t>r&&n>0||t<r&&n<0?0:Math.ceil((r-t)/n)}i.rangeLength=e})(k_||(k_={}));var py={};Object.defineProperty(py,"__esModule",{value:!0});var Y6=st;function q6(i,e,t){var r=0,n=Y6.iter(i),s=n.next();if(s===void 0&&t===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(s===void 0)return t;var o=n.next();if(o===void 0&&t===void 0)return s;if(o===void 0)return e(t,s,r++);var a;t===void 0?a=e(s,o,r++):a=e(e(t,s,r++),o,r++);for(var l;(l=n.next())!==void 0;)a=e(a,l,r++);return a}py.reduce=q6;var Ec={};Object.defineProperty(Ec,"__esModule",{value:!0});function X6(i,e){return new my(i,e)}Ec.repeat=X6;function Z6(i){return new my(i,1)}Ec.once=Z6;var my=function(){function i(e,t){this._value=e,this._count=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){return new i(this._value,this._count)},i.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},i}();Ec.RepeatIterator=my;var lp={};Object.defineProperty(lp,"__esModule",{value:!0});function Q6(i){var e;return typeof i.retro=="function"?e=i.retro():e=new G2(i),e}lp.retro=Q6;var G2=function(){function i(e){this._source=e,this._index=e.length-1}return i.prototype.iter=function(){return this},i.prototype.clone=function(){var e=new i(this._source);return e._index=this._index,e},i.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},i}();lp.RetroArrayIterator=G2;var gy={};Object.defineProperty(gy,"__esModule",{value:!0});var J6=st;function e9(i){var e=[],t=new Set,r=new Map;return J6.each(i,n),r.forEach(function(o,a){s(a)}),e;function n(o){var a=o[0],l=o[1],c=r.get(l);c?c.push(a):r.set(l,[a])}function s(o){if(!t.has(o)){t.add(o);var a=r.get(o);a&&a.forEach(s),e.push(o)}}}gy.topologicSort=e9;var up={};Object.defineProperty(up,"__esModule",{value:!0});var t9=st;function i9(i,e){return new Y2(t9.iter(i),e)}up.stride=i9;var Y2=function(){function i(e,t){this._source=e,this._step=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){return new i(this._source.clone(),this._step)},i.prototype.next=function(){for(var e=this._source.next(),t=this._step-1;t>0;--t)this._source.next();return e},i}();up.StrideIterator=Y2;var q2={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),function(e){function t(a,l,c){c===void 0&&(c=0);for(var h=new Array(l.length),u=0,p=c,d=l.length;u<d;++u,++p){if(p=a.indexOf(l[u],p),p===-1)return null;h[u]=p}return h}e.findIndices=t;function r(a,l,c){c===void 0&&(c=0);var h=t(a,l,c);if(!h)return null;for(var u=0,p=0,d=h.length;p<d;++p){var f=h[p]-c;u+=f*f}return{score:u,indices:h}}e.matchSumOfSquares=r;function n(a,l,c){c===void 0&&(c=0);var h=t(a,l,c);if(!h)return null;for(var u=0,p=c-1,d=0,f=h.length;d<f;++d){var m=h[d];u+=m-p-1,p=m}return{score:u,indices:h}}e.matchSumOfDeltas=n;function s(a,l,c){for(var h=[],u=0,p=0,d=l.length;u<d;){for(var f=l[u],m=l[u];++u<d&&l[u]===m+1;)m++;p<f&&h.push(a.slice(p,f)),f<m+1&&h.push(c(a.slice(f,m+1))),p=m+1}return p<a.length&&h.push(a.slice(p)),h}e.highlight=s;function o(a,l){return a<l?-1:a>l?1:0}e.cmp=o}(i.StringExt||(i.StringExt={}))})(q2);var hp={};Object.defineProperty(hp,"__esModule",{value:!0});var r9=st;function n9(i,e){return new X2(r9.iter(i),e)}hp.take=n9;var X2=function(){function i(e,t){this._source=e,this._count=t}return i.prototype.iter=function(){return this},i.prototype.clone=function(){return new i(this._source.clone(),this._count)},i.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(e!==void 0)return this._count--,e}},i}();hp.TakeIterator=X2;var cp={};Object.defineProperty(cp,"__esModule",{value:!0});var s9=st;function o9(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return new Z2(i.map(s9.iter))}cp.zip=o9;var Z2=function(){function i(e){this._source=e}return i.prototype.iter=function(){return this},i.prototype.clone=function(){return new i(this._source.map(function(e){return e.clone()}))},i.prototype.next=function(){for(var e=new Array(this._source.length),t=0,r=this._source.length;t<r;++t){var n=this._source[t].next();if(n===void 0)return;e[t]=n}return e},i}();cp.ZipIterator=Z2;(function(i){function e(t){for(var r in t)i.hasOwnProperty(r)||(i[r]=t[r])}Object.defineProperty(i,"__esModule",{value:!0}),e(k2),e(ip),e(rp),e(np),e(sp),e(sa),e(st),e(op),e(ap),e(py),e(Ec),e(lp),e(gy),e(up),e(q2),e(hp),e(cp)})(mt);var ai={},Q2={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),function(e){function t(r){var n=document.body,s=function(o){o.preventDefault(),o.stopPropagation(),o.clipboardData.setData("text",r),n.removeEventListener("copy",s,!0)};n.addEventListener("copy",s,!0),document.execCommand("copy")}e.copyText=t}(i.ClipboardExt||(i.ClipboardExt={}))})(Q2);var J2={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),function(e){function t(o){var a=window.getComputedStyle(o),l=parseFloat(a.borderTopWidth)||0,c=parseFloat(a.borderLeftWidth)||0,h=parseFloat(a.borderRightWidth)||0,u=parseFloat(a.borderBottomWidth)||0,p=parseFloat(a.paddingTop)||0,d=parseFloat(a.paddingLeft)||0,f=parseFloat(a.paddingRight)||0,m=parseFloat(a.paddingBottom)||0,g=c+d+f+h,_=l+p+m+u;return{borderTop:l,borderLeft:c,borderRight:h,borderBottom:u,paddingTop:p,paddingLeft:d,paddingRight:f,paddingBottom:m,horizontalSum:g,verticalSum:_}}e.boxSizing=t;function r(o){var a=window.getComputedStyle(o),l=parseFloat(a.minWidth)||0,c=parseFloat(a.minHeight)||0,h=parseFloat(a.maxWidth)||1/0,u=parseFloat(a.maxHeight)||1/0;return h=Math.max(l,h),u=Math.max(c,u),{minWidth:l,minHeight:c,maxWidth:h,maxHeight:u}}e.sizeLimits=r;function n(o,a,l){var c=o.getBoundingClientRect();return a>=c.left&&a<c.right&&l>=c.top&&l<c.bottom}e.hitTest=n;function s(o,a){var l=o.getBoundingClientRect(),c=a.getBoundingClientRect();if(!(c.top<=l.top&&c.bottom>=l.bottom)){if(c.top<l.top&&c.height<=l.height){o.scrollTop-=l.top-c.top;return}if(c.bottom>l.bottom&&c.height>=l.height){o.scrollTop-=l.top-c.top;return}if(c.top<l.top&&c.height>l.height){o.scrollTop-=l.bottom-c.bottom;return}if(c.bottom>l.bottom&&c.height<l.height){o.scrollTop-=l.bottom-c.bottom;return}}}e.scrollIntoViewIfNeeded=s}(i.ElementExt||(i.ElementExt={}))})(J2);var eE={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),function(e){e.IS_MAC=!!navigator.platform.match(/Mac/i),e.IS_WIN=!!navigator.platform.match(/Win/i),e.IS_IE=/Trident/.test(navigator.userAgent),e.IS_EDGE=/Edge/.test(navigator.userAgent);function t(r){return e.IS_MAC?r.metaKey:r.ctrlKey}e.accelKey=t}(i.Platform||(i.Platform={}))})(eE);var tE={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),function(t){function r(o){if(o in e.specificityCache)return e.specificityCache[o];var a=e.calculateSingle(o);return e.specificityCache[o]=a}t.calculateSpecificity=r;function n(o){if(o in e.validityCache)return e.validityCache[o];var a=!0;try{e.testElem.querySelector(o)}catch{a=!1}return e.validityCache[o]=a}t.isValid=n;function s(o,a){return e.protoMatchFunc.call(o,a)}t.matches=s}(i.Selector||(i.Selector={}));var e;(function(t){t.specificityCache=Object.create(null),t.validityCache=Object.create(null),t.testElem=document.createElement("div"),t.protoMatchFunc=function(){var p=Element.prototype;return p.matches||p.matchesSelector||p.mozMatchesSelector||p.msMatchesSelector||p.oMatchesSelector||p.webkitMatchesSelector||function(d){var f=this,m=f.ownerDocument.querySelectorAll(d);return Array.prototype.indexOf.call(m,f)!==-1}}();function r(p){p=p.split(",",1)[0];var d=0,f=0,m=0;function g(_){var v=p.match(_);return v===null?!1:(p=p.slice(v[0].length),!0)}for(p=p.replace(u," $1 ");p.length>0;){if(g(n)){d++;continue}if(g(s)){f++;continue}if(g(o)){f++;continue}if(g(l)){m++;continue}if(g(c)){f++;continue}if(g(a)){m++;continue}if(!g(h))return 0}return d=Math.min(d,255),f=Math.min(f,255),m=Math.min(m,255),d<<16|f<<8|m}t.calculateSingle=r;var n=/^#[^\s\+>~#\.\[:]+/,s=/^\.[^\s\+>~#\.\[:]+/,o=/^\[[^\]]+\]/,a=/^[^\s\+>~#\.\[:]+/,l=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,c=/^:[^\s\+>~#\.\[:]+/,h=/^[\s\+>~\*]+/,u=/:not\(([^\)]+)\)/g})(e||(e={}))})(tE);(function(i){function e(t){for(var r in t)i.hasOwnProperty(r)||(i[r]=t[r])}Object.defineProperty(i,"__esModule",{value:!0}),e(Q2),e(J2),e(eE),e(tE)})(ai);var wi={},iE={},rE={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=mt,t=function(){function n(s){this._root=new r.LeafNode,this.cmp=s}return Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._root.size===0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){var s=r.firstLeaf(this._root);return s.size>0?s.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){var s=r.lastLeaf(this._root);return s.size>0?s.items[s.size-1]:void 0},enumerable:!0,configurable:!0}),n.prototype.iter=function(){return r.iterItems(this._root)},n.prototype.retro=function(){return r.retroItems(this._root)},n.prototype.slice=function(s,o){return r.sliceItems(this._root,s,o)},n.prototype.retroSlice=function(s,o){return r.retroSliceItems(this._root,s,o)},n.prototype.at=function(s){return r.itemAt(this._root,s)},n.prototype.has=function(s,o){return r.hasItem(this._root,s,o)},n.prototype.indexOf=function(s,o){return r.indexOf(this._root,s,o)},n.prototype.get=function(s,o){return r.getItem(this._root,s,o)},n.prototype.assign=function(s){this.clear(),this.update(s)},n.prototype.insert=function(s){var o=r.insertItem(this._root,s,this.cmp);return this._root=r.maybeSplitRoot(this._root),o},n.prototype.update=function(s){var o=this;e.each(s,function(a){o.insert(a)})},n.prototype.delete=function(s,o){var a=r.deleteItem(this._root,s,o);return this._root=r.maybeExtractRoot(this._root),a},n.prototype.remove=function(s){var o=r.removeItem(this._root,s);return this._root=r.maybeExtractRoot(this._root),o},n.prototype.clear=function(){r.clear(this._root),this._root=new r.LeafNode},n}();i.BPlusTree=t,function(n){function s(o,a){var l=new n(a);return l.assign(o),l}n.from=s}(t=i.BPlusTree||(i.BPlusTree={})),i.BPlusTree=t;var r;(function(n){var s=function(){function O(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(O.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),O}();n.BranchNode=s;var o=function(){function O(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(O.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),O}();n.LeafNode=o;function a(O){for(;O.type===0;)O=O.children[0];return O}n.firstLeaf=a;function l(O){for(;O.type===0;)O=O.children[O.children.length-1];return O}n.lastLeaf=l;function c(O){var B=a(O);return new S(B,0,-1)}n.iterItems=c;function h(O){var B=l(O);return new T(B,B.size-1,-1)}n.retroItems=h;function u(O,B,q){B===void 0?B=0:B<0?B=Math.max(0,B+O.size):B=Math.min(B,O.size),q===void 0?q=O.size:q<0?q=Math.max(0,q+O.size):q=Math.min(q,O.size);var le=Math.max(0,q-B);if(le===0)return e.empty();for(;O.type===0;){var X=C(O.sizes,B);X>0&&(B-=O.sizes[X-1]),O=O.children[X]}return new S(O,B,le)}n.sliceItems=u;function p(O,B,q){B===void 0?B=O.size-1:B<0?B=Math.max(-1,B+O.size):B=Math.min(B,O.size-1),q===void 0?q=-1:q<0?q=Math.max(-1,q+O.size):q=Math.min(q,O.size-1);var le=Math.max(0,B-q);if(le===0)return e.empty();for(;O.type===0;){var X=C(O.sizes,B);X>0&&(B-=O.sizes[X-1]),O=O.children[X]}return new T(O,B,le)}n.retroSliceItems=p;function d(O,B){if(B<0&&(B+=O.size),!(B<0||B>=O.size)){for(;O.type===0;){var q=C(O.sizes,B);q>0&&(B-=O.sizes[q-1]),O=O.children[q]}return O.items[B]}}n.itemAt=d;function f(O,B,q){for(;O.type===0;){var le=I(O.items,B,q);O=O.children[le]}var X=M(O.items,B,q);return X>=0}n.hasItem=f;function m(O,B,q){for(var le=0;O.type===0;){var X=I(O.items,B,q);X>0&&(le+=O.sizes[X-1]),O=O.children[X]}var Se=M(O.items,B,q);return Se>=0?le+Se:-le+Se}n.indexOf=m;function g(O,B,q){for(;O.type===0;){var le=I(O.items,B,q);O=O.children[le]}var X=M(O.items,B,q);return X>=0?O.items[X]:void 0}n.getItem=g;function _(O,B,q){if(O.type===1){var le=M(O.items,B,q),X;return le>=0?(X=O.items[le],O.items[le]=B):(X=void 0,e.ArrayExt.insert(O.items,-le-1,B)),X}var Se=I(O.items,B,q),R=O.children[Se],L=R.size,U=_(R,B,q),W=R.size;if(O.items[Se]=R.items[0],L===W)return U;if(R.width>D){var G=H(R);e.ArrayExt.insert(O.children,Se+1,G),e.ArrayExt.insert(O.items,Se+1,G.items[0])}return k(O,Se),U}n.insertItem=_;function v(O,B,q){if(O.type===1){var le=M(O.items,B,q);return le<0?void 0:e.ArrayExt.removeAt(O.items,le)}var X=I(O.items,B,q),Se=O.children[X],R=Se.size,L=v(Se,B,q),U=Se.size;return R===U||(O.items[X]=Se.items[0],Se.width<b&&(X=Y(O,X)),k(O,X)),L}n.deleteItem=v;function y(O,B){if(B<0&&(B+=O.size),!(B<0||B>=O.size)){if(O.type===1)return e.ArrayExt.removeAt(O.items,B);var q=C(O.sizes,B);q>0&&(B-=O.sizes[q]);var le=O.children[q],X=y(le,B);return O.items[q]=le.items[0],le.width<b&&(q=Y(O,q)),k(O,q),X}}n.removeItem=y;function x(O){O.type===0?(e.each(O.children,x),O.children.length=0,O.sizes.length=0,O.items.length=0):(O.items.length=0,O.next=null,O.prev=null)}n.clear=x;function A(O){if(O.width<=D)return O;var B=new s,q=H(O);return B.sizes[0]=O.size,B.sizes[1]=O.size+q.size,B.children[0]=O,B.children[1]=q,B.items[0]=O.items[0],B.items[1]=q.items[0],B}n.maybeSplitRoot=A;function w(O){if(O.type===1||O.children.length>1)return O;var B=O.children.pop();return x(O),B}n.maybeExtractRoot=w;var D=32,b=D>>1,S=function(){function O(B,q,le){this._node=B,this._index=q,this._count=le}return O.prototype.iter=function(){return this},O.prototype.clone=function(){return new O(this._node,this._index,this._count)},O.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},O}(),T=function(){function O(B,q,le){this._node=B,this._index=q,this._count=le}return O.prototype.iter=function(){return this},O.prototype.clone=function(){return new O(this._node,this._index,this._count)},O.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},O}();function C(O,B){for(var q=O.length,le=0;le<q;++le)if(O[le]>B)return le;return q-1}function I(O,B,q){for(var le=O.length,X=1;X<le;++X)if(q(O[X],B)>0)return X-1;return le-1}function M(O,B,q){for(var le=O.length,X=0;X<le;++X){var Se=q(O[X],B);if(Se===0)return X;if(Se>0)return-X-1}return-le-1}function k(O,B){for(var q=O.sizes,le=O.children,X=B>0?q[B-1]:0,Se=le.length;B<Se;++B)X=q[B]=X+le[B].size;q.length=le.length}function H(O){if(O.type===1){for(var B=new o,q=O.items,le=B.items,X=b,Se=q.length;X<Se;++X)le.push(q[X]);return q.length=b,O.next&&(O.next.prev=B),B.next=O.next,B.prev=O,O.next=B,B}for(var R=new s,L=O.children,U=R.children,X=b,Se=L.length;X<Se;++X)U.push(L[X]);L.length=b;for(var W=O.items,G=R.items,X=b,Se=W.length;X<Se;++X)G.push(W[X]);return W.length=b,k(O,b),k(R,0),R}function Y(O,B){var q,le,X,Se,R,L,U=O.children[B],W=B===0?O.children[B+1]:O.children[B-1],G=B===0,j=U.type===1,ee=W.width>b;if(j&&ee&&G){var ne=U,ae=W;return ne.items.push(ae.items.shift()),O.items[B+1]=ae.items[0],B}if(j&&ee&&!G){var ne=U,ae=W;return ne.items.unshift(ae.items.pop()),O.items[B]=ne.items[0],B-1}if(j&&!ee&&G){var ne=U,ae=W;return(q=ae.items).unshift.apply(q,ne.items),e.ArrayExt.removeAt(O.children,B),e.ArrayExt.removeAt(O.items,B+1),ne.prev&&(ne.prev.next=ae),ae.prev=ne.prev,x(ne),B}if(j&&!ee&&!G){var ne=U,ae=W;return(le=ae.items).push.apply(le,ne.items),e.ArrayExt.removeAt(O.children,B),e.ArrayExt.removeAt(O.items,B),ne.next&&(ne.next.prev=ae),ae.next=ne.next,x(ne),B-1}if(!j&&ee&&G){var ne=U,ae=W;return ne.children.push(ae.children.shift()),ne.items.push(ae.items.shift()),O.items[B+1]=ae.items[0],k(ne,ne.width-1),k(ae,0),B}if(!j&&ee&&!G){var ne=U,ae=W;return ne.children.unshift(ae.children.pop()),ne.items.unshift(ae.items.pop()),O.items[B]=ne.items[0],k(ne,0),k(ae,ae.width-1),B-1}if(!j&&!ee&&G){var ne=U,ae=W;return(X=ae.children).unshift.apply(X,ne.children),(Se=ae.items).unshift.apply(Se,ne.items),e.ArrayExt.removeAt(O.children,B),e.ArrayExt.removeAt(O.items,B+1),k(ae,0),ne.children.length=0,x(ne),B}if(!j&&!ee&&!G){var ne=U,ae=W;return(R=ae.children).push.apply(R,ne.children),(L=ae.items).push.apply(L,ne.items),e.ArrayExt.removeAt(O.children,B),e.ArrayExt.removeAt(O.items,B),k(ae,0),ne.children.length=0,x(ne),B-1}throw"unreachable"}})(r||(r={}))})(rE);var nE={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=mt,t=function(){function n(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._size===0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),n.prototype.iter=function(){return new n.ForwardValueIterator(this._first)},n.prototype.retro=function(){return new n.RetroValueIterator(this._last)},n.prototype.nodes=function(){return new n.ForwardNodeIterator(this._first)},n.prototype.retroNodes=function(){return new n.RetroNodeIterator(this._last)},n.prototype.assign=function(s){var o=this;this.clear(),e.each(s,function(a){o.addLast(a)})},n.prototype.push=function(s){this.addLast(s)},n.prototype.pop=function(){return this.removeLast()},n.prototype.shift=function(s){this.addFirst(s)},n.prototype.unshift=function(){return this.removeFirst()},n.prototype.addFirst=function(s){var o=new r.LinkedListNode(this,s);return this._first?(o.next=this._first,this._first.prev=o,this._first=o):(this._first=o,this._last=o),this._size++,o},n.prototype.addLast=function(s){var o=new r.LinkedListNode(this,s);return this._last?(o.prev=this._last,this._last.next=o,this._last=o):(this._first=o,this._last=o),this._size++,o},n.prototype.insertBefore=function(s,o){if(!o||o===this._first)return this.addFirst(s);if(!(o instanceof r.LinkedListNode)||o.list!==this)throw new Error("Reference node is not owned by the list.");var a=new r.LinkedListNode(this,s),l=o,c=l.prev;return a.next=l,a.prev=c,l.prev=a,c.next=a,this._size++,a},n.prototype.insertAfter=function(s,o){if(!o||o===this._last)return this.addLast(s);if(!(o instanceof r.LinkedListNode)||o.list!==this)throw new Error("Reference node is not owned by the list.");var a=new r.LinkedListNode(this,s),l=o,c=l.next;return a.next=c,a.prev=l,l.next=a,c.prev=a,this._size++,a},n.prototype.removeFirst=function(){var s=this._first;if(s)return s===this._last?(this._first=null,this._last=null):(this._first=s.next,this._first.prev=null),s.list=null,s.next=null,s.prev=null,this._size--,s.value},n.prototype.removeLast=function(){var s=this._last;if(s)return s===this._first?(this._first=null,this._last=null):(this._last=s.prev,this._last.next=null),s.list=null,s.next=null,s.prev=null,this._size--,s.value},n.prototype.removeNode=function(s){if(!(s instanceof r.LinkedListNode)||s.list!==this)throw new Error("Node is not owned by the list.");var o=s;o===this._first&&o===this._last?(this._first=null,this._last=null):o===this._first?(this._first=o.next,this._first.prev=null):o===this._last?(this._last=o.prev,this._last.next=null):(o.next.prev=o.prev,o.prev.next=o.next),o.list=null,o.next=null,o.prev=null,this._size--},n.prototype.clear=function(){for(var s=this._first;s;){var o=s.next;s.list=null,s.prev=null,s.next=null,s=o}this._first=null,this._last=null,this._size=0},n}();i.LinkedList=t,function(n){function s(h){var u=new n;return u.assign(h),u}n.from=s;var o=function(){function h(u){this._node=u}return h.prototype.iter=function(){return this},h.prototype.clone=function(){return new h(this._node)},h.prototype.next=function(){if(this._node){var u=this._node;return this._node=u.next,u.value}},h}();n.ForwardValueIterator=o;var a=function(){function h(u){this._node=u}return h.prototype.iter=function(){return this},h.prototype.clone=function(){return new h(this._node)},h.prototype.next=function(){if(this._node){var u=this._node;return this._node=u.prev,u.value}},h}();n.RetroValueIterator=a;var l=function(){function h(u){this._node=u}return h.prototype.iter=function(){return this},h.prototype.clone=function(){return new h(this._node)},h.prototype.next=function(){if(this._node){var u=this._node;return this._node=u.next,u}},h}();n.ForwardNodeIterator=l;var c=function(){function h(u){this._node=u}return h.prototype.iter=function(){return this},h.prototype.clone=function(){return new h(this._node)},h.prototype.next=function(){if(this._node){var u=this._node;return this._node=u.prev,u}},h}();n.RetroNodeIterator=c}(t=i.LinkedList||(i.LinkedList={})),i.LinkedList=t;var r;(function(n){var s=function(){function o(a,l){this.list=null,this.next=null,this.prev=null,this.list=a,this.value=l}return o}();n.LinkedListNode=s})(r||(r={}))})(nE);(function(i){function e(t){for(var r in t)i.hasOwnProperty(r)||(i[r]=t[r])}Object.defineProperty(i,"__esModule",{value:!0}),e(rE),e(nE)})(iE);(function(i){var e=P&&P.__extends||function(){var o=function(a,l){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var u in h)h.hasOwnProperty(u)&&(c[u]=h[u])},o(a,l)};return function(a,l){o(a,l);function c(){this.constructor=a}a.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}();Object.defineProperty(i,"__esModule",{value:!0});var t=mt,r=iE,n=function(){function o(a){this.type=a}return Object.defineProperty(o.prototype,"isConflatable",{get:function(){return!1},enumerable:!0,configurable:!0}),o.prototype.conflate=function(a){return!1},o}();i.Message=n;var s=function(o){e(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(a.prototype,"isConflatable",{get:function(){return!0},enumerable:!0,configurable:!0}),a.prototype.conflate=function(l){return!0},a}(n);i.ConflatableMessage=s,function(o){function a(H,Y){var O=g.get(H);if(!O||O.length===0){b(H,Y);return}var B=t.every(t.retro(O),function(q){return q?D(q,H,Y):!0});B&&b(H,Y)}o.sendMessage=a;function l(H,Y){if(!Y.isConflatable){S(H,Y);return}var O=t.some(m,function(B){return B.handler!==H||!B.msg||B.msg.type!==Y.type||!B.msg.isConflatable?!1:B.msg.conflate(Y)});O||S(H,Y)}o.postMessage=l;function c(H,Y){var O=g.get(H);O&&O.indexOf(Y)!==-1||(O?O.push(Y):g.set(H,[Y]))}o.installMessageHook=c;function h(H,Y){var O=g.get(H);if(O){var B=O.indexOf(Y);B!==-1&&(O[B]=null,C(O))}}o.removeMessageHook=h;function u(H){var Y=g.get(H);Y&&Y.length>0&&(t.ArrayExt.fill(Y,null),C(Y)),t.each(m,function(O){O.handler===H&&(O.handler=null,O.msg=null)})}o.clearData=u;function p(){x||y===0||(w(y),x=!0,T(),x=!1)}o.flush=p;function d(){return v}o.getExceptionHandler=d;function f(H){var Y=v;return v=H,Y}o.setExceptionHandler=f;var m=new r.LinkedList,g=new WeakMap,_=new Set,v=function(H){console.error(H)},y=0,x=!1,A=function(){var H=typeof requestAnimationFrame=="function";return H?requestAnimationFrame:setImmediate}(),w=function(){var H=typeof cancelAnimationFrame=="function";return H?cancelAnimationFrame:clearImmediate}();function D(H,Y,O){var B=!0;try{typeof H=="function"?B=H(Y,O):B=H.messageHook(Y,O)}catch(q){v(q)}return B}function b(H,Y){try{H.processMessage(Y)}catch(O){v(O)}}function S(H,Y){m.addLast({handler:H,msg:Y}),y===0&&(y=A(T))}function T(){if(y=0,!m.isEmpty){var H={handler:null,msg:null};for(m.addLast(H);;){var Y=m.removeFirst();if(Y===H)return;Y.handler&&Y.msg&&a(Y.handler,Y.msg)}}}function C(H){_.size===0&&A(I),_.add(H)}function I(){_.forEach(M),_.clear()}function M(H){t.ArrayExt.removeAllWhere(H,k)}function k(H){return H===null}}(i.MessageLoop||(i.MessageLoop={}))})(wi);var oa={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function r(n){this._pid=t.nextPID(),this.name=n.name,this._create=n.create,this._coerce=n.coerce||null,this._compare=n.compare||null,this._changed=n.changed||null}return r.prototype.get=function(n){var s,o=t.ensureMap(n);return this._pid in o?s=o[this._pid]:s=o[this._pid]=this._createValue(n),s},r.prototype.set=function(n,s){var o,a=t.ensureMap(n);this._pid in a?o=a[this._pid]:o=a[this._pid]=this._createValue(n);var l=this._coerceValue(n,s);this._maybeNotify(n,o,a[this._pid]=l)},r.prototype.coerce=function(n){var s,o=t.ensureMap(n);this._pid in o?s=o[this._pid]:s=o[this._pid]=this._createValue(n);var a=this._coerceValue(n,s);this._maybeNotify(n,s,o[this._pid]=a)},r.prototype._createValue=function(n){var s=this._create;return s(n)},r.prototype._coerceValue=function(n,s){var o=this._coerce;return o?o(n,s):s},r.prototype._compareValue=function(n,s){var o=this._compare;return o?o(n,s):n===s},r.prototype._maybeNotify=function(n,s,o){var a=this._changed;a&&!this._compareValue(s,o)&&a(n,s,o)},r}();i.AttachedProperty=e,function(r){function n(s){t.ownerData.delete(s)}r.clearData=n}(e=i.AttachedProperty||(i.AttachedProperty={})),i.AttachedProperty=e;var t;(function(r){r.ownerData=new WeakMap,r.nextPID=function(){var s=0;return function(){var o=Math.random(),a=(""+o).slice(2);return"pid-"+a+"-"+s++}}();function n(s){var o=r.ownerData.get(s);return o||(o=Object.create(null),r.ownerData.set(s,o),o)}r.ensureMap=n})(t||(t={}))})(oa);var Nn={},tt={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=mt,t=function(){function n(s){this.sender=s}return n.prototype.connect=function(s,o){return r.connect(this,s,o)},n.prototype.disconnect=function(s,o){return r.disconnect(this,s,o)},n.prototype.emit=function(s){r.emit(this,s)},n}();i.Signal=t,function(n){function s(p,d){r.disconnectBetween(p,d)}n.disconnectBetween=s;function o(p){r.disconnectSender(p)}n.disconnectSender=o;function a(p){r.disconnectReceiver(p)}n.disconnectReceiver=a;function l(p){r.disconnectAll(p)}n.disconnectAll=l;function c(p){r.disconnectAll(p)}n.clearData=c;function h(){return r.exceptionHandler}n.getExceptionHandler=h;function u(p){var d=r.exceptionHandler;return r.exceptionHandler=p,d}n.setExceptionHandler=u}(t=i.Signal||(i.Signal={})),i.Signal=t;var r;(function(n){n.exceptionHandler=function(w){console.error(w)};function s(w,D,b){b=b||void 0;var S=p.get(w.sender);if(S||(S=[],p.set(w.sender,S)),g(S,w,D,b))return!1;var T=b||D,C=d.get(T);C||(C=[],d.set(T,C));var I={signal:w,slot:D,thisArg:b};return S.push(I),C.push(I),!0}n.connect=s;function o(w,D,b){b=b||void 0;var S=p.get(w.sender);if(!S||S.length===0)return!1;var T=g(S,w,D,b);if(!T)return!1;var C=b||D,I=d.get(C);return T.signal=null,v(S),v(I),!0}n.disconnect=o;function a(w,D){var b=p.get(w);if(!(!b||b.length===0)){var S=d.get(D);!S||S.length===0||(e.each(S,function(T){T.signal&&T.signal.sender===w&&(T.signal=null)}),v(b),v(S))}}n.disconnectBetween=a;function l(w){var D=p.get(w);!D||D.length===0||(e.each(D,function(b){if(b.signal){var S=b.thisArg||b.slot;b.signal=null,v(d.get(S))}}),v(D))}n.disconnectSender=l;function c(w){var D=d.get(w);!D||D.length===0||(e.each(D,function(b){if(b.signal){var S=b.signal.sender;b.signal=null,v(p.get(S))}}),v(D))}n.disconnectReceiver=c;function h(w){var D=p.get(w);D&&D.length>0&&(e.each(D,function(S){S.signal=null}),v(D));var b=d.get(w);b&&b.length>0&&(e.each(b,function(S){S.signal=null}),v(b))}n.disconnectAll=h;function u(w,D){var b=p.get(w.sender);if(!(!b||b.length===0))for(var S=0,T=b.length;S<T;++S){var C=b[S];C.signal===w&&_(C,D)}}n.emit=u;var p=new WeakMap,d=new WeakMap,f=new Set,m=function(){var w=typeof requestAnimationFrame=="function";return w?requestAnimationFrame:setImmediate}();function g(w,D,b,S){return e.find(w,function(T){return T.signal===D&&T.slot===b&&T.thisArg===S})}function _(w,D){var b=w.signal,S=w.slot,T=w.thisArg;try{S.call(T,b.sender,D)}catch(C){n.exceptionHandler(C)}}function v(w){f.size===0&&m(y),f.add(w)}function y(){f.forEach(x),f.clear()}function x(w){e.ArrayExt.removeAllWhere(w,A)}function A(w){return w.signal===null}})(r||(r={}))})(tt);var Gt={},Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});var a9=tt,l9=function(){function i(e){this._label="",this._caption="",this._mnemonic=-1,this._iconClass="",this._iconLabel="",this._className="",this._closable=!1,this._changed=new a9.Signal(this),this.owner=e.owner,e.label!==void 0&&(this._label=e.label),e.mnemonic!==void 0&&(this._mnemonic=e.mnemonic),e.icon!==void 0&&(this._iconClass=e.icon),e.iconClass!==void 0&&(this._iconClass=e.iconClass),e.iconLabel!==void 0&&(this._iconLabel=e.iconLabel),e.caption!==void 0&&(this._caption=e.caption),e.className!==void 0&&(this._className=e.className),e.closable!==void 0&&(this._closable=e.closable),this._dataset=e.dataset||{}}return Object.defineProperty(i.prototype,"changed",{get:function(){return this._changed},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"label",{get:function(){return this._label},set:function(e){this._label!==e&&(this._label=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mnemonic",{get:function(){return this._mnemonic},set:function(e){this._mnemonic!==e&&(this._mnemonic=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return this.iconClass},set:function(e){this.iconClass=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconClass",{get:function(){return this._iconClass},set:function(e){this._iconClass!==e&&(this._iconClass=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconLabel",{get:function(){return this._iconLabel},set:function(e){this._iconLabel!==e&&(this._iconLabel=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"caption",{get:function(){return this._caption},set:function(e){this._caption!==e&&(this._caption=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"className",{get:function(){return this._className},set:function(e){this._className!==e&&(this._className=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"closable",{get:function(){return this._closable},set:function(e){this._closable!==e&&(this._closable=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataset",{get:function(){return this._dataset},set:function(e){this._dataset!==e&&(this._dataset=e,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),i}();Ac.Title=l9;(function(i){var e=P&&P.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var p in u)u.hasOwnProperty(p)&&(h[p]=u[p])};return function(h,u){c(h,u);function p(){this.constructor=h}h.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(i,"__esModule",{value:!0});var t=mt,r=wi,n=oa,s=tt,o=Ac,a=function(){function c(h){h===void 0&&(h={}),this._flags=0,this._layout=null,this._parent=null,this._disposed=new s.Signal(this),this.node=l.createNode(h),this.addClass("p-Widget")}return c.prototype.dispose=function(){this.isDisposed||(this.setFlag(c.Flag.IsDisposed),this._disposed.emit(void 0),this.parent?this.parent=null:this.isAttached&&c.detach(this),this._layout&&(this._layout.dispose(),this._layout=null),s.Signal.clearData(this),r.MessageLoop.clearData(this),n.AttachedProperty.clearData(this))},Object.defineProperty(c.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isDisposed",{get:function(){return this.testFlag(c.Flag.IsDisposed)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isAttached",{get:function(){return this.testFlag(c.Flag.IsAttached)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isHidden",{get:function(){return this.testFlag(c.Flag.IsHidden)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isVisible",{get:function(){return this.testFlag(c.Flag.IsVisible)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"title",{get:function(){return l.titleProperty.get(this)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"id",{get:function(){return this.node.id},set:function(h){this.node.id=h},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"dataset",{get:function(){return this.node.dataset},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"parent",{get:function(){return this._parent},set:function(h){if(this._parent!==h){if(h&&this.contains(h))throw new Error("Invalid parent widget.");if(this._parent&&!this._parent.isDisposed){var u=new c.ChildMessage("child-removed",this);r.MessageLoop.sendMessage(this._parent,u)}if(this._parent=h,this._parent&&!this._parent.isDisposed){var u=new c.ChildMessage("child-added",this);r.MessageLoop.sendMessage(this._parent,u)}this.isDisposed||r.MessageLoop.sendMessage(this,c.Msg.ParentChanged)}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"layout",{get:function(){return this._layout},set:function(h){if(this._layout!==h){if(this.testFlag(c.Flag.DisallowLayout))throw new Error("Cannot set widget layout.");if(this._layout)throw new Error("Cannot change widget layout.");if(h.parent)throw new Error("Cannot change layout parent.");this._layout=h,h.parent=this}},enumerable:!0,configurable:!0}),c.prototype.children=function(){return this._layout?this._layout.iter():t.empty()},c.prototype.contains=function(h){for(var u=h;u;u=u._parent)if(u===this)return!0;return!1},c.prototype.hasClass=function(h){return this.node.classList.contains(h)},c.prototype.addClass=function(h){this.node.classList.add(h)},c.prototype.removeClass=function(h){this.node.classList.remove(h)},c.prototype.toggleClass=function(h,u){return u===!0?(this.node.classList.add(h),!0):u===!1?(this.node.classList.remove(h),!1):this.node.classList.toggle(h)},c.prototype.update=function(){r.MessageLoop.postMessage(this,c.Msg.UpdateRequest)},c.prototype.fit=function(){r.MessageLoop.postMessage(this,c.Msg.FitRequest)},c.prototype.activate=function(){r.MessageLoop.postMessage(this,c.Msg.ActivateRequest)},c.prototype.close=function(){r.MessageLoop.sendMessage(this,c.Msg.CloseRequest)},c.prototype.show=function(){if(this.testFlag(c.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&r.MessageLoop.sendMessage(this,c.Msg.BeforeShow),this.clearFlag(c.Flag.IsHidden),this.removeClass("p-mod-hidden"),this.isAttached&&(!this.parent||this.parent.isVisible)&&r.MessageLoop.sendMessage(this,c.Msg.AfterShow),this.parent)){var h=new c.ChildMessage("child-shown",this);r.MessageLoop.sendMessage(this.parent,h)}},c.prototype.hide=function(){if(!this.testFlag(c.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&r.MessageLoop.sendMessage(this,c.Msg.BeforeHide),this.setFlag(c.Flag.IsHidden),this.addClass("p-mod-hidden"),this.isAttached&&(!this.parent||this.parent.isVisible)&&r.MessageLoop.sendMessage(this,c.Msg.AfterHide),this.parent)){var h=new c.ChildMessage("child-hidden",this);r.MessageLoop.sendMessage(this.parent,h)}},c.prototype.setHidden=function(h){h?this.hide():this.show()},c.prototype.testFlag=function(h){return(this._flags&h)!==0},c.prototype.setFlag=function(h){this._flags|=h},c.prototype.clearFlag=function(h){this._flags&=~h},c.prototype.processMessage=function(h){switch(h.type){case"resize":this.notifyLayout(h),this.onResize(h);break;case"update-request":this.notifyLayout(h),this.onUpdateRequest(h);break;case"fit-request":this.notifyLayout(h),this.onFitRequest(h);break;case"before-show":this.notifyLayout(h),this.onBeforeShow(h);break;case"after-show":this.setFlag(c.Flag.IsVisible),this.notifyLayout(h),this.onAfterShow(h);break;case"before-hide":this.notifyLayout(h),this.onBeforeHide(h);break;case"after-hide":this.clearFlag(c.Flag.IsVisible),this.notifyLayout(h),this.onAfterHide(h);break;case"before-attach":this.notifyLayout(h),this.onBeforeAttach(h);break;case"after-attach":!this.isHidden&&(!this.parent||this.parent.isVisible)&&this.setFlag(c.Flag.IsVisible),this.setFlag(c.Flag.IsAttached),this.notifyLayout(h),this.onAfterAttach(h);break;case"before-detach":this.notifyLayout(h),this.onBeforeDetach(h);break;case"after-detach":this.clearFlag(c.Flag.IsVisible),this.clearFlag(c.Flag.IsAttached),this.notifyLayout(h),this.onAfterDetach(h);break;case"activate-request":this.notifyLayout(h),this.onActivateRequest(h);break;case"close-request":this.notifyLayout(h),this.onCloseRequest(h);break;case"child-added":this.notifyLayout(h),this.onChildAdded(h);break;case"child-removed":this.notifyLayout(h),this.onChildRemoved(h);break;default:this.notifyLayout(h);break}},c.prototype.notifyLayout=function(h){this._layout&&this._layout.processParentMessage(h)},c.prototype.onCloseRequest=function(h){this.parent?this.parent=null:this.isAttached&&c.detach(this)},c.prototype.onResize=function(h){},c.prototype.onUpdateRequest=function(h){},c.prototype.onFitRequest=function(h){},c.prototype.onActivateRequest=function(h){},c.prototype.onBeforeShow=function(h){},c.prototype.onAfterShow=function(h){},c.prototype.onBeforeHide=function(h){},c.prototype.onAfterHide=function(h){},c.prototype.onBeforeAttach=function(h){},c.prototype.onAfterAttach=function(h){},c.prototype.onBeforeDetach=function(h){},c.prototype.onAfterDetach=function(h){},c.prototype.onChildAdded=function(h){},c.prototype.onChildRemoved=function(h){},c}();i.Widget=a,function(c){(function(f){f[f.IsDisposed=1]="IsDisposed",f[f.IsAttached=2]="IsAttached",f[f.IsHidden=4]="IsHidden",f[f.IsVisible=8]="IsVisible",f[f.DisallowLayout=16]="DisallowLayout"})(c.Flag||(c.Flag={})),function(f){f.BeforeShow=new r.Message("before-show"),f.AfterShow=new r.Message("after-show"),f.BeforeHide=new r.Message("before-hide"),f.AfterHide=new r.Message("after-hide"),f.BeforeAttach=new r.Message("before-attach"),f.AfterAttach=new r.Message("after-attach"),f.BeforeDetach=new r.Message("before-detach"),f.AfterDetach=new r.Message("after-detach"),f.ParentChanged=new r.Message("parent-changed"),f.UpdateRequest=new r.ConflatableMessage("update-request"),f.FitRequest=new r.ConflatableMessage("fit-request"),f.ActivateRequest=new r.ConflatableMessage("activate-request"),f.CloseRequest=new r.ConflatableMessage("close-request")}(c.Msg||(c.Msg={}));var h=function(f){e(m,f);function m(g,_){var v=f.call(this,g)||this;return v.child=_,v}return m}(r.Message);c.ChildMessage=h;var u=function(f){e(m,f);function m(g,_){var v=f.call(this,"resize")||this;return v.width=g,v.height=_,v}return m}(r.Message);c.ResizeMessage=u,function(f){f.UnknownSize=new f(-1,-1)}(u=c.ResizeMessage||(c.ResizeMessage={}));function p(f,m,g){if(g===void 0&&(g=null),f.parent)throw new Error("Cannot attach a child widget.");if(f.isAttached||document.body.contains(f.node))throw new Error("Widget is already attached.");if(!document.body.contains(m))throw new Error("Host is not attached.");r.MessageLoop.sendMessage(f,c.Msg.BeforeAttach),m.insertBefore(f.node,g),r.MessageLoop.sendMessage(f,c.Msg.AfterAttach)}c.attach=p;function d(f){if(f.parent)throw new Error("Cannot detach a child widget.");if(!f.isAttached||!document.body.contains(f.node))throw new Error("Widget is not attached.");r.MessageLoop.sendMessage(f,c.Msg.BeforeDetach),f.node.parentNode.removeChild(f.node),r.MessageLoop.sendMessage(f,c.Msg.AfterDetach)}c.detach=d}(a=i.Widget||(i.Widget={})),i.Widget=a;var l;(function(c){c.titleProperty=new n.AttachedProperty({name:"title",create:function(u){return new o.Title({owner:u})}});function h(u){return u.node||document.createElement("div")}c.createNode=h})(l||(l={}))})(Gt);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=mt,t=ai,r=wi,n=oa,s=tt,o=Gt,a=function(){function h(u){u===void 0&&(u={}),this._disposed=!1,this._parent=null,this._fitPolicy=u.fitPolicy||"set-min-size"}return h.prototype.dispose=function(){this._parent=null,this._disposed=!0,s.Signal.clearData(this),n.AttachedProperty.clearData(this)},Object.defineProperty(h.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"parent",{get:function(){return this._parent},set:function(u){if(this._parent!==u){if(this._parent)throw new Error("Cannot change parent widget.");if(u.layout!==this)throw new Error("Invalid parent widget.");this._parent=u,this.init()}},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"fitPolicy",{get:function(){return this._fitPolicy},set:function(u){if(this._fitPolicy!==u&&(this._fitPolicy=u,this._parent)){var p=this._parent.node.style;p.minWidth="",p.minHeight="",p.maxWidth="",p.maxHeight="",this._parent.fit()}},enumerable:!0,configurable:!0}),h.prototype.processParentMessage=function(u){switch(u.type){case"resize":this.onResize(u);break;case"update-request":this.onUpdateRequest(u);break;case"fit-request":this.onFitRequest(u);break;case"before-show":this.onBeforeShow(u);break;case"after-show":this.onAfterShow(u);break;case"before-hide":this.onBeforeHide(u);break;case"after-hide":this.onAfterHide(u);break;case"before-attach":this.onBeforeAttach(u);break;case"after-attach":this.onAfterAttach(u);break;case"before-detach":this.onBeforeDetach(u);break;case"after-detach":this.onAfterDetach(u);break;case"child-removed":this.onChildRemoved(u);break;case"child-shown":this.onChildShown(u);break;case"child-hidden":this.onChildHidden(u);break}},h.prototype.init=function(){var u=this;e.each(this,function(p){p.parent=u.parent})},h.prototype.onResize=function(u){e.each(this,function(p){r.MessageLoop.sendMessage(p,o.Widget.ResizeMessage.UnknownSize)})},h.prototype.onUpdateRequest=function(u){e.each(this,function(p){r.MessageLoop.sendMessage(p,o.Widget.ResizeMessage.UnknownSize)})},h.prototype.onBeforeAttach=function(u){e.each(this,function(p){r.MessageLoop.sendMessage(p,u)})},h.prototype.onAfterAttach=function(u){e.each(this,function(p){r.MessageLoop.sendMessage(p,u)})},h.prototype.onBeforeDetach=function(u){e.each(this,function(p){r.MessageLoop.sendMessage(p,u)})},h.prototype.onAfterDetach=function(u){e.each(this,function(p){r.MessageLoop.sendMessage(p,u)})},h.prototype.onBeforeShow=function(u){e.each(this,function(p){p.isHidden||r.MessageLoop.sendMessage(p,u)})},h.prototype.onAfterShow=function(u){e.each(this,function(p){p.isHidden||r.MessageLoop.sendMessage(p,u)})},h.prototype.onBeforeHide=function(u){e.each(this,function(p){p.isHidden||r.MessageLoop.sendMessage(p,u)})},h.prototype.onAfterHide=function(u){e.each(this,function(p){p.isHidden||r.MessageLoop.sendMessage(p,u)})},h.prototype.onChildRemoved=function(u){this.removeWidget(u.child)},h.prototype.onFitRequest=function(u){},h.prototype.onChildShown=function(u){},h.prototype.onChildHidden=function(u){},h}();i.Layout=a,function(h){function u(m){return c.horizontalAlignmentProperty.get(m)}h.getHorizontalAlignment=u;function p(m,g){c.horizontalAlignmentProperty.set(m,g)}h.setHorizontalAlignment=p;function d(m){return c.verticalAlignmentProperty.get(m)}h.getVerticalAlignment=d;function f(m,g){c.verticalAlignmentProperty.set(m,g)}h.setVerticalAlignment=f}(a=i.Layout||(i.Layout={})),i.Layout=a;var l=function(){function h(u){this._top=NaN,this._left=NaN,this._width=NaN,this._height=NaN,this._minWidth=0,this._minHeight=0,this._maxWidth=1/0,this._maxHeight=1/0,this._disposed=!1,this.widget=u,this.widget.node.style.position="absolute"}return h.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var u=this.widget.node.style;u.position="",u.top="",u.left="",u.width="",u.height=""}},Object.defineProperty(h.prototype,"minWidth",{get:function(){return this._minWidth},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"minHeight",{get:function(){return this._minHeight},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"maxWidth",{get:function(){return this._maxWidth},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"maxHeight",{get:function(){return this._maxHeight},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isHidden",{get:function(){return this.widget.isHidden},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isVisible",{get:function(){return this.widget.isVisible},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isAttached",{get:function(){return this.widget.isAttached},enumerable:!0,configurable:!0}),h.prototype.fit=function(){var u=t.ElementExt.sizeLimits(this.widget.node);this._minWidth=u.minWidth,this._minHeight=u.minHeight,this._maxWidth=u.maxWidth,this._maxHeight=u.maxHeight},h.prototype.update=function(u,p,d,f){var m=Math.max(this._minWidth,Math.min(d,this._maxWidth)),g=Math.max(this._minHeight,Math.min(f,this._maxHeight));if(m<d)switch(a.getHorizontalAlignment(this.widget)){case"left":break;case"center":u+=(d-m)/2;break;case"right":u+=d-m;break;default:throw"unreachable"}if(g<f)switch(a.getVerticalAlignment(this.widget)){case"top":break;case"center":p+=(f-g)/2;break;case"bottom":p+=f-g;break;default:throw"unreachable"}var _=!1,v=this.widget.node.style;if(this._top!==p&&(this._top=p,v.top=p+"px"),this._left!==u&&(this._left=u,v.left=u+"px"),this._width!==m&&(_=!0,this._width=m,v.width=m+"px"),this._height!==g&&(_=!0,this._height=g,v.height=g+"px"),_){var y=new o.Widget.ResizeMessage(m,g);r.MessageLoop.sendMessage(this.widget,y)}},h}();i.LayoutItem=l;var c;(function(h){h.horizontalAlignmentProperty=new n.AttachedProperty({name:"horizontalAlignment",create:function(){return"center"},changed:u}),h.verticalAlignmentProperty=new n.AttachedProperty({name:"verticalAlignment",create:function(){return"top"},changed:u});function u(p){p.parent&&p.parent.layout&&p.parent.update()}})(c||(c={}))})(Nn);var aa={},u9=P&&P.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(aa,"__esModule",{value:!0});var gu=mt,jn=wi,h9=Nn,$n=Gt,c9=function(i){u9(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t._widgets=[],t}return e.prototype.dispose=function(){for(;this._widgets.length>0;)this._widgets.pop().dispose();i.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"widgets",{get:function(){return this._widgets},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return gu.iter(this._widgets)},e.prototype.addWidget=function(t){this.insertWidget(this._widgets.length,t)},e.prototype.insertWidget=function(t,r){r.parent=this.parent;var n=this._widgets.indexOf(r),s=Math.max(0,Math.min(t,this._widgets.length));if(n===-1){gu.ArrayExt.insert(this._widgets,s,r),this.parent&&this.attachWidget(s,r);return}s===this._widgets.length&&s--,n!==s&&(gu.ArrayExt.move(this._widgets,n,s),this.parent&&this.moveWidget(n,s,r))},e.prototype.removeWidget=function(t){this.removeWidgetAt(this._widgets.indexOf(t))},e.prototype.removeWidgetAt=function(t){var r=gu.ArrayExt.removeAt(this._widgets,t);r&&this.parent&&this.detachWidget(t,r)},e.prototype.init=function(){var t=this;i.prototype.init.call(this),gu.each(this,function(r,n){t.attachWidget(n,r)})},e.prototype.attachWidget=function(t,r){var n=this.parent.node.children[t];this.parent.isAttached&&jn.MessageLoop.sendMessage(r,$n.Widget.Msg.BeforeAttach),this.parent.node.insertBefore(r.node,n),this.parent.isAttached&&jn.MessageLoop.sendMessage(r,$n.Widget.Msg.AfterAttach)},e.prototype.moveWidget=function(t,r,n){this.parent.isAttached&&jn.MessageLoop.sendMessage(n,$n.Widget.Msg.BeforeDetach),this.parent.node.removeChild(n.node),this.parent.isAttached&&jn.MessageLoop.sendMessage(n,$n.Widget.Msg.AfterDetach);var s=this.parent.node.children[r];this.parent.isAttached&&jn.MessageLoop.sendMessage(n,$n.Widget.Msg.BeforeAttach),this.parent.node.insertBefore(n.node,s),this.parent.isAttached&&jn.MessageLoop.sendMessage(n,$n.Widget.Msg.AfterAttach)},e.prototype.detachWidget=function(t,r){this.parent.isAttached&&jn.MessageLoop.sendMessage(r,$n.Widget.Msg.BeforeDetach),this.parent.node.removeChild(r.node),this.parent.isAttached&&jn.MessageLoop.sendMessage(r,$n.Widget.Msg.AfterDetach)},e}(h9.Layout);aa.PanelLayout=c9;(function(i){var e=P&&P.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var m in f)f.hasOwnProperty(m)&&(d[m]=f[m])};return function(d,f){p(d,f);function m(){this.constructor=d}d.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}}();Object.defineProperty(i,"__esModule",{value:!0});var t=mt,r=ai,n=wi,s=oa,o=Il,a=Nn,l=aa,c=Gt,h=function(p){e(d,p);function d(f){f===void 0&&(f={});var m=p.call(this)||this;return m._fixed=0,m._spacing=4,m._dirty=!1,m._sizers=[],m._items=[],m._box=null,m._alignment="start",m._direction="top-to-bottom",f.direction!==void 0&&(m._direction=f.direction),f.alignment!==void 0&&(m._alignment=f.alignment),f.spacing!==void 0&&(m._spacing=u.clampSpacing(f.spacing)),m}return d.prototype.dispose=function(){t.each(this._items,function(f){f.dispose()}),this._box=null,this._items.length=0,this._sizers.length=0,p.prototype.dispose.call(this)},Object.defineProperty(d.prototype,"direction",{get:function(){return this._direction},set:function(f){this._direction!==f&&(this._direction=f,this.parent&&(this.parent.dataset.direction=f,this.parent.fit()))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"alignment",{get:function(){return this._alignment},set:function(f){this._alignment!==f&&(this._alignment=f,this.parent&&(this.parent.dataset.alignment=f,this.parent.update()))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"spacing",{get:function(){return this._spacing},set:function(f){f=u.clampSpacing(f),this._spacing!==f&&(this._spacing=f,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),d.prototype.init=function(){this.parent.dataset.direction=this.direction,this.parent.dataset.alignment=this.alignment,p.prototype.init.call(this)},d.prototype.attachWidget=function(f,m){t.ArrayExt.insert(this._items,f,new a.LayoutItem(m)),t.ArrayExt.insert(this._sizers,f,new o.BoxSizer),this.parent.isAttached&&n.MessageLoop.sendMessage(m,c.Widget.Msg.BeforeAttach),this.parent.node.appendChild(m.node),this.parent.isAttached&&n.MessageLoop.sendMessage(m,c.Widget.Msg.AfterAttach),this.parent.fit()},d.prototype.moveWidget=function(f,m,g){t.ArrayExt.move(this._items,f,m),t.ArrayExt.move(this._sizers,f,m),this.parent.update()},d.prototype.detachWidget=function(f,m){var g=t.ArrayExt.removeAt(this._items,f);t.ArrayExt.removeAt(this._sizers,f),this.parent.isAttached&&n.MessageLoop.sendMessage(m,c.Widget.Msg.BeforeDetach),this.parent.node.removeChild(m.node),this.parent.isAttached&&n.MessageLoop.sendMessage(m,c.Widget.Msg.AfterDetach),g.dispose(),this.parent.fit()},d.prototype.onBeforeShow=function(f){p.prototype.onBeforeShow.call(this,f),this.parent.update()},d.prototype.onBeforeAttach=function(f){p.prototype.onBeforeAttach.call(this,f),this.parent.fit()},d.prototype.onChildShown=function(f){this.parent.fit()},d.prototype.onChildHidden=function(f){this.parent.fit()},d.prototype.onResize=function(f){this.parent.isVisible&&this._update(f.width,f.height)},d.prototype.onUpdateRequest=function(f){this.parent.isVisible&&this._update(-1,-1)},d.prototype.onFitRequest=function(f){this.parent.isAttached&&this._fit()},d.prototype._fit=function(){for(var f=0,m=0,g=this._items.length;m<g;++m)f+=+!this._items[m].isHidden;this._fixed=this._spacing*Math.max(0,f-1);for(var _=u.isHorizontal(this._direction),v=_?this._fixed:0,y=_?0:this._fixed,m=0,g=this._items.length;m<g;++m){var x=this._items[m],A=this._sizers[m];if(x.isHidden){A.minSize=0,A.maxSize=0;continue}x.fit(),A.sizeHint=d.getSizeBasis(x.widget),A.stretch=d.getStretch(x.widget),_?(A.minSize=x.minWidth,A.maxSize=x.maxWidth,v+=x.minWidth,y=Math.max(y,x.minHeight)):(A.minSize=x.minHeight,A.maxSize=x.maxHeight,y+=x.minHeight,v=Math.max(v,x.minWidth))}var w=this._box=r.ElementExt.boxSizing(this.parent.node);v+=w.horizontalSum,y+=w.verticalSum;var D=this.parent.node.style;D.minWidth=v+"px",D.minHeight=y+"px",this._dirty=!0,this.parent.parent&&n.MessageLoop.sendMessage(this.parent.parent,c.Widget.Msg.FitRequest),this._dirty&&n.MessageLoop.sendMessage(this.parent,c.Widget.Msg.UpdateRequest)},d.prototype._update=function(f,m){this._dirty=!1;for(var g=0,_=0,v=this._items.length;_<v;++_)g+=+!this._items[_].isHidden;if(g!==0){f<0&&(f=this.parent.node.offsetWidth),m<0&&(m=this.parent.node.offsetHeight),this._box||(this._box=r.ElementExt.boxSizing(this.parent.node));var y=this._box.paddingTop,x=this._box.paddingLeft,A=f-this._box.horizontalSum,w=m-this._box.verticalSum,D;switch(this._direction){case"left-to-right":D=o.BoxEngine.calc(this._sizers,Math.max(0,A-this._fixed));break;case"top-to-bottom":D=o.BoxEngine.calc(this._sizers,Math.max(0,w-this._fixed));break;case"right-to-left":D=o.BoxEngine.calc(this._sizers,Math.max(0,A-this._fixed)),x+=A;break;case"bottom-to-top":D=o.BoxEngine.calc(this._sizers,Math.max(0,w-this._fixed)),y+=w;break;default:throw"unreachable"}var b=0,S=0;if(D>0)switch(this._alignment){case"start":break;case"center":b=0,S=D/2;break;case"end":b=0,S=D;break;case"justify":b=D/g,S=0;break;default:throw"unreachable"}for(var _=0,v=this._items.length;_<v;++_){var T=this._items[_];if(!T.isHidden){var C=this._sizers[_].size;switch(this._direction){case"left-to-right":T.update(x+S,y,C+b,w),x+=C+b+this._spacing;break;case"top-to-bottom":T.update(x,y+S,A,C+b),y+=C+b+this._spacing;break;case"right-to-left":T.update(x-S-C-b,y,C+b,w),x-=C+b+this._spacing;break;case"bottom-to-top":T.update(x,y-S-C-b,A,C+b),y-=C+b+this._spacing;break;default:throw"unreachable"}}}}},d}(l.PanelLayout);i.BoxLayout=h,function(p){function d(_){return u.stretchProperty.get(_)}p.getStretch=d;function f(_,v){u.stretchProperty.set(_,v)}p.setStretch=f;function m(_){return u.sizeBasisProperty.get(_)}p.getSizeBasis=m;function g(_,v){u.sizeBasisProperty.set(_,v)}p.setSizeBasis=g}(h=i.BoxLayout||(i.BoxLayout={})),i.BoxLayout=h;var u;(function(p){p.stretchProperty=new s.AttachedProperty({name:"stretch",create:function(){return 0},coerce:function(g,_){return Math.max(0,Math.floor(_))},changed:m}),p.sizeBasisProperty=new s.AttachedProperty({name:"sizeBasis",create:function(){return 0},coerce:function(g,_){return Math.max(0,Math.floor(_))},changed:m});function d(g){return g==="left-to-right"||g==="right-to-left"}p.isHorizontal=d;function f(g){return Math.max(0,Math.floor(g))}p.clampSpacing=f;function m(g){g.parent&&g.parent.layout instanceof h&&g.parent.fit()}})(u||(u={}))})(tp);var sE={},Ml={},d9=P&&P.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(Ml,"__esModule",{value:!0});var f9=aa,p9=Gt,m9=function(i){d9(e,i);function e(t){t===void 0&&(t={});var r=i.call(this)||this;return r.addClass("p-Panel"),r.layout=B_.createLayout(t),r}return Object.defineProperty(e.prototype,"widgets",{get:function(){return this.layout.widgets},enumerable:!0,configurable:!0}),e.prototype.addWidget=function(t){this.layout.addWidget(t)},e.prototype.insertWidget=function(t,r){this.layout.insertWidget(t,r)},e}(p9.Widget);Ml.Panel=m9;var B_;(function(i){function e(t){return t.layout||new f9.PanelLayout}i.createLayout=e})(B_||(B_={}));(function(i){var e=P&&P.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var c in l)l.hasOwnProperty(c)&&(a[c]=l[c])};return function(a,l){o(a,l);function c(){this.constructor=a}a.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}();Object.defineProperty(i,"__esModule",{value:!0});var t=tp,r=Ml,n=function(o){e(a,o);function a(l){l===void 0&&(l={});var c=o.call(this,{layout:s.createLayout(l)})||this;return c.addClass("p-BoxPanel"),c}return Object.defineProperty(a.prototype,"direction",{get:function(){return this.layout.direction},set:function(l){this.layout.direction=l},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"alignment",{get:function(){return this.layout.alignment},set:function(l){this.layout.alignment=l},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"spacing",{get:function(){return this.layout.spacing},set:function(l){this.layout.spacing=l},enumerable:!0,configurable:!0}),a.prototype.onChildAdded=function(l){l.child.addClass("p-BoxPanel-child")},a.prototype.onChildRemoved=function(l){l.child.removeClass("p-BoxPanel-child")},a}(r.Panel);i.BoxPanel=n,function(o){function a(u){return t.BoxLayout.getStretch(u)}o.getStretch=a;function l(u,p){t.BoxLayout.setStretch(u,p)}o.setStretch=l;function c(u){return t.BoxLayout.getSizeBasis(u)}o.getSizeBasis=c;function h(u,p){t.BoxLayout.setSizeBasis(u,p)}o.setSizeBasis=h}(n=i.BoxPanel||(i.BoxPanel={})),i.BoxPanel=n;var s;(function(o){function a(l){return l.layout||new t.BoxLayout(l)}o.createLayout=a})(s||(s={}))})(sE);var oE={},Dc={},aE={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),function(e){e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]);function t(u){return u===null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"}e.isPrimitive=t;function r(u){return Array.isArray(u)}e.isArray=r;function n(u){return!t(u)&&!r(u)}e.isObject=n;function s(u,p){if(u===p)return!0;if(t(u)||t(p))return!1;var d=r(u),f=r(p);return d!==f?!1:d&&f?a(u,p):l(u,p)}e.deepEqual=s;function o(u){return t(u)?u:r(u)?c(u):h(u)}e.deepCopy=o;function a(u,p){if(u===p)return!0;if(u.length!==p.length)return!1;for(var d=0,f=u.length;d<f;++d)if(!s(u[d],p[d]))return!1;return!0}function l(u,p){if(u===p)return!0;for(var d in u)if(!(d in p))return!1;for(var d in p)if(!(d in u))return!1;for(var d in u)if(!s(u[d],p[d]))return!1;return!0}function c(u){for(var p=new Array(u.length),d=0,f=u.length;d<f;++d)p[d]=o(u[d]);return p}function h(u){var p={};for(var d in u)p[d]=o(u[d]);return p}}(i.JSONExt||(i.JSONExt={}))})(aE);var _y={};Object.defineProperty(_y,"__esModule",{value:!0});var g9=function(){function i(){this._types=[],this._values=[]}return i.prototype.types=function(){return this._types.slice()},i.prototype.hasData=function(e){return this._types.indexOf(e)!==-1},i.prototype.getData=function(e){var t=this._types.indexOf(e);return t!==-1?this._values[t]:void 0},i.prototype.setData=function(e,t){this.clearData(e),this._types.push(e),this._values.push(t)},i.prototype.clearData=function(e){var t=this._types.indexOf(e);t!==-1&&(this._types.splice(t,1),this._values.splice(t,1))},i.prototype.clear=function(){this._types.length=0,this._values.length=0},i}();_y.MimeData=g9;var vy={};Object.defineProperty(vy,"__esModule",{value:!0});var _9=function(){function i(){var e=this;this.promise=new Promise(function(t,r){e._resolve=t,e._reject=r})}return i.prototype.resolve=function(e){var t=this._resolve;t(e)},i.prototype.reject=function(e){var t=this._reject;t(e)},i}();vy.PromiseDelegate=_9;function v9(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var yy={};const ss={},y9=Object.freeze(Object.defineProperty({__proto__:null,default:ss},Symbol.toStringTag,{value:"Module"})),x9=Zv(y9);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),function(e){e.getRandomValues=function(){var t=typeof window<"u"&&(window.crypto||window.msCrypto)||typeof v9<"u"&&x9||null;return t&&typeof t.getRandomValues=="function"?function(n){return t.getRandomValues(n)}:t&&typeof t.randomFillSync=="function"?function(n){return t.randomFillSync(n)}:t&&typeof t.randomBytes=="function"?function(n){for(var s=t.randomBytes(n.length),o=0,a=s.length;o<a;++o)n[o]=s[o]}:function(n){for(var s=0,o=0,a=n.length;o<a;++o)o%4===0&&(s=Math.random()*4294967295>>>0),n[o]=s&255,s>>>=8}}()}(i.Random||(i.Random={}))})(yy);var xy={};Object.defineProperty(xy,"__esModule",{value:!0});var w9=function(){function i(e){this.name=e,this._tokenStructuralPropertyT=null}return i}();xy.Token=w9;var lE={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=yy;(function(t){t.uuid4=function(){for(var r=new Uint8Array(16),n=new Array(256),s=0;s<16;++s)n[s]="0"+s.toString(16);for(var s=16;s<256;++s)n[s]=s.toString(16);return function(){return e.Random.getRandomValues(r),r[6]=64|r[6]&15,r[8]=128|r[8]&63,n[r[0]]+n[r[1]]+n[r[2]]+n[r[3]]+"-"+n[r[4]]+n[r[5]]+"-"+n[r[6]]+n[r[7]]+"-"+n[r[8]]+n[r[9]]+"-"+n[r[10]]+n[r[11]]+n[r[12]]+n[r[13]]+n[r[14]]+n[r[15]]}}()})(i.UUID||(i.UUID={}))})(lE);(function(i){function e(t){for(var r in t)i.hasOwnProperty(r)||(i[r]=t[r])}Object.defineProperty(i,"__esModule",{value:!0}),e(aE),e(_y),e(vy),e(yy),e(xy),e(lE)})(Dc);var wy={},dp={};(function(i){var e=P&&P.__extends||function(){var l=function(c,h){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var d in p)p.hasOwnProperty(d)&&(u[d]=p[d])},l(c,h)};return function(c,h){l(c,h);function u(){this.constructor=c}c.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(i,"__esModule",{value:!0});var t=mt,r=tt,n=function(){function l(c){this._fn=c}return Object.defineProperty(l.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),l.prototype.dispose=function(){if(this._fn){var c=this._fn;this._fn=null,c()}},l}();i.DisposableDelegate=n;var s=function(l){e(c,l);function c(){var h=l!==null&&l.apply(this,arguments)||this;return h._disposed=new r.Signal(h),h}return Object.defineProperty(c.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),c.prototype.dispose=function(){this.isDisposed||(l.prototype.dispose.call(this),this._disposed.emit(void 0),r.Signal.clearData(this))},c}(n);i.ObservableDisposableDelegate=s;var o=function(){function l(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(l.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),l.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(function(c){c.dispose()}),this._items.clear())},l.prototype.contains=function(c){return this._items.has(c)},l.prototype.add=function(c){this._items.add(c)},l.prototype.remove=function(c){this._items.delete(c)},l.prototype.clear=function(){this._items.clear()},l}();i.DisposableSet=o,function(l){function c(h){var u=new l;return t.each(h,function(p){u.add(p)}),u}l.from=c}(o=i.DisposableSet||(i.DisposableSet={})),i.DisposableSet=o;var a=function(l){e(c,l);function c(){var h=l!==null&&l.apply(this,arguments)||this;return h._disposed=new r.Signal(h),h}return Object.defineProperty(c.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),c.prototype.dispose=function(){this.isDisposed||(l.prototype.dispose.call(this),this._disposed.emit(void 0),r.Signal.clearData(this))},c}(o);i.ObservableDisposableSet=a,function(l){function c(h){var u=new l;return t.each(h,function(p){u.add(p)}),u}l.from=c}(a=i.ObservableDisposableSet||(i.ObservableDisposableSet={})),i.ObservableDisposableSet=a})(dp);var fp={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(){return n.keyboardLayout}i.getKeyboardLayout=e;function t(s){n.keyboardLayout=s}i.setKeyboardLayout=t;var r=function(){function s(o,a){this.name=o,this._codes=a,this._keys=s.extractKeys(a)}return s.prototype.keys=function(){return Object.keys(this._keys)},s.prototype.isValidKey=function(o){return o in this._keys},s.prototype.keyForKeydownEvent=function(o){return this._codes[o.keyCode]||""},s}();i.KeycodeLayout=r,function(s){function o(a){var l=Object.create(null);for(var c in a)l[a[c]]=!0;return l}s.extractKeys=o}(r=i.KeycodeLayout||(i.KeycodeLayout={})),i.KeycodeLayout=r,i.EN_US=new r("en-us",{8:"Backspace",9:"Tab",13:"Enter",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"});var n;(function(s){s.keyboardLayout=i.EN_US})(n||(n={}))})(fp);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=mt,t=Dc,r=dp,n=ai,s=fp,o=tt,a=function(){function c(){this._timerID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=Object.create(null),this._commandChanged=new o.Signal(this),this._commandExecuted=new o.Signal(this),this._keyBindingChanged=new o.Signal(this)}return Object.defineProperty(c.prototype,"commandChanged",{get:function(){return this._commandChanged},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"commandExecuted",{get:function(){return this._commandExecuted},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"keyBindingChanged",{get:function(){return this._keyBindingChanged},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"keyBindings",{get:function(){return this._keyBindings},enumerable:!0,configurable:!0}),c.prototype.listCommands=function(){return Object.keys(this._commands)},c.prototype.hasCommand=function(h){return h in this._commands},c.prototype.addCommand=function(h,u){var p=this;if(h in this._commands)throw new Error("Command '"+h+"' already registered.");return this._commands[h]=l.createCommand(u),this._commandChanged.emit({id:h,type:"added"}),new r.DisposableDelegate(function(){delete p._commands[h],p._commandChanged.emit({id:h,type:"removed"})})},c.prototype.notifyCommandChanged=function(h){if(h!==void 0&&!(h in this._commands))throw new Error("Command '"+h+"' is not registered.");this._commandChanged.emit({id:h,type:h?"changed":"many-changed"})},c.prototype.label=function(h,u){u===void 0&&(u=t.JSONExt.emptyObject);var p=this._commands[h];return p?p.label.call(void 0,u):""},c.prototype.mnemonic=function(h,u){u===void 0&&(u=t.JSONExt.emptyObject);var p=this._commands[h];return p?p.mnemonic.call(void 0,u):-1},c.prototype.icon=function(h,u){return u===void 0&&(u=t.JSONExt.emptyObject),this.iconClass(h,u)},c.prototype.iconClass=function(h,u){u===void 0&&(u=t.JSONExt.emptyObject);var p=this._commands[h];return p?p.iconClass.call(void 0,u):""},c.prototype.iconLabel=function(h,u){u===void 0&&(u=t.JSONExt.emptyObject);var p=this._commands[h];return p?p.iconLabel.call(void 0,u):""},c.prototype.caption=function(h,u){u===void 0&&(u=t.JSONExt.emptyObject);var p=this._commands[h];return p?p.caption.call(void 0,u):""},c.prototype.usage=function(h,u){u===void 0&&(u=t.JSONExt.emptyObject);var p=this._commands[h];return p?p.usage.call(void 0,u):""},c.prototype.className=function(h,u){u===void 0&&(u=t.JSONExt.emptyObject);var p=this._commands[h];return p?p.className.call(void 0,u):""},c.prototype.dataset=function(h,u){u===void 0&&(u=t.JSONExt.emptyObject);var p=this._commands[h];return p?p.dataset.call(void 0,u):{}},c.prototype.isEnabled=function(h,u){u===void 0&&(u=t.JSONExt.emptyObject);var p=this._commands[h];return p?p.isEnabled.call(void 0,u):!1},c.prototype.isToggled=function(h,u){u===void 0&&(u=t.JSONExt.emptyObject);var p=this._commands[h];return p?p.isToggled.call(void 0,u):!1},c.prototype.isVisible=function(h,u){u===void 0&&(u=t.JSONExt.emptyObject);var p=this._commands[h];return p?p.isVisible.call(void 0,u):!1},c.prototype.execute=function(h,u){u===void 0&&(u=t.JSONExt.emptyObject);var p=this._commands[h];if(!p)return Promise.reject(new Error("Command '"+h+"' not registered."));var d;try{d=p.execute.call(void 0,u)}catch(m){d=Promise.reject(m)}var f=Promise.resolve(d);return this._commandExecuted.emit({id:h,args:u,result:f}),f},c.prototype.addKeyBinding=function(h){var u=this,p=l.createKeyBinding(h);return this._keyBindings.push(p),this._keyBindingChanged.emit({binding:p,type:"added"}),new r.DisposableDelegate(function(){e.ArrayExt.removeFirstOf(u._keyBindings,p),u._keyBindingChanged.emit({binding:p,type:"removed"})})},c.prototype.processKeydownEvent=function(h){if(!this._replaying){var u=c.keystrokeForKeydownEvent(h);if(!u){this._replayKeydownEvents(),this._clearPendingState();return}this._keystrokes.push(u);var p=l.matchKeyBinding(this._keyBindings,this._keystrokes,h),d=p.exact,f=p.partial;if(!d&&!f){this._replayKeydownEvents(),this._clearPendingState();return}if(h.preventDefault(),h.stopPropagation(),d&&!f){this._executeKeyBinding(d),this._clearPendingState();return}d&&(this._exactKeyMatch=d),this._keydownEvents.push(h),this._startTimer()}},c.prototype._startTimer=function(){var h=this;this._clearTimer(),this._timerID=window.setTimeout(function(){h._onPendingTimeout()},l.CHORD_TIMEOUT)},c.prototype._clearTimer=function(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)},c.prototype._replayKeydownEvents=function(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(l.replayKeyEvent),this._replaying=!1)},c.prototype._executeKeyBinding=function(h){var u=h.command,p=h.args;if(!this.hasCommand(u)||!this.isEnabled(u,p)){var d=this.hasCommand(u)?"enabled":"registered",f=h.keys.join(", "),m="Cannot execute key binding '"+f+"':",g="command '"+u+"' is not "+d+".";console.warn(m+" "+g);return}this.execute(u,p)},c.prototype._clearPendingState=function(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0},c.prototype._onPendingTimeout=function(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()},c}();i.CommandRegistry=a,function(c){function h(f){for(var m="",g=!1,_=!1,v=!1,y=!1,x=0,A=f.split(/\s+/);x<A.length;x++){var w=A[x];w==="Accel"?n.Platform.IS_MAC?_=!0:v=!0:w==="Alt"?g=!0:w==="Cmd"?_=!0:w==="Ctrl"?v=!0:w==="Shift"?y=!0:w.length>0&&(m=w)}return{cmd:_,ctrl:v,alt:g,shift:y,key:m}}c.parseKeystroke=h;function u(f){var m="",g=h(f);return g.ctrl&&(m+="Ctrl "),g.alt&&(m+="Alt "),g.shift&&(m+="Shift "),g.cmd&&n.Platform.IS_MAC&&(m+="Cmd "),m+g.key}c.normalizeKeystroke=u;function p(f){var m="",g=h(f);return n.Platform.IS_MAC?(g.ctrl&&(m+=" "),g.alt&&(m+=" "),g.shift&&(m+=" "),g.cmd&&(m+=" ")):(g.ctrl&&(m+="Ctrl+"),g.alt&&(m+="Alt+"),g.shift&&(m+="Shift+")),m+g.key}c.formatKeystroke=p;function d(f){var m=s.getKeyboardLayout().keyForKeydownEvent(f);if(!m)return"";var g="";return f.ctrlKey&&(g+="Ctrl "),f.altKey&&(g+="Alt "),f.shiftKey&&(g+="Shift "),f.metaKey&&n.Platform.IS_MAC&&(g+="Cmd "),g+m}c.keystrokeForKeydownEvent=d}(a=i.CommandRegistry||(i.CommandRegistry={})),i.CommandRegistry=a;var l;(function(c){c.CHORD_TIMEOUT=1e3;function h(S){return{execute:S.execute,label:y(S.label,f),mnemonic:y(S.mnemonic,m),iconClass:y(S.iconClass||S.icon,f),iconLabel:y(S.iconLabel,f),caption:y(S.caption,f),usage:y(S.usage,f),className:y(S.className,f),dataset:y(S.dataset,v),isEnabled:S.isEnabled||g,isToggled:S.isToggled||_,isVisible:S.isVisible||g}}c.createCommand=h;function u(S){return{keys:x(S),selector:A(S),command:S.command,args:S.args||t.JSONExt.emptyObject}}c.createKeyBinding=u;function p(S,T,C){for(var I=null,M=!1,k=1/0,H=0,Y=0,O=S.length;Y<O;++Y){var B=S[Y],q=w(B.keys,T);if(q!==0){if(q===2){!M&&D(B.selector,C)!==-1&&(M=!0);continue}var le=D(B.selector,C);if(!(le===-1||le>k)){var X=n.Selector.calculateSpecificity(B.selector);(!I||le<k||X>=H)&&(I=B,k=le,H=X)}}}return{exact:I,partial:M}}c.matchKeyBinding=p;function d(S){S.target.dispatchEvent(b(S))}c.replayKeyEvent=d;var f=function(){return""},m=function(){return-1},g=function(){return!0},_=function(){return!1},v=function(){return{}};function y(S,T){return S===void 0?T:typeof S=="function"?S:function(){return S}}function x(S){var T;return n.Platform.IS_WIN?T=S.winKeys||S.keys:n.Platform.IS_MAC?T=S.macKeys||S.keys:T=S.linuxKeys||S.keys,T.map(a.normalizeKeystroke)}function A(S){if(S.selector.indexOf(",")!==-1)throw new Error("Selector cannot contain commas: "+S.selector);if(!n.Selector.isValid(S.selector))throw new Error("Invalid selector: "+S.selector);return S.selector}function w(S,T){if(S.length<T.length)return 0;for(var C=0,I=T.length;C<I;++C)if(S[C]!==T[C])return 0;return S.length>T.length?2:1}function D(S,T){for(var C=T.target,I=T.currentTarget,M=0;C!==null;C=C.parentElement,++M){if(n.Selector.matches(C,S))return M;if(C===I)return-1}return-1}function b(S){var T=document.createEvent("Event"),C=S.bubbles||!0,I=S.cancelable||!0;return T.initEvent(S.type||"keydown",C,I),T.key=S.key||"",T.keyCode=S.keyCode||0,T.which=S.keyCode||0,T.ctrlKey=S.ctrlKey||!1,T.altKey=S.altKey||!1,T.shiftKey=S.shiftKey||!1,T.metaKey=S.metaKey||!1,T.view=S.view||window,T}})(l||(l={}))})(wy);var Tc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=mt,t=function(){function o(a){this.type="text",this.content=a}return o}();i.VirtualText=t;var r=function(){function o(a,l,c){this.type="element",this.tag=a,this.attrs=l,this.children=c}return o}();i.VirtualElement=r;function n(o){for(var a={},l=[],c=1,h=arguments.length;c<h;++c){var u=arguments[c];typeof u=="string"?l.push(new t(u)):u instanceof t||u instanceof r?l.push(u):u instanceof Array?p(l,u):c===1&&u&&typeof u=="object"&&(a=u)}return new r(o,a,l);function p(d,f){for(var m=0,g=f;m<g.length;m++){var _=g[m];typeof _=="string"?d.push(new t(_)):(_ instanceof t||_ instanceof r)&&d.push(_)}}}i.h=n,function(o){o.a=o.bind(void 0,"a"),o.abbr=o.bind(void 0,"abbr"),o.address=o.bind(void 0,"address"),o.area=o.bind(void 0,"area"),o.article=o.bind(void 0,"article"),o.aside=o.bind(void 0,"aside"),o.audio=o.bind(void 0,"audio"),o.b=o.bind(void 0,"b"),o.bdi=o.bind(void 0,"bdi"),o.bdo=o.bind(void 0,"bdo"),o.blockquote=o.bind(void 0,"blockquote"),o.br=o.bind(void 0,"br"),o.button=o.bind(void 0,"button"),o.canvas=o.bind(void 0,"canvas"),o.caption=o.bind(void 0,"caption"),o.cite=o.bind(void 0,"cite"),o.code=o.bind(void 0,"code"),o.col=o.bind(void 0,"col"),o.colgroup=o.bind(void 0,"colgroup"),o.data=o.bind(void 0,"data"),o.datalist=o.bind(void 0,"datalist"),o.dd=o.bind(void 0,"dd"),o.del=o.bind(void 0,"del"),o.dfn=o.bind(void 0,"dfn"),o.div=o.bind(void 0,"div"),o.dl=o.bind(void 0,"dl"),o.dt=o.bind(void 0,"dt"),o.em=o.bind(void 0,"em"),o.embed=o.bind(void 0,"embed"),o.fieldset=o.bind(void 0,"fieldset"),o.figcaption=o.bind(void 0,"figcaption"),o.figure=o.bind(void 0,"figure"),o.footer=o.bind(void 0,"footer"),o.form=o.bind(void 0,"form"),o.h1=o.bind(void 0,"h1"),o.h2=o.bind(void 0,"h2"),o.h3=o.bind(void 0,"h3"),o.h4=o.bind(void 0,"h4"),o.h5=o.bind(void 0,"h5"),o.h6=o.bind(void 0,"h6"),o.header=o.bind(void 0,"header"),o.hr=o.bind(void 0,"hr"),o.i=o.bind(void 0,"i"),o.iframe=o.bind(void 0,"iframe"),o.img=o.bind(void 0,"img"),o.input=o.bind(void 0,"input"),o.ins=o.bind(void 0,"ins"),o.kbd=o.bind(void 0,"kbd"),o.label=o.bind(void 0,"label"),o.legend=o.bind(void 0,"legend"),o.li=o.bind(void 0,"li"),o.main=o.bind(void 0,"main"),o.map=o.bind(void 0,"map"),o.mark=o.bind(void 0,"mark"),o.meter=o.bind(void 0,"meter"),o.nav=o.bind(void 0,"nav"),o.noscript=o.bind(void 0,"noscript"),o.object=o.bind(void 0,"object"),o.ol=o.bind(void 0,"ol"),o.optgroup=o.bind(void 0,"optgroup"),o.option=o.bind(void 0,"option"),o.output=o.bind(void 0,"output"),o.p=o.bind(void 0,"p"),o.param=o.bind(void 0,"param"),o.pre=o.bind(void 0,"pre"),o.progress=o.bind(void 0,"progress"),o.q=o.bind(void 0,"q"),o.rp=o.bind(void 0,"rp"),o.rt=o.bind(void 0,"rt"),o.ruby=o.bind(void 0,"ruby"),o.s=o.bind(void 0,"s"),o.samp=o.bind(void 0,"samp"),o.section=o.bind(void 0,"section"),o.select=o.bind(void 0,"select"),o.small=o.bind(void 0,"small"),o.source=o.bind(void 0,"source"),o.span=o.bind(void 0,"span"),o.strong=o.bind(void 0,"strong"),o.sub=o.bind(void 0,"sub"),o.summary=o.bind(void 0,"summary"),o.sup=o.bind(void 0,"sup"),o.table=o.bind(void 0,"table"),o.tbody=o.bind(void 0,"tbody"),o.td=o.bind(void 0,"td"),o.textarea=o.bind(void 0,"textarea"),o.tfoot=o.bind(void 0,"tfoot"),o.th=o.bind(void 0,"th"),o.thead=o.bind(void 0,"thead"),o.time=o.bind(void 0,"time"),o.title=o.bind(void 0,"title"),o.tr=o.bind(void 0,"tr"),o.track=o.bind(void 0,"track"),o.u=o.bind(void 0,"u"),o.ul=o.bind(void 0,"ul"),o.var_=o.bind(void 0,"var"),o.video=o.bind(void 0,"video"),o.wbr=o.bind(void 0,"wbr")}(n=i.h||(i.h={})),function(o){function a(c){return s.createDOMNode(c)}o.realize=a;function l(c,h){var u=s.hostMap.get(h)||[],p=s.asContentArray(c);s.hostMap.set(h,p),s.updateContent(h,u,p)}o.render=l}(i.VirtualDOM||(i.VirtualDOM={}));var s;(function(o){o.hostMap=new WeakMap;function a(v){return v?v instanceof Array?v:[v]:[]}o.asContentArray=a;function l(v){if(v.type==="text")return document.createTextNode(v.content);var y=document.createElement(v.tag);u(y,v.attrs);for(var x=0,A=v.children.length;x<A;++x)y.appendChild(l(v.children[x]));return y}o.createDOMNode=l;function c(v,y,x){if(y!==x){for(var A=_(v,y),w=y.slice(),D=v.firstChild,b=x.length,S=0;S<b;++S){if(S>=w.length){v.appendChild(l(x[S]));continue}var T=w[S],C=x[S];if(T===C){D=D.nextSibling;continue}if(T.type==="text"&&C.type==="text"){D.textContent=C.content,D=D.nextSibling;continue}if(T.type==="text"||C.type==="text"){e.ArrayExt.insert(w,S,C),v.insertBefore(l(C),D);continue}var I=C.attrs.key;if(I&&I in A){var M=A[I];M.vNode!==T&&(e.ArrayExt.move(w,w.indexOf(M.vNode,S+1),S),v.insertBefore(M.element,D),T=M.vNode,D=M.element)}if(T===C){D=D.nextSibling;continue}var k=T.attrs.key;if(k&&k!==I){e.ArrayExt.insert(w,S,C),v.insertBefore(l(C),D);continue}if(T.tag!==C.tag){e.ArrayExt.insert(w,S,C),v.insertBefore(l(C),D);continue}p(D,T.attrs,C.attrs),c(D,T.children,C.children),D=D.nextSibling}for(var S=w.length-b;S>0;--S)v.removeChild(v.lastChild)}}o.updateContent=c;var h={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function u(v,y){for(var x in y)x in h||(x.substr(0,2)==="on"?v[x]=y[x]:v.setAttribute(x,y[x]));y.className!==void 0&&v.setAttribute("class",y.className),y.htmlFor!==void 0&&v.setAttribute("for",y.htmlFor),y.dataset&&d(v,y.dataset),y.style&&m(v,y.style)}function p(v,y,x){if(y!==x){var A;for(A in y)A in h||A in x||(A.substr(0,2)==="on"?v[A]=null:v.removeAttribute(A));for(A in x)A in h||y[A]===x[A]||(A.substr(0,2)==="on"?v[A]=x[A]:v.setAttribute(A,x[A]));y.className!==x.className&&(x.className!==void 0?v.setAttribute("class",x.className):v.removeAttribute("class")),y.htmlFor!==x.htmlFor&&(x.htmlFor!==void 0?v.setAttribute("for",x.htmlFor):v.removeAttribute("for")),y.dataset!==x.dataset&&f(v,y.dataset||{},x.dataset||{}),y.style!==x.style&&g(v,y.style||{},x.style||{})}}function d(v,y){for(var x in y)v.setAttribute("data-"+x,y[x])}function f(v,y,x){for(var A in y)A in x||v.removeAttribute("data-"+A);for(var w in x)y[w]!==x[w]&&v.setAttribute("data-"+w,x[w])}function m(v,y){var x=v.style,A;for(A in y)x[A]=y[A]}function g(v,y,x){var A=v.style,w;for(w in y)w in x||(A[w]="");for(w in x)y[w]!==x[w]&&(A[w]=x[w])}function _(v,y){for(var x=v.firstChild,A=Object.create(null),w=0,D=y;w<D.length;w++){var b=D[w];b.type==="element"&&b.attrs.key&&(A[b.attrs.key]={vNode:b,element:x}),x=x.nextSibling}return A}})(s||(s={}))})(Tc);(function(i){var e=P&&P.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){u(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}(),t=P&&P.__assign||Object.assign||function(u){for(var p,d=1,f=arguments.length;d<f;d++){p=arguments[d];for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(u[m]=p[m])}return u};Object.defineProperty(i,"__esModule",{value:!0});var r=mt,n=Dc,s=wy,o=ai,a=Tc,l=Gt,c=function(u){e(p,u);function p(d){var f=u.call(this,{node:h.createNode()})||this;return f._activeIndex=-1,f._items=[],f._results=null,f.addClass("p-CommandPalette"),f.setFlag(l.Widget.Flag.DisallowLayout),f.commands=d.commands,f.renderer=d.renderer||p.defaultRenderer,f.commands.commandChanged.connect(f._onGenericChange,f),f.commands.keyBindingChanged.connect(f._onGenericChange,f),f}return p.prototype.dispose=function(){this._items.length=0,this._results=null,u.prototype.dispose.call(this)},Object.defineProperty(p.prototype,"searchNode",{get:function(){return this.node.getElementsByClassName("p-CommandPalette-search")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"inputNode",{get:function(){return this.node.getElementsByClassName("p-CommandPalette-input")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("p-CommandPalette-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),p.prototype.addItem=function(d){var f=h.createItem(this.commands,d);return this._items.push(f),this.refresh(),f},p.prototype.removeItem=function(d){this.removeItemAt(this._items.indexOf(d))},p.prototype.removeItemAt=function(d){var f=r.ArrayExt.removeAt(this._items,d);f&&this.refresh()},p.prototype.clearItems=function(){this._items.length!==0&&(this._items.length=0,this.refresh())},p.prototype.refresh=function(){this._results=null,this.update()},p.prototype.handleEvent=function(d){switch(d.type){case"click":this._evtClick(d);break;case"keydown":this._evtKeyDown(d);break;case"input":this.refresh();break;case"focus":case"blur":this._toggleFocused();break}},p.prototype.onBeforeAttach=function(d){this.node.addEventListener("click",this),this.node.addEventListener("keydown",this),this.node.addEventListener("input",this),this.node.addEventListener("focus",this,!0),this.node.addEventListener("blur",this,!0)},p.prototype.onAfterDetach=function(d){this.node.removeEventListener("click",this),this.node.removeEventListener("keydown",this),this.node.removeEventListener("input",this),this.node.removeEventListener("focus",this,!0),this.node.removeEventListener("blur",this,!0)},p.prototype.onActivateRequest=function(d){if(this.isAttached){var f=this.inputNode;f.focus(),f.select()}},p.prototype.onUpdateRequest=function(d){var f=this.inputNode.value,m=this.contentNode,g=this._results;if(g||(g=this._results=h.search(this._items,f),this._activeIndex=f?r.ArrayExt.findFirstIndex(g,h.canActivate):-1),!f&&g.length===0){a.VirtualDOM.render(null,m);return}if(f&&g.length===0){var _=this.renderer.renderEmptyMessage({query:f});a.VirtualDOM.render(_,m);return}for(var v=this.renderer,y=this._activeIndex,x=new Array(g.length),A=0,w=g.length;A<w;++A){var D=g[A];if(D.type==="header"){var b=D.indices,S=D.category;x[A]=v.renderHeader({category:S,indices:b})}else{var T=D.item,b=D.indices,C=A===y;x[A]=v.renderItem({item:T,indices:b,active:C})}}if(a.VirtualDOM.render(x,m),y<0||y>=g.length)m.scrollTop=0;else{var I=m.children[y];o.ElementExt.scrollIntoViewIfNeeded(m,I)}},p.prototype._evtClick=function(d){if(d.button===0){var f=r.ArrayExt.findFirstIndex(this.contentNode.children,function(m){return m.contains(d.target)});f!==-1&&(d.preventDefault(),d.stopPropagation(),this._execute(f))}},p.prototype._evtKeyDown=function(d){if(!(d.altKey||d.ctrlKey||d.metaKey||d.shiftKey))switch(d.keyCode){case 13:d.preventDefault(),d.stopPropagation(),this._execute(this._activeIndex);break;case 38:d.preventDefault(),d.stopPropagation(),this._activatePreviousItem();break;case 40:d.preventDefault(),d.stopPropagation(),this._activateNextItem();break}},p.prototype._activateNextItem=function(){if(!(!this._results||this._results.length===0)){var d=this._activeIndex,f=this._results.length,m=d<f-1?d+1:0,g=m===0?f-1:m-1;this._activeIndex=r.ArrayExt.findFirstIndex(this._results,h.canActivate,m,g),this.update()}},p.prototype._activatePreviousItem=function(){if(!(!this._results||this._results.length===0)){var d=this._activeIndex,f=this._results.length,m=d<=0?f-1:d-1,g=m===f-1?0:m+1;this._activeIndex=r.ArrayExt.findLastIndex(this._results,h.canActivate,m,g),this.update()}},p.prototype._execute=function(d){if(this._results){var f=this._results[d];if(f){if(f.type==="header"){var m=this.inputNode;m.value=f.category.toLowerCase()+" ",m.focus(),this.refresh();return}f.item.isEnabled&&(this.commands.execute(f.item.command,f.item.args),this.inputNode.value="",this.refresh())}}},p.prototype._toggleFocused=function(){var d=document.activeElement===this.inputNode;this.toggleClass("p-mod-focused",d)},p.prototype._onGenericChange=function(){this.refresh()},p}(l.Widget);i.CommandPalette=c,function(u){var p=function(){function d(){}return d.prototype.renderHeader=function(f){var m=this.formatHeader(f);return a.h.li({className:"p-CommandPalette-header"},m)},d.prototype.renderItem=function(f){var m=this.createItemClass(f),g=this.createItemDataset(f);return a.h.li({className:m,dataset:g},this.renderItemIcon(f),this.renderItemContent(f),this.renderItemShortcut(f))},d.prototype.renderEmptyMessage=function(f){var m=this.formatEmptyMessage(f);return a.h.li({className:"p-CommandPalette-emptyMessage"},m)},d.prototype.renderItemIcon=function(f){var m=this.createIconClass(f);return a.h.div({className:m},f.item.iconLabel)},d.prototype.renderItemContent=function(f){return a.h.div({className:"p-CommandPalette-itemContent"},this.renderItemLabel(f),this.renderItemCaption(f))},d.prototype.renderItemLabel=function(f){var m=this.formatItemLabel(f);return a.h.div({className:"p-CommandPalette-itemLabel"},m)},d.prototype.renderItemCaption=function(f){var m=this.formatItemCaption(f);return a.h.div({className:"p-CommandPalette-itemCaption"},m)},d.prototype.renderItemShortcut=function(f){var m=this.formatItemShortcut(f);return a.h.div({className:"p-CommandPalette-itemShortcut"},m)},d.prototype.createItemClass=function(f){var m="p-CommandPalette-item";f.item.isEnabled||(m+=" p-mod-disabled"),f.item.isToggled&&(m+=" p-mod-toggled"),f.active&&(m+=" p-mod-active");var g=f.item.className;return g&&(m+=" "+g),m},d.prototype.createItemDataset=function(f){return t({},f.item.dataset,{command:f.item.command})},d.prototype.createIconClass=function(f){var m="p-CommandPalette-itemIcon",g=f.item.iconClass;return g?m+" "+g:m},d.prototype.formatHeader=function(f){return!f.indices||f.indices.length===0?f.category:r.StringExt.highlight(f.category,f.indices,a.h.mark)},d.prototype.formatEmptyMessage=function(f){return"No commands found that match '"+f.query+"'"},d.prototype.formatItemShortcut=function(f){var m=f.item.keyBinding;return m?m.keys.map(h.formatKeystroke).join(", "):null},d.prototype.formatItemLabel=function(f){return!f.indices||f.indices.length===0?f.item.label:r.StringExt.highlight(f.item.label,f.indices,a.h.mark)},d.prototype.formatItemCaption=function(f){return f.item.caption},d}();u.Renderer=p,u.defaultRenderer=new p}(c=i.CommandPalette||(i.CommandPalette={})),i.CommandPalette=c;var h;(function(u){function p(){var b=document.createElement("div"),S=document.createElement("div"),T=document.createElement("div"),C=document.createElement("input"),I=document.createElement("ul");return S.className="p-CommandPalette-search",T.className="p-CommandPalette-wrapper",C.className="p-CommandPalette-input",I.className="p-CommandPalette-content",C.spellcheck=!1,T.appendChild(C),S.appendChild(T),b.appendChild(S),b.appendChild(I),b}u.createNode=p;function d(b,S){return new D(b,S)}u.createItem=d;function f(b){var S="",T=s.CommandRegistry.parseKeystroke(b);return o.Platform.IS_MAC?(T.ctrl&&(S+=" "),T.alt&&(S+=" "),T.shift&&(S+=" "),T.cmd&&(S+=" ")):(T.ctrl&&(S+="Ctrl+"),T.alt&&(S+="Alt+"),T.shift&&(S+="Shift+")),S+T.key}u.formatKeystroke=f;function m(b,S){var T=y(b,S);return T.sort(A),w(T)}u.search=m;function g(b){return b.type==="item"&&b.item.isEnabled}u.canActivate=g;function _(b){return b.trim().replace(/\s+/g," ")}function v(b){return b.replace(/\s+/g,"").toLowerCase()}function y(b,S){S=v(S);for(var T=[],C=0,I=b.length;C<I;++C){var M=b[C];if(M.isVisible){if(!S){T.push({matchType:3,categoryIndices:null,labelIndices:null,score:0,item:M});continue}var k=x(M,S);k&&(M.isEnabled||(k.score+=1e3),T.push(k))}}return T}function x(b,S){for(var T=b.category.toLowerCase(),C=b.label.toLowerCase(),I=T+" "+C,M=1/0,k=null,H=/\b\w/g;;){var Y=H.exec(I);if(!Y)break;var O=r.StringExt.matchSumOfDeltas(I,S,Y.index);if(!O)break;O&&O.score<=M&&(M=O.score,k=O.indices)}if(!k||M===1/0)return null;for(var B=T.length+1,q=r.ArrayExt.lowerBound(k,B,function(L,U){return L-U}),le=k.slice(0,q),X=k.slice(q),Se=0,R=X.length;Se<R;++Se)X[Se]-=B;return le.length===0?{matchType:0,categoryIndices:null,labelIndices:X,score:M,item:b}:X.length===0?{matchType:1,categoryIndices:le,labelIndices:null,score:M,item:b}:{matchType:2,categoryIndices:le,labelIndices:X,score:M,item:b}}function A(b,S){var T=b.matchType-S.matchType;if(T!==0)return T;var C=b.score-S.score;if(C!==0)return C;var I=0,M=0;switch(b.matchType){case 0:I=b.labelIndices[0],M=S.labelIndices[0];break;case 1:case 2:I=b.categoryIndices[0],M=S.categoryIndices[0];break}if(I!==M)return I-M;var k=b.item.category.localeCompare(S.item.category);if(k!==0)return k;var H=b.item.rank,Y=S.item.rank;return H!==Y?H<Y?-1:1:b.item.label.localeCompare(S.item.label)}function w(b){var S=new Array(b.length);r.ArrayExt.fill(S,!1);for(var T=[],C=0,I=b.length;C<I;++C)if(!S[C]){var M=b[C],k=M.item,H=M.categoryIndices,Y=k.category;T.push({type:"header",category:Y,indices:H});for(var O=C;O<I;++O)if(!S[O]){var B=b[O],q=B.item,le=B.labelIndices;q.category===Y&&(T.push({type:"item",item:q,indices:le}),S[O]=!0)}}return T}var D=function(){function b(S,T){this._commands=S,this.category=_(T.category),this.command=T.command,this.args=T.args||n.JSONExt.emptyObject,this.rank=T.rank!==void 0?T.rank:1/0}return Object.defineProperty(b.prototype,"label",{get:function(){return this._commands.label(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"iconClass",{get:function(){return this._commands.iconClass(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"iconLabel",{get:function(){return this._commands.iconLabel(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"caption",{get:function(){return this._commands.caption(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"className",{get:function(){return this._commands.className(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"dataset",{get:function(){return this._commands.dataset(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isEnabled",{get:function(){return this._commands.isEnabled(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isToggled",{get:function(){return this._commands.isToggled(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isVisible",{get:function(){return this._commands.isVisible(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"keyBinding",{get:function(){var S=this,T=S.command,C=S.args;return r.ArrayExt.findLastValue(this._commands.keyBindings,function(I){return I.command===T&&n.JSONExt.deepEqual(I.args,C)})||null},enumerable:!0,configurable:!0}),b}()})(h||(h={}))})(oE);var by={},Sy={};(function(i){var e=P&&P.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var _ in g)g.hasOwnProperty(_)&&(m[_]=g[_])};return function(m,g){f(m,g);function _(){this.constructor=m}m.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}}(),t=P&&P.__assign||Object.assign||function(f){for(var m,g=1,_=arguments.length;g<_;g++){m=arguments[g];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(f[v]=m[v])}return f};Object.defineProperty(i,"__esModule",{value:!0});var r=mt,n=wy,s=Dc,o=ai,a=fp,l=wi,c=tt,h=Tc,u=Gt,p=function(f){e(m,f);function m(g){var _=f.call(this,{node:d.createNode()})||this;return _._childIndex=-1,_._activeIndex=-1,_._openTimerID=0,_._closeTimerID=0,_._items=[],_._childMenu=null,_._parentMenu=null,_._aboutToClose=new c.Signal(_),_._menuRequested=new c.Signal(_),_.addClass("p-Menu"),_.setFlag(u.Widget.Flag.DisallowLayout),_.commands=g.commands,_.renderer=g.renderer||m.defaultRenderer,_}return m.prototype.dispose=function(){this.close(),this._items.length=0,f.prototype.dispose.call(this)},Object.defineProperty(m.prototype,"aboutToClose",{get:function(){return this._aboutToClose},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"menuRequested",{get:function(){return this._menuRequested},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"parentMenu",{get:function(){return this._parentMenu},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"childMenu",{get:function(){return this._childMenu},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"rootMenu",{get:function(){for(var g=this;g._parentMenu;)g=g._parentMenu;return g},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"leafMenu",{get:function(){for(var g=this;g._childMenu;)g=g._childMenu;return g},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("p-Menu-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"activeItem",{get:function(){return this._items[this._activeIndex]||null},set:function(g){this.activeIndex=g?this._items.indexOf(g):-1},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"activeIndex",{get:function(){return this._activeIndex},set:function(g){(g<0||g>=this._items.length)&&(g=-1),g!==-1&&!d.canActivate(this._items[g])&&(g=-1),this._activeIndex!==g&&(this._activeIndex=g,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),m.prototype.activateNextItem=function(){var g=this._items.length,_=this._activeIndex,v=_<g-1?_+1:0,y=v===0?g-1:v-1;this.activeIndex=r.ArrayExt.findFirstIndex(this._items,d.canActivate,v,y)},m.prototype.activatePreviousItem=function(){var g=this._items.length,_=this._activeIndex,v=_<=0?g-1:_-1,y=v===g-1?0:v+1;this.activeIndex=r.ArrayExt.findLastIndex(this._items,d.canActivate,v,y)},m.prototype.triggerActiveItem=function(){if(this.isAttached){var g=this.activeItem;if(g){if(this._cancelOpenTimer(),this._cancelCloseTimer(),g.type==="submenu"){this._openChildMenu(!0);return}this.rootMenu.close();var _=g.command,v=g.args;this.commands.isEnabled(_,v)?this.commands.execute(_,v):console.log("Command '"+_+"' is disabled.")}}},m.prototype.addItem=function(g){return this.insertItem(this._items.length,g)},m.prototype.insertItem=function(g,_){this.isAttached&&this.close(),this.activeIndex=-1;var v=Math.max(0,Math.min(g,this._items.length)),y=d.createItem(this,_);return r.ArrayExt.insert(this._items,v,y),this.update(),y},m.prototype.removeItem=function(g){this.removeItemAt(this._items.indexOf(g))},m.prototype.removeItemAt=function(g){this.isAttached&&this.close(),this.activeIndex=-1;var _=r.ArrayExt.removeAt(this._items,g);_&&this.update()},m.prototype.clearItems=function(){this.isAttached&&this.close(),this.activeIndex=-1,this._items.length!==0&&(this._items.length=0,this.update())},m.prototype.open=function(g,_,v){if(v===void 0&&(v={}),!this.isAttached){var y=v.forceX||!1,x=v.forceY||!1;d.openRootMenu(this,g,_,y,x),this.activate()}},m.prototype.handleEvent=function(g){switch(g.type){case"keydown":this._evtKeyDown(g);break;case"mouseup":this._evtMouseUp(g);break;case"mousemove":this._evtMouseMove(g);break;case"mouseenter":this._evtMouseEnter(g);break;case"mouseleave":this._evtMouseLeave(g);break;case"mousedown":this._evtMouseDown(g);break;case"contextmenu":g.preventDefault(),g.stopPropagation();break}},m.prototype.onBeforeAttach=function(g){this.node.addEventListener("keydown",this),this.node.addEventListener("mouseup",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseenter",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this),document.addEventListener("mousedown",this,!0)},m.prototype.onAfterDetach=function(g){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mouseup",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseenter",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),document.removeEventListener("mousedown",this,!0)},m.prototype.onActivateRequest=function(g){this.isAttached&&this.node.focus()},m.prototype.onUpdateRequest=function(g){for(var _=this._items,v=this.renderer,y=this._activeIndex,x=d.computeCollapsed(_),A=new Array(_.length),w=0,D=_.length;w<D;++w){var b=_[w],S=w===y,T=x[w];A[w]=v.renderItem({item:b,active:S,collapsed:T})}h.VirtualDOM.render(A,this.contentNode)},m.prototype.onCloseRequest=function(g){this._cancelOpenTimer(),this._cancelCloseTimer(),this.activeIndex=-1;var _=this._childMenu;_&&(this._childIndex=-1,this._childMenu=null,_._parentMenu=null,_.close());var v=this._parentMenu;v&&(this._parentMenu=null,v._childIndex=-1,v._childMenu=null,v.activate()),this.isAttached&&this._aboutToClose.emit(void 0),f.prototype.onCloseRequest.call(this,g)},m.prototype._evtKeyDown=function(g){g.preventDefault(),g.stopPropagation();var _=g.keyCode;if(_===13){this.triggerActiveItem();return}if(_===27){this.close();return}if(_===37){this._parentMenu?this.close():this._menuRequested.emit("previous");return}if(_===38){this.activatePreviousItem();return}if(_===39){var v=this.activeItem;v&&v.type==="submenu"?this.triggerActiveItem():this.rootMenu._menuRequested.emit("next");return}if(_===40){this.activateNextItem();return}var y=a.getKeyboardLayout().keyForKeydownEvent(g);if(y){var x=this._activeIndex+1,A=d.findMnemonic(this._items,y,x);A.index!==-1&&!A.multiple?(this.activeIndex=A.index,this.triggerActiveItem()):A.index!==-1?this.activeIndex=A.index:A.auto!==-1&&(this.activeIndex=A.auto)}},m.prototype._evtMouseUp=function(g){g.button===0&&(g.preventDefault(),g.stopPropagation(),this.triggerActiveItem())},m.prototype._evtMouseMove=function(g){var _=r.ArrayExt.findFirstIndex(this.contentNode.children,function(y){return o.ElementExt.hitTest(y,g.clientX,g.clientY)});if(_!==this._activeIndex){if(this.activeIndex=_,_=this.activeIndex,_===this._childIndex){this._cancelOpenTimer(),this._cancelCloseTimer();return}this._childIndex!==-1&&this._startCloseTimer(),this._cancelOpenTimer();var v=this.activeItem;!v||v.type!=="submenu"||!v.submenu||this._startOpenTimer()}},m.prototype._evtMouseEnter=function(g){for(var _=this._parentMenu;_;_=_._parentMenu)_._cancelOpenTimer(),_._cancelCloseTimer(),_.activeIndex=_._childIndex},m.prototype._evtMouseLeave=function(g){if(this._cancelOpenTimer(),!this._childMenu){this.activeIndex=-1;return}var _=g.clientX,v=g.clientY;if(o.ElementExt.hitTest(this._childMenu.node,_,v)){this._cancelCloseTimer();return}this.activeIndex=-1,this._startCloseTimer()},m.prototype._evtMouseDown=function(g){this._parentMenu||(d.hitTestMenus(this,g.clientX,g.clientY)?(g.preventDefault(),g.stopPropagation()):this.close())},m.prototype._openChildMenu=function(g){g===void 0&&(g=!1);var _=this.activeItem;if(!_||_.type!=="submenu"||!_.submenu){this._closeChildMenu();return}var v=_.submenu;if(v!==this._childMenu){this._closeChildMenu(),this._childMenu=v,this._childIndex=this._activeIndex,v._parentMenu=this,l.MessageLoop.sendMessage(this,u.Widget.Msg.UpdateRequest);var y=this.contentNode.children[this._activeIndex];d.openSubmenu(v,y),g&&(v.activeIndex=-1,v.activateNextItem()),v.activate()}},m.prototype._closeChildMenu=function(){this._childMenu&&this._childMenu.close()},m.prototype._startOpenTimer=function(){var g=this;this._openTimerID===0&&(this._openTimerID=setTimeout(function(){g._openTimerID=0,g._openChildMenu()},d.TIMER_DELAY))},m.prototype._startCloseTimer=function(){var g=this;this._closeTimerID===0&&(this._closeTimerID=setTimeout(function(){g._closeTimerID=0,g._closeChildMenu()},d.TIMER_DELAY))},m.prototype._cancelOpenTimer=function(){this._openTimerID!==0&&(clearTimeout(this._openTimerID),this._openTimerID=0)},m.prototype._cancelCloseTimer=function(){this._closeTimerID!==0&&(clearTimeout(this._closeTimerID),this._closeTimerID=0)},m}(u.Widget);i.Menu=p,function(f){var m=function(){function g(){}return g.prototype.renderItem=function(_){var v=this.createItemClass(_),y=this.createItemDataset(_);return h.h.li({className:v,dataset:y},this.renderIcon(_),this.renderLabel(_),this.renderShortcut(_),this.renderSubmenu(_))},g.prototype.renderIcon=function(_){var v=this.createIconClass(_);return h.h.div({className:v},_.item.iconLabel)},g.prototype.renderLabel=function(_){var v=this.formatLabel(_);return h.h.div({className:"p-Menu-itemLabel"},v)},g.prototype.renderShortcut=function(_){var v=this.formatShortcut(_);return h.h.div({className:"p-Menu-itemShortcut"},v)},g.prototype.renderSubmenu=function(_){return h.h.div({className:"p-Menu-itemSubmenuIcon"})},g.prototype.createItemClass=function(_){var v="p-Menu-item";_.item.isEnabled||(v+=" p-mod-disabled"),_.item.isToggled&&(v+=" p-mod-toggled"),_.item.isVisible||(v+=" p-mod-hidden"),_.active&&(v+=" p-mod-active"),_.collapsed&&(v+=" p-mod-collapsed");var y=_.item.className;return y&&(v+=" "+y),v},g.prototype.createItemDataset=function(_){var v,y=_.item,x=y.type,A=y.command,w=y.dataset;return x==="command"?v=t({},w,{type:x,command:A}):v=t({},w,{type:x}),v},g.prototype.createIconClass=function(_){var v="p-Menu-itemIcon",y=_.item.iconClass;return y?v+" "+y:v},g.prototype.formatLabel=function(_){var v=_.item,y=v.label,x=v.mnemonic;if(x<0||x>=y.length)return y;var A=y.slice(0,x),w=y.slice(x+1),D=y[x],b=h.h.span({className:"p-Menu-itemMnemonic"},D);return[A,b,w]},g.prototype.formatShortcut=function(_){var v=_.item.keyBinding;return v?v.keys.map(d.formatKeystroke).join(", "):null},g}();f.Renderer=m,f.defaultRenderer=new m}(p=i.Menu||(i.Menu={})),i.Menu=p;var d;(function(f){f.TIMER_DELAY=300,f.SUBMENU_OVERLAP=3;function m(){var S=document.createElement("div"),T=document.createElement("ul");return T.className="p-Menu-content",S.appendChild(T),S.tabIndex=-1,S}f.createNode=m;function g(S){return S.type!=="separator"&&S.isEnabled&&S.isVisible}f.canActivate=g;function _(S,T){return new b(S.commands,T)}f.createItem=_;function v(S){var T="",C=n.CommandRegistry.parseKeystroke(S);return o.Platform.IS_MAC?(C.ctrl&&(T+=" "),C.alt&&(T+=" "),C.shift&&(T+=" "),C.cmd&&(T+=" ")):(C.ctrl&&(T+="Ctrl+"),C.alt&&(T+="Alt+"),C.shift&&(T+="Shift+")),T+C.key}f.formatKeystroke=v;function y(S,T,C){for(var I=S;I;I=I.childMenu)if(o.ElementExt.hitTest(I.node,T,C))return!0;return!1}f.hitTestMenus=y;function x(S){var T=new Array(S.length);r.ArrayExt.fill(T,!1);for(var C=0,I=S.length;C<I;++C){var M=S[C];if(M.isVisible){if(M.type!=="separator")break;T[C]=!0}}for(var k=I-1;k>=0;--k){var M=S[k];if(M.isVisible){if(M.type!=="separator")break;T[k]=!0}}for(var H=!1;++C<k;){var M=S[C];M.isVisible&&(M.type!=="separator"?H=!1:H?T[C]=!0:H=!0)}return T}f.computeCollapsed=x;function A(S,T,C,I,M){l.MessageLoop.sendMessage(S,u.Widget.Msg.UpdateRequest);var k=window.pageXOffset,H=window.pageYOffset,Y=document.documentElement.clientWidth,O=document.documentElement.clientHeight,B=O-(M?C:0),q=S.node,le=q.style;le.top="",le.left="",le.width="",le.height="",le.visibility="hidden",le.maxHeight=B+"px",u.Widget.attach(S,document.body);var X=q.getBoundingClientRect(),Se=X.width,R=X.height;!I&&T+Se>k+Y&&(T=k+Y-Se),!M&&C+R>H+O&&(C>H+O?C=H+O-R:C=C-R),le.top=Math.max(0,C)+"px",le.left=Math.max(0,T)+"px",le.visibility=""}f.openRootMenu=A;function w(S,T){l.MessageLoop.sendMessage(S,u.Widget.Msg.UpdateRequest);var C=window.pageXOffset,I=window.pageYOffset,M=document.documentElement.clientWidth,k=document.documentElement.clientHeight,H=k,Y=S.node,O=Y.style;O.top="",O.left="",O.width="",O.height="",O.visibility="hidden",O.maxHeight=H+"px",u.Widget.attach(S,document.body);var B=Y.getBoundingClientRect(),q=B.width,le=B.height,X=o.ElementExt.boxSizing(S.node),Se=T.getBoundingClientRect(),R=Se.right-f.SUBMENU_OVERLAP;R+q>C+M&&(R=Se.left+f.SUBMENU_OVERLAP-q);var L=Se.top-X.borderTop-X.paddingTop;L+le>I+k&&(L=Se.bottom+X.borderBottom+X.paddingBottom-le),O.top=Math.max(0,L)+"px",O.left=Math.max(0,R)+"px",O.visibility=""}f.openSubmenu=w;function D(S,T,C){for(var I=-1,M=-1,k=!1,H=T.toUpperCase(),Y=0,O=S.length;Y<O;++Y){var B=(Y+C)%O,q=S[B];if(g(q)){var le=q.label;if(le.length!==0){var X=q.mnemonic;if(X>=0&&X<le.length){le[X].toUpperCase()===H&&(I===-1?I=B:k=!0);continue}M===-1&&le[0].toUpperCase()===H&&(M=B)}}}return{index:I,multiple:k,auto:M}}f.findMnemonic=D;var b=function(){function S(T,C){this._commands=T,this.type=C.type||"command",this.command=C.command||"",this.args=C.args||s.JSONExt.emptyObject,this.submenu=C.submenu||null}return Object.defineProperty(S.prototype,"label",{get:function(){return this.type==="command"?this._commands.label(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.label:""},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"mnemonic",{get:function(){return this.type==="command"?this._commands.mnemonic(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.mnemonic:-1},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"icon",{get:function(){return this.iconClass},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"iconClass",{get:function(){return this.type==="command"?this._commands.iconClass(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconClass:""},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"iconLabel",{get:function(){return this.type==="command"?this._commands.iconLabel(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconLabel:""},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"caption",{get:function(){return this.type==="command"?this._commands.caption(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.caption:""},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"className",{get:function(){return this.type==="command"?this._commands.className(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.className:""},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"dataset",{get:function(){return this.type==="command"?this._commands.dataset(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.dataset:{}},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"isEnabled",{get:function(){return this.type==="command"?this._commands.isEnabled(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"isToggled",{get:function(){return this.type==="command"?this._commands.isToggled(this.command,this.args):!1},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"isVisible",{get:function(){return this.type==="command"?this._commands.isVisible(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"keyBinding",{get:function(){if(this.type==="command"){var T=this,C=T.command,I=T.args;return r.ArrayExt.findLastValue(this._commands.keyBindings,function(M){return M.command===C&&s.JSONExt.deepEqual(M.args,I)})||null}return null},enumerable:!0,configurable:!0}),S}()})(d||(d={}))})(Sy);var b9=P&&P.__assign||Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i};Object.defineProperty(by,"__esModule",{value:!0});var Gx=mt,S9=dp,Dd=ai,E9=Sy,A9=function(){function i(e){this._idTick=0,this._items=[],this.menu=new E9.Menu(e)}return i.prototype.addItem=function(e){var t=this,r=Sf.createItem(e,this._idTick++);return this._items.push(r),new S9.DisposableDelegate(function(){Gx.ArrayExt.removeFirstOf(t._items,r)})},i.prototype.open=function(e){var t=this;if(this.menu.clearItems(),this._items.length===0)return!1;var r=Sf.matchItems(this._items,e);return!r||r.length===0?!1:(Gx.each(r,function(n){t.menu.addItem(n)}),this.menu.open(e.clientX,e.clientY),!0)},i}();by.ContextMenu=A9;var Sf;(function(i){function e(s,o){var a=r(s.selector),l=s.rank!==void 0?s.rank:1/0;return b9({},s,{selector:a,rank:l,id:o})}i.createItem=e;function t(s,o){var a=o.target;if(!a)return null;var l=o.currentTarget;if(!l||!l.contains(a)&&(a=document.elementFromPoint(o.clientX,o.clientY),!a||!l.contains(a)))return null;for(var c=[],h=s.slice();a!==null;){for(var u=[],p=0,d=h.length;p<d;++p){var f=h[p];f&&Dd.Selector.matches(a,f.selector)&&(u.push(f),h[p]=null)}if(u.length!==0&&(u.sort(n),c.push.apply(c,u)),a===l)break;a=a.parentElement}return c}i.matchItems=t;function r(s){if(s.indexOf(",")!==-1)throw new Error("Selector cannot contain commas: "+s);if(!Dd.Selector.isValid(s))throw new Error("Invalid selector: "+s);return s}function n(s,o){var a=Dd.Selector.calculateSpecificity(s.selector),l=Dd.Selector.calculateSpecificity(o.selector);if(a!==l)return l-a;var c=s.rank,h=o.rank;return c!==h?c<h?-1:1:s.id-o.id}})(Sf||(Sf={}));var pp={},D9=P&&P.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(pp,"__esModule",{value:!0});var De=mt,fg=ai,Sa=wi,Oa=Il,Yx=Nn,Ea=Gt,T9=function(i){D9(e,i);function e(t){var r=i.call(this)||this;return r._spacing=4,r._dirty=!1,r._root=null,r._box=null,r._items=new Map,r.renderer=t.renderer,t.spacing!==void 0&&(r._spacing=zt.clampSpacing(t.spacing)),r}return e.prototype.dispose=function(){var t=this.iter();this._items.forEach(function(r){r.dispose()}),this._box=null,this._root=null,this._items.clear(),De.each(t,function(r){r.dispose()}),i.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"spacing",{get:function(){return this._spacing},set:function(t){t=zt.clampSpacing(t),this._spacing!==t&&(this._spacing=t,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._root===null},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return this._root?this._root.iterAllWidgets():De.empty()},e.prototype.widgets=function(){return this._root?this._root.iterUserWidgets():De.empty()},e.prototype.selectedWidgets=function(){return this._root?this._root.iterSelectedWidgets():De.empty()},e.prototype.tabBars=function(){return this._root?this._root.iterTabBars():De.empty()},e.prototype.handles=function(){return this._root?this._root.iterHandles():De.empty()},e.prototype.moveHandle=function(t,r,n){if(!(!this._root||t.classList.contains("p-mod-hidden"))){var s=this._root.findSplitNode(t);if(s){var o;s.node.orientation==="horizontal"?o=r-t.offsetLeft:o=n-t.offsetTop,o!==0&&(s.node.holdSizes(),Oa.BoxEngine.adjust(s.node.sizers,s.index,o),this.parent&&this.parent.update())}}},e.prototype.saveLayout=function(){return this._root?(this._root.holdAllSizes(),{main:this._root.createConfig()}):{main:null}},e.prototype.restoreLayout=function(t){var r=this,n=new Set,s;t.main?s=zt.normalizeAreaConfig(t.main,n):s=null;var o=this.widgets(),a=this.tabBars(),l=this.handles();this._root=null,De.each(o,function(c){n.has(c)||(c.parent=null)}),De.each(a,function(c){c.dispose()}),De.each(l,function(c){c.parentNode&&c.parentNode.removeChild(c)}),n.forEach(function(c){c.parent=r.parent}),s?this._root=zt.realizeAreaConfig(s,{createTabBar:function(){return r._createTabBar()},createHandle:function(){return r._createHandle()}}):this._root=null,this.parent&&(n.forEach(function(c){r.attachWidget(c)}),this.parent.fit())},e.prototype.addWidget=function(t,r){r===void 0&&(r={});var n=r.ref||null,s=r.mode||"tab-after",o=null;if(this._root&&n&&(o=this._root.findTabNode(n)),n&&!o)throw new Error("Reference widget is not in the layout.");switch(t.parent=this.parent,s){case"tab-after":this._insertTab(t,n,o,!0);break;case"tab-before":this._insertTab(t,n,o,!1);break;case"split-top":this._insertSplit(t,n,o,"vertical",!1);break;case"split-left":this._insertSplit(t,n,o,"horizontal",!1);break;case"split-right":this._insertSplit(t,n,o,"horizontal",!0);break;case"split-bottom":this._insertSplit(t,n,o,"vertical",!0);break}this.parent&&(this.attachWidget(t),this.parent.fit())},e.prototype.removeWidget=function(t){this._removeWidget(t),this.parent&&(this.detachWidget(t),this.parent.fit())},e.prototype.hitTestTabAreas=function(t,r){if(!this._root||!this.parent||!this.parent.isVisible)return null;this._box||(this._box=fg.ElementExt.boxSizing(this.parent.node));var n=this.parent.node.getBoundingClientRect(),s=t-n.left-this._box.borderLeft,o=r-n.top-this._box.borderTop,a=this._root.hitTestTabNodes(s,o);if(!a)return null;var l=a.tabBar,c=a.top,h=a.left,u=a.width,p=a.height,d=this._box.borderLeft+this._box.borderRight,f=this._box.borderTop+this._box.borderBottom,m=n.width-d-(h+u),g=n.height-f-(c+p);return{tabBar:l,x:s,y:o,top:c,left:h,right:m,bottom:g,width:u,height:p}},e.prototype.init=function(){var t=this;i.prototype.init.call(this),De.each(this,function(r){t.attachWidget(r)}),De.each(this.handles(),function(r){t.parent.node.appendChild(r)}),this.parent.fit()},e.prototype.attachWidget=function(t){this.parent.node!==t.node.parentNode&&(this._items.set(t,new Yx.LayoutItem(t)),this.parent.isAttached&&Sa.MessageLoop.sendMessage(t,Ea.Widget.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.isAttached&&Sa.MessageLoop.sendMessage(t,Ea.Widget.Msg.AfterAttach))},e.prototype.detachWidget=function(t){if(this.parent.node===t.node.parentNode){this.parent.isAttached&&Sa.MessageLoop.sendMessage(t,Ea.Widget.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&Sa.MessageLoop.sendMessage(t,Ea.Widget.Msg.AfterDetach);var r=this._items.get(t);r&&(this._items.delete(t),r.dispose())}},e.prototype.onBeforeShow=function(t){i.prototype.onBeforeShow.call(this,t),this.parent.update()},e.prototype.onBeforeAttach=function(t){i.prototype.onBeforeAttach.call(this,t),this.parent.fit()},e.prototype.onChildShown=function(t){this.parent.fit()},e.prototype.onChildHidden=function(t){this.parent.fit()},e.prototype.onResize=function(t){this.parent.isVisible&&this._update(t.width,t.height)},e.prototype.onUpdateRequest=function(t){this.parent.isVisible&&this._update(-1,-1)},e.prototype.onFitRequest=function(t){this.parent.isAttached&&this._fit()},e.prototype._removeWidget=function(t){if(this._root){var r=this._root.findTabNode(t);if(r){if(r.tabBar.titles.length>1){r.tabBar.removeTab(t.title);return}if(r.tabBar.dispose(),this._root===r){this._root=null;return}this._root.holdAllSizes();var n=r.parent;r.parent=null;var s=De.ArrayExt.removeFirstOf(n.children,r),o=De.ArrayExt.removeAt(n.handles,s);if(De.ArrayExt.removeAt(n.sizers,s),o.parentNode&&o.parentNode.removeChild(o),n.children.length>1){n.syncHandles();return}var a=n.parent;n.parent=null;var l=n.children[0],c=n.handles[0];if(n.children.length=0,n.handles.length=0,n.sizers.length=0,c.parentNode&&c.parentNode.removeChild(c),this._root===n){l.parent=null,this._root=l;return}var h=a,u=h.children.indexOf(n);if(l instanceof zt.TabLayoutNode){l.parent=h,h.children[u]=l;return}var p=De.ArrayExt.removeAt(h.handles,u);De.ArrayExt.removeAt(h.children,u),De.ArrayExt.removeAt(h.sizers,u),p.parentNode&&p.parentNode.removeChild(p);for(var d=0,f=l.children.length;d<f;++d){var m=l.children[d],g=l.handles[d],_=l.sizers[d];De.ArrayExt.insert(h.children,u+d,m),De.ArrayExt.insert(h.handles,u+d,g),De.ArrayExt.insert(h.sizers,u+d,_),m.parent=h}l.children.length=0,l.handles.length=0,l.sizers.length=0,l.parent=null,h.syncHandles()}}},e.prototype._insertTab=function(t,r,n,s){if(t!==r){if(!this._root){var o=new zt.TabLayoutNode(this._createTabBar());o.tabBar.addTab(t.title),this._root=o;return}n||(n=this._root.findFirstTabNode()),n.tabBar.titles.indexOf(t.title)===-1&&(this._removeWidget(t),t.hide());var a;r?a=n.tabBar.titles.indexOf(r.title):a=n.tabBar.currentIndex,n.tabBar.insertTab(a+(s?1:0),t.title)}},e.prototype._insertSplit=function(t,r,n,s,o){if(!(t===r&&n&&n.tabBar.titles.length===1)){this._removeWidget(t);var a=new zt.TabLayoutNode(this._createTabBar());if(a.tabBar.addTab(t.title),!this._root){this._root=a;return}if(!n||!n.parent){var l=this._splitRoot(s),c=o?l.children.length:0;l.normalizeSizes();var h=zt.createSizer(n?1:zt.GOLDEN_RATIO);De.ArrayExt.insert(l.children,c,a),De.ArrayExt.insert(l.sizers,c,h),De.ArrayExt.insert(l.handles,c,this._createHandle()),a.parent=l,l.normalizeSizes(),l.syncHandles();return}var u=n.parent;if(u.orientation===s){var p=u.children.indexOf(n);u.normalizeSizes();var d=u.sizers[p].sizeHint/=2,f=p+(o?1:0);De.ArrayExt.insert(u.children,f,a),De.ArrayExt.insert(u.sizers,f,zt.createSizer(d)),De.ArrayExt.insert(u.handles,f,this._createHandle()),a.parent=u,u.syncHandles();return}var m=De.ArrayExt.removeFirstOf(u.children,n),g=new zt.SplitLayoutNode(s);g.normalized=!0,g.children.push(n),g.sizers.push(zt.createSizer(.5)),g.handles.push(this._createHandle()),n.parent=g;var _=o?1:0;De.ArrayExt.insert(g.children,_,a),De.ArrayExt.insert(g.sizers,_,zt.createSizer(.5)),De.ArrayExt.insert(g.handles,_,this._createHandle()),a.parent=g,g.syncHandles(),De.ArrayExt.insert(u.children,m,g),g.parent=u}},e.prototype._splitRoot=function(t){var r=this._root;if(r instanceof zt.SplitLayoutNode&&r.orientation===t)return r;var n=this._root=new zt.SplitLayoutNode(t);return r&&(n.children.push(r),n.sizers.push(zt.createSizer(0)),n.handles.push(this._createHandle()),r.parent=n),n},e.prototype._fit=function(){var t=0,r=0;if(this._root){var n=this._root.fit(this._spacing,this._items);t=n.minWidth,r=n.minHeight}var s=this._box=fg.ElementExt.boxSizing(this.parent.node);t+=s.horizontalSum,r+=s.verticalSum;var o=this.parent.node.style;o.minWidth=t+"px",o.minHeight=r+"px",this._dirty=!0,this.parent.parent&&Sa.MessageLoop.sendMessage(this.parent.parent,Ea.Widget.Msg.FitRequest),this._dirty&&Sa.MessageLoop.sendMessage(this.parent,Ea.Widget.Msg.UpdateRequest)},e.prototype._update=function(t,r){if(this._dirty=!1,!!this._root){t<0&&(t=this.parent.node.offsetWidth),r<0&&(r=this.parent.node.offsetHeight),this._box||(this._box=fg.ElementExt.boxSizing(this.parent.node));var n=this._box.paddingTop,s=this._box.paddingLeft,o=t-this._box.horizontalSum,a=r-this._box.verticalSum;this._root.update(n,s,o,a,this._spacing,this._items)}},e.prototype._createTabBar=function(){var t=this.renderer.createTabBar();return t.orientation="horizontal",this.parent&&(t.parent=this.parent,this.attachWidget(t)),t},e.prototype._createHandle=function(){var t=this.renderer.createHandle(),r=t.style;return r.position="absolute",r.top="0",r.left="0",r.width="0",r.height="0",this.parent&&this.parent.node.appendChild(t),t},e}(Yx.Layout);pp.DockLayout=T9;var zt;(function(i){i.GOLDEN_RATIO=.618;function e(u){return Math.max(0,Math.floor(u))}i.clampSpacing=e;function t(u){var p=new Oa.BoxSizer;return p.sizeHint=u,p.size=u,p}i.createSizer=t;function r(u,p){var d;return u.type==="tab-area"?d=a(u,p):d=l(u,p),d}i.normalizeAreaConfig=r;function n(u,p){var d;return u.type==="tab-area"?d=c(u,p):d=h(u,p),d}i.realizeAreaConfig=n;var s=function(){function u(p){this.parent=null,this._top=0,this._left=0,this._width=0,this._height=0;var d=new Oa.BoxSizer,f=new Oa.BoxSizer;d.stretch=0,f.stretch=1,this.tabBar=p,this.sizers=[d,f]}return Object.defineProperty(u.prototype,"top",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),u.prototype.iterAllWidgets=function(){return De.chain(De.once(this.tabBar),this.iterUserWidgets())},u.prototype.iterUserWidgets=function(){return De.map(this.tabBar.titles,function(p){return p.owner})},u.prototype.iterSelectedWidgets=function(){var p=this.tabBar.currentTitle;return p?De.once(p.owner):De.empty()},u.prototype.iterTabBars=function(){return De.once(this.tabBar)},u.prototype.iterHandles=function(){return De.empty()},u.prototype.findTabNode=function(p){return this.tabBar.titles.indexOf(p.title)!==-1?this:null},u.prototype.findSplitNode=function(p){return null},u.prototype.findFirstTabNode=function(){return this},u.prototype.hitTestTabNodes=function(p,d){return p<this._left||p>=this._left+this._width||d<this._top||d>=this._top+this._height?null:this},u.prototype.createConfig=function(){var p=this.tabBar.titles.map(function(f){return f.owner}),d=this.tabBar.currentIndex;return{type:"tab-area",widgets:p,currentIndex:d}},u.prototype.holdAllSizes=function(){},u.prototype.fit=function(p,d){var f=0,m=0,g=1/0,_=1/0,v=d.get(this.tabBar),y=this.tabBar.currentTitle,x=y?d.get(y.owner):void 0,A=this.sizers,w=A[0],D=A[1];return v&&v.fit(),x&&x.fit(),v&&!v.isHidden?(f=Math.max(f,v.minWidth),m+=v.minHeight,w.minSize=v.minHeight,w.maxSize=v.maxHeight):(w.minSize=0,w.maxSize=0),x&&!x.isHidden?(f=Math.max(f,x.minWidth),m+=x.minHeight,D.minSize=x.minHeight,D.maxSize=1/0):(D.minSize=0,D.maxSize=1/0),{minWidth:f,minHeight:m,maxWidth:g,maxHeight:_}},u.prototype.update=function(p,d,f,m,g,_){this._top=d,this._left=p,this._width=f,this._height=m;var v=_.get(this.tabBar),y=this.tabBar.currentTitle,x=y?_.get(y.owner):void 0;if(Oa.BoxEngine.calc(this.sizers,m),v&&!v.isHidden){var A=this.sizers[0].size;v.update(p,d,f,A),d+=A}if(x&&!x.isHidden){var A=this.sizers[1].size;x.update(p,d,f,A)}},u}();i.TabLayoutNode=s;var o=function(){function u(p){this.parent=null,this.normalized=!1,this.children=[],this.sizers=[],this.handles=[],this.orientation=p}return u.prototype.iterAllWidgets=function(){var p=De.map(this.children,function(d){return d.iterAllWidgets()});return new De.ChainIterator(p)},u.prototype.iterUserWidgets=function(){var p=De.map(this.children,function(d){return d.iterUserWidgets()});return new De.ChainIterator(p)},u.prototype.iterSelectedWidgets=function(){var p=De.map(this.children,function(d){return d.iterSelectedWidgets()});return new De.ChainIterator(p)},u.prototype.iterTabBars=function(){var p=De.map(this.children,function(d){return d.iterTabBars()});return new De.ChainIterator(p)},u.prototype.iterHandles=function(){var p=De.map(this.children,function(d){return d.iterHandles()});return De.chain(this.handles,new De.ChainIterator(p))},u.prototype.findTabNode=function(p){for(var d=0,f=this.children.length;d<f;++d){var m=this.children[d].findTabNode(p);if(m)return m}return null},u.prototype.findSplitNode=function(p){var d=this.handles.indexOf(p);if(d!==-1)return{index:d,node:this};for(var f=0,m=this.children.length;f<m;++f){var g=this.children[f].findSplitNode(p);if(g)return g}return null},u.prototype.findFirstTabNode=function(){return this.children.length===0?null:this.children[0].findFirstTabNode()},u.prototype.hitTestTabNodes=function(p,d){for(var f=0,m=this.children.length;f<m;++f){var g=this.children[f].hitTestTabNodes(p,d);if(g)return g}return null},u.prototype.createConfig=function(){var p=this.orientation,d=this.createNormalizedSizes(),f=this.children.map(function(m){return m.createConfig()});return{type:"split-area",orientation:p,children:f,sizes:d}},u.prototype.syncHandles=function(){var p=this;De.each(this.handles,function(d,f){d.setAttribute("data-orientation",p.orientation),f===p.handles.length-1?d.classList.add("p-mod-hidden"):d.classList.remove("p-mod-hidden")})},u.prototype.holdSizes=function(){De.each(this.sizers,function(p){p.sizeHint=p.size})},u.prototype.holdAllSizes=function(){De.each(this.children,function(p){return p.holdAllSizes()}),this.holdSizes()},u.prototype.normalizeSizes=function(){var p=this.sizers.length;if(p!==0){this.holdSizes();var d=De.reduce(this.sizers,function(f,m){return f+m.sizeHint},0);d===0?De.each(this.sizers,function(f){f.size=f.sizeHint=1/p}):De.each(this.sizers,function(f){f.size=f.sizeHint/=d}),this.normalized=!0}},u.prototype.createNormalizedSizes=function(){var p=this.sizers.length;if(p===0)return[];var d=this.sizers.map(function(m){return m.size}),f=De.reduce(d,function(m,g){return m+g},0);return f===0?De.each(d,function(m,g){d[g]=1/p}):De.each(d,function(m,g){d[g]=m/f}),d},u.prototype.fit=function(p,d){for(var f=this.orientation==="horizontal",m=Math.max(0,this.children.length-1)*p,g=f?m:0,_=f?0:m,v=1/0,y=1/0,x=0,A=this.children.length;x<A;++x){var w=this.children[x].fit(p,d);f?(_=Math.max(_,w.minHeight),g+=w.minWidth,this.sizers[x].minSize=w.minWidth):(g=Math.max(g,w.minWidth),_+=w.minHeight,this.sizers[x].minSize=w.minHeight)}return{minWidth:g,minHeight:_,maxWidth:v,maxHeight:y}},u.prototype.update=function(p,d,f,m,g,_){var v=this.orientation==="horizontal",y=Math.max(0,this.children.length-1)*g,x=Math.max(0,(v?f:m)-y);this.normalized&&(De.each(this.sizers,function(T){T.sizeHint*=x}),this.normalized=!1),Oa.BoxEngine.calc(this.sizers,x);for(var A=0,w=this.children.length;A<w;++A){var D=this.children[A],b=this.sizers[A].size,S=this.handles[A].style;v?(D.update(p,d,b,m,g,_),p+=b,S.top=d+"px",S.left=p+"px",S.width=g+"px",S.height=m+"px",p+=g):(D.update(p,d,f,b,g,_),d+=b,S.top=d+"px",S.left=p+"px",S.width=f+"px",S.height=g+"px",d+=g)}},u}();i.SplitLayoutNode=o;function a(u,p){if(u.widgets.length===0)return null;var d=[];if(De.each(u.widgets,function(m){p.has(m)||(p.add(m),d.push(m))}),d.length===0)return null;var f=u.currentIndex;return f!==-1&&(f<0||f>=d.length)&&(f=0),{type:"tab-area",widgets:d,currentIndex:f}}function l(u,p){for(var d=u.orientation,f=[],m=[],g=0,_=u.children.length;g<_;++g){var v=r(u.children[g],p);v&&(v.type==="tab-area"||v.orientation!==d?(f.push(v),m.push(Math.abs(u.sizes[g]||0))):(f.push.apply(f,v.children),m.push.apply(m,v.sizes)))}return f.length===0?null:f.length===1?f[0]:{type:"split-area",orientation:d,children:f,sizes:m}}function c(u,p){var d=p.createTabBar();return De.each(u.widgets,function(f){f.hide(),d.addTab(f.title)}),d.currentIndex=u.currentIndex,new s(d)}function h(u,p){var d=new o(u.orientation);return De.each(u.children,function(f,m){var g=n(f,p),_=t(u.sizes[m]),v=p.createHandle();d.children.push(g),d.handles.push(v),d.sizers.push(_),g.parent=d}),d.syncHandles(),d.normalizeSizes(),d}})(zt||(zt={}));var uE={},Cc={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=dp,t=function(){function n(s){var o=this;this._onScrollFrame=function(){if(o._scrollTarget){var a=o._scrollTarget,l=a.element,c=a.edge,h=a.distance,u=r.SCROLL_EDGE_SIZE-h,p=Math.pow(u/r.SCROLL_EDGE_SIZE,2),d=Math.max(1,Math.round(p*r.SCROLL_EDGE_SIZE));switch(c){case"top":l.scrollTop-=d;break;case"left":l.scrollLeft-=d;break;case"right":l.scrollLeft+=d;break;case"bottom":l.scrollTop+=d;break}requestAnimationFrame(o._onScrollFrame)}},this._disposed=!1,this._dropAction="none",this._override=null,this._currentTarget=null,this._currentElement=null,this._promise=null,this._scrollTarget=null,this._resolve=null,this.mimeData=s.mimeData,this.dragImage=s.dragImage||null,this.proposedAction=s.proposedAction||"copy",this.supportedActions=s.supportedActions||"all",this.source=s.source||null}return n.prototype.dispose=function(){if(!this._disposed){if(this._disposed=!0,this._currentTarget){var s=r.createMouseEvent("mouseup",-1,-1);r.dispatchDragLeave(this,this._currentTarget,null,s)}this._finalize("none")}},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),n.prototype.start=function(s,o){var a=this;if(this._disposed)return Promise.resolve("none");if(this._promise)return this._promise;this._addListeners(),this._attachDragImage(s,o),this._promise=new Promise(function(c,h){a._resolve=c});var l=r.createMouseEvent("mousemove",s,o);return document.dispatchEvent(l),this._promise},n.prototype.handleEvent=function(s){switch(s.type){case"mousemove":this._evtMouseMove(s);break;case"mouseup":this._evtMouseUp(s);break;case"keydown":this._evtKeyDown(s);break;default:s.preventDefault(),s.stopPropagation();break}},n.prototype._evtMouseMove=function(s){s.preventDefault(),s.stopPropagation(),this._updateCurrentTarget(s),this._updateDragScroll(s),this._moveDragImage(s.clientX,s.clientY)},n.prototype._evtMouseUp=function(s){if(s.preventDefault(),s.stopPropagation(),s.button===0){if(this._updateCurrentTarget(s),!this._currentTarget){this._finalize("none");return}if(this._dropAction==="none"){r.dispatchDragLeave(this,this._currentTarget,null,s),this._finalize("none");return}var o=r.dispatchDrop(this,this._currentTarget,s);this._finalize(o)}},n.prototype._evtKeyDown=function(s){s.preventDefault(),s.stopPropagation(),s.keyCode===27&&this.dispose()},n.prototype._addListeners=function(){document.addEventListener("mousedown",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mouseenter",this,!0),document.addEventListener("mouseleave",this,!0),document.addEventListener("mouseover",this,!0),document.addEventListener("mouseout",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),document.addEventListener("keypress",this,!0),document.addEventListener("contextmenu",this,!0)},n.prototype._removeListeners=function(){document.removeEventListener("mousedown",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mouseenter",this,!0),document.removeEventListener("mouseleave",this,!0),document.removeEventListener("mouseover",this,!0),document.removeEventListener("mouseout",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("keyup",this,!0),document.removeEventListener("keypress",this,!0),document.removeEventListener("contextmenu",this,!0)},n.prototype._updateDragScroll=function(s){var o=r.findScrollTarget(s);!this._scrollTarget&&!o||(this._scrollTarget||setTimeout(this._onScrollFrame,500),this._scrollTarget=o)},n.prototype._updateCurrentTarget=function(s){var o=this._currentTarget,a=this._currentTarget,l=this._currentElement,c=document.elementFromPoint(s.clientX,s.clientY);this._currentElement=c,c!==l&&c!==a&&r.dispatchDragExit(this,a,c,s),c!==l&&c!==a&&(a=r.dispatchDragEnter(this,c,a,s)),a!==o&&(this._currentTarget=a,r.dispatchDragLeave(this,o,a,s));var h=r.dispatchDragOver(this,a,s);this._setDropAction(h)},n.prototype._attachDragImage=function(s,o){if(this.dragImage){this.dragImage.classList.add("p-mod-drag-image");var a=this.dragImage.style;a.pointerEvents="none",a.position="fixed",a.top=o+"px",a.left=s+"px",document.body.appendChild(this.dragImage)}},n.prototype._moveDragImage=function(s,o){if(this.dragImage){var a=this.dragImage.style;a.top=o+"px",a.left=s+"px"}},n.prototype._detachDragImage=function(){if(this.dragImage){var s=this.dragImage.parentNode;s&&s.removeChild(this.dragImage)}},n.prototype._setDropAction=function(s){if(s=r.validateAction(s,this.supportedActions),!(this._override&&this._dropAction===s))switch(s){case"none":this._dropAction=s,this._override=n.overrideCursor("no-drop");break;case"copy":this._dropAction=s,this._override=n.overrideCursor("copy");break;case"link":this._dropAction=s,this._override=n.overrideCursor("alias");break;case"move":this._dropAction=s,this._override=n.overrideCursor("move");break}},n.prototype._finalize=function(s){var o=this._resolve;this._removeListeners(),this._detachDragImage(),this._override&&(this._override.dispose(),this._override=null),this.mimeData.clear(),this._disposed=!0,this._dropAction="none",this._currentTarget=null,this._currentElement=null,this._scrollTarget=null,this._promise=null,this._resolve=null,o&&o(s)},n}();i.Drag=t,function(n){function s(a){var l=++o;return document.body.style.cursor=a,document.body.classList.add("p-mod-override-cursor"),new e.DisposableDelegate(function(){l===o&&(document.body.style.cursor="",document.body.classList.remove("p-mod-override-cursor"))})}n.overrideCursor=s;var o=0}(t=i.Drag||(i.Drag={})),i.Drag=t;var r;(function(n){n.SCROLL_EDGE_SIZE=20;function s(g,_){return d[g]&f[_]?g:"none"}n.validateAction=s;function o(g,_,v){var y=document.createEvent("MouseEvent");return y.initMouseEvent(g,!0,!0,window,0,0,0,_,v,!1,!1,!1,!1,0,null),y}n.createMouseEvent=o;function a(g){for(var _=g.clientX,v=g.clientY,y=document.elementFromPoint(_,v);y;y=y.parentElement)if(y.hasAttribute("data-p-dragscroll")){var x=0,A=0;y===document.body&&(x=window.pageXOffset,A=window.pageYOffset);var w=y.getBoundingClientRect(),D=w.top+A,b=w.left+x,S=b+w.width,T=D+w.height;if(!(_<b||_>=S||v<D||v>=T)){var C=_-b+1,I=v-D+1,M=S-_,k=T-v,H=Math.min(C,I,M,k);if(!(H>n.SCROLL_EDGE_SIZE)){var Y=void 0;switch(H){case k:Y="bottom";break;case I:Y="top";break;case M:Y="right";break;case C:Y="left";break;default:throw"unreachable"}var O=y.scrollWidth-y.clientWidth,B=y.scrollHeight-y.clientHeight,q=void 0;switch(Y){case"top":q=B>0&&y.scrollTop>0;break;case"left":q=O>0&&y.scrollLeft>0;break;case"right":q=O>0&&y.scrollLeft<O;break;case"bottom":q=B>0&&y.scrollTop<B;break;default:throw"unreachable"}if(q)return{element:y,edge:Y,distance:H}}}}return null}n.findScrollTarget=a;function l(g,_,v,y){if(!_)return null;var x=m("p-dragenter",g,y,v),A=!_.dispatchEvent(x);return A?_:_===document.body?v:(x=m("p-dragenter",g,y,v),document.body.dispatchEvent(x),document.body)}n.dispatchDragEnter=l;function c(g,_,v,y){if(_){var x=m("p-dragexit",g,y,v);_.dispatchEvent(x)}}n.dispatchDragExit=c;function h(g,_,v,y){if(_){var x=m("p-dragleave",g,y,v);_.dispatchEvent(x)}}n.dispatchDragLeave=h;function u(g,_,v){if(!_)return"none";var y=m("p-dragover",g,v,null),x=!_.dispatchEvent(y);return x?y.dropAction:"none"}n.dispatchDragOver=u;function p(g,_,v){if(!_)return"none";var y=m("p-drop",g,v,null),x=!_.dispatchEvent(y);return x?y.dropAction:"none"}n.dispatchDrop=p;var d={none:0,copy:1,link:2,move:4},f={none:d.none,copy:d.copy,link:d.link,move:d.move,"copy-link":d.copy|d.link,"copy-move":d.copy|d.move,"link-move":d.link|d.move,all:d.copy|d.link|d.move};function m(g,_,v,y){var x=document.createEvent("MouseEvent");return x.initMouseEvent(g,!0,!0,window,0,v.screenX,v.screenY,v.clientX,v.clientY,v.ctrlKey,v.altKey,v.shiftKey,v.metaKey,v.button,y),x.dropAction="none",x.mimeData=_.mimeData,x.proposedAction=_.proposedAction,x.supportedActions=_.supportedActions,x.source=_.source,x}})(r||(r={}))})(Cc);var mp={};(function(i){var e=P&&P.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var m in f)f.hasOwnProperty(m)&&(d[m]=f[m])};return function(d,f){p(d,f);function m(){this.constructor=d}d.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}}();Object.defineProperty(i,"__esModule",{value:!0});var t=mt,r=ai,n=Cc,s=wi,o=tt,a=Tc,l=Ac,c=Gt,h=function(p){e(d,p);function d(f){f===void 0&&(f={});var m=p.call(this,{node:u.createNode()})||this;return m._currentIndex=-1,m._titles=[],m._previousTitle=null,m._dragData=null,m._tabMoved=new o.Signal(m),m._currentChanged=new o.Signal(m),m._tabCloseRequested=new o.Signal(m),m._tabDetachRequested=new o.Signal(m),m._tabActivateRequested=new o.Signal(m),m.addClass("p-TabBar"),m.setFlag(c.Widget.Flag.DisallowLayout),m.tabsMovable=f.tabsMovable||!1,m.allowDeselect=f.allowDeselect||!1,m.insertBehavior=f.insertBehavior||"select-tab-if-needed",m.removeBehavior=f.removeBehavior||"select-tab-after",m.renderer=f.renderer||d.defaultRenderer,m._orientation=f.orientation||"horizontal",m.dataset.orientation=m._orientation,m}return d.prototype.dispose=function(){this._releaseMouse(),this._titles.length=0,this._previousTitle=null,p.prototype.dispose.call(this)},Object.defineProperty(d.prototype,"currentChanged",{get:function(){return this._currentChanged},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"tabMoved",{get:function(){return this._tabMoved},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"tabActivateRequested",{get:function(){return this._tabActivateRequested},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"tabCloseRequested",{get:function(){return this._tabCloseRequested},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"tabDetachRequested",{get:function(){return this._tabDetachRequested},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"currentTitle",{get:function(){return this._titles[this._currentIndex]||null},set:function(f){this.currentIndex=f?this._titles.indexOf(f):-1},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"currentIndex",{get:function(){return this._currentIndex},set:function(f){if((f<0||f>=this._titles.length)&&(f=-1),this._currentIndex!==f){var m=this._currentIndex,g=this._titles[m]||null,_=f,v=this._titles[_]||null;this._currentIndex=_,this._previousTitle=g,this.update(),this._currentChanged.emit({previousIndex:m,previousTitle:g,currentIndex:_,currentTitle:v})}},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"orientation",{get:function(){return this._orientation},set:function(f){this._orientation!==f&&(this._releaseMouse(),this._orientation=f,this.dataset.orientation=f)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"titles",{get:function(){return this._titles},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("p-TabBar-content")[0]},enumerable:!0,configurable:!0}),d.prototype.addTab=function(f){return this.insertTab(this._titles.length,f)},d.prototype.insertTab=function(f,m){this._releaseMouse();var g=u.asTitle(m),_=this._titles.indexOf(g),v=Math.max(0,Math.min(f,this._titles.length));return _===-1?(t.ArrayExt.insert(this._titles,v,g),g.changed.connect(this._onTitleChanged,this),this.update(),this._adjustCurrentForInsert(v,g),g):(v===this._titles.length&&v--,_===v||(t.ArrayExt.move(this._titles,_,v),this.update(),this._adjustCurrentForMove(_,v)),g)},d.prototype.removeTab=function(f){this.removeTabAt(this._titles.indexOf(f))},d.prototype.removeTabAt=function(f){this._releaseMouse();var m=t.ArrayExt.removeAt(this._titles,f);m&&(m.changed.disconnect(this._onTitleChanged,this),m===this._previousTitle&&(this._previousTitle=null),this.update(),this._adjustCurrentForRemove(f,m))},d.prototype.clearTabs=function(){if(this._titles.length!==0){this._releaseMouse();for(var f=0,m=this._titles;f<m.length;f++){var g=m[f];g.changed.disconnect(this._onTitleChanged,this)}var _=this.currentIndex,v=this.currentTitle;this._currentIndex=-1,this._previousTitle=null,this._titles.length=0,this.update(),_!==-1&&this._currentChanged.emit({previousIndex:_,previousTitle:v,currentIndex:-1,currentTitle:null})}},d.prototype.releaseMouse=function(){this._releaseMouse()},d.prototype.handleEvent=function(f){switch(f.type){case"mousedown":this._evtMouseDown(f);break;case"mousemove":this._evtMouseMove(f);break;case"mouseup":this._evtMouseUp(f);break;case"keydown":this._evtKeyDown(f);break;case"contextmenu":f.preventDefault(),f.stopPropagation();break}},d.prototype.onBeforeAttach=function(f){this.node.addEventListener("mousedown",this)},d.prototype.onAfterDetach=function(f){this.node.removeEventListener("mousedown",this),this._releaseMouse()},d.prototype.onUpdateRequest=function(f){for(var m=this._titles,g=this.renderer,_=this.currentTitle,v=new Array(m.length),y=0,x=m.length;y<x;++y){var A=m[y],w=A===_,D=w?x:x-y-1;v[y]=g.renderTab({title:A,current:w,zIndex:D})}a.VirtualDOM.render(v,this.contentNode)},d.prototype._evtKeyDown=function(f){f.preventDefault(),f.stopPropagation(),f.keyCode===27&&this._releaseMouse()},d.prototype._evtMouseDown=function(f){if(!(f.button!==0&&f.button!==1)&&!this._dragData){var m=this.contentNode.children,g=t.ArrayExt.findFirstIndex(m,function(v){return r.ElementExt.hitTest(v,f.clientX,f.clientY)});if(g!==-1&&(f.preventDefault(),f.stopPropagation(),this._dragData={tab:m[g],index:g,pressX:f.clientX,pressY:f.clientY,tabPos:-1,tabSize:-1,tabPressPos:-1,targetIndex:-1,tabLayout:null,contentRect:null,override:null,dragActive:!1,dragAborted:!1,detachRequested:!1},document.addEventListener("mouseup",this,!0),f.button!==1)){var _=m[g].querySelector(this.renderer.closeIconSelector);_&&_.contains(f.target)||(this.tabsMovable&&(document.addEventListener("mousemove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0)),this.allowDeselect&&this.currentIndex===g?this.currentIndex=-1:this.currentIndex=g,this.currentIndex!==-1&&this._tabActivateRequested.emit({index:this.currentIndex,title:this.currentTitle}))}}},d.prototype._evtMouseMove=function(f){var m=this._dragData;if(m){f.preventDefault(),f.stopPropagation();var g=this.contentNode.children;if(!(!m.dragActive&&!u.dragExceeded(m,f))){if(!m.dragActive){var _=m.tab.getBoundingClientRect();this._orientation==="horizontal"?(m.tabPos=m.tab.offsetLeft,m.tabSize=_.width,m.tabPressPos=m.pressX-_.left):(m.tabPos=m.tab.offsetTop,m.tabSize=_.height,m.tabPressPos=m.pressY-_.top),m.tabLayout=u.snapTabLayout(g,this._orientation),m.contentRect=this.contentNode.getBoundingClientRect(),m.override=n.Drag.overrideCursor("default"),m.tab.classList.add("p-mod-dragging"),this.addClass("p-mod-dragging"),m.dragActive=!0}if(!m.detachRequested&&u.detachExceeded(m,f)){m.detachRequested=!0;var v=m.index,y=f.clientX,x=f.clientY,A=g[v],w=this._titles[v];if(this._tabDetachRequested.emit({index:v,title:w,tab:A,clientX:y,clientY:x}),m.dragAborted)return}u.layoutTabs(g,m,f,this._orientation)}}},d.prototype._evtMouseUp=function(f){var m=this;if(!(f.button!==0&&f.button!==1)){var g=this._dragData;if(g){if(f.preventDefault(),f.stopPropagation(),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0),!g.dragActive){this._dragData=null;var _=this.contentNode.children,v=t.ArrayExt.findFirstIndex(_,function(w){return r.ElementExt.hitTest(w,f.clientX,f.clientY)});if(v!==g.index)return;var y=this._titles[v];if(!y.closable)return;if(f.button===1){this._tabCloseRequested.emit({index:v,title:y});return}var x=_[v].querySelector(this.renderer.closeIconSelector);if(x&&x.contains(f.target)){this._tabCloseRequested.emit({index:v,title:y});return}return}if(f.button===0){u.finalizeTabPosition(g,this._orientation),g.tab.classList.remove("p-mod-dragging");var A=u.parseTransitionDuration(g.tab);setTimeout(function(){if(!g.dragAborted){m._dragData=null,u.resetTabPositions(m.contentNode.children,m._orientation),g.override.dispose(),m.removeClass("p-mod-dragging");var w=g.index,D=g.targetIndex;D===-1||w===D||(t.ArrayExt.move(m._titles,w,D),m._adjustCurrentForMove(w,D),m._tabMoved.emit({fromIndex:w,toIndex:D,title:m._titles[D]}),s.MessageLoop.sendMessage(m,c.Widget.Msg.UpdateRequest))}},A)}}}},d.prototype._releaseMouse=function(){var f=this._dragData;f&&(this._dragData=null,document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0),f.dragAborted=!0,f.dragActive&&(u.resetTabPositions(this.contentNode.children,this._orientation),f.override.dispose(),f.tab.classList.remove("p-mod-dragging"),this.removeClass("p-mod-dragging")))},d.prototype._adjustCurrentForInsert=function(f,m){var g=this.currentTitle,_=this._currentIndex,v=this.insertBehavior;if(v==="select-tab"||v==="select-tab-if-needed"&&_===-1){this._currentIndex=f,this._previousTitle=g,this._currentChanged.emit({previousIndex:_,previousTitle:g,currentIndex:f,currentTitle:m});return}_>=f&&this._currentIndex++},d.prototype._adjustCurrentForMove=function(f,m){this._currentIndex===f?this._currentIndex=m:this._currentIndex<f&&this._currentIndex>=m?this._currentIndex++:this._currentIndex>f&&this._currentIndex<=m&&this._currentIndex--},d.prototype._adjustCurrentForRemove=function(f,m){var g=this._currentIndex,_=this.removeBehavior;if(g!==f){g>f&&this._currentIndex--;return}if(this._titles.length===0){this._currentIndex=-1,this._currentChanged.emit({previousIndex:f,previousTitle:m,currentIndex:-1,currentTitle:null});return}if(_==="select-tab-after"){this._currentIndex=Math.min(f,this._titles.length-1),this._currentChanged.emit({previousIndex:f,previousTitle:m,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(_==="select-tab-before"){this._currentIndex=Math.max(0,f-1),this._currentChanged.emit({previousIndex:f,previousTitle:m,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(_==="select-previous-tab"){this._previousTitle?(this._currentIndex=this._titles.indexOf(this._previousTitle),this._previousTitle=null):this._currentIndex=Math.min(f,this._titles.length-1),this._currentChanged.emit({previousIndex:f,previousTitle:m,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}this._currentIndex=-1,this._currentChanged.emit({previousIndex:f,previousTitle:m,currentIndex:-1,currentTitle:null})},d.prototype._onTitleChanged=function(f){this.update()},d}(c.Widget);i.TabBar=h,function(p){var d=function(){function f(){this.closeIconSelector=".p-TabBar-tabCloseIcon",this._tabID=0,this._tabKeys=new WeakMap}return f.prototype.renderTab=function(m){var g=m.title.caption,_=this.createTabKey(m),v=this.createTabStyle(m),y=this.createTabClass(m),x=this.createTabDataset(m);return a.h.li({key:_,className:y,title:g,style:v,dataset:x},this.renderIcon(m),this.renderLabel(m),this.renderCloseIcon(m))},f.prototype.renderIcon=function(m){var g=this.createIconClass(m);return a.h.div({className:g},m.title.iconLabel)},f.prototype.renderLabel=function(m){return a.h.div({className:"p-TabBar-tabLabel"},m.title.label)},f.prototype.renderCloseIcon=function(m){return a.h.div({className:"p-TabBar-tabCloseIcon"})},f.prototype.createTabKey=function(m){var g=this._tabKeys.get(m.title);return g===void 0&&(g="tab-key-"+this._tabID++,this._tabKeys.set(m.title,g)),g},f.prototype.createTabStyle=function(m){return{zIndex:""+m.zIndex}},f.prototype.createTabClass=function(m){var g="p-TabBar-tab";return m.title.className&&(g+=" "+m.title.className),m.title.closable&&(g+=" p-mod-closable"),m.current&&(g+=" p-mod-current"),g},f.prototype.createTabDataset=function(m){return m.title.dataset},f.prototype.createIconClass=function(m){var g="p-TabBar-tabIcon",_=m.title.iconClass;return _?g+" "+_:g},f}();p.Renderer=d,p.defaultRenderer=new d}(h=i.TabBar||(i.TabBar={})),i.TabBar=h;var u;(function(p){p.DRAG_THRESHOLD=5,p.DETACH_THRESHOLD=20;function d(){var w=document.createElement("div"),D=document.createElement("ul");return D.className="p-TabBar-content",w.appendChild(D),w}p.createNode=d;function f(w){return w instanceof l.Title?w:new l.Title(w)}p.asTitle=f;function m(w){var D=window.getComputedStyle(w);return 1e3*(parseFloat(D.transitionDuration)||0)}p.parseTransitionDuration=m;function g(w,D){for(var b=new Array(w.length),S=0,T=w.length;S<T;++S){var C=w[S],I=window.getComputedStyle(C);D==="horizontal"?b[S]={pos:C.offsetLeft,size:C.offsetWidth,margin:parseFloat(I.marginLeft)||0}:b[S]={pos:C.offsetTop,size:C.offsetHeight,margin:parseFloat(I.marginTop)||0}}return b}p.snapTabLayout=g;function _(w,D){var b=Math.abs(D.clientX-w.pressX),S=Math.abs(D.clientY-w.pressY);return b>=p.DRAG_THRESHOLD||S>=p.DRAG_THRESHOLD}p.dragExceeded=_;function v(w,D){var b=w.contentRect;return D.clientX<b.left-p.DETACH_THRESHOLD||D.clientX>=b.right+p.DETACH_THRESHOLD||D.clientY<b.top-p.DETACH_THRESHOLD||D.clientY>=b.bottom+p.DETACH_THRESHOLD}p.detachExceeded=v;function y(w,D,b,S){var T,C,I,M;S==="horizontal"?(T=D.pressX,C=b.clientX-D.contentRect.left,I=b.clientX,M=D.contentRect.width):(T=D.pressY,C=b.clientY-D.contentRect.top,I=b.clientY,M=D.contentRect.height);for(var k=D.index,H=C-D.tabPressPos,Y=H+D.tabSize,O=0,B=w.length;O<B;++O){var q=void 0,le=D.tabLayout[O],X=le.pos+(le.size>>1);if(O<D.index&&H<X)q=D.tabSize+D.tabLayout[O+1].margin+"px",k=Math.min(k,O);else if(O>D.index&&Y>X)q=-D.tabSize-le.margin+"px",k=Math.max(k,O);else if(O===D.index){var Se=I-T,R=M-(D.tabPos+D.tabSize);q=Math.max(-D.tabPos,Math.min(Se,R))+"px"}else q="";S==="horizontal"?w[O].style.left=q:w[O].style.top=q}D.targetIndex=k}p.layoutTabs=y;function x(w,D){var b;D==="horizontal"?b=w.contentRect.width:b=w.contentRect.height;var S;if(w.targetIndex===w.index)S=0;else if(w.targetIndex>w.index){var T=w.tabLayout[w.targetIndex];S=T.pos+T.size-w.tabSize-w.tabPos}else{var T=w.tabLayout[w.targetIndex];S=T.pos-w.tabPos}var C=b-(w.tabPos+w.tabSize),I=Math.max(-w.tabPos,Math.min(S,C));D==="horizontal"?w.tab.style.left=I+"px":w.tab.style.top=I+"px"}p.finalizeTabPosition=x;function A(w,D){t.each(w,function(b){D==="horizontal"?b.style.left="":b.style.top=""})}p.resetTabPositions=A})(u||(u={}))})(mp);(function(i){var e=P&&P.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var _ in g)g.hasOwnProperty(_)&&(m[_]=g[_])};return function(m,g){f(m,g);function _(){this.constructor=m}m.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}}();Object.defineProperty(i,"__esModule",{value:!0});var t=mt,r=Dc,n=ai,s=Cc,o=wi,a=oa,l=tt,c=pp,h=mp,u=Gt,p=function(f){e(m,f);function m(g){g===void 0&&(g={});var _=f.call(this)||this;_._drag=null,_._pressData=null,_._layoutModified=new l.Signal(_),_.addClass("p-DockPanel"),_._mode=g.mode||"multiple-document",_._renderer=g.renderer||m.defaultRenderer,_.dataset.mode=_._mode;var v={createTabBar:function(){return _._createTabBar()},createHandle:function(){return _._createHandle()}};return _.layout=new c.DockLayout({renderer:v,spacing:g.spacing}),_.overlay=g.overlay||new m.Overlay,_.node.appendChild(_.overlay.node),_}return m.prototype.dispose=function(){this._releaseMouse(),this.overlay.hide(0),this._drag&&this._drag.dispose(),f.prototype.dispose.call(this)},Object.defineProperty(m.prototype,"layoutModified",{get:function(){return this._layoutModified},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"renderer",{get:function(){return this.layout.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"spacing",{get:function(){return this.layout.spacing},set:function(g){this.layout.spacing=g},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"mode",{get:function(){return this._mode},set:function(g){if(this._mode!==g){this._mode=g,this.dataset.mode=g;var _=this.layout;switch(g){case"multiple-document":t.each(_.tabBars(),function(v){v.show()});break;case"single-document":_.restoreLayout(d.createSingleDocumentConfig(this));break;default:throw"unreachable"}o.MessageLoop.postMessage(this,d.LayoutModified)}},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"isEmpty",{get:function(){return this.layout.isEmpty},enumerable:!0,configurable:!0}),m.prototype.widgets=function(){return this.layout.widgets()},m.prototype.selectedWidgets=function(){return this.layout.selectedWidgets()},m.prototype.tabBars=function(){return this.layout.tabBars()},m.prototype.handles=function(){return this.layout.handles()},m.prototype.selectWidget=function(g){var _=t.find(this.tabBars(),function(v){return v.titles.indexOf(g.title)!==-1});if(!_)throw new Error("Widget is not contained in the dock panel.");_.currentTitle=g.title},m.prototype.activateWidget=function(g){this.selectWidget(g),g.activate()},m.prototype.saveLayout=function(){return this.layout.saveLayout()},m.prototype.restoreLayout=function(g){this._mode="multiple-document",this.layout.restoreLayout(g),(n.Platform.IS_EDGE||n.Platform.IS_IE)&&o.MessageLoop.flush(),o.MessageLoop.postMessage(this,d.LayoutModified)},m.prototype.addWidget=function(g,_){_===void 0&&(_={}),this._mode==="single-document"?this.layout.addWidget(g):this.layout.addWidget(g,_),o.MessageLoop.postMessage(this,d.LayoutModified)},m.prototype.processMessage=function(g){g.type==="layout-modified"?this._layoutModified.emit(void 0):f.prototype.processMessage.call(this,g)},m.prototype.handleEvent=function(g){switch(g.type){case"p-dragenter":this._evtDragEnter(g);break;case"p-dragleave":this._evtDragLeave(g);break;case"p-dragover":this._evtDragOver(g);break;case"p-drop":this._evtDrop(g);break;case"mousedown":this._evtMouseDown(g);break;case"mousemove":this._evtMouseMove(g);break;case"mouseup":this._evtMouseUp(g);break;case"keydown":this._evtKeyDown(g);break;case"contextmenu":g.preventDefault(),g.stopPropagation();break}},m.prototype.onBeforeAttach=function(g){this.node.addEventListener("p-dragenter",this),this.node.addEventListener("p-dragleave",this),this.node.addEventListener("p-dragover",this),this.node.addEventListener("p-drop",this),this.node.addEventListener("mousedown",this)},m.prototype.onAfterDetach=function(g){this.node.removeEventListener("p-dragenter",this),this.node.removeEventListener("p-dragleave",this),this.node.removeEventListener("p-dragover",this),this.node.removeEventListener("p-drop",this),this.node.removeEventListener("mousedown",this),this._releaseMouse()},m.prototype.onChildAdded=function(g){d.isGeneratedTabBarProperty.get(g.child)||g.child.addClass("p-DockPanel-widget")},m.prototype.onChildRemoved=function(g){d.isGeneratedTabBarProperty.get(g.child)||(g.child.removeClass("p-DockPanel-widget"),o.MessageLoop.postMessage(this,d.LayoutModified))},m.prototype._evtDragEnter=function(g){g.mimeData.hasData("application/vnd.phosphor.widget-factory")&&(g.preventDefault(),g.stopPropagation())},m.prototype._evtDragLeave=function(g){g.preventDefault(),g.stopPropagation();var _=g.relatedTarget;(!_||!this.node.contains(_))&&this.overlay.hide(0)},m.prototype._evtDragOver=function(g){g.preventDefault(),g.stopPropagation(),this._showOverlay(g.clientX,g.clientY)==="invalid"?g.dropAction="none":g.dropAction=g.proposedAction},m.prototype._evtDrop=function(g){if(g.preventDefault(),g.stopPropagation(),this.overlay.hide(0),g.proposedAction==="none"){g.dropAction="none";return}var _=g.clientX,v=g.clientY,y=d.findDropTarget(this,_,v),x=y.zone,A=y.target;if(x==="invalid"){g.dropAction="none";return}var w=g.mimeData,D=w.getData("application/vnd.phosphor.widget-factory");if(typeof D!="function"){g.dropAction="none";return}var b=D();if(!(b instanceof u.Widget)){g.dropAction="none";return}if(b.contains(this)){g.dropAction="none";return}var S=A?d.getDropRef(A.tabBar):null;switch(x){case"root-all":this.addWidget(b);break;case"root-top":this.addWidget(b,{mode:"split-top"});break;case"root-left":this.addWidget(b,{mode:"split-left"});break;case"root-right":this.addWidget(b,{mode:"split-right"});break;case"root-bottom":this.addWidget(b,{mode:"split-bottom"});break;case"widget-all":this.addWidget(b,{mode:"tab-after",ref:S});break;case"widget-top":this.addWidget(b,{mode:"split-top",ref:S});break;case"widget-left":this.addWidget(b,{mode:"split-left",ref:S});break;case"widget-right":this.addWidget(b,{mode:"split-right",ref:S});break;case"widget-bottom":this.addWidget(b,{mode:"split-bottom",ref:S});break;default:throw"unreachable"}g.dropAction=g.proposedAction,this.activateWidget(b)},m.prototype._evtKeyDown=function(g){g.preventDefault(),g.stopPropagation(),g.keyCode===27&&(this._releaseMouse(),o.MessageLoop.postMessage(this,d.LayoutModified))},m.prototype._evtMouseDown=function(g){if(g.button===0){var _=this.layout,v=g.target,y=t.find(_.handles(),function(S){return S.contains(v)});if(y){g.preventDefault(),g.stopPropagation(),document.addEventListener("keydown",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("contextmenu",this,!0);var x=y.getBoundingClientRect(),A=g.clientX-x.left,w=g.clientY-x.top,D=window.getComputedStyle(y),b=s.Drag.overrideCursor(D.cursor);this._pressData={handle:y,deltaX:A,deltaY:w,override:b}}}},m.prototype._evtMouseMove=function(g){if(this._pressData){g.preventDefault(),g.stopPropagation();var _=this.node.getBoundingClientRect(),v=g.clientX-_.left-this._pressData.deltaX,y=g.clientY-_.top-this._pressData.deltaY,x=this.layout;x.moveHandle(this._pressData.handle,v,y)}},m.prototype._evtMouseUp=function(g){g.button===0&&(g.preventDefault(),g.stopPropagation(),this._releaseMouse(),o.MessageLoop.postMessage(this,d.LayoutModified))},m.prototype._releaseMouse=function(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,document.removeEventListener("keydown",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("contextmenu",this,!0))},m.prototype._showOverlay=function(g,_){var v=d.findDropTarget(this,g,_),y=v.zone,x=v.target;if(y==="invalid")return this.overlay.hide(100),y;var A,w,D,b,S=n.ElementExt.boxSizing(this.node),T=this.node.getBoundingClientRect();switch(y){case"root-all":A=S.paddingTop,w=S.paddingLeft,D=S.paddingRight,b=S.paddingBottom;break;case"root-top":A=S.paddingTop,w=S.paddingLeft,D=S.paddingRight,b=T.height*d.GOLDEN_RATIO;break;case"root-left":A=S.paddingTop,w=S.paddingLeft,D=T.width*d.GOLDEN_RATIO,b=S.paddingBottom;break;case"root-right":A=S.paddingTop,w=T.width*d.GOLDEN_RATIO,D=S.paddingRight,b=S.paddingBottom;break;case"root-bottom":A=T.height*d.GOLDEN_RATIO,w=S.paddingLeft,D=S.paddingRight,b=S.paddingBottom;break;case"widget-all":A=x.top,w=x.left,D=x.right,b=x.bottom;break;case"widget-top":A=x.top,w=x.left,D=x.right,b=x.bottom+x.height/2;break;case"widget-left":A=x.top,w=x.left,D=x.right+x.width/2,b=x.bottom;break;case"widget-right":A=x.top,w=x.left+x.width/2,D=x.right,b=x.bottom;break;case"widget-bottom":A=x.top+x.height/2,w=x.left,D=x.right,b=x.bottom;break;default:throw"unreachable"}return this.overlay.show({top:A,left:w,right:D,bottom:b}),y},m.prototype._createTabBar=function(){var g=this._renderer.createTabBar();return d.isGeneratedTabBarProperty.set(g,!0),this._mode==="single-document"&&g.hide(),g.tabsMovable=!0,g.allowDeselect=!1,g.removeBehavior="select-previous-tab",g.insertBehavior="select-tab-if-needed",g.tabMoved.connect(this._onTabMoved,this),g.currentChanged.connect(this._onCurrentChanged,this),g.tabCloseRequested.connect(this._onTabCloseRequested,this),g.tabDetachRequested.connect(this._onTabDetachRequested,this),g.tabActivateRequested.connect(this._onTabActivateRequested,this),g},m.prototype._createHandle=function(){return this._renderer.createHandle()},m.prototype._onTabMoved=function(){o.MessageLoop.postMessage(this,d.LayoutModified)},m.prototype._onCurrentChanged=function(g,_){var v=_.previousTitle,y=_.currentTitle;v&&v.owner.hide(),y&&y.owner.show(),(n.Platform.IS_EDGE||n.Platform.IS_IE)&&o.MessageLoop.flush(),o.MessageLoop.postMessage(this,d.LayoutModified)},m.prototype._onTabActivateRequested=function(g,_){_.title.owner.activate()},m.prototype._onTabCloseRequested=function(g,_){_.title.owner.close()},m.prototype._onTabDetachRequested=function(g,_){var v=this;if(!this._drag){g.releaseMouse();var y=_.title,x=_.tab,A=_.clientX,w=_.clientY,D=new r.MimeData,b=function(){return y.owner};D.setData("application/vnd.phosphor.widget-factory",b);var S=x.cloneNode(!0);this._drag=new s.Drag({mimeData:D,dragImage:S,proposedAction:"move",supportedActions:"move"}),x.classList.add("p-mod-hidden");var T=function(){v._drag=null,x.classList.remove("p-mod-hidden")};this._drag.start(A,w).then(T)}},m}(u.Widget);i.DockPanel=p,function(f){var m=function(){function _(){this._timer=-1,this._hidden=!0,this.node=document.createElement("div"),this.node.classList.add("p-DockPanel-overlay"),this.node.classList.add("p-mod-hidden"),this.node.style.position="absolute"}return _.prototype.show=function(v){var y=this.node.style;y.top=v.top+"px",y.left=v.left+"px",y.right=v.right+"px",y.bottom=v.bottom+"px",clearTimeout(this._timer),this._timer=-1,this._hidden&&(this._hidden=!1,this.node.classList.remove("p-mod-hidden"))},_.prototype.hide=function(v){var y=this;if(!this._hidden){if(v<=0){clearTimeout(this._timer),this._timer=-1,this._hidden=!0,this.node.classList.add("p-mod-hidden");return}this._timer===-1&&(this._timer=setTimeout(function(){y._timer=-1,y._hidden=!0,y.node.classList.add("p-mod-hidden")},v))}},_}();f.Overlay=m;var g=function(){function _(){}return _.prototype.createTabBar=function(){var v=new h.TabBar;return v.addClass("p-DockPanel-tabBar"),v},_.prototype.createHandle=function(){var v=document.createElement("div");return v.className="p-DockPanel-handle",v},_}();f.Renderer=g,f.defaultRenderer=new g}(p=i.DockPanel||(i.DockPanel={})),i.DockPanel=p;var d;(function(f){f.GOLDEN_RATIO=.618,f.EDGE_SIZE=40,f.LayoutModified=new o.ConflatableMessage("layout-modified"),f.isGeneratedTabBarProperty=new a.AttachedProperty({name:"isGeneratedTabBar",create:function(){return!1}});function m(v){if(v.isEmpty)return{main:null};var y=t.toArray(v.widgets()),x=v.selectedWidgets().next(),A=x?y.indexOf(x):-1;return{main:{type:"tab-area",widgets:y,currentIndex:A}}}f.createSingleDocumentConfig=m;function g(v,y,x){if(!n.ElementExt.hitTest(v.node,y,x))return{zone:"invalid",target:null};var A=v.layout;if(A.isEmpty)return{zone:"root-all",target:null};if(v.mode==="multiple-document"){var w=v.node.getBoundingClientRect(),D=y-w.left+1,b=x-w.top+1,S=w.right-y,T=w.bottom-x,C=Math.min(D,b,S,T);if(C<=f.EDGE_SIZE){var I;switch(C){case D:I="root-left";break;case b:I="root-top";break;case S:I="root-right";break;case T:I="root-bottom";break;default:throw"unreachable"}return{zone:I,target:null}}}var M=A.hitTestTabAreas(y,x);if(!M)return{zone:"invalid",target:null};if(v.mode==="single-document")return{zone:"widget-all",target:M};var k=M.x-M.left+1,H=M.y-M.top+1,Y=M.left+M.width-M.x,O=M.top+M.height-M.y,B=Math.round(M.width/3),q=Math.round(M.height/3);if(k>B&&Y>B&&H>q&&O>q)return{zone:"widget-all",target:M};k/=B,H/=q,Y/=B,O/=q;var le=Math.min(k,H,Y,O),X;switch(le){case k:X="widget-left";break;case H:X="widget-top";break;case Y:X="widget-right";break;case O:X="widget-bottom";break;default:throw"unreachable"}return{zone:X,target:M}}f.findDropTarget=g;function _(v){return v.titles.length===0?null:v.currentTitle?v.currentTitle.owner:v.titles[v.titles.length-1].owner}f.getDropRef=_})(d||(d={}))})(uE);var Ey={};Object.defineProperty(Ey,"__esModule",{value:!0});var _u=mt,pg=tt,C9=function(){function i(){this._counter=0,this._widgets=[],this._activeWidget=null,this._currentWidget=null,this._numbers=new Map,this._nodes=new Map,this._activeChanged=new pg.Signal(this),this._currentChanged=new pg.Signal(this)}return i.prototype.dispose=function(){var e=this;this._counter<0||(this._counter=-1,pg.Signal.clearData(this),_u.each(this._widgets,function(t){t.node.removeEventListener("focus",e,!0),t.node.removeEventListener("blur",e,!0)}),this._activeWidget=null,this._currentWidget=null,this._nodes.clear(),this._numbers.clear(),this._widgets.length=0)},Object.defineProperty(i.prototype,"currentChanged",{get:function(){return this._currentChanged},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"activeChanged",{get:function(){return this._activeChanged},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDisposed",{get:function(){return this._counter<0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentWidget",{get:function(){return this._currentWidget},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"activeWidget",{get:function(){return this._activeWidget},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"widgets",{get:function(){return this._widgets},enumerable:!0,configurable:!0}),i.prototype.focusNumber=function(e){var t=this._numbers.get(e);return t===void 0?-1:t},i.prototype.has=function(e){return this._numbers.has(e)},i.prototype.add=function(e){if(!this._numbers.has(e)){var t=e.node.contains(document.activeElement),r=t?this._counter++:-1;this._widgets.push(e),this._numbers.set(e,r),this._nodes.set(e.node,e),e.node.addEventListener("focus",this,!0),e.node.addEventListener("blur",this,!0),e.disposed.connect(this._onWidgetDisposed,this),t&&this._setWidgets(e,e)}},i.prototype.remove=function(e){var t=this;if(this._numbers.has(e)&&(e.disposed.disconnect(this._onWidgetDisposed,this),e.node.removeEventListener("focus",this,!0),e.node.removeEventListener("blur",this,!0),_u.ArrayExt.removeFirstOf(this._widgets,e),this._nodes.delete(e.node),this._numbers.delete(e),this._currentWidget===e)){var r=_u.filter(this._widgets,function(s){return t._numbers.get(s)!==-1}),n=_u.max(r,function(s,o){var a=t._numbers.get(s),l=t._numbers.get(o);return a-l})||null;this._setWidgets(n,null)}},i.prototype.handleEvent=function(e){switch(e.type){case"focus":this._evtFocus(e);break;case"blur":this._evtBlur(e);break}},i.prototype._setWidgets=function(e,t){var r=this._currentWidget;this._currentWidget=e;var n=this._activeWidget;this._activeWidget=t,r!==e&&this._currentChanged.emit({oldValue:r,newValue:e}),n!==t&&this._activeChanged.emit({oldValue:n,newValue:t})},i.prototype._evtFocus=function(e){var t=this._nodes.get(e.currentTarget);t!==this._currentWidget&&this._numbers.set(t,this._counter++),this._setWidgets(t,t)},i.prototype._evtBlur=function(e){var t=this._nodes.get(e.currentTarget),r=e.relatedTarget;if(!r){this._setWidgets(this._currentWidget,null);return}if(!t.node.contains(r)&&!_u.find(this._widgets,function(n){return n.node.contains(r)})){this._setWidgets(this._currentWidget,null);return}},i.prototype._onWidgetDisposed=function(e){this.remove(e)},i}();Ey.FocusTracker=C9;var hE={};(function(i){var e=P&&P.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var f in d)d.hasOwnProperty(f)&&(p[f]=d[f])};return function(p,d){u(p,d);function f(){this.constructor=p}p.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(i,"__esModule",{value:!0});var t=mt,r=ai,n=wi,s=oa,o=Il,a=Nn,l=Gt,c=function(u){e(p,u);function p(d){d===void 0&&(d={});var f=u.call(this,d)||this;return f._dirty=!1,f._rowSpacing=4,f._columnSpacing=4,f._items=[],f._rowStarts=[],f._columnStarts=[],f._rowSizers=[new o.BoxSizer],f._columnSizers=[new o.BoxSizer],f._box=null,d.rowCount!==void 0&&h.reallocSizers(f._rowSizers,d.rowCount),d.columnCount!==void 0&&h.reallocSizers(f._columnSizers,d.columnCount),d.rowSpacing!==void 0&&(f._rowSpacing=h.clampValue(d.rowSpacing)),d.columnSpacing!==void 0&&(f._columnSpacing=h.clampValue(d.columnSpacing)),f}return p.prototype.dispose=function(){t.each(this._items,function(d){var f=d.widget;d.dispose(),f.dispose()}),this._box=null,this._items.length=0,this._rowStarts.length=0,this._rowSizers.length=0,this._columnStarts.length=0,this._columnSizers.length=0,u.prototype.dispose.call(this)},Object.defineProperty(p.prototype,"rowCount",{get:function(){return this._rowSizers.length},set:function(d){d!==this.rowCount&&(h.reallocSizers(this._rowSizers,d),this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"columnCount",{get:function(){return this._columnSizers.length},set:function(d){d!==this.columnCount&&(h.reallocSizers(this._columnSizers,d),this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"rowSpacing",{get:function(){return this._rowSpacing},set:function(d){d=h.clampValue(d),this._rowSpacing!==d&&(this._rowSpacing=d,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"columnSpacing",{get:function(){return this._columnSpacing},set:function(d){d=h.clampValue(d),this._columnSpacing!==d&&(this._columnSpacing=d,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),p.prototype.rowStretch=function(d){var f=this._rowSizers[d];return f?f.stretch:-1},p.prototype.setRowStretch=function(d,f){var m=this._rowSizers[d];m&&(f=h.clampValue(f),m.stretch!==f&&(m.stretch=f,this.parent&&this.parent.update()))},p.prototype.columnStretch=function(d){var f=this._columnSizers[d];return f?f.stretch:-1},p.prototype.setColumnStretch=function(d,f){var m=this._columnSizers[d];m&&(f=h.clampValue(f),m.stretch!==f&&(m.stretch=f,this.parent&&this.parent.update()))},p.prototype.iter=function(){return t.map(this._items,function(d){return d.widget})},p.prototype.addWidget=function(d){var f=t.ArrayExt.findFirstIndex(this._items,function(m){return m.widget===d});f===-1&&(this._items.push(new a.LayoutItem(d)),this.parent&&this.attachWidget(d))},p.prototype.removeWidget=function(d){var f=t.ArrayExt.findFirstIndex(this._items,function(g){return g.widget===d});if(f===-1){var m=t.ArrayExt.removeAt(this._items,f);this.parent&&this.detachWidget(d),m.dispose()}},p.prototype.init=function(){var d=this;u.prototype.init.call(this),t.each(this,function(f){d.attachWidget(f)})},p.prototype.attachWidget=function(d){this.parent.isAttached&&n.MessageLoop.sendMessage(d,l.Widget.Msg.BeforeAttach),this.parent.node.appendChild(d.node),this.parent.isAttached&&n.MessageLoop.sendMessage(d,l.Widget.Msg.AfterAttach),this.parent.fit()},p.prototype.detachWidget=function(d){this.parent.isAttached&&n.MessageLoop.sendMessage(d,l.Widget.Msg.BeforeDetach),this.parent.node.removeChild(d.node),this.parent.isAttached&&n.MessageLoop.sendMessage(d,l.Widget.Msg.AfterDetach),this.parent.fit()},p.prototype.onBeforeShow=function(d){u.prototype.onBeforeShow.call(this,d),this.parent.update()},p.prototype.onBeforeAttach=function(d){u.prototype.onBeforeAttach.call(this,d),this.parent.fit()},p.prototype.onChildShown=function(d){this.parent.fit()},p.prototype.onChildHidden=function(d){this.parent.fit()},p.prototype.onResize=function(d){this.parent.isVisible&&this._update(d.width,d.height)},p.prototype.onUpdateRequest=function(d){this.parent.isVisible&&this._update(-1,-1)},p.prototype.onFitRequest=function(d){this.parent.isAttached&&this._fit()},p.prototype._fit=function(){for(var d=0,f=this.rowCount;d<f;++d)this._rowSizers[d].minSize=0;for(var d=0,f=this.columnCount;d<f;++d)this._columnSizers[d].minSize=0;for(var m=this._items.filter(function(I){return!I.isHidden}),d=0,f=m.length;d<f;++d)m[d].fit();var g=this.rowCount-1,_=this.columnCount-1;m.sort(h.rowSpanCmp);for(var d=0,f=m.length;d<f;++d){var v=m[d],y=p.getCellConfig(v.widget),x=Math.min(y.row,g),A=Math.min(y.row+y.rowSpan-1,g);h.distributeMin(this._rowSizers,x,A,v.minHeight)}m.sort(h.columnSpanCmp);for(var d=0,f=m.length;d<f;++d){var v=m[d],y=p.getCellConfig(v.widget),w=Math.min(y.column,_),D=Math.min(y.column+y.columnSpan-1,_);h.distributeMin(this._columnSizers,w,D,v.minWidth)}if(this.fitPolicy==="set-no-constraint"){n.MessageLoop.sendMessage(this.parent,l.Widget.Msg.UpdateRequest);return}for(var b=g*this._rowSpacing,S=_*this._columnSpacing,d=0,f=this.rowCount;d<f;++d)b+=this._rowSizers[d].minSize;for(var d=0,f=this.columnCount;d<f;++d)S+=this._columnSizers[d].minSize;var T=this._box=r.ElementExt.boxSizing(this.parent.node);S+=T.horizontalSum,b+=T.verticalSum;var C=this.parent.node.style;C.minWidth=S+"px",C.minHeight=b+"px",this._dirty=!0,this.parent.parent&&n.MessageLoop.sendMessage(this.parent.parent,l.Widget.Msg.FitRequest),this._dirty&&n.MessageLoop.sendMessage(this.parent,l.Widget.Msg.UpdateRequest)},p.prototype._update=function(d,f){this._dirty=!1,d<0&&(d=this.parent.node.offsetWidth),f<0&&(f=this.parent.node.offsetHeight),this._box||(this._box=r.ElementExt.boxSizing(this.parent.node));var m=this._box.paddingTop,g=this._box.paddingLeft,_=d-this._box.horizontalSum,v=f-this._box.verticalSum,y=this.rowCount-1,x=this.columnCount-1,A=y*this._rowSpacing,w=x*this._columnSpacing;o.BoxEngine.calc(this._rowSizers,Math.max(0,v-A)),o.BoxEngine.calc(this._columnSizers,Math.max(0,_-w));for(var D=0,b=m,S=this.rowCount;D<S;++D)this._rowStarts[D]=b,b+=this._rowSizers[D].size+this._rowSpacing;for(var D=0,b=g,S=this.columnCount;D<S;++D)this._columnStarts[D]=b,b+=this._columnSizers[D].size+this._columnSpacing;for(var D=0,S=this._items.length;D<S;++D){var T=this._items[D];if(!T.isHidden){var C=p.getCellConfig(T.widget),I=Math.min(C.row,y),M=Math.min(C.column,x),k=Math.min(C.row+C.rowSpan-1,y),H=Math.min(C.column+C.columnSpan-1,x),Y=this._columnStarts[M],O=this._rowStarts[I],B=this._columnStarts[H]+this._columnSizers[H].size-Y,q=this._rowStarts[k]+this._rowSizers[k].size-O;T.update(Y,O,B,q)}}},p}(a.Layout);i.GridLayout=c,function(u){function p(f){return h.cellConfigProperty.get(f)}u.getCellConfig=p;function d(f,m){h.cellConfigProperty.set(f,h.normalizeConfig(m))}u.setCellConfig=d}(c=i.GridLayout||(i.GridLayout={})),i.GridLayout=c;var h;(function(u){u.cellConfigProperty=new s.AttachedProperty({name:"cellConfig",create:function(){return{row:0,column:0,rowSpan:1,columnSpan:1}},changed:v});function p(y){var x=Math.max(0,Math.floor(y.row||0)),A=Math.max(0,Math.floor(y.column||0)),w=Math.max(1,Math.floor(y.rowSpan||0)),D=Math.max(1,Math.floor(y.columnSpan||0));return{row:x,column:A,rowSpan:w,columnSpan:D}}u.normalizeConfig=p;function d(y){return Math.max(0,Math.floor(y))}u.clampValue=d;function f(y,x){var A=u.cellConfigProperty.get(y.widget),w=u.cellConfigProperty.get(x.widget);return A.rowSpan-w.rowSpan}u.rowSpanCmp=f;function m(y,x){var A=u.cellConfigProperty.get(y.widget),w=u.cellConfigProperty.get(x.widget);return A.columnSpan-w.columnSpan}u.columnSpanCmp=m;function g(y,x){for(x=Math.max(1,Math.floor(x));y.length<x;)y.push(new o.BoxSizer);y.length<x&&(y.length=x)}u.reallocSizers=g;function _(y,x,A,w){if(!(A<x)){if(x===A){var D=y[x];D.minSize=Math.max(D.minSize,w);return}for(var b=0,S=x;S<=A;++S)b+=y[S].minSize;if(!(b>=w))for(var T=(w-b)/(A-x+1),S=x;S<=A;++S)y[S].minSize+=T}}u.distributeMin=_;function v(y){y.parent&&y.parent.layout instanceof c&&y.parent.fit()}})(h||(h={}))})(hE);var cE={};(function(i){var e=P&&P.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var d in p)p.hasOwnProperty(d)&&(u[d]=p[d])};return function(u,p){h(u,p);function d(){this.constructor=u}u.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}();Object.defineProperty(i,"__esModule",{value:!0});var t=mt,r=ai,n=fp,s=wi,o=Tc,a=Gt,l=function(h){e(u,h);function u(p){p===void 0&&(p={});var d=h.call(this,{node:c.createNode()})||this;return d._activeIndex=-1,d._menus=[],d._childMenu=null,d.addClass("p-MenuBar"),d.setFlag(a.Widget.Flag.DisallowLayout),d.renderer=p.renderer||u.defaultRenderer,d}return u.prototype.dispose=function(){this._closeChildMenu(),this._menus.length=0,h.prototype.dispose.call(this)},Object.defineProperty(u.prototype,"childMenu",{get:function(){return this._childMenu},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("p-MenuBar-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"activeMenu",{get:function(){return this._menus[this._activeIndex]||null},set:function(p){this.activeIndex=p?this._menus.indexOf(p):-1},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"activeIndex",{get:function(){return this._activeIndex},set:function(p){(p<0||p>=this._menus.length)&&(p=-1),this._activeIndex!==p&&(this._activeIndex=p,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"menus",{get:function(){return this._menus},enumerable:!0,configurable:!0}),u.prototype.openActiveMenu=function(){this._activeIndex!==-1&&(this._openChildMenu(),this._childMenu&&(this._childMenu.activeIndex=-1,this._childMenu.activateNextItem()))},u.prototype.addMenu=function(p){this.insertMenu(this._menus.length,p)},u.prototype.insertMenu=function(p,d){this._closeChildMenu();var f=this._menus.indexOf(d),m=Math.max(0,Math.min(p,this._menus.length));if(f===-1){t.ArrayExt.insert(this._menus,m,d),d.addClass("p-MenuBar-menu"),d.aboutToClose.connect(this._onMenuAboutToClose,this),d.menuRequested.connect(this._onMenuMenuRequested,this),d.title.changed.connect(this._onTitleChanged,this),this.update();return}m===this._menus.length&&m--,f!==m&&(t.ArrayExt.move(this._menus,f,m),this.update())},u.prototype.removeMenu=function(p){this.removeMenuAt(this._menus.indexOf(p))},u.prototype.removeMenuAt=function(p){this._closeChildMenu();var d=t.ArrayExt.removeAt(this._menus,p);d&&(d.aboutToClose.disconnect(this._onMenuAboutToClose,this),d.menuRequested.disconnect(this._onMenuMenuRequested,this),d.title.changed.disconnect(this._onTitleChanged,this),d.removeClass("p-MenuBar-menu"),this.update())},u.prototype.clearMenus=function(){if(this._menus.length!==0){this._closeChildMenu();for(var p=0,d=this._menus;p<d.length;p++){var f=d[p];f.aboutToClose.disconnect(this._onMenuAboutToClose,this),f.menuRequested.disconnect(this._onMenuMenuRequested,this),f.title.changed.disconnect(this._onTitleChanged,this),f.removeClass("p-MenuBar-menu")}this._menus.length=0,this.update()}},u.prototype.handleEvent=function(p){switch(p.type){case"keydown":this._evtKeyDown(p);break;case"mousedown":this._evtMouseDown(p);break;case"mousemove":this._evtMouseMove(p);break;case"mouseleave":this._evtMouseLeave(p);break;case"contextmenu":p.preventDefault(),p.stopPropagation();break}},u.prototype.onBeforeAttach=function(p){this.node.addEventListener("keydown",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this)},u.prototype.onAfterDetach=function(p){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),this._closeChildMenu()},u.prototype.onActivateRequest=function(p){this.isAttached&&this.node.focus()},u.prototype.onUpdateRequest=function(p){for(var d=this._menus,f=this.renderer,m=this._activeIndex,g=new Array(d.length),_=0,v=d.length;_<v;++_){var y=d[_].title,x=_===m;g[_]=f.renderItem({title:y,active:x})}o.VirtualDOM.render(g,this.contentNode)},u.prototype._evtKeyDown=function(p){p.preventDefault(),p.stopPropagation();var d=p.keyCode;if(d===13||d===38||d===40){this.openActiveMenu();return}if(d===27){this._closeChildMenu(),this.activeIndex=-1,this.node.blur();return}if(d===37){var f=this._activeIndex,m=this._menus.length;this.activeIndex=f===0?m-1:f-1;return}if(d===39){var f=this._activeIndex,m=this._menus.length;this.activeIndex=f===m-1?0:f+1;return}var g=n.getKeyboardLayout().keyForKeydownEvent(p);if(g){var _=this._activeIndex+1,v=c.findMnemonic(this._menus,g,_);v.index!==-1&&!v.multiple?(this.activeIndex=v.index,this.openActiveMenu()):v.index!==-1?this.activeIndex=v.index:v.auto!==-1&&(this.activeIndex=v.auto)}},u.prototype._evtMouseDown=function(p){if(r.ElementExt.hitTest(this.node,p.clientX,p.clientY)){p.preventDefault(),p.stopPropagation(),p.stopImmediatePropagation();var d=t.ArrayExt.findFirstIndex(this.contentNode.children,function(f){return r.ElementExt.hitTest(f,p.clientX,p.clientY)});if(d===-1){this._closeChildMenu();return}p.button===0&&(this._childMenu?(this._closeChildMenu(),this.activeIndex=d):(this.activeIndex=d,this._openChildMenu()))}},u.prototype._evtMouseMove=function(p){var d=t.ArrayExt.findFirstIndex(this.contentNode.children,function(f){return r.ElementExt.hitTest(f,p.clientX,p.clientY)});d!==this._activeIndex&&(d===-1&&this._childMenu||(this.activeIndex=d,this._childMenu&&this._openChildMenu()))},u.prototype._evtMouseLeave=function(p){this._childMenu||(this.activeIndex=-1)},u.prototype._openChildMenu=function(){var p=this.activeMenu;if(!p){this._closeChildMenu();return}var d=this._childMenu;if(d!==p){this._childMenu=p,d?d.close():(this.addClass("p-mod-active"),document.addEventListener("mousedown",this,!0)),s.MessageLoop.sendMessage(this,a.Widget.Msg.UpdateRequest);var f=this.contentNode.children[this._activeIndex],m=f.getBoundingClientRect(),g=m.left,_=m.bottom;p.open(g,_,{forceX:!0,forceY:!0})}},u.prototype._closeChildMenu=function(){if(this._childMenu){this.removeClass("p-mod-active"),document.removeEventListener("mousedown",this,!0);var p=this._childMenu;this._childMenu=null,p.close(),this.activeIndex=-1}},u.prototype._onMenuAboutToClose=function(p){p===this._childMenu&&(this.removeClass("p-mod-active"),document.removeEventListener("mousedown",this,!0),this._childMenu=null,this.activeIndex=-1)},u.prototype._onMenuMenuRequested=function(p,d){if(p===this._childMenu){var f=this._activeIndex,m=this._menus.length;switch(d){case"next":this.activeIndex=f===m-1?0:f+1;break;case"previous":this.activeIndex=f===0?m-1:f-1;break}this.openActiveMenu()}},u.prototype._onTitleChanged=function(){this.update()},u}(a.Widget);i.MenuBar=l,function(h){var u=function(){function p(){}return p.prototype.renderItem=function(d){var f=this.createItemClass(d),m=this.createItemDataset(d);return o.h.li({className:f,dataset:m},this.renderIcon(d),this.renderLabel(d))},p.prototype.renderIcon=function(d){var f=this.createIconClass(d);return o.h.div({className:f},d.title.iconLabel)},p.prototype.renderLabel=function(d){var f=this.formatLabel(d);return o.h.div({className:"p-MenuBar-itemLabel"},f)},p.prototype.createItemClass=function(d){var f="p-MenuBar-item";return d.title.className&&(f+=" "+d.title.className),d.active&&(f+=" p-mod-active"),f},p.prototype.createItemDataset=function(d){return d.title.dataset},p.prototype.createIconClass=function(d){var f="p-MenuBar-itemIcon",m=d.title.iconClass;return m?f+" "+m:f},p.prototype.formatLabel=function(d){var f=d.title,m=f.label,g=f.mnemonic;if(g<0||g>=m.length)return m;var _=m.slice(0,g),v=m.slice(g+1),y=m[g],x=o.h.span({className:"p-MenuBar-itemMnemonic"},y);return[_,x,v]},p}();h.Renderer=u,h.defaultRenderer=new u}(l=i.MenuBar||(i.MenuBar={})),i.MenuBar=l;var c;(function(h){function u(){var d=document.createElement("div"),f=document.createElement("ul");return f.className="p-MenuBar-content",d.appendChild(f),d.tabIndex=-1,d}h.createNode=u;function p(d,f,m){for(var g=-1,_=-1,v=!1,y=f.toUpperCase(),x=0,A=d.length;x<A;++x){var w=(x+m)%A,D=d[w].title;if(D.label.length!==0){var b=D.mnemonic;if(b>=0&&b<D.label.length){D.label[b].toUpperCase()===y&&(g===-1?g=w:v=!0);continue}_===-1&&D.label[0].toUpperCase()===y&&(_=w)}}return{index:g,multiple:v,auto:_}}h.findMnemonic=p})(c||(c={}))})(cE);var Ay={},P9=P&&P.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(Ay,"__esModule",{value:!0});var Td=ai,I9=Cc,mg=tt,qx=Gt,O9=function(i){P9(e,i);function e(t){t===void 0&&(t={});var r=i.call(this,{node:Ef.createNode()})||this;return r._onRepeat=function(){if(r._repeatTimer=-1,!!r._pressData){var n=r._pressData.part;if(n!=="thumb"){r._repeatTimer=setTimeout(r._onRepeat,20);var s=r._pressData.mouseX,o=r._pressData.mouseY;if(n==="decrement"){if(!Td.ElementExt.hitTest(r.decrementNode,s,o))return;r._stepRequested.emit("decrement");return}if(n==="increment"){if(!Td.ElementExt.hitTest(r.incrementNode,s,o))return;r._stepRequested.emit("increment");return}if(n==="track"){if(!Td.ElementExt.hitTest(r.trackNode,s,o))return;var a=r.thumbNode;if(Td.ElementExt.hitTest(a,s,o))return;var l=a.getBoundingClientRect(),c=void 0;r._orientation==="horizontal"?c=s<l.left?"decrement":"increment":c=o<l.top?"decrement":"increment",r._pageRequested.emit(c);return}}}},r._value=0,r._page=10,r._maximum=100,r._repeatTimer=-1,r._pressData=null,r._thumbMoved=new mg.Signal(r),r._stepRequested=new mg.Signal(r),r._pageRequested=new mg.Signal(r),r.addClass("p-ScrollBar"),r.setFlag(qx.Widget.Flag.DisallowLayout),r._orientation=t.orientation||"vertical",r.dataset.orientation=r._orientation,t.maximum!==void 0&&(r._maximum=Math.max(0,t.maximum)),t.page!==void 0&&(r._page=Math.max(0,t.page)),t.value!==void 0&&(r._value=Math.max(0,Math.min(t.value,r._maximum))),r}return Object.defineProperty(e.prototype,"thumbMoved",{get:function(){return this._thumbMoved},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stepRequested",{get:function(){return this._stepRequested},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageRequested",{get:function(){return this._pageRequested},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation!==t&&(this._releaseMouse(),this._orientation=t,this.dataset.orientation=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=Math.max(0,Math.min(t,this._maximum)),this._value!==t&&(this._value=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this._page},set:function(t){t=Math.max(0,t),this._page!==t&&(this._page=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t=Math.max(0,t),this._maximum!==t&&(this._maximum=t,this._value=Math.min(this._value,t),this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decrementNode",{get:function(){return this.node.getElementsByClassName("p-ScrollBar-button")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incrementNode",{get:function(){return this.node.getElementsByClassName("p-ScrollBar-button")[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackNode",{get:function(){return this.node.getElementsByClassName("p-ScrollBar-track")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbNode",{get:function(){return this.node.getElementsByClassName("p-ScrollBar-thumb")[0]},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(t){switch(t.type){case"mousedown":this._evtMouseDown(t);break;case"mousemove":this._evtMouseMove(t);break;case"mouseup":this._evtMouseUp(t);break;case"keydown":this._evtKeyDown(t);break;case"contextmenu":t.preventDefault(),t.stopPropagation();break}},e.prototype.onBeforeAttach=function(t){this.node.addEventListener("mousedown",this),this.update()},e.prototype.onAfterDetach=function(t){this.node.removeEventListener("mousedown",this),this._releaseMouse()},e.prototype.onUpdateRequest=function(t){var r=this._value*100/this._maximum,n=this._page*100/(this._page+this._maximum);r=Math.max(0,Math.min(r,100)),n=Math.max(0,Math.min(n,100));var s=this.thumbNode.style;this._orientation==="horizontal"?(s.top="",s.height="",s.left=r+"%",s.width=n+"%",s.transform="translate("+-r+"%, 0%)"):(s.left="",s.width="",s.top=r+"%",s.height=n+"%",s.transform="translate(0%, "+-r+"%)")},e.prototype._evtKeyDown=function(t){if(t.preventDefault(),t.stopPropagation(),t.keyCode===27){var r=this._pressData?this._pressData.value:-1;this._releaseMouse(),r!==-1&&this._moveThumb(r)}},e.prototype._evtMouseDown=function(t){if(t.button===0&&!this._pressData){var r=Ef.findPart(this,t.target);if(r){t.preventDefault(),t.stopPropagation();var n=I9.Drag.overrideCursor("default");if(this._pressData={part:r,override:n,delta:-1,value:-1,mouseX:t.clientX,mouseY:t.clientY},document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0),r==="thumb"){var s=this.thumbNode,o=s.getBoundingClientRect();this._orientation==="horizontal"?this._pressData.delta=t.clientX-o.left:this._pressData.delta=t.clientY-o.top,s.classList.add("p-mod-active"),this._pressData.value=this._value;return}if(r==="track"){var o=this.thumbNode.getBoundingClientRect(),a=void 0;this._orientation==="horizontal"?a=t.clientX<o.left?"decrement":"increment":a=t.clientY<o.top?"decrement":"increment",this._repeatTimer=setTimeout(this._onRepeat,350),this._pageRequested.emit(a);return}if(r==="decrement"){this.decrementNode.classList.add("p-mod-active"),this._repeatTimer=setTimeout(this._onRepeat,350),this._stepRequested.emit("decrement");return}if(r==="increment"){this.incrementNode.classList.add("p-mod-active"),this._repeatTimer=setTimeout(this._onRepeat,350),this._stepRequested.emit("increment");return}}}},e.prototype._evtMouseMove=function(t){if(this._pressData&&(t.preventDefault(),t.stopPropagation(),this._pressData.mouseX=t.clientX,this._pressData.mouseY=t.clientY,this._pressData.part==="thumb")){var r=this.thumbNode.getBoundingClientRect(),n=this.trackNode.getBoundingClientRect(),s,o;this._orientation==="horizontal"?(s=t.clientX-n.left-this._pressData.delta,o=n.width-r.width):(s=t.clientY-n.top-this._pressData.delta,o=n.height-r.height);var a=o===0?0:s*this._maximum/o;this._moveThumb(a)}},e.prototype._evtMouseUp=function(t){t.button===0&&(t.preventDefault(),t.stopPropagation(),this._releaseMouse())},e.prototype._releaseMouse=function(){this._pressData&&(clearTimeout(this._repeatTimer),this._repeatTimer=-1,this._pressData.override.dispose(),this._pressData=null,document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0),this.thumbNode.classList.remove("p-mod-active"),this.decrementNode.classList.remove("p-mod-active"),this.incrementNode.classList.remove("p-mod-active"))},e.prototype._moveThumb=function(t){t=Math.max(0,Math.min(t,this._maximum)),this._value!==t&&(this._value=t,this.update(),this._thumbMoved.emit(t))},e}(qx.Widget);Ay.ScrollBar=O9;var Ef;(function(i){function e(){var r=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div");return n.className="p-ScrollBar-button",s.className="p-ScrollBar-button",n.dataset.action="decrement",s.dataset.action="increment",o.className="p-ScrollBar-track",a.className="p-ScrollBar-thumb",o.appendChild(a),r.appendChild(n),r.appendChild(o),r.appendChild(s),r}i.createNode=e;function t(r,n){return r.thumbNode.contains(n)?"thumb":r.trackNode.contains(n)?"track":r.decrementNode.contains(n)?"decrement":r.incrementNode.contains(n)?"increment":null}i.findPart=t})(Ef||(Ef={}));var Dy={},M9=P&&P.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(Dy,"__esModule",{value:!0});var gg=mt,Cd=wi,N9=Nn,Pd=Gt,R9=function(i){M9(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t._widget=null,t}return e.prototype.dispose=function(){if(this._widget){var t=this._widget;this._widget=null,t.dispose()}i.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"widget",{get:function(){return this._widget},set:function(t){this._widget!==t&&(this._widget&&this._widget.dispose(),this._widget=t,this.parent&&t&&this.attachWidget(t))},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return this._widget?gg.once(this._widget):gg.empty()},e.prototype.removeWidget=function(t){this._widget===t&&(this._widget=null,this.parent&&this.detachWidget(t))},e.prototype.init=function(){var t=this;i.prototype.init.call(this),gg.each(this,function(r){t.attachWidget(r)})},e.prototype.attachWidget=function(t){this.parent.isAttached&&Cd.MessageLoop.sendMessage(t,Pd.Widget.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.isAttached&&Cd.MessageLoop.sendMessage(t,Pd.Widget.Msg.AfterAttach)},e.prototype.detachWidget=function(t){this.parent.isAttached&&Cd.MessageLoop.sendMessage(t,Pd.Widget.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&Cd.MessageLoop.sendMessage(t,Pd.Widget.Msg.AfterDetach)},e}(N9.Layout);Dy.SingletonLayout=R9;var Ty={};(function(i){var e=P&&P.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var m in f)f.hasOwnProperty(m)&&(d[m]=f[m])};return function(d,f){p(d,f);function m(){this.constructor=d}d.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}}();Object.defineProperty(i,"__esModule",{value:!0});var t=mt,r=ai,n=wi,s=oa,o=Il,a=Nn,l=aa,c=Gt,h=function(p){e(d,p);function d(f){var m=p.call(this)||this;return m._fixed=0,m._spacing=4,m._dirty=!1,m._hasNormedSizes=!1,m._sizers=[],m._items=[],m._handles=[],m._box=null,m._alignment="start",m._orientation="horizontal",m.renderer=f.renderer,f.orientation!==void 0&&(m._orientation=f.orientation),f.alignment!==void 0&&(m._alignment=f.alignment),f.spacing!==void 0&&(m._spacing=u.clampSpacing(f.spacing)),m}return d.prototype.dispose=function(){t.each(this._items,function(f){f.dispose()}),this._box=null,this._items.length=0,this._sizers.length=0,this._handles.length=0,p.prototype.dispose.call(this)},Object.defineProperty(d.prototype,"orientation",{get:function(){return this._orientation},set:function(f){this._orientation!==f&&(this._orientation=f,this.parent&&(this.parent.dataset.orientation=f,this.parent.fit()))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"alignment",{get:function(){return this._alignment},set:function(f){this._alignment!==f&&(this._alignment=f,this.parent&&(this.parent.dataset.alignment=f,this.parent.update()))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"spacing",{get:function(){return this._spacing},set:function(f){f=u.clampSpacing(f),this._spacing!==f&&(this._spacing=f,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"handles",{get:function(){return this._handles},enumerable:!0,configurable:!0}),d.prototype.relativeSizes=function(){return u.normalize(this._sizers.map(function(f){return f.size}))},d.prototype.setRelativeSizes=function(f){for(var m=this._sizers.length,g=f.slice(0,m);g.length<m;)g.push(0);for(var _=u.normalize(g),v=0;v<m;++v){var y=this._sizers[v];y.sizeHint=_[v],y.size=_[v]}this._hasNormedSizes=!0,this.parent&&this.parent.update()},d.prototype.moveHandle=function(f,m){var g=this._handles[f];if(!(!g||g.classList.contains("p-mod-hidden"))){var _;if(this._orientation==="horizontal"?_=m-g.offsetLeft:_=m-g.offsetTop,_!==0){for(var v=0,y=this._sizers;v<y.length;v++){var x=y[v];x.size>0&&(x.sizeHint=x.size)}o.BoxEngine.adjust(this._sizers,f,_),this.parent&&this.parent.update()}}},d.prototype.init=function(){this.parent.dataset.orientation=this.orientation,this.parent.dataset.alignment=this.alignment,p.prototype.init.call(this)},d.prototype.attachWidget=function(f,m){var g=new a.LayoutItem(m),_=u.createHandle(this.renderer),v=u.averageSize(this._sizers),y=u.createSizer(v);t.ArrayExt.insert(this._items,f,g),t.ArrayExt.insert(this._sizers,f,y),t.ArrayExt.insert(this._handles,f,_),this.parent.isAttached&&n.MessageLoop.sendMessage(m,c.Widget.Msg.BeforeAttach),this.parent.node.appendChild(m.node),this.parent.node.appendChild(_),this.parent.isAttached&&n.MessageLoop.sendMessage(m,c.Widget.Msg.AfterAttach),this.parent.fit()},d.prototype.moveWidget=function(f,m,g){t.ArrayExt.move(this._items,f,m),t.ArrayExt.move(this._sizers,f,m),t.ArrayExt.move(this._handles,f,m),this.parent.fit()},d.prototype.detachWidget=function(f,m){var g=t.ArrayExt.removeAt(this._items,f),_=t.ArrayExt.removeAt(this._handles,f);t.ArrayExt.removeAt(this._sizers,f),this.parent.isAttached&&n.MessageLoop.sendMessage(m,c.Widget.Msg.BeforeDetach),this.parent.node.removeChild(m.node),this.parent.node.removeChild(_),this.parent.isAttached&&n.MessageLoop.sendMessage(m,c.Widget.Msg.AfterDetach),g.dispose(),this.parent.fit()},d.prototype.onBeforeShow=function(f){p.prototype.onBeforeShow.call(this,f),this.parent.update()},d.prototype.onBeforeAttach=function(f){p.prototype.onBeforeAttach.call(this,f),this.parent.fit()},d.prototype.onChildShown=function(f){this.parent.fit()},d.prototype.onChildHidden=function(f){this.parent.fit()},d.prototype.onResize=function(f){this.parent.isVisible&&this._update(f.width,f.height)},d.prototype.onUpdateRequest=function(f){this.parent.isVisible&&this._update(-1,-1)},d.prototype.onFitRequest=function(f){this.parent.isAttached&&this._fit()},d.prototype._fit=function(){for(var f=0,m=-1,g=0,_=this._items.length;g<_;++g)this._items[g].isHidden?this._handles[g].classList.add("p-mod-hidden"):(this._handles[g].classList.remove("p-mod-hidden"),m=g,f++);m!==-1&&this._handles[m].classList.add("p-mod-hidden"),this._fixed=this._spacing*Math.max(0,f-1);for(var v=this._orientation==="horizontal",y=v?this._fixed:0,x=v?0:this._fixed,g=0,_=this._items.length;g<_;++g){var A=this._items[g],w=this._sizers[g];if(w.size>0&&(w.sizeHint=w.size),A.isHidden){w.minSize=0,w.maxSize=0;continue}A.fit(),w.stretch=d.getStretch(A.widget),v?(w.minSize=A.minWidth,w.maxSize=A.maxWidth,y+=A.minWidth,x=Math.max(x,A.minHeight)):(w.minSize=A.minHeight,w.maxSize=A.maxHeight,x+=A.minHeight,y=Math.max(y,A.minWidth))}var D=this._box=r.ElementExt.boxSizing(this.parent.node);y+=D.horizontalSum,x+=D.verticalSum;var b=this.parent.node.style;b.minWidth=y+"px",b.minHeight=x+"px",this._dirty=!0,this.parent.parent&&n.MessageLoop.sendMessage(this.parent.parent,c.Widget.Msg.FitRequest),this._dirty&&n.MessageLoop.sendMessage(this.parent,c.Widget.Msg.UpdateRequest)},d.prototype._update=function(f,m){this._dirty=!1;for(var g=0,_=0,v=this._items.length;_<v;++_)g+=+!this._items[_].isHidden;if(g!==0){f<0&&(f=this.parent.node.offsetWidth),m<0&&(m=this.parent.node.offsetHeight),this._box||(this._box=r.ElementExt.boxSizing(this.parent.node));var y=this._box.paddingTop,x=this._box.paddingLeft,A=f-this._box.horizontalSum,w=m-this._box.verticalSum,D,b=this._orientation==="horizontal";if(b?D=Math.max(0,A-this._fixed):D=Math.max(0,w-this._fixed),this._hasNormedSizes){for(var S=0,T=this._sizers;S<T.length;S++){var C=T[S];C.sizeHint*=D}this._hasNormedSizes=!1}var I=o.BoxEngine.calc(this._sizers,D),M=0,k=0;if(I>0)switch(this._alignment){case"start":break;case"center":M=0,k=I/2;break;case"end":M=0,k=I;break;case"justify":M=I/g,k=0;break;default:throw"unreachable"}for(var _=0,v=this._items.length;_<v;++_){var H=this._items[_];if(!H.isHidden){var Y=this._sizers[_].size,O=this._handles[_].style;b?(H.update(x+k,y,Y+M,w),x+=Y+M,O.top=y+"px",O.left=x+k+"px",O.width=this._spacing+"px",O.height=w+"px",x+=this._spacing):(H.update(x,y+k,A,Y+M),y+=Y+M,O.top=y+k+"px",O.left=x+"px",O.width=A+"px",O.height=this._spacing+"px",y+=this._spacing)}}}},d}(l.PanelLayout);i.SplitLayout=h,function(p){function d(m){return u.stretchProperty.get(m)}p.getStretch=d;function f(m,g){u.stretchProperty.set(m,g)}p.setStretch=f}(h=i.SplitLayout||(i.SplitLayout={})),i.SplitLayout=h;var u;(function(p){p.stretchProperty=new s.AttachedProperty({name:"stretch",create:function(){return 0},coerce:function(y,x){return Math.max(0,Math.floor(x))},changed:v});function d(y){var x=new o.BoxSizer;return x.sizeHint=Math.floor(y),x}p.createSizer=d;function f(y){var x=y.createHandle();return x.style.position="absolute",x}p.createHandle=f;function m(y){return Math.max(0,Math.floor(y))}p.clampSpacing=m;function g(y){return y.reduce(function(x,A){return x+A.size},0)/y.length||0}p.averageSize=g;function _(y){var x=y.length;if(x===0)return[];var A=y.reduce(function(w,D){return w+Math.abs(D)},0);return A===0?y.map(function(w){return 1/x}):y.map(function(w){return w/A})}p.normalize=_;function v(y){y.parent&&y.parent.layout instanceof h&&y.parent.fit()}})(u||(u={}))})(Ty);var dE={};(function(i){var e=P&&P.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var u in h)h.hasOwnProperty(u)&&(c[u]=h[u])};return function(c,h){l(c,h);function u(){this.constructor=c}c.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(i,"__esModule",{value:!0});var t=mt,r=Cc,n=Ml,s=Ty,o=function(l){e(c,l);function c(h){h===void 0&&(h={});var u=l.call(this,{layout:a.createLayout(h)})||this;return u._pressData=null,u.addClass("p-SplitPanel"),u}return c.prototype.dispose=function(){this._releaseMouse(),l.prototype.dispose.call(this)},Object.defineProperty(c.prototype,"orientation",{get:function(){return this.layout.orientation},set:function(h){this.layout.orientation=h},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"alignment",{get:function(){return this.layout.alignment},set:function(h){this.layout.alignment=h},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"spacing",{get:function(){return this.layout.spacing},set:function(h){this.layout.spacing=h},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"renderer",{get:function(){return this.layout.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"handles",{get:function(){return this.layout.handles},enumerable:!0,configurable:!0}),c.prototype.relativeSizes=function(){return this.layout.relativeSizes()},c.prototype.setRelativeSizes=function(h){this.layout.setRelativeSizes(h)},c.prototype.handleEvent=function(h){switch(h.type){case"mousedown":this._evtMouseDown(h);break;case"mousemove":this._evtMouseMove(h);break;case"mouseup":this._evtMouseUp(h);break;case"keydown":this._evtKeyDown(h);break;case"contextmenu":h.preventDefault(),h.stopPropagation();break}},c.prototype.onBeforeAttach=function(h){this.node.addEventListener("mousedown",this)},c.prototype.onAfterDetach=function(h){this.node.removeEventListener("mousedown",this),this._releaseMouse()},c.prototype.onChildAdded=function(h){h.child.addClass("p-SplitPanel-child"),this._releaseMouse()},c.prototype.onChildRemoved=function(h){h.child.removeClass("p-SplitPanel-child"),this._releaseMouse()},c.prototype._evtKeyDown=function(h){h.preventDefault(),h.stopPropagation(),h.keyCode===27&&this._releaseMouse()},c.prototype._evtMouseDown=function(h){if(h.button===0){var u=this.layout,p=t.ArrayExt.findFirstIndex(u.handles,function(v){return v.contains(h.target)});if(p!==-1){h.preventDefault(),h.stopPropagation(),document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0);var d,f=u.handles[p],m=f.getBoundingClientRect();u.orientation==="horizontal"?d=h.clientX-m.left:d=h.clientY-m.top;var g=window.getComputedStyle(f),_=r.Drag.overrideCursor(g.cursor);this._pressData={index:p,delta:d,override:_}}}},c.prototype._evtMouseMove=function(h){h.preventDefault(),h.stopPropagation();var u,p=this.layout,d=this.node.getBoundingClientRect();p.orientation==="horizontal"?u=h.clientX-d.left-this._pressData.delta:u=h.clientY-d.top-this._pressData.delta,p.moveHandle(this._pressData.index,u)},c.prototype._evtMouseUp=function(h){h.button===0&&(h.preventDefault(),h.stopPropagation(),this._releaseMouse())},c.prototype._releaseMouse=function(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0))},c}(n.Panel);i.SplitPanel=o,function(l){var c=function(){function p(){}return p.prototype.createHandle=function(){var d=document.createElement("div");return d.className="p-SplitPanel-handle",d},p}();l.Renderer=c,l.defaultRenderer=new c;function h(p){return s.SplitLayout.getStretch(p)}l.getStretch=h;function u(p,d){s.SplitLayout.setStretch(p,d)}l.setStretch=u}(o=i.SplitPanel||(i.SplitPanel={})),i.SplitPanel=o;var a;(function(l){function c(h){return h.layout||new s.SplitLayout({renderer:h.renderer||o.defaultRenderer,orientation:h.orientation,alignment:h.alignment,spacing:h.spacing})}l.createLayout=c})(a||(a={}))})(dE);var gp={},L9=P&&P.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(gp,"__esModule",{value:!0});var Id=mt,Xx=ai,Aa=wi,k9=Nn,B9=aa,Da=Gt,F9=function(i){L9(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t._dirty=!1,t._items=[],t._box=null,t}return e.prototype.dispose=function(){Id.each(this._items,function(t){t.dispose()}),this._box=null,this._items.length=0,i.prototype.dispose.call(this)},e.prototype.attachWidget=function(t,r){Id.ArrayExt.insert(this._items,t,new k9.LayoutItem(r)),this.parent.isAttached&&Aa.MessageLoop.sendMessage(r,Da.Widget.Msg.BeforeAttach),this.parent.node.appendChild(r.node),this.parent.isAttached&&Aa.MessageLoop.sendMessage(r,Da.Widget.Msg.AfterAttach),this.parent.fit()},e.prototype.moveWidget=function(t,r,n){Id.ArrayExt.move(this._items,t,r),this.parent.update()},e.prototype.detachWidget=function(t,r){var n=Id.ArrayExt.removeAt(this._items,t);this.parent.isAttached&&Aa.MessageLoop.sendMessage(r,Da.Widget.Msg.BeforeDetach),this.parent.node.removeChild(r.node),this.parent.isAttached&&Aa.MessageLoop.sendMessage(r,Da.Widget.Msg.AfterDetach),n.widget.node.style.zIndex="",n.dispose(),this.parent.fit()},e.prototype.onBeforeShow=function(t){i.prototype.onBeforeShow.call(this,t),this.parent.update()},e.prototype.onBeforeAttach=function(t){i.prototype.onBeforeAttach.call(this,t),this.parent.fit()},e.prototype.onChildShown=function(t){this.parent.fit()},e.prototype.onChildHidden=function(t){this.parent.fit()},e.prototype.onResize=function(t){this.parent.isVisible&&this._update(t.width,t.height)},e.prototype.onUpdateRequest=function(t){this.parent.isVisible&&this._update(-1,-1)},e.prototype.onFitRequest=function(t){this.parent.isAttached&&this._fit()},e.prototype._fit=function(){for(var t=0,r=0,n=0,s=this._items.length;n<s;++n){var o=this._items[n];o.isHidden||(o.fit(),t=Math.max(t,o.minWidth),r=Math.max(r,o.minHeight))}var a=this._box=Xx.ElementExt.boxSizing(this.parent.node);t+=a.horizontalSum,r+=a.verticalSum;var l=this.parent.node.style;l.minWidth=t+"px",l.minHeight=r+"px",this._dirty=!0,this.parent.parent&&Aa.MessageLoop.sendMessage(this.parent.parent,Da.Widget.Msg.FitRequest),this._dirty&&Aa.MessageLoop.sendMessage(this.parent,Da.Widget.Msg.UpdateRequest)},e.prototype._update=function(t,r){this._dirty=!1;for(var n=0,s=0,o=this._items.length;s<o;++s)n+=+!this._items[s].isHidden;if(n!==0){t<0&&(t=this.parent.node.offsetWidth),r<0&&(r=this.parent.node.offsetHeight),this._box||(this._box=Xx.ElementExt.boxSizing(this.parent.node));for(var a=this._box.paddingTop,l=this._box.paddingLeft,c=t-this._box.horizontalSum,h=r-this._box.verticalSum,s=0,o=this._items.length;s<o;++s){var u=this._items[s];u.isHidden||(u.widget.node.style.zIndex=""+s,u.update(l,a,c,h))}}},e}(B9.PanelLayout);gp.StackedLayout=F9;var _p={},U9=P&&P.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(_p,"__esModule",{value:!0});var K9=tt,H9=Ml,z9=gp,j9=function(i){U9(e,i);function e(t){t===void 0&&(t={});var r=i.call(this,{layout:F_.createLayout(t)})||this;return r._widgetRemoved=new K9.Signal(r),r.addClass("p-StackedPanel"),r}return Object.defineProperty(e.prototype,"widgetRemoved",{get:function(){return this._widgetRemoved},enumerable:!0,configurable:!0}),e.prototype.onChildAdded=function(t){t.child.addClass("p-StackedPanel-child")},e.prototype.onChildRemoved=function(t){t.child.removeClass("p-StackedPanel-child"),this._widgetRemoved.emit(t.child)},e}(H9.Panel);_p.StackedPanel=j9;var F_;(function(i){function e(t){return t.layout||new z9.StackedLayout}i.createLayout=e})(F_||(F_={}));var Cy={},$9=P&&P.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(Cy,"__esModule",{value:!0});var Zx=ai,V9=wi,W9=tt,_g=tp,G9=_p,Y9=mp,q9=Gt,X9=function(i){$9(e,i);function e(t){t===void 0&&(t={});var r=i.call(this)||this;r._currentChanged=new W9.Signal(r),r.addClass("p-TabPanel"),r.tabBar=new Y9.TabBar(t),r.tabBar.addClass("p-TabPanel-tabBar"),r.stackedPanel=new G9.StackedPanel,r.stackedPanel.addClass("p-TabPanel-stackedPanel"),r.tabBar.tabMoved.connect(r._onTabMoved,r),r.tabBar.currentChanged.connect(r._onCurrentChanged,r),r.tabBar.tabCloseRequested.connect(r._onTabCloseRequested,r),r.tabBar.tabActivateRequested.connect(r._onTabActivateRequested,r),r.stackedPanel.widgetRemoved.connect(r._onWidgetRemoved,r),r._tabPlacement=t.tabPlacement||"top";var n=Ua.directionFromPlacement(r._tabPlacement),s=Ua.orientationFromPlacement(r._tabPlacement);r.tabBar.orientation=s,r.tabBar.dataset.placement=r._tabPlacement;var o=new _g.BoxLayout({direction:n,spacing:0});return _g.BoxLayout.setStretch(r.tabBar,0),_g.BoxLayout.setStretch(r.stackedPanel,1),o.addWidget(r.tabBar),o.addWidget(r.stackedPanel),r.layout=o,r}return Object.defineProperty(e.prototype,"currentChanged",{get:function(){return this._currentChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentIndex",{get:function(){return this.tabBar.currentIndex},set:function(t){this.tabBar.currentIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentWidget",{get:function(){var t=this.tabBar.currentTitle;return t?t.owner:null},set:function(t){this.tabBar.currentTitle=t?t.title:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabsMovable",{get:function(){return this.tabBar.tabsMovable},set:function(t){this.tabBar.tabsMovable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabPlacement",{get:function(){return this._tabPlacement},set:function(t){if(this._tabPlacement!==t){this._tabPlacement=t;var r=Ua.directionFromPlacement(t),n=Ua.orientationFromPlacement(t);this.tabBar.orientation=n,this.tabBar.dataset.placement=t,this.layout.direction=r}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"widgets",{get:function(){return this.stackedPanel.widgets},enumerable:!0,configurable:!0}),e.prototype.addWidget=function(t){this.insertWidget(this.widgets.length,t)},e.prototype.insertWidget=function(t,r){r!==this.currentWidget&&r.hide(),this.stackedPanel.insertWidget(t,r),this.tabBar.insertTab(t,r.title)},e.prototype._onCurrentChanged=function(t,r){var n=r.previousIndex,s=r.previousTitle,o=r.currentIndex,a=r.currentTitle,l=s?s.owner:null,c=a?a.owner:null;l&&l.hide(),c&&c.show(),this._currentChanged.emit({previousIndex:n,previousWidget:l,currentIndex:o,currentWidget:c}),(Zx.Platform.IS_EDGE||Zx.Platform.IS_IE)&&V9.MessageLoop.flush()},e.prototype._onTabActivateRequested=function(t,r){r.title.owner.activate()},e.prototype._onTabCloseRequested=function(t,r){r.title.owner.close()},e.prototype._onTabMoved=function(t,r){this.stackedPanel.insertWidget(r.toIndex,r.title.owner)},e.prototype._onWidgetRemoved=function(t,r){this.tabBar.removeTab(r.title)},e}(q9.Widget);Cy.TabPanel=X9;var Ua;(function(i){function e(s){return r[s]}i.orientationFromPlacement=e;function t(s){return n[s]}i.directionFromPlacement=t;var r={top:"horizontal",left:"vertical",right:"vertical",bottom:"horizontal"},n={top:"top-to-bottom",left:"left-to-right",right:"right-to-left",bottom:"bottom-to-top"}})(Ua||(Ua={}));(function(i){function e(t){for(var r in t)i.hasOwnProperty(r)||(i[r]=t[r])}Object.defineProperty(i,"__esModule",{value:!0}),e(Il),e(tp),e(sE),e(oE),e(by),e(pp),e(uE),e(Ey),e(hE),e(Nn),e(Sy),e(cE),e(Ml),e(aa),e(Ay),e(Dy),e(Ty),e(dE),e(gp),e(_p),e(mp),e(Cy),e(Ac),e(Gt)})(ar);const Ie=Et("chartService");var fE=(i=>(i[i.Butt=0]="Butt",i[i.Round=1]="Round",i[i.Square=2]="Square",i))(fE||{}),pE=(i=>(i[i.Miter=0]="Miter",i[i.round=1]="round",i[i.Bevel=2]="Bevel",i))(pE||{}),mE=(i=>(i[i.nonzero=0]="nonzero",i[i.evenodd=1]="evenodd",i))(mE||{});class Z9{constructor(e=null,t=null){this._type=e,this._data=t}getType(){return this._type}get type(){return this._type}getData(){return this._data}get data(){return this._data}}class Q9{constructor(e=null){if(this._listeners={},this._bulkListeners=[],e){this._allowedEventTypes={};for(let t=0;t<e.length;t++)this._allowedEventTypes[e[t]]=!0}else this._allowedEventTypes=null}dispose(){this._listeners={},this._bulkListeners.length=0,this._allowedEventTypes=null}on(e,t){if(e==="*")return this._addBulkListener(t);if(this._allowedEventTypes&&!this._allowedEventTypes.hasOwnProperty(e))throw new Error("This object will never emit this event type!");this._listeners.hasOwnProperty(e)?this._listeners[e].push(t):this._listeners[e]=[t];let r=this;return{dispose:()=>{r&&(r.off(e,t),r=null,t=null)}}}once(e,t){const r=this.on(e,n=>(r.dispose(),t(n)));return r}_addBulkListener(e){return this._bulkListeners.push(e),{dispose:()=>{this._removeBulkListener(e)}}}off(e,t){t?this._removeListener(e,t):this._removeListeners(e)}_removeListener(e,t){if(this._listeners.hasOwnProperty(e)){let r=this._listeners[e];for(let n=0,s=r.length;n<s;n++)if(r[n]===t){r.splice(n,1);break}}}_removeListeners(e){this._listeners.hasOwnProperty(e)&&(this._listeners[e].length=0)}_removeBulkListener(e){for(let t=0,r=this._bulkListeners.length;t<r;t++)if(this._bulkListeners[t]===e){this._bulkListeners.splice(t,1);break}}_emitToSpecificTypeListeners(e,t){let r=!1;if(this._listeners.hasOwnProperty(e)){const n=this._listeners[e].slice(0);for(let s=0,o=n.length;s<o;s++)r=n[s](t)||r}return r}_emitToBulkListeners(e){let t=!1;const r=this._bulkListeners.slice(0);for(let n=0,s=r.length;n<s;n++)t=r[n](e)||t;return t}_emitEvents(e){let t=!1;return t=this._emitToSpecificTypeListeners(e.type,e.data)||t,this._bulkListeners.length>0&&(t=this._emitToBulkListeners(e)||t),t}emit(e,t={}){if(this._allowedEventTypes&&!this._allowedEventTypes.hasOwnProperty(e))throw new Error("Cannot emit this event type because it wasn't listed!");return!this._listeners.hasOwnProperty(e)&&this._bulkListeners.length===0?!1:this._emitEvents(new Z9(e,t))}}let vp=class extends Q9{constructor(e=null,t=!1){super(),this.parent=e,this.children=[],this.parent&&t&&this.parent.appendChildren(this)}get root(){if(!this.parent)return null;let e=this.parent;for(;e.parent;)e=e.parent;return e}isParentOf(e){return e.parent===this}isChildOf(e){return this.parent===e}isDescendantOf(e){if(!this.parent)return!1;let t=this.parent;for(;t.parent;){if(t===e)return!0;t=t.parent}return!1}isAncestorOf(e){if(!e.parent)return!1;let t=e.parent;for(;t.parent;){if(t===this)return!0;t=t.parent}return!1}prependChildren(e){if(!Array.isArray(e))this._prependChild(e);else for(let t=0,r=e.length;t<r;t++)this._prependChild(e[t])}_prependChild(e){this.children.push(e),e.parent=this}appendChildren(e){if(!Array.isArray(e))this._appendChild(e);else for(let t=e.length;t>0;t--)this._appendChild(e[t-1])}_appendChild(e){this.children.push(e),e.parent=this}insertChildren(e,t){if(!Array.isArray(t))this._insertChild(e,t);else for(let r=t.length;r>0;r--)this._insertChild(e,t[r-1])}_insertChild(e,t){this.children.splice(e,0,t),t.parent=this}removeChildren(e,t){if(!this.children.length)return;let r,n;arguments.length?arguments.length===1?(r=ll(e)?e:this.children.indexOf(e),n=r+1):(r=e,n=t):(r=0,n=this.children.length);for(let s=r;s<n;s++){let o=this.children[s];o.parent=null,o.dispose(),o=null}this.children.splice(r,n-r)}reverseChildren(){this.children.length&&(this.children=this.children.reverse())}insertAbove(e){if(!this.parent)throw new Error;let t=this.parent.children.indexOf(e);this.parent.insertChildren(t,e)}insertBelow(e){if(!this.parent)throw new Error;let t=this.parent.children.indexOf(e);this.parent.insertChildren(t+1,e)}replaceWith(e){if(!this.parent)throw new Error;let t=this.parent.children.indexOf(e);this.remove(),this.parent.insertChildren(t,e)}sendToBack(){if(!this.parent)throw new Error}bringToFront(){if(!this.parent)throw new Error;let e=this.parent.children.indexOf(this);this.parent.children.splice(e,1),this.parent.appendChildren(this)}addTo(e){this.parent=e,e.children.push(this)}remove(){if(this.parent){let e=this.parent.children.indexOf(this);this.parent.removeChildren(e,e+1)}else return}select(e){if(e(this))return this;if(!this.children.length)return null;let t=0,r;for(;r=this.children[t];){let n=r.select(e);if(n)return n;t++}return null}selectAll(e){let t=[];e(this)&&t.push(this);let r=0,n;for(;n=this.children[r];){let s=n.selectAll(e);s.length&&(t=t.concat(s)),r++}return t}matches(e){return e(this)}hitTest(e){throw new Error}hitTestAll(e){throw new Error}dispose(){super.dispose();for(let e=0,t=this.children.length;e<t;e++)this.children[e].dispose();this.children.length=0,this.remove()}};function os(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}let ft=class{constructor(e,t,r,n=1){this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,r))|0,this.a=os(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},Ms=class yh{constructor(e,t,r,n){this.h=Math.max(Math.min(360,e),0)|0,this.s=os(Math.max(Math.min(1,t),0),3),this.l=os(Math.max(Math.min(1,r),0),3),this.a=os(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,r=e.g/255,n=e.b/255,s=e.a,o=Math.max(t,r,n),a=Math.min(t,r,n);let l=0,c=0;const h=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(h<=.5?u/(2*h):u/(2-2*h),1),o){case t:l=(r-n)/u+(r<n?6:0);break;case r:l=(n-t)/u+2;break;case n:l=(t-r)/u+4;break}l*=60,l=Math.round(l)}return new yh(l,c,h,s)}static _hue2rgb(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}static toRGBA(e){const t=e.h/360,{s:r,l:n,a:s}=e;let o,a,l;if(r===0)o=a=l=n;else{const c=n<.5?n*(1+r):n+r-n*r,h=2*n-c;o=yh._hue2rgb(h,c,t+1/3),a=yh._hue2rgb(h,c,t),l=yh._hue2rgb(h,c,t-1/3)}return new ft(Math.round(o*255),Math.round(a*255),Math.round(l*255),s)}},Od=class gE{constructor(e,t,r,n){this.h=Math.max(Math.min(360,e),0)|0,this.s=os(Math.max(Math.min(1,t),0),3),this.v=os(Math.max(Math.min(1,r),0),3),this.a=os(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,r=e.g/255,n=e.b/255,s=Math.max(t,r,n),o=Math.min(t,r,n),a=s-o,l=s===0?0:a/s;let c;return a===0?c=0:s===t?c=((r-n)/a%6+6)%6:s===r?c=(n-t)/a+2:c=(t-r)/a+4,new gE(c*60,l,s,e.a)}static toRGBA(e){const{h:t,s:r,v:n,a:s}=e,o=n*r,a=o*(1-Math.abs(t/60%2-1)),l=n-o;let[c,h,u]=[0,0,0];return t<60?(c=o,h=a):t<120?(c=a,h=o):t<180?(h=o,u=a):t<240?(h=a,u=o):t<300?(c=a,u=o):t<360&&(c=o,u=a),c=Math.round((c+l)*255),h=Math.round((h+l)*255),u=Math.round((u+l)*255),new ft(c,h,u,s)}};var U_=(i=>(i[i.aliceblue=15792383]="aliceblue",i[i.antiquewhite=16444375]="antiquewhite",i[i.aqua=65535]="aqua",i[i.aquamarine=8388564]="aquamarine",i[i.azure=15794175]="azure",i[i.beige=16119260]="beige",i[i.bisque=16770244]="bisque",i[i.black=0]="black",i[i.blanchedalmond=16772045]="blanchedalmond",i[i.blue=255]="blue",i[i.blueviolet=9055202]="blueviolet",i[i.brown=10824234]="brown",i[i.burlywood=14596231]="burlywood",i[i.cadetblue=6266528]="cadetblue",i[i.chartreuse=8388352]="chartreuse",i[i.chocolate=13789470]="chocolate",i[i.coral=16744272]="coral",i[i.cornflowerblue=6591981]="cornflowerblue",i[i.cornsilk=16775388]="cornsilk",i[i.crimson=14423100]="crimson",i[i.cyan=65535]="cyan",i[i.darkblue=139]="darkblue",i[i.darkcyan=35723]="darkcyan",i[i.darkgoldenrod=12092939]="darkgoldenrod",i[i.darkgray=11119017]="darkgray",i[i.darkgreen=25600]="darkgreen",i[i.darkgrey=11119017]="darkgrey",i[i.darkkhaki=12433259]="darkkhaki",i[i.darkmagenta=9109643]="darkmagenta",i[i.darkolivegreen=5597999]="darkolivegreen",i[i.darkorange=16747520]="darkorange",i[i.darkorchid=10040012]="darkorchid",i[i.darkred=9109504]="darkred",i[i.darksalmon=15308410]="darksalmon",i[i.darkseagreen=9419919]="darkseagreen",i[i.darkslateblue=4734347]="darkslateblue",i[i.darkslategray=3100495]="darkslategray",i[i.darkslategrey=3100495]="darkslategrey",i[i.darkturquoise=52945]="darkturquoise",i[i.darkviolet=9699539]="darkviolet",i[i.deeppink=16716947]="deeppink",i[i.deepskyblue=49151]="deepskyblue",i[i.dimgray=6908265]="dimgray",i[i.dimgrey=6908265]="dimgrey",i[i.dodgerblue=2003199]="dodgerblue",i[i.firebrick=11674146]="firebrick",i[i.floralwhite=16775920]="floralwhite",i[i.forestgreen=2263842]="forestgreen",i[i.fuchsia=16711935]="fuchsia",i[i.gainsboro=14474460]="gainsboro",i[i.ghostwhite=16316671]="ghostwhite",i[i.gold=16766720]="gold",i[i.goldenrod=14329120]="goldenrod",i[i.gray=8421504]="gray",i[i.green=32768]="green",i[i.greenyellow=11403055]="greenyellow",i[i.grey=8421504]="grey",i[i.honeydew=15794160]="honeydew",i[i.hotpink=16738740]="hotpink",i[i.indianred=13458524]="indianred",i[i.indigo=4915330]="indigo",i[i.ivory=16777200]="ivory",i[i.khaki=15787660]="khaki",i[i.lavender=15132410]="lavender",i[i.lavenderblush=16773365]="lavenderblush",i[i.lawngreen=8190976]="lawngreen",i[i.lemonchiffon=16775885]="lemonchiffon",i[i.lightblue=11393254]="lightblue",i[i.lightcoral=15761536]="lightcoral",i[i.lightcyan=14745599]="lightcyan",i[i.lightgoldenrodyellow=16448210]="lightgoldenrodyellow",i[i.lightgray=13882323]="lightgray",i[i.lightgreen=9498256]="lightgreen",i[i.lightgrey=13882323]="lightgrey",i[i.lightpink=16758465]="lightpink",i[i.lightsalmon=16752762]="lightsalmon",i[i.lightseagreen=2142890]="lightseagreen",i[i.lightskyblue=8900346]="lightskyblue",i[i.lightslategray=7833753]="lightslategray",i[i.lightslategrey=7833753]="lightslategrey",i[i.lightsteelblue=11584734]="lightsteelblue",i[i.lightyellow=16777184]="lightyellow",i[i.lime=65280]="lime",i[i.limegreen=3329330]="limegreen",i[i.linen=16445670]="linen",i[i.magenta=16711935]="magenta",i[i.maroon=8388608]="maroon",i[i.mediumaquamarine=6737322]="mediumaquamarine",i[i.mediumblue=205]="mediumblue",i[i.mediumorchid=12211667]="mediumorchid",i[i.mediumpurple=9662683]="mediumpurple",i[i.mediumseagreen=3978097]="mediumseagreen",i[i.mediumslateblue=8087790]="mediumslateblue",i[i.mediumspringgreen=64154]="mediumspringgreen",i[i.mediumturquoise=4772300]="mediumturquoise",i[i.mediumvioletred=13047173]="mediumvioletred",i[i.midnightblue=1644912]="midnightblue",i[i.mintcream=16121850]="mintcream",i[i.mistyrose=16770273]="mistyrose",i[i.moccasin=16770229]="moccasin",i[i.navajowhite=16768685]="navajowhite",i[i.navy=128]="navy",i[i.oldlace=16643558]="oldlace",i[i.olive=8421376]="olive",i[i.olivedrab=7048739]="olivedrab",i[i.orange=16753920]="orange",i[i.orangered=16729344]="orangered",i[i.orchid=14315734]="orchid",i[i.palegoldenrod=15657130]="palegoldenrod",i[i.palegreen=10025880]="palegreen",i[i.paleturquoise=11529966]="paleturquoise",i[i.palevioletred=14381203]="palevioletred",i[i.papayawhip=16773077]="papayawhip",i[i.peachpuff=16767673]="peachpuff",i[i.peru=13468991]="peru",i[i.pink=16761035]="pink",i[i.plum=14524637]="plum",i[i.powderblue=11591910]="powderblue",i[i.purple=8388736]="purple",i[i.rebeccapurple=6697881]="rebeccapurple",i[i.red=16711680]="red",i[i.rosybrown=12357519]="rosybrown",i[i.royalblue=4286945]="royalblue",i[i.saddlebrown=9127187]="saddlebrown",i[i.salmon=16416882]="salmon",i[i.sandybrown=16032864]="sandybrown",i[i.seagreen=3050327]="seagreen",i[i.seashell=16774638]="seashell",i[i.sienna=10506797]="sienna",i[i.silver=12632256]="silver",i[i.skyblue=8900331]="skyblue",i[i.slateblue=6970061]="slateblue",i[i.slategray=7372944]="slategray",i[i.slategrey=7372944]="slategrey",i[i.snow=16775930]="snow",i[i.springgreen=65407]="springgreen",i[i.steelblue=4620980]="steelblue",i[i.tan=13808780]="tan",i[i.teal=32896]="teal",i[i.thistle=14204888]="thistle",i[i.tomato=16737095]="tomato",i[i.turquoise=4251856]="turquoise",i[i.violet=15631086]="violet",i[i.wheat=16113331]="wheat",i[i.white=16777215]="white",i[i.whitesmoke=16119285]="whitesmoke",i[i.yellow=16776960]="yellow",i[i.yellowgreen=10145074]="yellowgreen",i))(U_||{});const el="\\s*([+-]?\\d+)\\s*",Jh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",J9=/^#([0-9a-f]{3})$/,e5=/^#([0-9a-f]{6})$/,t5=new RegExp("^rgb\\("+[el,el,el]+"\\)$"),i5=new RegExp("^rgb\\("+[Jr,Jr,Jr]+"\\)$"),r5=new RegExp("^rgba\\("+[el,el,el,Jh]+"\\)$"),n5=new RegExp("^rgba\\("+[Jr,Jr,Jr,Jh]+"\\)$"),s5=new RegExp("^hsl\\("+[Jh,Jr,Jr]+"\\)$"),o5=new RegExp("^hsla\\("+[Jh,Jr,Jr,Jh]+"\\)$");var Ye;let fl=(Ye=class{static fromHex(e){return Ye.Format.CSS.parseHex(e)||Ye.red}get hsla(){return this._hsla?this._hsla:Ms.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Od.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof ft)this.rgba=e;else if(e instanceof Ms)this._hsla=e,this.rgba=Ms.toRGBA(e);else if(e instanceof Od)this._hsva=e,this.rgba=Od.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&ft.equals(this.rgba,e.rgba)&&Ms.equals(this.hsla,e.hsla)&&Od.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Ye._relativeLuminanceForComponent(this.rgba.r),t=Ye._relativeLuminanceForComponent(this.rgba.g),r=Ye._relativeLuminanceForComponent(this.rgba.b),n=.2126*e+.7152*t+.0722*r;return os(n,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){const t=this.getRelativeLuminance(),r=e.getRelativeLuminance();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),r=e.getRelativeLuminance();return t>r}isDarkerThan(e){const t=this.getRelativeLuminance(),r=e.getRelativeLuminance();return t<r}lighten(e){return new Ye(new Ms(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Ye(new Ms(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:r,b:n,a:s}=this.rgba;return new Ye(new ft(t,r,n,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Ye(new ft(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){const t=e.rgba,r=this.rgba.a,n=t.a;let s=r+n*(1-r);if(s<1e-6)return Ye.transparent;const o=this.rgba.r*r/s+t.r*n*(1-r)/s,a=this.rgba.g*r/s+t.g*n*(1-r)/s,l=this.rgba.b*r/s+t.b*n*(1-r)/s;return new Ye(new ft(o,a,l,s))}toString(){return Ye.Format.CSS.format(this)}static getLighterColor(e,t,r){if(e.isLighterThan(t))return e;r=r||.5;const n=e.getRelativeLuminance(),s=t.getRelativeLuminance();return r=r*(s-n)/s,e.lighten(r)}static getDarkerColor(e,t,r){if(e.isDarkerThan(t))return e;r=r||.5;const n=e.getRelativeLuminance(),s=t.getRelativeLuminance();return r=r*(n-s)/n,e.darken(r)}},Ye.white=new Ye(new ft(255,255,255,1)),Ye.black=new Ye(new ft(0,0,0,1)),Ye.red=new Ye(new ft(255,0,0,1)),Ye.blue=new Ye(new ft(0,0,255,1)),Ye.green=new Ye(new ft(0,255,0,1)),Ye.cyan=new Ye(new ft(0,255,255,1)),Ye.lightgrey=new Ye(new ft(211,211,211,1)),Ye.transparent=new Ye(new ft(0,0,0,0)),Ye);function Qx(i){return new ft(i>>16&255,i>>8&255,i&255,1)}function Jx(i,e,t,r){return r<=0&&(i=e=t=NaN),new ft(i,e,t,r)}function ew(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new Ms(i,e,t,r)}(i=>{(e=>{(t=>{function r(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:i.Format.CSS.formatRGBA(f)}t.formatRGB=r;function n(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=n;function s(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(f)}t.formatHSL=s;function o(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(f){const m=f.toString(16);return m.length!==2?"0"+m:m}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,m=!1){return m&&f.rgba.a===1?i.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function h(f){return f?f.isOpaque()?i.Format.CSS.formatHex(f):i.Format.CSS.formatRGBA(f):null}t.format=h;function u(f){if(!f)return null;const m=f.length;if(m===0||f.charCodeAt(0)!==V.Hash)return null;if(m===7){const g=16*d(f.charCodeAt(1))+d(f.charCodeAt(2)),_=16*d(f.charCodeAt(3))+d(f.charCodeAt(4)),v=16*d(f.charCodeAt(5))+d(f.charCodeAt(6));return new i(new ft(g,_,v,1))}if(m===9){const g=16*d(f.charCodeAt(1))+d(f.charCodeAt(2)),_=16*d(f.charCodeAt(3))+d(f.charCodeAt(4)),v=16*d(f.charCodeAt(5))+d(f.charCodeAt(6)),y=16*d(f.charCodeAt(7))+d(f.charCodeAt(8));return new i(new ft(g,_,v,y/255))}if(m===4){const g=d(f.charCodeAt(1)),_=d(f.charCodeAt(2)),v=d(f.charCodeAt(3));return new i(new ft(16*g+g,16*_+_,16*v+v))}if(m===5){const g=d(f.charCodeAt(1)),_=d(f.charCodeAt(2)),v=d(f.charCodeAt(3)),y=d(f.charCodeAt(4));return new i(new ft(16*g+g,16*_+_,16*v+v,(16*y+y)/255))}return null}t.parseHex=u;function p(f){let m,g=(f+"").trim().toLowerCase();return(m=J9.exec(g))?(m=parseInt(m[1],16),new ft(m>>8&15|m>>4&240,m>>4&15|m&240,(m&15)<<4|m&15,1)):(m=e5.exec(g))?Qx(parseInt(m[1],16)):(m=t5.exec(g))?new ft(m[1],m[2],m[3],1):(m=i5.exec(g))?new ft(m[1]*255/100,m[2]*255/100,m[3]*255/100,1):(m=r5.exec(g))?Jx(m[1],m[2],m[3],m[4]):(m=n5.exec(g))?Jx(m[1]*255/100,m[2]*255/100,m[3]*255/100,m[4]):(m=s5.exec(g))?ew(m[1],m[2]/100,m[3]/100,1):(m=o5.exec(g))?ew(m[1],m[2]/100,m[3]/100,m[4]):U_.hasOwnProperty(g)?Qx(U_[g]):g==="transparent"&&new ft(NaN,NaN,NaN,0),m?new i(m):null}t.parse=p;function d(f){switch(f){case V.Digit0:return 0;case V.Digit1:return 1;case V.Digit2:return 2;case V.Digit3:return 3;case V.Digit4:return 4;case V.Digit5:return 5;case V.Digit6:return 6;case V.Digit7:return 7;case V.Digit8:return 8;case V.Digit9:return 9;case V.a:return 10;case V.A:return 10;case V.b:return 11;case V.B:return 11;case V.c:return 12;case V.C:return 12;case V.d:return 13;case V.D:return 13;case V.e:return 14;case V.E:return 14;case V.f:return 15;case V.F:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(fl||(fl={}));class a5{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}const He=class He extends a5{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return He._oneOf(He._chars)}constructor(){super([He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),"-",He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),"-","4",He._randomHex(),He._randomHex(),He._randomHex(),"-",He._oneOf(He._timeHighBits),He._randomHex(),He._randomHex(),He._randomHex(),"-",He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex(),He._randomHex()].join(""))}};He._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],He._timeHighBits=["8","9","a","b"];let K_=He;function l5(){return new K_}function xt(){return l5().asHex()}const ec=1e-12,tw=1e-8;function Af(i){return i>=-ec&&i<=ec}const Py=Math.PI*2;class oe{constructor(e={x:0,y:0}){this._x=e.x||0,this._y=e.y||0}get x(){return this._x}get y(){return this._y}set x(e){this._x=e}set y(e){this._y=e}get length(){return oe.euclideanMetric(this)}get angle(){return this.radian*180/Math.PI}set angle(e){this.radian=e*Math.PI/180}get radian(){return oe.radian(this)}set radian(e){if(!this.isZero()){let t=this.length;this._x=Math.cos(e)*t,this._y=Math.sin(e)*t}}get quadrant(){return oe.quadrant(this)}equals(e){return oe.equals(this,e)}clone(){return new oe({x:this._x,y:this._y})}directedAngleTo(e){return oe.directedAngleBetween(this,e)}directedRadianTo(e){return oe.directedRadianBetween(this,e)}distanceTo(e,t=!1){return oe.distanceBetween(this,e,t)}normalize(e=1){return oe.normalize(this,e)}rotate(e,t){return oe.rotate(this,e,t)}transform(e){return oe.transform(this,e)}add(e){return new oe(oe.add(this,e))}subtract(e){return new oe(oe.subtract(this,e))}multiply(e){return new oe(oe.multiply(this,e))}divide(e){return new oe(oe.divide(this,e))}modulo(e){return new oe(oe.modulo(this,e))}negate(){return new oe(oe.negate(this))}isClose(e,t){return oe.isClose(this,e,t)}isCollinear(e){return oe.isCollinear(this,e)}isOrthogonal(e){return oe.isOrthogonal(this,e)}isZero(){return oe.isZero(this)}isNaN(){return oe.isNaN(this)}isInQuadrant(e){return oe.isInQuadrant(this,e)}dot(e){return oe.dot(this,e)}cross(e){return oe.cross(this,e)}project(e){return new oe(oe.project(this,e))}round(){return new oe(oe.round(this))}ceil(){return new oe(oe.ceil(this))}floor(){return new oe(oe.floor(this))}abs(){return new oe(oe.abs(this))}static min(...e){return{x:Math.min.apply(Math,e.map(t=>t.x)),y:Math.min.apply(Math,e.map(t=>t.y))}}static max(...e){return{x:Math.max.apply(Math,e.map(t=>t.x)),y:Math.max.apply(Math,e.map(t=>t.y))}}static midPoint(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}static random(){return{x:Math.random(),y:Math.random()}}static euclideanMetric(e){return Math.sqrt(oe.taxicabMetric(e))}static taxicabMetric(e){return e.x*e.x+e.y*e.y}static radian(e){return Math.atan2(e.y,e.x)}static angle(e){return oe.radian(e)*180/Math.PI}static quadrant(e){return e.x>=0?e.y>=0?1:4:e.y>=0?2:3}static equals(e,t){return e===t||e.x===t.x&&e.y===t.y}static directedAngleBetween(e,t){return oe.directedRadianBetween(e,t)*180/Math.PI}static directedRadianBetween(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}static distanceBetween(e,t,r=!1){let n=e.x-t.x,s=e.y-t.y,o=n*n+s*s;return r?o:Math.sqrt(o)}static normalize(e,t=1){let r=oe.euclideanMetric(e),n=r!==0?t/r:0;return{x:e.x*n,y:e.y*n}}static rotate(e,t,r){if(t===0)return{...e};let n=r?oe.subtract(e,r):e,s=Math.sin(t),o=Math.cos(t);return n={x:n.x*o-n.y*s,y:n.x*s+n.y*o},r?oe.add(n,r):n}static transform(e,t){return{x:e.x*t.a+e.y*t.c+t.tx,y:e.x*t.b+e.y*t.d+t.ty}}static add(e,t){return{x:e.x+t.x,y:e.y+t.y}}static subtract(e,t){return{x:e.x-t.x,y:e.y-t.y}}static multiply(e,t){return typeof t=="number"?{x:e.x*t,y:e.y*t}:{x:e.x*t.x,y:e.y*t.y}}static divide(e,t){return{x:e.x/t.x,y:e.y/t.y}}static modulo(e,t){return{x:e.x%t.x,y:e.y%t.y}}static negate(e){return{x:-e.x,y:-e.y}}static isClose(e,t,r){return oe.distanceBetween(e,t)<=r}static isCollinear(e,t){const{x:r,y:n}=e,{x:s,y:o}=t;return Math.abs(r*o-n*s)<=Math.sqrt((r*r+n*n)*(s*s+o*o))*tw}static isOrthogonal(e,t){const{x:r,y:n}=e,{x:s,y:o}=t;return Math.abs(r*s+n*o)<=Math.sqrt((r*r+n*n)*(s*s+o*o))*tw}static isZero(e){return Af(e.x)&&Af(e.y)}static isNaN(e){return isNaN(e.x)||isNaN(e.y)}static isInQuadrant(e,t){return e.x*(t>1&&t<4?-1:1)>=0&&e.y*(t>2?-1:1)>=0}static dot(e,t){return e.x*t.x+e.y*t.y}static cross(e,t){return e.x*t.y-e.y*t.x}static project(e,t){let r=oe.isZero(t)?0:oe.dot(e,t)/oe.dot(t,t);return{x:t.x*r,y:t.y*r}}static round(e){return{x:Math.round(e.x),y:Math.round(e.y)}}static ceil(e){return{x:Math.ceil(e.x),y:Math.ceil(e.y)}}static floor(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}static abs(e){return{x:Math.abs(e.x),y:Math.abs(e.y)}}}const Ai=class Ai{constructor(e=Ai.initial){const{a:t,b:r,c:n,d:s,tx:o,ty:a}=e;this._a=t,this._b=r,this._c=n,this._d=s,this._tx=o,this._ty=a}get a(){return this._a}get b(){return this._b}get c(){return this._c}get d(){return this._d}get tx(){return this._tx}get ty(){return this._ty}get translation(){return{x:this._tx,y:this._ty}}get scaling(){return this.decompose().scaling}get skewing(){return this.decompose().skewing}get rotation(){return this.decompose().rotation}get values(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]}set a(e){this._a=e}set b(e){this._b=e}set c(e){this._c=e}set d(e){this._d=e}set tx(e){this._tx=e}set ty(e){this._ty=e}clone(){return new Ai(this)}equals(e){return Ai.equals(this,e)}reset(){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,this}translate(e){const{x:t,y:r}=e;return this._tx+=t*this._a+r*this._c,this._ty+=t*this._b+r*this._d,this}scale(e,t){return t&&this.translate(t),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,t&&this.translate(t.negate()),this}rotate(e,t={x:1,y:1}){e*=Math.PI/180;const{x:r,y:n}=t,s=Math.cos(e),o=Math.sin(e),a=r-r*s+n*o,l=n-r*o-n*s,c=this._a,h=this._b,u=this._c,p=this._d;return this._a=s*c+o*u,this._b=s*h+o*p,this._c=-o*c+s*u,this._d=-o*h+s*p,this._tx+=a*c+l*u,this._ty+=a*h+l*p,this}shear(e,t){t&&this.translate(t);let r=this._a,n=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*r,this._d+=e.x*n,t&&this.translate(t.negate()),this}skew(e,t){const r=Math.PI/180,n={x:Math.tan(e.x*r),y:Math.tan(e.y*r)};return this.shear(n,t)}append(e){let t=this._a,r=this._b,n=this._c,s=this._d,o=e._a,a=e._c,l=e._b,c=e._d,h=e._tx,u=e._ty;return this._a=o*t+l*n,this._c=a*t+c*n,this._b=o*r+l*s,this._d=a*r+c*s,this._tx+=h*t+u*n,this._ty+=h*r+u*s,this}prepend(e){let t=this._a,r=this._b,n=this._c,s=this._d,o=this._tx,a=this._ty,l=e._a,c=e._c,h=e._b,u=e._d,p=e._tx,d=e._ty;return this._a=l*t+c*r,this._c=l*n+c*s,this._b=h*t+u*r,this._d=h*n+u*s,this._tx=l*o+c*a+p,this._ty=h*o+u*a+d,this}invert(){let e=this._a,t=this._b,r=this._c,n=this._d,s=this._tx,o=this._ty,a=e*n-t*r,l=null;return a&&!isNaN(a)&&isFinite(s)&&isFinite(o)&&(this._a=n/a,this._b=-t/a,this._c=-r/a,this._d=e/a,this._tx=(r*o-n*s)/a,this._ty=(t*s-e*o)/a,l=this),l}appended(e){return this.clone().append(e)}prepended(e){return this.clone().prepend(e)}inverted(){return this.clone().invert()}isIdentity(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0}isInvertible(){let e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)}isSingular(){return!this.isInvertible()}decompose(){var e=this._a,t=this._b,r=this._c,n=this._d,s=e*n-t*r,o=Math.sqrt,a=Math.atan2,l=180/Math.PI,c,h,u;if(e!==0||t!==0){var p=o(e*e+t*t);c=Math.acos(e/p)*(t>0?1:-1),h={x:p,y:s/p},u={x:a(e*r+t*n,p*p),y:0}}else if(r!==0||n!==0){var d=o(r*r+n*n);c=Math.asin(r/d)*(n>0?1:-1),h={x:s/d,y:d},u={x:0,y:a(e*r+t*n,d*d)}}else c=0,u=h={x:0,y:0};return{translation:this.translation,rotation:c*l,scaling:h,skewing:{x:u.x*l,y:u.y*l}}}static translation(e){return{x:e.tx,y:e.ty}}static equals(e,t){return e===t||e.a===t.a&&e.b===t.b&&e.c===t.c&&e.d===t.d&&e.tx===t.tx&&e.ty===t.ty}static translate(e,t){const{x:r,y:n}=t;let s=e.tx+r*e.a+n*e.c,o=e.ty+r*e.b+n*e.d;return{a:e.a,b:e.b,c:e.c,d:e.d,tx:s,ty:o}}static scale(e,t,r){let n=r?Ai.translate(e,r):{a:e.a,b:e.b,c:e.c,d:e.d,tx:e.tx,ty:e.ty};return n.a*=t.x,n.b*=t.x,n.c*=t.y,n.d*=t.y,r&&(n=Ai.translate(n,oe.negate(r))),n}static rotate(e,t,r={x:1,y:1}){t*=Math.PI/180;const{x:n,y:s}=r,o=Math.cos(t),a=Math.sin(t),l=n-n*o+s*a,c=s-n*a-s*o,{a:h,b:u,c:p,d}=e;return{a:o*h+a*p,b:o*u+a*d,c:-a*h+o*p,d:-a*u+o*d,tx:e.tx+l*h+c*p,ty:e.ty+l*u+c*d}}static shear(e,t,r){r&&(e=Ai.translate(e,r));let{a:n,b:s,c:o,d:a}=e;n+=t.y*o,s+=t.y*a,o+=t.x*n,a+=t.x*s;let l={a:n,b:s,c:o,d:a,tx:e.tx,ty:e.ty};return r&&(l=Ai.translate(e,oe.negate(r))),l}static skew(e,t,r){const n=Math.PI/180,s={x:Math.tan(t.x*n),y:Math.tan(t.y*n)};return Ai.shear(e,s,r)}static append(e,t){const{a:r,b:n,c:s,d:o}=e,{a,b:l,c,d:h,tx:u,ty:p}=t;return{a:a*r+c*s,c:l*r+h*s,b:a*n+c*o,d:l*n+h*o,tx:u*r+p*s,ty:u*n+p*o}}static prepend(e,t){const{a:r,b:n,c:s,d:o,tx:a,ty:l}=e,{a:c,b:h,c:u,d:p,tx:d,ty:f}=t;return{a:c*r+h*n,c:c*s+h*o,b:u*r+p*n,d:u*s+p*o,tx:c*a+h*l+d,ty:u*a+p*l+f}}static invert(e){const{a:t,b:r,c:n,d:s,tx:o,ty:a}=e;let l=t*s-r*n,c=null;return l&&!isNaN(l)&&isFinite(o)&&isFinite(a)?{a:s/l,b:-r/l,c:-n/l,d:t/l,tx:(n*a-s*o)/l,ty:(r*o-t*a)/l}:c}static isIdentity(e){return e.a===1&&e.b===0&&e.c===0&&e.d===1&&e.tx===0&&e.ty===0}static isInvertible(e){let t=e.a*e.d-e.c*e.b;return t&&!isNaN(t)&&isFinite(e.tx)&&isFinite(e.ty)}static isSingular(e){return!Ai.isInvertible(e)}static decompose(e){const{a:t,b:r,c:n,d:s}=e;let o=t*s-r*n,a=Math.sqrt,l=Math.atan2,c=180/Math.PI,h,u,p;if(t!==0||r!==0){var d=a(t*t+r*r);h=Math.acos(t/d)*(r>0?1:-1),u={x:d,y:o/d},p={x:l(t*n+r*s,d*d),y:0}}else if(n!==0||s!==0){var f=a(n*n+s*s);h=Math.asin(n/f)*(s>0?1:-1),u={x:o/f,y:f},p={x:0,y:l(t*n+r*s,f*f)}}else h=0,p=u={x:0,y:0};return{translation:Ai.translation(e),rotation:h*c,scaling:u,skewing:{x:p.x*c,y:p.y*c}}}static inverseTransform(e,t){if(!Ai.isInvertible(e))return null;const{a:r,b:n,c:s,d:o,tx:a,ty:l}=e;let c=r*o-n*s,h=t.x-a,u=t.y-l;return{x:(h*o-u*s)/c,y:(u*r-h*n)/c}}static toArray(e){return[e.a,e.b,e.c,e.d,e.tx,e.ty]}};Ai.initial={a:1,b:0,c:0,d:1,tx:0,ty:0};let fi=Ai;class Ae{constructor(e){this._x=e.x,this._y=e.y,this._width=e.width,this._height=e.height}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}get point(){return{x:this._x,y:this._y}}get size(){return{width:this._width,height:this._height}}get top(){return Ae.top(this)}get right(){return Ae.right(this)}get bottom(){return Ae.bottom(this)}get left(){return Ae.left(this)}get center(){return Ae.center(this)}get topLeft(){return Ae.topLeft(this)}get topRight(){return Ae.topRight(this)}get bottomLeft(){return Ae.bottomLeft(this)}get bottomRight(){return Ae.bottomRight(this)}get leftCenter(){return Ae.leftCenter(this)}get rightCenter(){return Ae.rightCenter(this)}get topCenter(){return Ae.topCenter(this)}get bottomCenter(){return Ae.bottomCenter(this)}get area(){return Ae.area(this)}clone(){return new Ae(this)}equals(e){return Ae.equals(this,e)}contains(e){return Ae.contains(this,e)}intersects(e,t){return Ae.intersects(this,e,t)}intersect(e){return new Ae(Ae.intersect(this,e))}unite(e){return new Ae(Ae.unite(this,e))}include(e){return new Ae(Ae.include(this,e))}expand(e){return new Ae(Ae.expand(this,e))}scale(e){return new Ae(Ae.scale(this,e))}static top(e){return e.y}static right(e){return e.x+e.width}static bottom(e){return e.y+e.height}static left(e){return e.x}static center(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}static topLeft(e){return{y:e.y,x:e.x}}static topRight(e){return{x:e.x+e.width,y:e.y}}static bottomLeft(e){return{x:e.x,y:e.y+e.height}}static bottomRight(e){return{x:e.x+e.width,y:e.y+e.height}}static leftCenter(e){return{x:e.x,y:e.y+e.height/2}}static rightCenter(e){return{x:e.x+e.width,y:e.y+e.height/2}}static topCenter(e){return{x:e.x+e.width/2,y:e.y}}static bottomCenter(e){return{x:e.x+e.width/2,y:e.y+e.height}}static area(e){return e.width*e.height}static equals(e,t){return e===t||e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}static contains(e,t){const{x:r,y:n,width:s=0,height:o=0}=t;return r>=e.x&&n>=e.y&&r+s<=e.x+e.width&&n+o<=e.y+e.height}static intersects(e,t,r=0){return t.x+t.width>e.x-r&&t.y+t.height>e.y-r&&t.x<e.x+e.width+r&&t.y<e.y+e.height+r}static intersect(e,t){let r=Math.max(e.x,t.x),n=Math.max(e.y,t.y),s=Math.min(e.x+e.width,t.x+t.width),o=Math.min(e.y+e.height,t.y+t.height);return{x:r,y:n,width:s-r,height:o-n}}static unite(...e){let t=[];return e.forEach(r=>{t.push(Ae.topLeft(r)),t.push(Ae.bottomRight(r))}),Ae.boundingOf(...t)}static include(e,t){let r=Math.min(e.x,t.x),n=Math.min(e.y,t.y),s=Math.max(e.x+e.width,t.x),o=Math.max(e.y+e.height,t.y);return{x:r,y:n,width:s-r,height:o-n}}static expand(e,t){const{width:r,height:n}=t;return{x:e.x-r/2,y:e.y-n/2,width:e.width+r,height:e.height+n}}static scale(e,t){const{width:r,height:n}=t;return Ae.expand(e,{width:e.width*r-e.width,height:e.height*n-e.height})}static boundingOf(...e){let t=oe.min(...e),r=oe.max(...e);return{x:t.x,y:t.y,width:r.x-t.x,height:r.y-t.y}}}class tc extends vp{constructor(e=null){super(e),this.canvasElement=document.createElement("canvas"),this.canvasElement.style.position="absolute",this.canvasContext=this.canvasElement.getContext("2d");const t=window.devicePixelRatio||1,r=this.canvasContext.webkitBackingStorePixelRatio||this.canvasContext.mozBackingStorePixelRatio||this.canvasContext.msBackingStorePixelRatio||this.canvasContext.oBackingStorePixelRatio||this.canvasContext.backingStorePixelRatio||1;this.ratio=t/r,e&&(this.parent.appendChildren(this),this.bounds=e.bounds),this.visible=!0,this.reactive=!0}get bounds(){return this._bounds}set bounds(e){this._bounds=e,this.canvasElement.style.top=e.x.toString(),this.canvasElement.style.left=e.y.toString(),this.canvasElement.style.width=`${e.width}px`,this.canvasElement.style.height=`${e.height}px`,this.canvasElement.width=e.width*this.ratio,this.canvasElement.height=e.height*this.ratio,this.canvasContext.scale(this.ratio,this.ratio)}hitTest(e){if(!this.visible||!this.reactive||!this.contains(e))return null;let t=this.children.length;if(!t)return null;for(let r=t-1;r>-1;r--){let n=this.children[r].hitTest(e);if(n)return n}return null}hitTestAll(e){if(!this.visible)return[];if(!this.reactive)return[];if(!this.contains(e))return[];let t=[],r=0,n;for(;n=this.children[r];){let s=n.hitTestAll(e);s.length&&(t=t.concat(s)),r++}return t}contains(e){return Ae.contains(this._bounds,e.bounds||e)}isInside(e){return Ae.contains(e,this._bounds)}intersects(e){return Ae.intersects(this._bounds,e.bounds)}render(){const{width:e,height:t}=this._bounds;this.canvasContext.clearRect(0,0,e,t);for(let r=0,n=this.children.length;r<n;r++)this.children[r].render(this.canvasContext)}refresh(){this.render()}dispose(){ye(this.toDispose),this.toDispose.length=0}}var u5=Object.defineProperty,h5=Object.getOwnPropertyDescriptor,c5=(i,e,t,r)=>{for(var n=r>1?void 0:r?h5(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&u5(e,t,n),n};function d5(i){let e=["insertAbove","insertBelow","replaceWith","sendToBack","bringToFront","addTo","remove"];for(let t=0;t<e.length;t++){let r=e[t],n=i.prototype[r],s=!1;Object.defineProperty(i.prototype,r,{configurable:!0,get(){if(s||this===i.prototype||this.hasOwnProperty(r)||typeof n!="function")return n;let o=n.bind(this),a=(...l)=>{o(...l);let c=this.parent;for(;c;){if(c instanceof tc){c.refresh();break}c=c.parent}};return s=!0,Object.defineProperty(this,r,{configurable:!0,get(){return a}}),s=!1,a}})}return i}let ic=class extends vp{constructor(i){super(i),this.isVisible=!0,this.reactive=!0,this.opacity=1,this.isLocked=!1,this.strokeColor=fl.black,this.strokeWidth=.5,this.strokeCap=fE.Butt,this.strokeJoin=pE.Miter,this.dashOffset=0,this.strokeScaling=!1,this.dashArray=[],this.miterLimit=0,this.fillRule=mE.evenodd,this.isHovered=!1,this.isSelected=!1,this.hitRange=6,this.id=xt(),this.matrix=new fi}translate(i){this.matrix=fi.translate(this.matrix,i)}rotate(i,e){this.matrix=fi.rotate(this.matrix,i,e)}scale(i,e){this.matrix=fi.scale(this.matrix,i,e)}shear(i,e){this.matrix=fi.shear(this.matrix,i,e)}skew(i,e){this.matrix=fi.skew(this.matrix,i,e)}render(i){}};ic=c5([d5],ic);let Nl=class extends ic{constructor(e=null){super(e)}hitTest(e){return!this.reactive||!this.isVisible||this.opacity===0&&!this.reactive||!this.contains(e)?null:this}hitTestAll(e){let t=this.hitTest(e);return t?[t]:[]}contains(e){return Ae.contains(this.bounds,e)}};class xh{static quadrant(e){let t=e%360;return t<180?t>90?2:1:t>270?4:3}static toRadian(e){return e*Math.PI/180}static fromRadian(e){return e*180/Math.PI}}function Vn(i,e,t){return i.indexOf(e)<i.indexOf(t)}class f5 extends Nl{constructor(e){super(null),this.type="Arc",this.cx=e.cx,this.cy=e.cy,this.radius=e.radius,this.anticlockwise=e.anticlockwise,this.startAngle=(e.startAngle%360+360)%360,this.endAngle=(e.endAngle%360+360)%360}get bounds(){let e=this.calculateBoundingBox();if(fi.isIdentity(this.matrix))return e;{let t=oe.transform(Ae.topLeft(e),this.matrix),r=oe.transform(Ae.bottomRight(e),this.matrix);return Ae.boundingOf(t,r)}}get center(){return{x:this.cx,y:this.cy}}get startRadian(){return xh.toRadian(this.startAngle)}get endRadian(){return xh.toRadian(this.endAngle)}static calculateCenter(e,t,r,n=!0){let s=oe.distanceBetween(e,t);if(s===0)return e;let o={y:(t.x-e.x)/s,x:(e.y-t.y)/s},a=Math.sqrt(r*r-s*s/4),l=n?1:-1;return oe.add(oe.midPoint(e,t),oe.multiply(o,l*a))}contains(e){let t=this.hitRange+this.strokeWidth,r=oe.euclideanMetric(oe.subtract(this.center,e));if(r-t>this.radius||r+t<this.radius)return!1;if(Math.abs(this.startAngle-this.endAngle)<ec)return!0;let n=oe.angle(oe.subtract(e,{x:this.cx,y:this.cy}));return this.anticlockwise?this.startAngle<this.endAngle?n<=this.startAngle&&n>=-180||n<=180&&n>=this.endAngle:this.startAngle>=n&&n>=this.endAngle:this.startAngle>this.endAngle?n>=this.startAngle&&n<=180||n<=this.endAngle&&n>=-180:this.endAngle>=n&&n>=this.startAngle}calculateBoundingBox(){let e=this.endAngle-this.startAngle,t=Math.abs(e),r=this.hitRange+this.strokeWidth;if(t%360<ec){let l=this.radius*2+r;return{x:this.cx-this.radius-r,y:this.cy-this.radius-r,width:l,height:l}}let n=xh.quadrant(this.startAngle),s=xh.quadrant(this.endAngle),o=[{x:Math.cos(this.startRadian)*this.radius,y:Math.sin(this.startRadian)},{x:Math.cos(this.endRadian)*this.radius,y:Math.sin(this.endRadian)*this.radius}];n!==s&&(this.anticlockwise?(Vn([1,2,3,4],n,s)&&o.push({x:this.radius,y:0}),Vn([4,1,2,3],n,s)&&o.push({x:0,y:-this.radius}),Vn([3,4,1,2],n,s)&&o.push({x:-this.radius,y:0}),Vn([2,3,4,1],n,s)&&o.push({x:0,y:this.radius})):(Vn([4,3,2,1],n,s)&&o.push({x:this.radius,y:0}),Vn([3,2,1,4],n,s)&&o.push({x:0,y:-this.radius}),Vn([2,1,4,3],n,s)&&o.push({x:-this.radius,y:0}),Vn([1,4,3,2],n,s)&&o.push({x:0,y:this.radius})));let a=Ae.boundingOf(...o);return{x:a.x-r+this.center.x,y:a.y-r+this.center.y,width:a.width+r,height:a.height+r}}render(e){super.render(e),e.save();let t=this.matrix;e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.beginPath(),e.arc(this.center.x,this.center.y,this.radius,this.startRadian,this.endRadian,this.anticlockwise),e.strokeStyle=this.strokeColor.toString(),e.stroke(),e.restore()}renderAsPath(e){e.arc(this.center.x,this.center.y,this.radius,this.startRadian,this.endRadian,this.anticlockwise)}}class p5 extends Nl{constructor(e){super(null),this.type="Circle",this.cx=e.cx,this.cy=e.cy,this.radius=e.radius}get bounds(){let e={x:this.cx-this.radius,y:this.cy-this.radius,width:this.radius*2,height:this.radius*2};if(fi.isIdentity(this.matrix))return e;let t=oe.transform(Ae.topLeft(e),this.matrix),r=oe.transform(Ae.bottomRight(e),this.matrix);return Ae.boundingOf(t,r)}get center(){return{x:this.cx,y:this.cy}}contains(e){if(!this.isVisible||!this.opacity)return!1;let t=oe.transform(e,this.matrix),r=oe.euclideanMetric(oe.subtract(this.center,t)),s=(this.strokeWidth+this.hitRange)/2;return this.fillColor&&this.fillColor.rgba.a>0?r<=s+this.radius:r<s+this.radius&&r>this.radius-s}render(e){if(!this.isVisible||!this.opacity)return;e.save();let t=this.matrix;e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.lineWidth=this.strokeWidth,e.strokeStyle=this.strokeColor.toString(),e.beginPath(),e.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,Py),e.closePath(),this.fillColor&&(e.fillStyle=this.fillColor.toString(),e.fill()),e.stroke(),e.restore()}}let m5=class extends Nl{constructor(e){super(null),this.type="Ellipse",this.cx=e.cx,this.cy=e.cy,this.r1=e.r1,this.r2=e.r2}get bounds(){const e=this.calculateBounds();if(fi.isIdentity(this.matrix))return e;let t=oe.transform(Ae.topLeft(e),this.matrix),r=oe.transform(Ae.bottomRight(e),this.matrix);return Ae.boundingOf(t,r)}calculateBounds(){let e=(this.strokeWidth+this.hitRange)/2,t=0,r=(this.r1+e)*Math.cos(t),n=(this.r1+e)*Math.sin(t),s=(this.r2+e)*Math.cos(t+Math.PI/2),o=(this.r2+e)*Math.sin(t+Math.PI/2),a=Math.sqrt(r*r+s*s),l=Math.sqrt(n*n+o*o);return Ae.boundingOf({x:this.cx-a,y:this.cy-l},{x:this.cx+a,y:this.cy+l})}contains(e){let t=oe.transform(e,this.matrix);const r=this.r1,n=this.r2;let s=(this.strokeWidth+this.hitRange)/2;const o=r,a=r/n;let l=t.x-this.cx,c=t.y-this.cy;c*=a;let h=l*l+c*c;return h<(o+s)*(o+s)&&h>(o-s)*(o-s)}render(e){super.render(e),e.save();let t=this.matrix;e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.beginPath(),e.ellipse(this.cx,this.cy,this.r1,this.r2,0,0,Py,!0),e.closePath(),e.stroke(),e.restore()}},Fe=class Ma{constructor(e,t){this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y}get px(){return this._px}get py(){return this._py}get vx(){return this._vx}get vy(){return this._vy}get point(){return{x:this._px,y:this._py}}get vector(){return{x:this._vx,y:this._vy}}get length(){return oe.euclideanMetric(this.vector)}intersect(e,t=!1){return Ma.intersect(this,e,t)}getSide(e,t=!1){return Ma.getSide(this,e,t)}distanceTo(e){return Ma.distanceBetween(this,e)}signedDistanceTo(e){return Ma.signedDistanceBetween(this,e)}isCollinear(e){return oe.isCollinear({x:this._vx,y:this._vy},{x:e._vx,y:e._vy})}isOrthogonal(e){return oe.isOrthogonal({x:this._vx,y:this._vy},{x:e._vx,y:e._vy})}toTwoPoint(){return[this.point,{x:this._vx-this._px,y:this._vy-this._py}]}static fromTwoPoint(e,t){return{px:e.x,py:e.y,vx:t.x-e.x,vy:t.y-e.y}}static intersect(e,t,r){const{px:n,py:s,vx:o,vy:a}=e,{px:l,py:c,vx:h,vy:u}=t;var p=o*u-a*h;if(!Af(p)){var d=n-l,f=s-c,m=(h*f-u*d)/p,g=(o*f-a*d)/p,_=ec,v=-_,y=1+_;if(r||v<m&&m<y&&v<g&&g<y)return r||(m=m<=0?0:m>=1?1:m),{x:n+m*o,y:s+m*a}}return null}static getSide(e,t,r=!1){const{px:n,py:s,vx:o,vy:a}=e,{x:l,y:c}=t;var h=l-n,u=c-s,p=h*a-u*o;return!r&&Af(p)&&(p=(h*o+h*o)/(o*o+a*a),p>=0&&p<=1&&(p=0)),p<0?-1:p>0?1:0}static signedDistanceBetween(e,t){const{px:r,py:n,vx:s,vy:o}=e,{x:a,y:l}=t;return s===0?o>0?a-r:r-a:o===0?s<0?l-n:n-l:((a-r)*o-(l-n)*s)/Math.sqrt(s*s+o*o)}static distanceBetween(e,t){return Math.abs(Ma.signedDistanceBetween(e,t))}static contains(e,t,r,n,s,o,a){if(s===0)return!1;var l=s,c=0,h=e;if(a>t+l&&a>n+l||a<t-l&&a<n-l||o>e+l&&o>r+l||o<e-l&&o<r-l)return!1;if(e!==r)c=(t-n)/(e-r),h=(e*n-r*t)/(e-r);else return Math.abs(o-e)<=l/2;var u=c*o-a+h,p=u*u/(c*c+1);return p<=l/2*l/2}static remotePointOfRay(e,t,r,n,s,o){let a=r-e,l=n-t;if(a===0)return l===0?{x:r,y:n}:{x:e,y:l>0?o:0};if(l===0)return{x:a>0?s:0,y:t};if(a>0)if(l>0){let c=(o-n)*a/l+r;return c<=s?{x:c,y:o}:{x:s,y:(s-r)*l/a+n}}else{let c=-n*a/l+r;return c<=s?{x:c,y:0}:{x:s,y:(s-r)*l/a+n}}else if(l>0){let c=(o-n)*a/l+r;return c>=0?{x:c,y:o}:{x:0,y:-r*l/a+n}}else{let c=-n*a/l+r;return c>=0?{x:c,y:0}:{x:0,y:-r*l/a+n}}}static verticalOffsetOfParallelLine(e,t,r,n,s,o){return e-r===0?o-(n-t)/2:r===s&&n===o?0:n===t?o-n:o-(s-e)*(n-t)/(r-e)-t}};class wt extends Nl{constructor(e){super(null),this.type="Line",this.x1=e.x1,this.y1=e.y1,this.x2=e.x2,this.y2=e.y2}get bounds(){if(fi.isIdentity(this.matrix))return Ae.boundingOf({x:this.x1,y:this.y1},{x:this.x2,y:this.y2});{let e=oe.transform({x:this.x1,y:this.y1},this.matrix),t=oe.transform({x:this.x2,y:this.y2},this.matrix);return Ae.boundingOf(e,t)}}contains(e){return Fe.contains(this.x1,this.y1,this.x2,this.y2,this.strokeWidth+this.hitRange,e.x,e.y)}render(e){if(super.render(e),!this.isVisible||this.opacity===0)return;e.save(),e.lineWidth=this.strokeWidth;let t=this.matrix;e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.beginPath(),this.renderAsPath(e),e.closePath(),e.stroke(),e.restore()}renderAsPath(e){e.moveTo(this.x1,this.y1),e.lineTo(this.x2,this.y2)}}class H_ extends p5{constructor(e){super({cx:e.cx,cy:e.cy,radius:6}),this._isHovered=!1,this._isSelected=!1,this.toDispose=[],this.listeners=[],this.index=e.index,this.isFinal=!!e.isFinal,this.fillColor=fl.white,this.strokeColor=fl.lightgrey,this.strokeWidth=1,this.registerListeners()}registerListeners(){this.listeners.push(this.on(ue.MOUSE_OUT,this._handleMouseLeave.bind(this))),this.listeners.push(this.on(ue.MOUSE_OVER,this._handleMouseEnter.bind(this)))}_handleMouseLeave(e){this.isHovered=!1}_handleMouseEnter(e){this.isHovered=!0}set({x:e,y:t}){this.cx=e,this.cy=t}get(){return{x:this.cx,y:this.cy}}dispose(){ye(this.toDispose),this.toDispose.length=0}get isHovered(){return this._isHovered}set isHovered(e){this._isHovered=e,this.strokeWidth=e&&this._isSelected?3:e||this._isSelected?2:1,this.isVisible=e||this._isSelected}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.strokeWidth=this._isHovered&&this._isSelected?3:this._isHovered||this._isSelected?2:1,this.isVisible=this._isHovered||this._isSelected}contains(e){if(!this.isVisible)return!1;let t=oe.euclideanMetric(oe.subtract(this.center,e)),n=(this.strokeWidth+this.hitRange)/2;return this.fillColor&&this.fillColor.rgba.a>0?t<=n+this.radius:t<n+this.radius&&t>this.radius-n}}(i=>{function e(t,r){return t.index===r.index?0:t.isFinal?1:r.isFinal||t.index<r.index?-1:t.index>r.index?1:0}i.compareByIndex=e})(H_||(H_={}));class Vt extends Nl{constructor(e,t,r){super(),this.chartService=t,this.chart=r,this.controlPoints=[],this._isHovered=!1,this._isSelected=!1,this._isDrawing=!1,this.draggingPointIndex=-1,this.toDispose=[],this.dragDisposes=[],this.type="drawing",this.points=[];let n=e.length;for(let s=0;s<n;s++){let o=e[s],a=new H_({cx:o[0],cy:o[1],index:s,isFinal:s!==n-1});a.parent=this,this.controlPoints.push(a);let l=r.viewModel.priceScale.toValue(o[1]),c=this.chart.viewModel.timeScale.toValue(o[0]);this.points.push([c,l])}this.registerListeners()}registerListeners(){this.toDispose.push(this.on(ue.MOUSE_OVER,this._handleMouseEnter.bind(this))),this.toDispose.push(this.on(ue.MOUSE_OUT,this._handleMouseLeave.bind(this))),this.toDispose.push(me(window,ue.BLUR,()=>{this.isHovered=!1}));let e=this._reScalePoints.bind(this);this.toDispose.push(this.chart.onPan(e)),this.toDispose.push(this.chart.onZoom(e)),this.toDispose.push(this.chart.onResize2(e)),this.toDispose.push(this.on(ue.MOUSE_DOWN,this._handleStartDragControlPoint.bind(this)))}setPoint(e,t,r){let n;typeof e!="number"?n=this.controlPoints.indexOf(e):n=e,this.points[n]=[this.chart.viewModel.timeScale.toValue(t),this.chart.viewModel.priceScale.toValue(r)],this.controlPoints[n].set({x:t,y:r}),this.compute(n,t,r)}compute(e,t,r){}contains(e){return!!this.hitTest(e)}_reScalePoints(){for(let e=0,t=this.points.length;e<t;e++){let[r,n]=this.points[e],s=this.chart.viewModel.timeScale.toPosition(r),o=this.chart.viewModel.priceScale.toPosition(n);this.controlPoints[e].set({x:s,y:o}),this.compute(e,s,o)}}_handleMouseEnter(e){(e.target===this||this.isAncestorOf(e.target))&&(this.isHovered=!0),e.stop(),this.root.update()}_handleMouseLeave(e){(e.target===this||e.target.parent===this)&&(this.isHovered=!1),e.stop(),this.root.update()}_handleStartDragControlPoint(e){if(!this.isAncestorOf(e.target)||this._isDrawing)return!1;const t=e.x,r=e.y,{target:n}=e;let s=this.controlPoints.indexOf(n);return s===-1?!1:(e.target.opacity=0,this.draggingPoint=this.controlPoints[s],this.draggingPointIndex=s,this.chart.inDrawingMode.set(!0),this.setPoint(s,t,r),this.dragDisposes.push(me(window,ue.MOUSE_MOVE,this._handleDragControlPoint.bind(this))),this.dragDisposes.push(me(window,ue.BLUR,()=>this._terminalDragging())),this.dragDisposes.push(me(window,ue.MOUSE_UP,()=>this._terminalDragging())),!0)}_handleDragControlPoint(e){if(e.preventDefault(),e.stopPropagation(),e.buttons===1){const{x:r,y:n}=this.chart.cursor.toDrawingAreaPosition(e);this.setPoint(this.draggingPointIndex,r,n)}else this._terminalDragging();this.root.update()}_terminalDragging(){this.draggingPoint&&(this.draggingPoint.opacity=1,this.draggingPoint=null,this.draggingPointIndex=-1,ye(this.dragDisposes),this.dragDisposes=[],this.chart.inDrawingMode.set(!1))}get isHovered(){return this._isHovered}set isHovered(e){if(this._isHovered=e,this.controlPoints)for(let t=0,r=this.controlPoints.length;t<r;t++){let n=this.controlPoints[t];e&&(n.isVisible=!0),!e&&!this.isSelected&&(n.isSelected=!1,n.isHovered=!1)}}get isSelected(){return this._isSelected}set isSelected(e){if(this._isSelected=e,this.controlPoints)for(let t=0,r=this.controlPoints.length;t<r;t++)this.controlPoints[t].isSelected=e;e||(this.isHovered=!1)}get isDrawing(){return this._isDrawing}set isDrawing(e){this._isDrawing=e,e||(this.isHovered=!1,this.isSelected=!1)}hitTest(e){if(!this.isVisible)return null;for(let t=0,r=this.controlPoints.length;t<r;t++){let n=this.controlPoints[t];if(n.contains(e))return n}return null}render(e){e.save(),this._render(e),e.restore()}_render(e){}dispose(){super.dispose(),ye(this.toDispose),this.toDispose=[],ye(this.dragDisposes),this.dragDisposes=[]}}const iw=Er.WEIGHT.chartCore();var rw;(i=>{i.Unselect=wf(new class extends ko{constructor(){super({id:"unselect",precondition:jt.editable,kbOpts:{weight:iw,kbExpr:jt.hasNonEmptySelection,primary:E.Escape}})}runChartCommand(e,t,r){t.cursor.setSelections([])}}),i.RemoveSeries=wf(new class extends ko{constructor(){super({id:"removeSeries",precondition:jt.hasSeriesSelection,kbOpts:{weight:iw,primary:E.Delete,mac:{primary:E.Delete,secondary:[dr.WinCtrl|E.KEY_D,dr.WinCtrl|E.Delete,E.Backspace]}}})}runChartCommand(e,t,r){let n=e.get(Ie);t.cursor.getSelections().slice().forEach(o=>{if(o instanceof Vt)return;let a=o;a.partName==="main"&&a.seriesName==="main"||a.partName==="volume"&&a.seriesName==="main"||n.removeSeries(a.dataViewName)})}})})(rw||(rw={}));const vu={label:{symbol:!1,symbolLastValue:!0,indicator:!1,indicatorLastValue:!0},axis:{leftAxis:!1}};var xr=(i=>(i[i.OpenLong=1]="OpenLong",i[i.CloseLong=2]="CloseLong",i[i.OpenShort=3]="OpenShort",i[i.CloseShort=4]="CloseShort",i))(xr||{}),bt=(i=>(i.Normal="normal",i.AutoFit="autoFit",i.Locked="locked",i))(bt||{}),Di=(i=>(i.Cross="Cross",i.Arrow="Arrow",i.Dot="Dot",i.Pointer="Pointer",i.Grabbing="Grabbing",i))(Di||{}),ce=(i=>(i.M="60s",i.M5="300s",i.M15="900s",i.M30="1800s",i.Hour="3600s",i.Day="1d",i.Week="1w",i.Month="1m",i.Year="1y",i))(ce||{}),Te=(i=>(i[i.Intraday=1]="Intraday",i[i.FiveDay=2]="FiveDay",i[i.Continuous=16]="Continuous",i))(Te||{}),vi=(i=>(i[i.None=0]="None",i[i.Prev=1]="Prev",i[i.Post=2]="Post",i))(vi||{});const g5=Qe.as(pt.Configuration),_5={id:"chart",order:1,type:"object",title:de.localize("chartConfigurationTitle","Chart"),overridable:!0,scope:Fa.RESOURCE,properties:{"chart.label.symbol":{type:"boolean",default:vu.label.symbol,description:""},"chart.axis.leftAxis":{type:"boolean",default:vu.axis.leftAxis,description:""},"chart.label.symbolLastValue":{type:"boolean",default:vu.label.symbolLastValue,description:""},"chart.label.indicator":{type:"boolean",default:vu.label.indicator,description:""},"chart.label.indicatorLastValue":{type:"boolean",default:vu.label.indicatorLastValue,description:""},"chart.priceScaleMode":{type:"string",enum:[bt.Normal,bt.AutoFit],enumDescriptions:["Normal","Auto"],default:"normal",description:""}}};g5.registerConfiguration(_5);function as(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}class Mt{constructor(e,t,r,n=1){this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,r))|0,this.a=as(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class wr{constructor(e,t,r,n){this.h=Math.max(Math.min(360,e),0)|0,this.s=as(Math.max(Math.min(1,t),0),3),this.l=as(Math.max(Math.min(1,r),0),3),this.a=as(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,r=e.g/255,n=e.b/255,s=e.a,o=Math.max(t,r,n),a=Math.min(t,r,n);let l=0,c=0;const h=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(h<=.5?u/(2*h):u/(2-2*h),1),o){case t:l=(r-n)/u+(r<n?6:0);break;case r:l=(n-t)/u+2;break;case n:l=(t-r)/u+4;break}l*=60,l=Math.round(l)}return new wr(l,c,h,s)}static _hue2rgb(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}static toRGBA(e){const t=e.h/360,{s:r,l:n,a:s}=e;let o,a,l;if(r===0)o=a=l=n;else{const c=n<.5?n*(1+r):n+r-n*r,h=2*n-c;o=wr._hue2rgb(h,c,t+1/3),a=wr._hue2rgb(h,c,t),l=wr._hue2rgb(h,c,t-1/3)}return new Mt(Math.round(o*255),Math.round(a*255),Math.round(l*255),s)}}class Ka{constructor(e,t,r,n){this.h=Math.max(Math.min(360,e),0)|0,this.s=as(Math.max(Math.min(1,t),0),3),this.v=as(Math.max(Math.min(1,r),0),3),this.a=as(Math.max(Math.min(1,n),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,r=e.g/255,n=e.b/255,s=Math.max(t,r,n),o=Math.min(t,r,n),a=s-o,l=s===0?0:a/s;let c;return a===0?c=0:s===t?c=((r-n)/a%6+6)%6:s===r?c=(n-t)/a+2:c=(t-r)/a+4,new Ka(Math.round(c*60),l,s,e.a)}static toRGBA(e){const{h:t,s:r,v:n,a:s}=e,o=n*r,a=o*(1-Math.abs(t/60%2-1)),l=n-o;let[c,h,u]=[0,0,0];return t<60?(c=o,h=a):t<120?(c=a,h=o):t<180?(h=o,u=a):t<240?(h=a,u=o):t<300?(c=a,u=o):t<360&&(c=o,u=a),c=Math.round((c+l)*255),h=Math.round((h+l)*255),u=Math.round((u+l)*255),new Mt(c,h,u,s)}}const Ge=class Ge{static fromHex(e){return Ge.Format.CSS.parseHex(e)||Ge.red}get hsla(){return this._hsla?this._hsla:wr.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Ka.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof Mt)this.rgba=e;else if(e instanceof wr)this._hsla=e,this.rgba=wr.toRGBA(e);else if(e instanceof Ka)this._hsva=e,this.rgba=Ka.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&Mt.equals(this.rgba,e.rgba)&&wr.equals(this.hsla,e.hsla)&&Ka.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Ge._relativeLuminanceForComponent(this.rgba.r),t=Ge._relativeLuminanceForComponent(this.rgba.g),r=Ge._relativeLuminanceForComponent(this.rgba.b),n=.2126*e+.7152*t+.0722*r;return as(n,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){const t=this.getRelativeLuminance(),r=e.getRelativeLuminance();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),r=e.getRelativeLuminance();return t>r}isDarkerThan(e){const t=this.getRelativeLuminance(),r=e.getRelativeLuminance();return t<r}lighten(e){return new Ge(new wr(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Ge(new wr(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:r,b:n,a:s}=this.rgba;return new Ge(new Mt(t,r,n,s*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Ge(new Mt(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){const t=e.rgba,r=this.rgba.a,n=t.a;let s=r+n*(1-r);if(s<1e-6)return Ge.transparent;const o=this.rgba.r*r/s+t.r*n*(1-r)/s,a=this.rgba.g*r/s+t.g*n*(1-r)/s,l=this.rgba.b*r/s+t.b*n*(1-r)/s;return new Ge(new Mt(o,a,l,s))}flatten(...e){const t=e.reduceRight((r,n)=>Ge._flatten(n,r));return Ge._flatten(this,t)}static _flatten(e,t){const r=1-e.rgba.a;return new Ge(new Mt(r*t.rgba.r+e.rgba.a*e.rgba.r,r*t.rgba.g+e.rgba.a*e.rgba.g,r*t.rgba.b+e.rgba.a*e.rgba.b))}toString(){return Ge.Format.CSS.format(this)}static getLighterColor(e,t,r){if(e.isLighterThan(t))return e;r=r||.5;const n=e.getRelativeLuminance(),s=t.getRelativeLuminance();return r=r*(s-n)/s,e.lighten(r)}static getDarkerColor(e,t,r){if(e.isDarkerThan(t))return e;r=r||.5;const n=e.getRelativeLuminance(),s=t.getRelativeLuminance();return r=r*(n-s)/n,e.darken(r)}};Ge.white=new Ge(new Mt(255,255,255,1)),Ge.black=new Ge(new Mt(0,0,0,1)),Ge.red=new Ge(new Mt(255,0,0,1)),Ge.blue=new Ge(new Mt(0,0,255,1)),Ge.green=new Ge(new Mt(0,255,0,1)),Ge.cyan=new Ge(new Mt(0,255,255,1)),Ge.lightgrey=new Ge(new Mt(211,211,211,1)),Ge.transparent=new Ge(new Mt(0,0,0,0));let We=Ge;(i=>{(e=>{(t=>{function r(d){return d.rgba.a===1?`rgb(${d.rgba.r}, ${d.rgba.g}, ${d.rgba.b})`:i.Format.CSS.formatRGBA(d)}t.formatRGB=r;function n(d){return`rgba(${d.rgba.r}, ${d.rgba.g}, ${d.rgba.b}, ${+d.rgba.a.toFixed(2)})`}t.formatRGBA=n;function s(d){return d.hsla.a===1?`hsl(${d.hsla.h}, ${(d.hsla.s*100).toFixed(2)}%, ${(d.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(d)}t.formatHSL=s;function o(d){return`hsla(${d.hsla.h}, ${(d.hsla.s*100).toFixed(2)}%, ${(d.hsla.l*100).toFixed(2)}%, ${d.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(d){const f=d.toString(16);return f.length!==2?"0"+f:f}function l(d){return`#${a(d.rgba.r)}${a(d.rgba.g)}${a(d.rgba.b)}`}t.formatHex=l;function c(d,f=!1){return f&&d.rgba.a===1?i.Format.CSS.formatHex(d):`#${a(d.rgba.r)}${a(d.rgba.g)}${a(d.rgba.b)}${a(Math.round(d.rgba.a*255))}`}t.formatHexA=c;function h(d){return d?d.isOpaque()?i.Format.CSS.formatHex(d):i.Format.CSS.formatRGBA(d):null}t.format=h;function u(d){if(!d)return null;const f=d.length;if(f===0||d.charCodeAt(0)!==V.Hash)return null;if(f===7){const m=16*p(d.charCodeAt(1))+p(d.charCodeAt(2)),g=16*p(d.charCodeAt(3))+p(d.charCodeAt(4)),_=16*p(d.charCodeAt(5))+p(d.charCodeAt(6));return new i(new Mt(m,g,_,1))}if(f===9){const m=16*p(d.charCodeAt(1))+p(d.charCodeAt(2)),g=16*p(d.charCodeAt(3))+p(d.charCodeAt(4)),_=16*p(d.charCodeAt(5))+p(d.charCodeAt(6)),v=16*p(d.charCodeAt(7))+p(d.charCodeAt(8));return new i(new Mt(m,g,_,v/255))}if(f===4){const m=p(d.charCodeAt(1)),g=p(d.charCodeAt(2)),_=p(d.charCodeAt(3));return new i(new Mt(16*m+m,16*g+g,16*_+_))}if(f===5){const m=p(d.charCodeAt(1)),g=p(d.charCodeAt(2)),_=p(d.charCodeAt(3)),v=p(d.charCodeAt(4));return new i(new Mt(16*m+m,16*g+g,16*_+_,(16*v+v)/255))}return null}t.parseHex=u;function p(d){switch(d){case V.Digit0:return 0;case V.Digit1:return 1;case V.Digit2:return 2;case V.Digit3:return 3;case V.Digit4:return 4;case V.Digit5:return 5;case V.Digit6:return 6;case V.Digit7:return 7;case V.Digit8:return 8;case V.Digit9:return 9;case V.a:return 10;case V.A:return 10;case V.b:return 11;case V.B:return 11;case V.c:return 12;case V.C:return 12;case V.d:return 13;case V.D:return 13;case V.e:return 14;case V.E:return 14;case V.f:return 15;case V.F:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(We||(We={}));const _E={ColorContribution:"base.contributions.colors"};class v5{constructor(){this.colorSchema={type:"object",description:de.localize("schema.colors","Colors used in the workbench."),properties:{},additionalProperties:!1},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,r,n=!1,s){let o={id:e,description:r,defaults:t,needsTransparency:n,deprecationMessage:s};this.colorsById[e]=o;let a={type:"string",description:r,format:"color-hex",default:"#ff0000"};return s&&(a.deprecationMessage=s),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(r),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){let r=this.colorsById[e];if(r&&r.defaults){let n=r.defaults[t.type];return yp(n,t)}return null}getColorSchema(){return this.colorSchema}getColorReferenceSchema(){return this.colorReferenceSchema}toString(){let e=(t,r)=>{let n=t.indexOf(".")===-1?0:1,s=r.indexOf(".")===-1?0:1;return n!==s?n-s:t.localeCompare(r)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const vE=new v5;Qe.add(_E.ColorContribution,vE);function J(i,e,t,r,n){return vE.registerColor(i,e,t,r,n)}const rc=J("foreground",{dark:"#CCCCCC",light:"#616161"},de.localize("foreground","Overall foreground color. This color is only used if not overridden by a component."));J("errorForeground",{dark:"#F48771",light:"#A1260D"},de.localize("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));J("descriptionForeground",{light:"#717171",dark:$_(rc,.7)},de.localize("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));J("focusBorder",{dark:We.fromHex("#0E639C").transparent(.8),light:We.fromHex("#007ACC").transparent(.4)},de.localize("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component."));J("contrastBorder",{light:null,dark:null},de.localize("contrastBorder","An extra border around elements to separate them from others for greater contrast."));const vg=J("contrastActiveBorder",{light:null,dark:null},de.localize("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));J("selection.background",{light:null,dark:null},de.localize("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));J("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e"},de.localize("textSeparatorForeground","Color for text separators."));J("textLink.foreground",{light:"#006AB1",dark:"#3794FF"},de.localize("textLinkForeground","Foreground color for links in text."));J("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF"},de.localize("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));J("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D"},de.localize("textPreformatForeground","Foreground color for preformatted text segments."));J("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a"},de.localize("textBlockQuoteBackground","Background color for block quotes in text."));J("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80"},de.localize("textBlockQuoteBorder","Border color for block quotes in text."));J("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66"},de.localize("textCodeBlockBackground","Background color for code blocks in text."));const y5=J("widget.shadow",{dark:"#000000",light:"#A8A8A8"},de.localize("widgetShadow","Shadow color of widgets such as find/replace inside the editor."));J("input.background",{dark:"#3C3C3C",light:We.white},de.localize("inputBoxBackground","Input box background."));J("input.foreground",{dark:rc,light:rc},de.localize("inputBoxForeground","Input box foreground."));J("input.border",{dark:null,light:null},de.localize("inputBoxBorder","Input box border."));J("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC"},de.localize("inputBoxActiveOptionBorder","Border color of activated options in input fields."));J("input.placeholderForeground",{light:$_(rc,.5),dark:$_(rc,.5)},de.localize("inputPlaceholderForeground","Input box foreground color for placeholder text."));J("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2"},de.localize("inputValidationInfoBackground","Input validation background color for information severity."));J("inputValidation.infoForeground",{dark:null,light:null},de.localize("inputValidationInfoForeground","Input validation foreground color for information severity."));J("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc"},de.localize("inputValidationInfoBorder","Input validation border color for information severity."));J("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2"},de.localize("inputValidationWarningBackground","Input validation background color for warning severity."));J("inputValidation.warningForeground",{dark:null,light:null},de.localize("inputValidationWarningForeground","Input validation foreground color for warning severity."));J("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500"},de.localize("inputValidationWarningBorder","Input validation border color for warning severity."));J("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE"},de.localize("inputValidationErrorBackground","Input validation background color for error severity."));J("inputValidation.errorForeground",{dark:null,light:null},de.localize("inputValidationErrorForeground","Input validation foreground color for error severity."));J("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100"},de.localize("inputValidationErrorBorder","Input validation border color for error severity."));const z_=J("dropdown.background",{dark:"#3C3C3C",light:We.white},de.localize("dropdownBackground","Dropdown background."));J("dropdown.listBackground",{dark:null,light:null},de.localize("dropdownListBackground","Dropdown list background."));const nw=J("dropdown.foreground",{dark:"#F0F0F0",light:null},de.localize("dropdownForeground","Dropdown foreground."));J("dropdown.border",{dark:z_,light:"#CECECE"},de.localize("dropdownBorder","Dropdown border."));const j_=J("list.focusBackground",{dark:"#062F4A",light:"#D6EBFF"},de.localize("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),x5=J("list.focusForeground",{dark:null,light:null},de.localize("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Df=J("list.activeSelectionBackground",{dark:"#094771",light:"#0074E8"},de.localize("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Tf=J("list.activeSelectionForeground",{dark:We.white,light:We.white},de.localize("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),w5=J("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1"},de.localize("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),b5=J("list.inactiveSelectionForeground",{dark:null,light:null},de.localize("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),S5=J("list.inactiveFocusBackground",{dark:"#313135",light:"#d8dae6"},de.localize("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),E5=J("list.hoverBackground",{dark:"#4f5253",light:"#F0F0F0"},de.localize("listHoverBackground","List/Tree background when hovering over items using the mouse.")),A5=J("list.hoverForeground",{dark:null,light:null},de.localize("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),D5=J("list.dropBackground",{dark:j_,light:j_},de.localize("listDropBackground","List/Tree drag and drop background when moving items around using the mouse."));J("list.highlightForeground",{dark:"#0097fb",light:"#0066BF"},de.localize("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));J("list.invalidItemForeground",{dark:"#B89500",light:"#B89500"},de.localize("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));J("list.errorForeground",{dark:"#F88070",light:"#B01011"},de.localize("listErrorForeground","Foreground color of list items containing errors."));J("list.warningForeground",{dark:"#4d9e4d",light:"#117711"},de.localize("listWarningForeground","Foreground color of list items containing warnings."));const T5=J("listFilterWidget.background",{light:"#efc1ad",dark:"#653723"},de.localize("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),C5=J("listFilterWidget.outline",{dark:We.transparent,light:We.transparent},de.localize("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),P5=J("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100"},de.localize("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches."));J("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF"},de.localize("pickerGroupForeground","Quick picker color for grouping labels."));J("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB"},de.localize("pickerGroupBorder","Quick picker color for grouping borders."));J("button.foreground",{dark:We.white,light:We.white},de.localize("buttonForeground","Button foreground color."));const sw=J("button.background",{dark:"#0E639C",light:"#007ACC"},de.localize("buttonBackground","Button background color."));J("button.hoverBackground",{dark:I5(sw,.2),light:yE(sw,.2)},de.localize("buttonHoverBackground","Button background color when hovering."));J("badge.background",{dark:"#4D4D4D",light:"#C4C4C4"},de.localize("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count."));J("badge.foreground",{dark:We.white,light:"#333"},de.localize("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count."));J("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD"},de.localize("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled."));J("scrollbarSlider.background",{dark:We.fromHex("#797979").transparent(.4),light:We.fromHex("#646464").transparent(.4)},de.localize("scrollbarSliderBackground","Scrollbar slider background color."));J("scrollbarSlider.hoverBackground",{dark:We.fromHex("#646464").transparent(.7),light:We.fromHex("#646464").transparent(.7)},de.localize("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering."));J("scrollbarSlider.activeBackground",{dark:We.fromHex("#BFBFBF").transparent(.4),light:We.fromHex("#000000").transparent(.6)},de.localize("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on."));J("progressBar.background",{dark:We.fromHex("#0E70C0"),light:We.fromHex("#0E70C0")},de.localize("progressBarBackground","Background color of the progress bar that can show for long running operations."));J("menu.border",{dark:null,light:null},de.localize("menuBorder","Border color of menus."));J("menu.foreground",{dark:nw,light:nw},de.localize("menuForeground","Foreground color of menu items."));J("menu.background",{dark:z_,light:z_},de.localize("menuBackground","Background color of menu items."));J("menu.selectionForeground",{dark:Tf,light:Tf},de.localize("menuSelectionForeground","Foreground color of the selected menu item in menus."));J("menu.selectionBackground",{dark:Df,light:Df},de.localize("menuSelectionBackground","Background color of the selected menu item in menus."));J("menu.selectionBorder",{dark:null,light:null},de.localize("menuSelectionBorder","Border color of the selected menu item in menus."));J("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888"},de.localize("menuSeparatorBackground","Color of a separator menu item in menus."));J("editor.background",{light:"#fffffe",dark:"#1E1E1E"},de.localize("editorBackground","Editor background color."));J("sideBar.background",{dark:"#252526",light:"#F3F3F3"},de.localize("sideBarBackground","Side bar background color. The side bar is the container for views like explorer and search."));J("sideBar.foreground",{dark:null,light:null},de.localize("sideBarForeground","Side bar foreground color. The side bar is the container for views like explorer and search."));function yE(i,e){return t=>{let r=yp(i,t);return r?r.darken(e):null}}function I5(i,e){return t=>{let r=yp(i,t);return r?r.lighten(e):null}}function $_(i,e){return t=>{let r=yp(i,t);return r?r.transparent(e):null}}function yp(i,e){return i===null?null:typeof i=="string"?i[0]==="#"?We.fromHex(i):e.getColor(i):i instanceof We?i:typeof i=="function"?i(e):null}const Cf={InDrawingMode:new sr("inDrawingMode",!1),HasNextControlPoint:new sr("hasNextDrawingControlPoint",!1),widgetVisible:new sr("drawingWidgetVisible",!1)};var xn=(i=>(i[i.Inactive=0]="Inactive",i[i.Stopped=1]="Stopped",i[i.Running=2]="Running",i))(xn||{});const sn=Et("drawingService"),Pi=J("chart.drawing",{dark:"#fff",light:"#000"}),gt=Et("chart");var O5=Object.defineProperty,M5=Object.getOwnPropertyDescriptor,N5=(i,e,t,r)=>{for(var n=r>1?void 0:r?M5(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&O5(e,t,n),n},yg=(i,e)=>(t,r)=>e(t,r,i);let nc=class{constructor(i,e,t){this._chart=i,this.drawingService=t,this._drawingListener=[],this.inDrawing=Cf.InDrawingMode.bindTo(e),this._hasNextControlPoint=Cf.HasNextControlPoint.bindTo(e)}static get(i){return i.getContribution("drawingController")}dispose(){this.inDrawing.reset(),this._hasNextControlPoint.reset(),ye(this._session)}get id(){return"drawingController"}insert(i,e,t){this._drawingListener=ye(this._drawingListener),this.inDrawing.set(!0),this._session=this.drawingService.draw(this._chart,i),this._session.insert(e,t),this._updateState(),this._drawingListener=[this._chart.onBlur(()=>{this.cancel()}),me(window,ue.MOUSE_MOVE,r=>{const{x:n,y:s}=this._chart.cursor.toDrawingAreaPosition(r);this._session.isAtLastControlPoint||this._session.update(n,s)},!0),this._chart.onMouseDown(r=>{const{x:n,y:s}=r;this.next(n,s)})]}cancel(){this.inDrawing.reset(),this._hasNextControlPoint.reset(),ye(this._drawingListener),this._session=void 0}accept(){this.inDrawing.reset(),this._hasNextControlPoint.reset(),ye(this._drawingListener),this._session.accept(),this._session=void 0}next(i,e){this._session.next(i,e),this._updateState()}_updateState(){if(this._session){if(!this._session.hasControlPoint)return this.accept();if(this._session.isAtLastControlPoint)return this.accept();this.inDrawing.set(!0),this._hasNextControlPoint.set(!this._session.isAtLastControlPoint)}}};nc=N5([yg(0,gt),yg(1,mr),yg(2,sn)],nc);const R5=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 16"><path d="M15.09 6.857s-.571 0-.724-.533c-.114-.457-.305-.876-.533-1.295-.229-.495.152-.876.152-.876l.571-.571c.229-.229.229-.61 0-.876l-.762-.762c-.229-.229-.61-.229-.876 0l-.571.571s-.381.381-.876.152c-.419-.229-.838-.419-1.295-.533-.533-.152-.533-.724-.533-.724v-.8a.602.602 0 0 0-.61-.61H7.966a.602.602 0 0 0-.61.61v.8s0 .571-.533.724c-.457.114-.876.305-1.295.533-.495.229-.876-.152-.876-.152l-.571-.571c-.229-.229-.61-.229-.876 0l-.762.762c-.229.229-.229.61 0 .876l.571.571s.381.381.152.876c-.229.419-.419.838-.533 1.295-.152.495-.724.533-.724.533h-.8a.602.602 0 0 0-.61.61v1.067c0 .343.267.61.61.61h.8s.571 0 .724.533c.114.457.305.876.533 1.295.229.495-.152.876-.152.876l-.571.571c-.229.229-.229.61 0 .876l.762.762c.229.229.61.229.876 0l.571-.571s.381-.381.876-.152c.419.229.838.419 1.295.533.495.152.533.724.533.724v.8c0 .343.267.61.61.61h1.067c.343 0 .61-.267.61-.61v-.8s0-.571.533-.724c.457-.114.876-.305 1.295-.533.495-.229.876.152.876.152l.571.571c.229.229.61.229.876 0l.762-.762c.229-.229.229-.61 0-.876l-.571-.571s-.381-.381-.152-.876c.229-.419.419-.838.533-1.295.152-.495.724-.533.724-.533h.8c.343 0 .61-.267.61-.61V7.467a.602.602 0 0 0-.61-.61h-.8zM8.5 11.555a3.541 3.541 0 0 1-3.556-3.556A3.541 3.541 0 0 1 8.5 4.443a3.541 3.541 0 0 1 3.556 3.556A3.561 3.561 0 0 1 8.5 11.555z"></path></svg>
`,L5=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 16" width="12px" height="16px"><path fill-rule="evenodd" d="M10.5 5.333h-.75V3.81C9.75 1.707 8.07 0 6 0 3.93 0 2.25 1.707 2.25 3.81v1.523H1.5c-.825 0-1.5.686-1.5 1.524v7.62C0 15.313.675 16 1.5 16h9c.825 0 1.5-.686 1.5-1.524V6.857c0-.838-.675-1.524-1.5-1.524zM6 12c-.825 0-1.5-.675-1.5-1.5S5.175 9 6 9s1.5.675 1.5 1.5S6.825 12 6 12zm2.325-6.75h-4.65v-1.5A2.326 2.326 0 0 1 6 1.425 2.326 2.326 0 0 1 8.325 3.75v1.5z"></path></svg>
`,k5=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 13"><path d="M1 11.571C1 12.357 1.6 13 2.333 13h5.333c.733 0 1.333-.643 1.333-1.429V3h-8v8.571zM8.5 1L6.786 0H3.215L1.501 1h-1.5v1h10V1h-1.5z"></path></svg>
`;var B5=Object.defineProperty,F5=Object.getOwnPropertyDescriptor,Pc=(i,e,t,r)=>{for(var n=r>1?void 0:r?F5(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&B5(e,t,n),n},Ic=(i,e)=>(t,r)=>e(t,r,i);class U5 extends R2{constructor(){super({id:"chart.action.insertDrawing",label:"Insert Drawing",alias:"Insert Drawing",precondition:jt.editable})}run(e,t,r){let{Ctor:n}=r,s=t.cursor.x,o=t.cursor.y;return nc.get(t).insert(n,s,o),Promise.resolve(null)}}let pl=class extends Re{constructor(i,e,t,r,n){super(i,e,t,!1),this.drawingService=r,this.weight=n,this.toDispose=[],this.toDispose.push(this.drawingService.onDidChangeState(s=>this.updateEnablement(s))),this.updateLabel(e),this.updateEnablement()}run(i){throw new Error("implement me")}updateLabel(i){this.label=i}updateEnablement(i=this.drawingService.state){this.enabled=this.isEnabled(i)}isEnabled(i){return!0}dispose(){super.dispose(),this.toDispose=ye(this.toDispose)}};pl=Pc([Ic(3,sn)],pl);var Xs;let ow=(Xs=class extends pl{constructor(e,t,r){super(e,t,"drawing-action set-color",r)}run(){return Promise.resolve(null)}},Xs.ID="workbench.action.drawing.setColor",Xs.LABEL="Color",Xs);ow=Pc([Ic(2,sn)],ow);var Zs;let aw=(Zs=class extends pl{constructor(e,t,r){super(e,t,"drawing-action configure",r),this.icon=R5}run(){return Promise.resolve(null)}},Zs.ID="workbench.action.drawing.configure",Zs.LABEL="Settings",Zs);aw=Pc([Ic(2,sn)],aw);var Qs;let lw=(Qs=class extends pl{constructor(e,t,r){super(e,t,"drawing-action lock",r),this.icon=L5}run(){return Promise.resolve(null)}},Qs.ID="workbench.action.drawing.lock",Qs.LABEL="Lock",Qs);lw=Pc([Ic(2,sn)],lw);var Js;let Hh=(Js=class extends pl{constructor(e,t,r){super(e,t,"drawing-action remove",r),this.icon=k5}run(){let e=this.drawingService.viewModel.focusedSession;return e&&(this.drawingService.remove(e),e.dispose()),Promise.resolve(null)}},Js.ID="workbench.action.drawing.remove",Js.LABEL="Remove",Js);Hh=Pc([Ic(2,sn)],Hh);class K5{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._layerHint=!1}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){wn(this.domNode,e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.willChange=this._layerHint?"transform":"auto")}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function zh(i){return new K5(i)}function xE(i,e){let t=new br(e);return t.preventDefault(),{leftButton:t.leftButton,posx:t.posx,posy:t.posy}}class wE extends Je{constructor(){super(),this.hooks=[],this.mouseMoveEventMerger=null,this.mouseMoveCallback=null,this.onStopCallback=null}dispose(){this.stopMonitoring(!1),super.dispose()}stopMonitoring(e){if(!this.isMonitoring())return;this.hooks=ye(this.hooks),this.mouseMoveEventMerger=null,this.mouseMoveCallback=null;let t=this.onStopCallback;this.onStopCallback=null,e&&t()}isMonitoring(){return this.hooks.length>0}startMonitoring(e,t,r){if(this.isMonitoring())return;this.mouseMoveEventMerger=e,this.mouseMoveCallback=t,this.onStopCallback=r;let n=P_.getSameOriginWindowChain();for(let s=0;s<n.length;s++)this.hooks.push(xT(n[s].window.document,"mousemove",o=>this.mouseMoveCallback(o),(o,a)=>this.mouseMoveEventMerger(o,a))),this.hooks.push(me(n[s].window.document,"mouseup",o=>this.stopMonitoring(!0)));if(P_.hasDifferentOriginAncestor()){let s=n[n.length-1];this.hooks.push(me(s.window.document,"mouseout",o=>{new br(o).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this.hooks.push(me(s.window.document,"mouseover",o=>{new br(o).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this.hooks.push(me(s.window.document.body,"mouseleave",o=>{this.stopMonitoring(!0)}))}}}let Iy=class extends Je{onclick(e,t){this._register(me(e,ue.CLICK,r=>t(new br(r))))}onmousedown(e,t){this._register(me(e,ue.MOUSE_DOWN,r=>t(new br(r))))}onmouseover(e,t){this._register(me(e,ue.MOUSE_OVER,r=>t(new br(r))))}onnonbubblingmouseout(e,t){this._register(mT(e,r=>t(new br(r))))}onkeydown(e,t){this._register(me(e,ue.KEY_DOWN,r=>t(new _i(r))))}onkeyup(e,t){this._register(me(e,ue.KEY_UP,r=>t(new _i(r))))}oninput(e,t){this._register(me(e,ue.INPUT,t))}onblur(e,t){this._register(me(e,ue.BLUR,t))}onfocus(e,t){this._register(me(e,ue.FOCUS,t))}onchange(e,t){this._register(me(e,ue.CHANGE,t))}};const ml=11;class H5 extends Iy{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=ml+"px",this.domNode.style.height=ml+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new wE),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new h2),this._mousedownScheduleRepeatTimer=this._register(new ul)}_arrowMouseDown(e){let t=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(xE,r=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}}var Gi=(i=>(i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible",i))(Gi||{});class Pf{constructor(e,t,r,n,s,o){e=e|0,t=t|0,r=r|0,n=n|0,s=s|0,o=o|0,e<0&&(e=0),r+e>t&&(r=t-e),r<0&&(r=0),n<0&&(n=0),o+n>s&&(o=s-n),o<0&&(o=0),this.width=e,this.scrollWidth=t,this.scrollLeft=r,this.height=n,this.scrollHeight=s,this.scrollTop=o}equals(e){return this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e){return new Pf(typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,this.scrollTop)}withScrollPosition(e){return new Pf(this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.scrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.scrollTop)}createScrollEvent(e){let t=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,n=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,o=this.scrollHeight!==e.scrollHeight,a=this.scrollTop!==e.scrollTop;return{width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:t,scrollWidthChanged:r,scrollLeftChanged:n,heightChanged:s,scrollHeightChanged:o,scrollTopChanged:a}}}class z5 extends Je{constructor(e,t){super(),this._onScroll=this._register(new ve),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new Pf(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e){const t=this._state.withScrollDimensions(e);this._setState(t),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t)}setScrollPositionSmooth(e){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const t=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===t.scrollLeft&&this._smoothScrolling.to.scrollTop===t.scrollTop)return;const r=this._smoothScrolling.combine(this._state,t,this._smoothScrollDuration);this._smoothScrolling.dispose(),this._smoothScrolling=r}else{const t=this._state.withScrollPosition(e);this._smoothScrolling=If.start(this._state,t,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t),e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_setState(e){const t=this._state;t.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(t)))}}class uw{constructor(e,t,r){this.scrollLeft=e,this.scrollTop=t,this.isDone=r}}function xg(i,e){const t=e-i;return function(r){return i+t*V5(r)}}function j5(i,e,t){return function(r){return r<t?i(r/t):e((r-t)/(1-t))}}class If{constructor(e,t,r,n){this.from=e,this.to=t,this.duration=n,this._startTime=r,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,r){if(Math.abs(e-t)>2.5*r){let s,o;return e<t?(s=e+.75*r,o=t-.75*r):(s=e-.75*r,o=t+.75*r),j5(xg(e,s),xg(o,t),.33)}return xg(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this._startTime)/this.duration;if(t<1){const r=this.scrollLeft(t),n=this.scrollTop(t);return new uw(r,n,!1)}return new uw(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,r){return If.start(e,t,r)}static start(e,t,r){r=r+10;const n=Date.now()-10;return new If(e,t,n,r)}}function $5(i){return Math.pow(i,3)}function V5(i){return 1-$5(1-i)}class W5 extends Je{constructor(e,t,r){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=r,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new ul)}applyVisibilitySetting(e){return this._visibility===Gi.Hidden?!1:this._visibility===Gi.Visible?!0:e}setShouldBeVisible(e){let t=this.applyVisibilitySetting(e);this._shouldBeVisible!==t&&(this._shouldBeVisible=t,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}const G5=140;class bE extends Iy{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new W5(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._mouseMoveMonitor=this._register(new wE),this._shouldRender=!0,this.domNode=zh(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){let t=this._register(new H5(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,r,n){this.slider=zh(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof r=="number"&&this.slider.setWidth(r),typeof n=="number"&&this.slider.setHeight(n),this.slider.setLayerHinting(!0),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,s=>{s.leftButton&&(s.preventDefault(),this._sliderMouseDown(s,()=>{}))})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){let t=this.domNode.domNode.getClientRects()[0].top,r=t+this._scrollbarState.getSliderPosition(),n=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderMousePosition(e);r<=s&&s<=n?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,r;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,r=e.browserEvent.offsetY;else{const n=gf(this.domNode.domNode);t=e.posx-n.left,r=e.posy-n.top}this._setDesiredScrollPositionNow(this._scrollbarState.getDesiredScrollPositionFromOffset(this._mouseDownRelativePosition(t,r))),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){const r=this._sliderMousePosition(e),n=this._sliderOrthogonalMousePosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(xE,o=>{const a=this._sliderOrthogonalMousePosition(o),l=Math.abs(a-n);if(j0&&l>G5){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const h=this._sliderMousePosition(o)-r;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(h))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}}const Y5=20;class sc{constructor(e,t,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(r),this._arrowSize=Math.round(e),this._visibleSize=0,this._scrollSize=0,this._scrollPosition=0,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){let e=new sc(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize);return e.setVisibleSize(this._visibleSize),e.setScrollSize(this._scrollSize),e.setScrollPosition(this._scrollPosition),e}setVisibleSize(e){let t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){let t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}static _computeValues(e,t,r,n,s){const o=Math.max(0,r-e),a=Math.max(0,o-2*t),l=n>0&&n>r;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(Y5,Math.floor(r*a/n))),h=(a-c)/(n-r),u=s*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:h,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=sc._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class q5 extends bE{constructor(e,t,r){if(super({lazyRender:t.lazyRender,host:r,scrollbarState:new sc(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===Gi.Hidden?0:t.horizontalScrollbarSize,t.vertical===Gi.Hidden?0:t.verticalScrollbarSize),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e}),t.horizontalHasArrows){let n=(t.arrowSize-ml)/2,s=(t.horizontalScrollbarSize-ml)/2;this._createArrow({className:"left-arrow",top:s,left:n,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Xh(null,1,0))}),this._createArrow({className:"right-arrow",top:s,left:void 0,bottom:void 0,right:n,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Xh(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}writeScrollPosition(e,t){e.scrollLeft=t}}class X5 extends bE{constructor(e,t,r){if(super({lazyRender:t.lazyRender,host:r,scrollbarState:new sc(t.verticalHasArrows?t.arrowSize:0,t.vertical===Gi.Hidden?0:t.verticalScrollbarSize,0),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e}),t.verticalHasArrows){let n=(t.arrowSize-ml)/2,s=(t.verticalScrollbarSize-ml)/2;this._createArrow({className:"up-arrow",top:n,left:s,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Xh(null,0,1))}),this._createArrow({className:"down-arrow",top:void 0,left:s,bottom:n,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Xh(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}writeScrollPosition(e,t){e.scrollTop=t}}const Z5=500,hw=50;class Q5{constructor(e,t,r){this.timestamp=e,this.deltaX=t,this.deltaY=r,this.score=0}}const m0=class m0{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,r=1,n=this._rear;do{const s=n===this._front?e:Math.pow(2,-r);if(e-=s,t+=this._memory[n].score*s,n===this._front)break;n=(this._capacity+n-1)%this._capacity,r++}while(!0);return t<=.5}accept(e,t,r){const n=new Q5(e,t,r);n.score=this._computeScore(n),this._front===-1&&this._rear===-1?(this._memory[0]=n,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=n)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(Math.abs(e.deltaX-Math.round(e.deltaX))>0||Math.abs(e.deltaY-Math.round(e.deltaY))>0)&&(t+=.25),Math.min(Math.max(t,0),1)}};m0.INSTANCE=new m0;let V_=m0;class J5 extends Iy{constructor(e,t,r){super(),this._onScroll=this._register(new ve),this.onScroll=this._onScroll.event,e.style.overflow="hidden",this._options=cw(t),this._scrollable=r,this._register(this._scrollable.onScroll(s=>{this._onDidScroll(s),this._onScroll.fire(s)}));let n={onMouseWheel:s=>this._onMouseWheel(s),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new X5(this._scrollable,this._options,n)),this._horizontalScrollbar=this._register(new q5(this._scrollable,this._options,n)),this._domNode=document.createElement("div"),this._domNode.className="nila-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows&&(this._leftShadowDomNode=zh(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=zh(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=zh(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow top-left-corner"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,s=>this._onMouseOver(s)),this.onnonbubblingmouseout(this._listenOnDomNode,s=>this._onMouseOut(s)),this._hideTimeout=this._register(new ul),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=ye(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e)}updateClassName(e){this._options.className=e,en&&(this._options.className+=" mac"),this._domNode.className="nila-scrollable-element "+this._options.className}updateOptions(e){let t=cw(e);this._options.handleMouseWheel=t.handleMouseWheel,this._options.mouseWheelScrollSensitivity=t.mouseWheelScrollSensitivity,this._options.fastScrollSensitivity=t.fastScrollSensitivity,this._setListeningToMouseWheel(this._options.handleMouseWheel),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=ye(this._mouseWheelToDispose),e)){let r=n=>{this._onMouseWheel(new Xh(n))};this._mouseWheelToDispose.push(me(this._listenOnDomNode,"mousewheel",r))}}_onMouseWheel(e){const t=V_.INSTANCE;if(t.accept(Date.now(),e.deltaX,e.deltaY),e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,n=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.flipAxes&&([r,n]=[n,r]);const s=!en&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||s)&&!n&&(n=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(n=n*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const o=this._scrollable.getFutureScrollPosition();let a={};if(r){const l=o.scrollTop-hw*r;this._verticalScrollbar.writeScrollPosition(a,l)}if(n){const l=o.scrollLeft-hw*n;this._horizontalScrollbar.writeScrollPosition(a,l)}a=this._scrollable.validateScrollPosition(a),(o.scrollLeft!==a.scrollLeft||o.scrollTop!==a.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(a):this._scrollable.setScrollPositionNow(a),this._shouldRender=!0)}(this._options.alwaysConsumeMouseWheel||this._shouldRender)&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition();let t=e.scrollTop>0,r=e.scrollLeft>0;this._leftShadowDomNode.setClassName("shadow"+(r?" left":"")),this._topShadowDomNode.setClassName("shadow"+(t?" top":"")),this._topLeftShadowDomNode.setClassName("shadow top-left-corner"+(t?" top":"")+(r?" left":""))}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),Z5)}}class SE extends J5{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const r=new z5(0,n=>V0(n));super(e,t,r),this._register(r)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class eC extends SE{constructor(e,t){super(e,t),this._element=e,this.onScroll(r=>{r.scrollTopChanged&&(this._element.scrollTop=r.scrollTop),r.scrollLeftChanged&&(this._element.scrollLeft=r.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function cw(i){let e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:Gi.Auto,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:Gi.Auto,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,en&&(e.className+=" mac"),e}const W_=/\(&{1,2}(.)\)|&{1,2}(.)/,tC=/(?:&amp;){1,2}(.)/;class iC extends Re{constructor(e,t,r){super(r||"submenu",e,"",!0),this.entries=t}}class EE extends ep{constructor(e,t,r={}){Pe(e,"nila-menu-container"),e.setAttribute("role","presentation");const n=document.createElement("div");Pe(n,"nila-menu"),n.setAttribute("role","presentation");let s=l=>r.actionItemProvider?r.actionItemProvider(l)||this.doGetActionItem(l,r,o):this.doGetActionItem(l,r,o);super(n,{orientation:bc.VERTICAL,actionItemProvider:s,context:r.context,actionRunner:r.actionRunner,ariaLabel:r.ariaLabel,triggerKeys:{keys:[E.Enter],keyDown:!0}}),this.menuElement=n,this._onScroll=this._register(new ve),this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=[],r.enableMnemonics&&this.menuDisposables.push(me(n,ue.KEY_DOWN,l=>{const c=lt.fromString(l.key);if(this.mnemonics.has(c)){mi.stop(l,!0);const h=this.mnemonics.get(c);if(h.length===1&&(h[0]instanceof wg&&this.focusItemByElement(h[0].container),h[0].onClick(l)),h.length>1){const u=h.shift();u&&(this.focusItemByElement(u.container),h.push(u)),this.mnemonics.set(c,h)}}})),this._register(me(this.domNode,ue.MOUSE_OUT,l=>{let c=l.relatedTarget;ds(c,this.domNode)||(this.focusedItem=void 0,this.scrollTopHold=this.menuElement.scrollTop,this.updateFocus(),l.stopPropagation())})),this._register(me(this.domNode,ue.MOUSE_UP,l=>{mi.stop(l,!0)})),this._register(me(this.actionsList,ue.MOUSE_OVER,l=>{let c=l.target;if(!(!c||!ds(c,this.actionsList)||c===this.actionsList)){for(;c.parentElement!==this.actionsList&&c.parentElement!==null;)c=c.parentElement;if($0(c,"action-item")){const h=this.focusedItem;this.scrollTopHold=this.menuElement.scrollTop,this.setFocusedItem(c),h!==this.focusedItem&&this.updateFocus()}}}));let o={parent:this};this.mnemonics=new Map,this.push(t,{icon:!0,label:!0,isMenu:!0}),this.scrollableElement=this._register(new eC(n,{alwaysConsumeMouseWheel:!0,horizontal:Gi.Hidden,vertical:Gi.Visible,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position=null,n.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-40-1)}px`,this.scrollableElement.onScroll(()=>{this._onScroll.fire()},this,this.menuDisposables),this._register(me(this.menuElement,ue.SCROLL,l=>{this.scrollTopHold!==void 0&&(this.menuElement.scrollTop=this.scrollTopHold,this.scrollTopHold=void 0),this.scrollableElement.scanDomNode()})),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.items.filter(l=>!(l instanceof af)).forEach((l,c,h)=>{l.updatePositionInSet(c+1,h.length)})}style(e){const t=this.getContainer(),r=e.foregroundColor?`${e.foregroundColor}`:null,n=e.backgroundColor?`${e.backgroundColor}`:null,s=e.borderColor?`2px solid ${e.borderColor}`:null,o=e.shadowColor?`0 2px 4px ${e.shadowColor}`:null;t.style.border=s,this.domNode.style.color=r,this.domNode.style.backgroundColor=n,t.style.boxShadow=o,this.items&&this.items.forEach(a=>{(a instanceof ls||a instanceof af)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this._onScroll.event}get scrollOffset(){return this.menuElement.scrollTop}trigger(e){if(e<=this.items.length&&e>=0){const t=this.items[e];if(t instanceof wg)super.focus(e),t.open(!0);else if(t instanceof ls)super.run(t._action,t._context);else return}}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let r=this.actionsList.children[t];if(e===r){this.focusedItem=t;break}}}doGetActionItem(e,t,r){if(e instanceof Tn)return new af(t.context,e,{icon:!0});if(e instanceof iC){const n=new wg(e,e.entries,r,t);if(t.enableMnemonics){const s=n.getMnemonic();if(s&&n.isEnabled()){let o=[];this.mnemonics.has(s)&&(o=this.mnemonics.get(s)),o.push(n),this.mnemonics.set(s,o)}}return n}else{const n={enableMnemonics:t.enableMnemonics};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(n.keybinding=a)}}const s=new ls(t.context,e,n);if(t.enableMnemonics){const o=s.getMnemonic();if(o&&s.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(s),this.mnemonics.set(o,a)}}return s}}}class ls extends na{constructor(e,t,r={}){if(r.isMenu=!0,super(t,t,r),this.options=r,this.options.icon=r.icon!==void 0?r.icon:!1,this.options.label=r.label!==void 0?r.label:!0,this.cssClass="",this.options.label&&r.enableMnemonics){let n=this.getAction().label;if(n){let s=W_.exec(n);s&&(this.mnemonic=lt.fromString((s[1]?s[1]:s[2]).toLocaleLowerCase()))}}}render(e){super.render(e),this.element&&(this.container=e,this.item=Wi(this.element,oi("a.action-menu-item")),this._action.id===Tn.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.icon=Wi(this.item,oi("div.action-icon")),this.label=Wi(this.item,oi("span.action-label")),this.options.label&&this.options.keybinding&&(Wi(this.item,oi("span.keybinding")).textContent=this.options.keybinding),this._register(me(this.element,ue.MOUSE_UP,t=>{mi.stop(t,!0),this.onClick(t)})),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.updateIcon())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`)}updateLabel(){if(this.options.label){let e=this.getAction().label;if(e){const t=rC(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t);const r=W_.exec(e);r&&(e=escape(e).replace(tC,'<u aria-hidden="true">$1</u>'),this.item.setAttribute("aria-keyshortcuts",(r[1]?r[1]:r[2]).toLocaleLowerCase()))}this.label.innerHTML=e.trim()}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=de.localize({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&(this.item.title=e)}updateClass(){this.cssClass&&Zh(this.item,this.cssClass),this.options.icon?(this.cssClass=this.getAction().class||"",Pe(this.label,"icon"),this.cssClass&&pr(this.label,this.cssClass),this.updateEnabled()):ut(this.label,"icon")}updateEnabled(){this.getAction().enabled?(this.element&&ut(this.element,"disabled"),ut(this.item,"disabled"),this.item.tabIndex=0):(this.element&&Pe(this.element,"disabled"),Pe(this.item,"disabled"),E2(this.item))}updateChecked(){this.getAction().checked?(Pe(this.item,"checked"),this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked","true")):(ut(this.item,"checked"),this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked","false"))}updateIcon(){let e=this.getAction().icon;e?this.icon.innerHTML=e:(this.icon.style.display="none",this.icon.innerHTML=" ")}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&$0(this.element,"focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,r=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:this.menuStyle.backgroundColor,n=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:null;this.item.style.color=t?`${t}`:null,this.check.style.backgroundColor=t?`${t}`:null,this.item.style.backgroundColor=r?`${r}`:null,this.container.style.border=n}style(e){this.menuStyle=e,this.applyStyle()}}class wg extends ls{constructor(e,t,r,n){super(e,e,n),this.submenuActions=t,this.parentData=r,this.submenuOptions=n,this.submenuDisposables=[],this.showScheduler=new S_(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new S_(()=>{this.element&&!ds(document.activeElement,this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(Pe(this.item,"nila-submenu-item"),this.item.setAttribute("aria-haspopup","true"),this.submenuIndicator=Wi(this.item,oi("span.submenu-indicator")),this.submenuIndicator.setAttribute("aria-hidden","true"),this._register(me(this.element,ue.KEY_UP,t=>{let r=new _i(t);(r.equals(E.RightArrow)||r.equals(E.Enter))&&(mi.stop(t,!0),this.createSubmenu(!0))})),this._register(me(this.element,ue.KEY_DOWN,t=>{let r=new _i(t);(r.equals(E.RightArrow)||r.equals(E.Enter))&&mi.stop(t,!0)})),this._register(me(this.element,ue.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(me(this.element,ue.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(me(this.element,ue.FOCUS_OUT,t=>{this.element&&!ds(document.activeElement,this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}open(e){this.cleanupExistingSubmenu(!1),this.createSubmenu(e)}onClick(e){mi.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!1)}cleanupExistingSubmenu(e){this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)&&(this.parentData.submenu.dispose(),this.parentData.submenu=void 0,this.submenuContainer&&(this.submenuDisposables=ye(this.submenuDisposables),this.submenuContainer=void 0))}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.submenuContainer=Wi(this.element,oi("div.nila-submenu")),pr(this.submenuContainer,"menubar-menu-items-holder","context-view"),this.parentData.submenu=new EE(this.submenuContainer,this.submenuActions,this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const t=this.element.getBoundingClientRect(),r=this.submenuContainer.getBoundingClientRect(),n=getComputedStyle(this.parentData.parent.domNode),s=parseFloat(n.paddingTop||"0")||0;window.innerWidth<=t.right+r.width?(this.submenuContainer.style.left="10px",this.submenuContainer.style.top=`${this.element.offsetTop-this.parentData.parent.scrollOffset+t.height}px`):(this.submenuContainer.style.left=`${this.element.offsetWidth}px`,this.submenuContainer.style.top=`${this.element.offsetTop-this.parentData.parent.scrollOffset-s}px`),this.submenuDisposables.push(me(this.submenuContainer,ue.KEY_UP,o=>{new _i(o).equals(E.LeftArrow)&&(mi.stop(o,!0),this.parentData.parent.focus(),this.parentData.submenu&&(this.parentData.submenu.dispose(),this.parentData.submenu=void 0),this.submenuDisposables=ye(this.submenuDisposables),this.submenuContainer=void 0)})),this.submenuDisposables.push(me(this.submenuContainer,ue.KEY_DOWN,o=>{new _i(o).equals(E.LeftArrow)&&mi.stop(o,!0)})),this.submenuDisposables.push(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.parentData.submenu&&(this.parentData.submenu.dispose(),this.parentData.submenu=void 0),this.submenuDisposables=ye(this.submenuDisposables),this.submenuContainer=void 0})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&$0(this.element,"focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator.style.backgroundColor=t?`${t}`:null,this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuDisposables=ye(this.submenuDisposables),this.submenuContainer=void 0)}}class af extends J0{style(e){this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:null}}function rC(i){const e=W_,t=e.exec(i);if(!t)return i;const r=t[0].charAt(0)==="&";return i.replace(e,r?"$2":"").trim()}const nC=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 12"><path fill-rule="evenodd" d="M0 0h2v2H0V0zm4 0h2v2H4V0zM0 5h2v2H0V5zm4 0h2v2H4V5zm-4 5h2v2H0v-2zm4 0h2v2H4v-2z"></path></svg>
`;var sC=Object.defineProperty,oC=Object.getOwnPropertyDescriptor,aC=(i,e,t,r)=>{for(var n=r>1?void 0:r?oC(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&sC(e,t,n),n},bg=(i,e)=>(t,r)=>e(t,r,i);class lC extends ls{render(e){super.render(e),this.icon.innerHTML=this._action.icon}}let Of=class{constructor(i,e,t){this.chartsService=i,this.drawingService=e,this.instantiationService=t,this.allActions=[],this.toDispose=[],this.$el=document.createElement("div"),Pe(this.$el,"drawing-actions-widget"),this.dragArea=document.createElement("div"),Pe(this.dragArea,"drag-area"),this.dragArea.innerHTML=nC,this.$el.appendChild(this.dragArea);const r=document.createElement("div");Pe(r,"action-bar-container"),this.$el.appendChild(r),this.activeActions=[],this.actionBar=new ep(r,{orientation:bc.HORIZONTAL,actionItemProvider:n=>new lC(null,n,{icon:!0,label:!1})}),this.updateScheduler=new S_(()=>{if(this.drawingService.state===xn.Inactive)return this.hide();const s=Of.getActions(this.allActions,this.toDispose,this.drawingService,this.instantiationService);f2(s,this.activeActions,(o,a)=>o.id===a.id)||(this.actionBar.clear(),this.actionBar.push(s,{icon:!0,label:!1}),this.activeActions=s),this.show()},20),this.toDispose.push(this.actionBar),this.registerListeners(),this.hide(),this.isBuilt=!1,this.updateScheduler.schedule()}registerListeners(){this.toDispose.push(this.drawingService.onDidChangeState(()=>this.updateScheduler.schedule())),this.toDispose.push(this.drawingService.viewModel.onDidFocusSession(()=>this.updateScheduler.schedule())),this.toDispose.push(me(window,ue.RESIZE,()=>this.setCoordinate())),Le(this.dragArea).on(ue.MOUSE_DOWN,i=>{const e=Le(window);Pe(this.dragArea,"dragged"),e.on("mousemove",t=>{const r=new br(t);r.preventDefault(),this.setCoordinate(r.posx-14,r.posy-16)}).once("mouseup",t=>{ut(this.dragArea,"dragged"),e.off("mousemove")})})}setCoordinate(i,e){if(!this.isVisible)return;const t=this.$el.clientWidth;i===void 0&&(i=.5*window.innerWidth-.5*t),i=Math.max(0,Math.min(i,window.innerWidth-t)),this.$el.style.left=`${i}px`,this.$el.style.position="fixed",e&&(this.$el.style.top=`${e}px`)}show(){if(this.isVisible){let e=this.$el.parentElement,t=this.chartsService.currentChart.container;if(e===t.getHTMLElement())return;t.append(DT(this.$el))}let i=!this.isBuilt;this.isBuilt||(this.isBuilt=!0,this.chartsService.currentChart.container.append(this.$el)),this.isVisible=!0,rs(this.$el),i&&this.setCoordinate()}hide(){this.isVisible=!1,Gr(this.$el)}static getActions(i,e,t,r){return i.length===0&&(i.push(r.createInstance(Hh,Hh.ID,Hh.LABEL)),i.forEach(n=>{e.push(n)})),i}dispose(){ye(this.toDispose)}};Of=aC([bg(0,Ue),bg(1,sn),bg(2,Nt)],Of);const AE=[];function uC(i,e){AE.push({id:i,descriptor:new yr(e)})}function hC(){return AE}class cC{constructor(){this.toDispose=[],this.sessions=[],this._onDidChangeDrawingStack=new ve,this.toDispose.push(this._onDidChangeDrawingStack)}get onDidChangeDrawingStack(){return this._onDidChangeDrawingStack.event}getSessions(){return this.sessions}addSession(e){this.sessions.push(e)}removeSession(e){this.sessions=this.sessions.filter(t=>t.id!==e),this._onDidChangeDrawingStack.fire()}getSessionFromShape(e){for(let t=0,r=this.sessions.length;t<r;t++)if(this.sessions[t].contains(e))return this.sessions[t];return null}dispose(){this.toDispose=ye(this.toDispose)}}let dC=class{constructor(){this.toDispose=[],this._onDidFocusSession=new ve,this.toDispose.push(this._onDidFocusSession)}get focusedSession(){return this._focusedSession}get onDidFocusSession(){return this._onDidFocusSession.event}setFocus(e){this._focusedSession!==e&&(this._focusedSession=e,this._onDidFocusSession.fire(e))}dispose(){this.toDispose=ye(this.toDispose),this._focusedSession&&(this._focusedSession=null)}};class fC{constructor(e){this._drawing=e,this._controlPointGroups=e.controlPoints.map(t=>[t]),this._controlPointGroupsIdx=-1}contains(e){return this._drawing.id===e}dispose(){this._controlPointGroups.length=0,this._drawing.dispose()}move(e,t){return this._controlPointGroupsIdx<this._controlPointGroups.length-1&&(this._controlPointGroupsIdx+=1,this.update(e,t)),this._controlPointGroups[this._controlPointGroupsIdx]||[]}update(e,t){let r=this._controlPointGroups[this._controlPointGroupsIdx+1];if(r&&r.length)for(let n=0,s=r.length;n<s;n++)this._drawing.setPoint(r[n],e,t)}get isAtFirstControlPoint(){return this._controlPointGroupsIdx<=0||this._controlPointGroups.length===0}get isAtLastControlPoint(){return this._controlPointGroupsIdx===this._controlPointGroups.length-1}get hasControlPoint(){return this._drawing.controlPoints.length>0}accept(){this._drawing.isDrawing=!1}}class pC{constructor(e,t){this._drawings=[],this._chart=e,this._ctor=t,this._id=xt()}get id(){return this._id}contains(e){for(let t=0,r=this._drawings.length;t<r;t++)if(this._drawings[t].contains(e))return!0;return!1}dispose(){ye(this._drawings)}insert(e,t){let r=this._ctor.controlPoints,n=[];for(let a=0;a<r;a++)n.push([e,t]);let s=this._chart.invokeWithinContext(a=>a.get(Nt).createInstance(this._ctor,n));s.isDrawing=!0;let o=new fC(s);this._drawings=[o],r>1&&this.next(e,t),this._chart.insertShape(s)}next(e,t){this._move(e,t)}update(e,t){for(const r of this._drawings)r.update(e,t)}_move(e,t){const r=[];for(const n of this._drawings){const s=n.move(e,t);r.push(...s)}return r}get isAtFirstControlPoint(){return this._drawings[0].isAtFirstControlPoint}get isAtLastControlPoint(){return this._drawings[0].isAtLastControlPoint}get hasControlPoint(){return this._drawings[0].hasControlPoint}accept(){this._drawings.forEach(e=>{e.accept()})}}var mC=Object.defineProperty,gC=Object.getOwnPropertyDescriptor,_C=(i,e,t,r)=>{for(var n=r>1?void 0:r?gC(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&mC(e,t,n),n},Sg=(i,e)=>(t,r)=>e(t,r,i);let G_=class{constructor(i,e,t){this.chartsService=i,this.lifecycleService=t,this._onDidChangeState=new ve,this.toDispose=[],this._state=xn.Inactive,this._model=new cC,this._viewModel=new dC,this.registerListeners()}get state(){return this._state}get model(){return this._model}get viewModel(){return this._viewModel}get onDidChangeState(){return this._onDidChangeState.event}set state(i){this._state=i,this._onDidChangeState.fire(i)}draw(i,e){let t=new pC(i,e);return this.model.addSession(t),this.viewModel.setFocus(t),t}remove(i){this.model.removeSession(i.id),this._state=xn.Inactive,this.viewModel.setFocus(void 0)}removeAll(){let i=this.model.getSessions();for(let e=0,t=i.length;e<t;e++){let r=i[e];this.model.removeSession(r.id),r.dispose()}this._state=xn.Inactive,this.viewModel.setFocus(void 0)}registerListeners(){this.lifecycleService.onShutdown(this.dispose,this),this.toDispose.push(this.chartsService.chartAdded(this.handleChartAdded.bind(this))),this.chartsService.currentChanged.connect(this.handleCurrentChartChanged,this)}handleChartShapeSelected(i,e){if(e.length){if(!i.hasDrawingSelection.get())return;let t=e[0];this._state=xn.Running;let r=this._model.getSessionFromShape(t.id);r?this._viewModel.setFocus(r):(this._viewModel.setFocus(void 0),console.error("drawingservice#session not found"))}else this._state=xn.Inactive,this._viewModel.setFocus(void 0)}handleChartAdded(i){this.chartsService.currentChart!==i&&i.activeChanged.connect(this.handleActivePartChanged,this)}handleActivePartChanged(i,e){const{newValue:t,oldValue:r}=e;r&&tt.Signal.disconnectBetween(r,this),t&&t.onDidChangeSelection.connect(this.handleChartShapeSelected,this),this._state=xn.Inactive,this._viewModel.setFocus(void 0)}handleCurrentChartChanged(i,e){const{newValue:t,oldValue:r}=e;r&&tt.Signal.disconnectBetween(r,this),t&&t.activeChanged.connect(this.handleActivePartChanged,this),t||(this._state=xn.Inactive,this._viewModel.setFocus(void 0))}dispose(){this.toDispose=ye(this.toDispose),tt.Signal.disconnectAll(this),tt.Signal.clearData(this)}};G_=_C([Sg(0,Ue),Sg(1,mr),Sg(2,X0)],G_);uC(sn,G_);L2(U5);fy(nc);const vC=ko.bindToContribution(nc.get);wf(new vC({id:"leaveDrawing",precondition:Cf.InDrawingMode,handler:i=>i.cancel(),kbOpts:{weight:Er.WEIGHT.chartContrib(30),kbExpr:jt.focus,primary:E.Escape}}));wf(new class extends ko{constructor(){super({id:"deleteSelected",precondition:jt.hasDrawingSelection,kbOpts:{weight:Er.WEIGHT.chartContrib(30),primary:E.Delete,mac:{primary:E.Delete,secondary:[dr.WinCtrl|E.KEY_D,dr.WinCtrl|E.Delete,E.Backspace]}}})}runChartCommand(i,e,t){let r=i.get(sn),n=r.viewModel.focusedSession;r.remove(n),n.dispose(),e.redraw(!0)}});Qe.as(pt.Workbench).registerWorkbenchContribution(Of,Ti.Eventually);class yC extends R2{constructor(){super({id:"chart.action.setCursorStyle",label:"Set Cursor",alias:"Set Cursor",precondition:jt.editable})}run(e,t,r){const{style:n}=r;return t.cursor.cursorStyle=n,Promise.resolve(null)}}L2(yC);var oc=(i=>(i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW",i))(oc||{}),$t=(i=>(i.UNKNOWN="unknown",i.EMPTY="empty",i.SERIES="series",i.ORDER="order",i.DRAWING="drawing",i.CONTENT_WIDGET="content-widget",i.OVERLAY_WIDGET="overlay-widget",i))($t||{});function DE(i,e){if(Array.isArray(i)){let t=0;for(const r of i){const n=DE(r,e);if(n===10)return n;n>t&&(t=n)}return t}else{if(typeof i=="string")return i==="*"?5:i===e?10:0;if(i){const{graphicType:t}=i;let r=0;if(t)if(t===e)r=10;else if(t==="*")r=Math.max(r,5);else return 0;return r}else return 0}}function TE(i){return typeof i=="string"?!1:Array.isArray(i)?i.every(TE):i.exclusive}class Oy{constructor(){this._clock=0,this._entries=[],this._onDidChange=new ve}get onDidChange(){return this._onDidChange.event}register(e,t){let r={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(r),this._onDidChange.fire(this._entries.length),{dispose:()=>{if(r){let n=this._entries.indexOf(r);n>=0&&(this._entries.splice(n,1),this._onDidChange.fire(this._entries.length),r=void 0)}}}}dispose(){this._entries.length=0}has(e){return this.all(e).length>0}all(e){const t=[];for(let r of this._entries)r._score>0&&t.push(r.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,r=>t.push(r.provider)),t}orderedGroups(e){const t=[];let r,n;return this._orderedForEach(e,s=>{r&&n===s._score?r.push(s.provider):(n=s._score,r=[s.provider],t.push(r))}),t}_orderedForEach(e,t){this._updateScores(e);for(let r=0;r<this._entries.length;r++){let n=this._entries[r];n._score>0&&t(n)}}_updateScores(e){for(let t of this._entries)if(t._score=DE(t.selector,e),TE(t.selector)&&t._score>0){for(let r of this._entries)r._score=0;t._score=1e3;break}this._entries.sort(Oy._compareByScoreAndTime)}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}class xC{constructor(){this._map=Object.create(null)}register(e,t){return this._map[e]=t,z0(()=>{this._map[e]===t&&delete this._map[e]})}get(e){return this._map[e]||null}dispose(){this._map=Object.create(null)}}class wC{constructor(){this._map=Object.create(null)}register(e,t){return this._map[e]=t,z0(()=>{this._map[e]===t&&delete this._map[e]})}get(e){if(this._map[e])return this._map[e];let t=Object.keys(this._map);for(let r=0,n=t.length;r<n;r++)if(new RegExp(t[r],"g").test(e))return this._map[t[r]];return null}dispose(){this._map=Object.create(null)}}const My=new Oy,Ct=new xC;var Qt=(i=>(i[i.Closed=0]="Closed",i[i.Preparing=1]="Preparing",i[i.CallAuction=16]="CallAuction",i[i.Opened=17]="Opened",i[i.Break=256]="Break",i))(Qt||{});const qr=new wC,bC={Visible:new sr("hoverWidgetVisible",!1)};function SC(i,e){return t=>typeof i.resolveSuggestionItem=="function"?Promise.resolve(i.resolveSuggestionItem(e,t)):Promise.resolve(void 0)}function EC(i,e=qh.None){const t=[],r=My.orderedGroups("order"),n=i;let s=!1;const o=r.map(l=>()=>Promise.all(l.map(c=>Promise.resolve(c.provideSuggestionItems(n,e)).then(h=>{const u=t.length;if(h&&!m2(h.suggestions))for(let p of h.suggestions)t.push({suggestion:p,resolve:SC(c,p)});u!==t.length&&(s=!0)},GD))));return eT(o,()=>s||e.isCancellationRequested).then(()=>e.isCancellationRequested?Promise.reject(s2()):t.sort())}var CE=(i=>(i.TREE="tree",i.FORM="form",i))(CE||{});function AC(i,e){if(i.start>=e.end||e.start>=i.end)return{start:0,end:0};const t=Math.max(i.start,e.start),r=Math.min(i.end,e.end);return r-t<=0?{start:0,end:0}:{start:t,end:r}}function DC(i){return i.end-i.start<=0}function dw(i,e){const t=[];for(let r of e){if(i.start>=r.range.end)continue;if(i.end<r.range.start)break;const n=AC(i,r.range);DC(n)||t.push({range:n,size:r.size})}return t}function Y_({start:i,end:e},t){return{start:i+t,end:e+t}}function TC(i){const e=[];let t=null;for(let r of i){const n=r.range.start,s=r.range.end,o=r.size;if(t&&o===t.size){t.range.end=s;continue}t={range:{start:n,end:s},size:o},e.push(t)}return e}function CC(...i){return TC(i.reduce((e,t)=>e.concat(t),[]))}class fw{constructor(){this.groups=[],this._size=0}splice(e,t,...r){const n=r.length-t,s=dw({start:0,end:e},this.groups),o=dw({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:Y_(l.range,n),size:l.size})),a=r.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=CC(s,a,o),this._size=this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,r=0;for(let n of this.groups){const s=n.range.end-n.range.start,o=r+s*n.size;if(e<o)return t+Math.floor((e-r)/n.size);t+=s,r=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,r=0;for(let n of this.groups){const s=n.range.end-n.range.start,o=r+s;if(e<o)return t+(e-r)*n.size;t+=s*n.size,r=o}return-1}dispose(){this.groups=null}}function PC(i){try{i.parentElement&&i.parentElement.removeChild(i)}catch{}}class IC{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const r=oi(".nila-list-row"),s=this.getRenderer(e).renderTemplate(r);t={domNode:r,templateId:e,templateData:s}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:r}=e;t&&(ut(t,"scrolling"),PC(t)),this.getTemplateCache(r).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}garbageCollect(){this.renderers&&(this.cache.forEach((e,t)=>{for(const r of e)this.getRenderer(t).disposeTemplate(r.templateData),r.domNode=null,r.templateData=null}),this.cache.clear())}dispose(){this.garbageCollect(),this.cache.clear(),this.renderers=null}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var OC=Object.defineProperty,MC=Object.getOwnPropertyDescriptor,Or=(i,e,t,r)=>{for(var n=MC(e,t),s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&OC(e,t,n),n};const Ta={useShadows:!0,verticalScrollMode:Gi.Auto,setRowLineHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1};class gr{constructor(e,t,r,n=Ta){if(this.virtualDelegate=t,this.renderers=new Map,this.renderWidth=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new QD(50),this.splicing=!1,this.canUseTranslate3d=void 0,this._onDidChangeContentHeight=new ve,this.onDidChangeContentHeight=Ve.latch(this._onDidChangeContentHeight.event),n.horizontalScrolling&&n.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new fw;for(const s of r)this.renderers.set(s.templateId,s);this.cache=new IC(this.renderers),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="nila-list",wn(this.domNode,"mouse-support",typeof n.mouseSupport=="boolean"?n.mouseSupport:!0),this.horizontalScrolling=pu(n,s=>s.horizontalScrolling,Ta.horizontalScrolling),wn(this.domNode,"horizontal-scrolling",this.horizontalScrolling),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="nila-list-rows",Q0.addTarget(this.rowsContainer),this.scrollableElement=new SE(this.rowsContainer,{alwaysConsumeMouseWheel:!0,horizontal:this.horizontalScrolling?Gi.Auto:Gi.Hidden,vertical:pu(n,s=>s.verticalScrollMode,Ta.verticalScrollMode),useShadows:pu(n,s=>s.useShadows,Ta.useShadows)}),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.disposables=[this.rangeMap,this.gesture,this.scrollableElement,this.cache],this.onDidScroll=Ve.signal(this.scrollableElement.onScroll),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),dt(this.rowsContainer,$i.Change)(this.onTouchChange,this,this.disposables),dt(this.scrollableElement.getDomNode(),"scroll")(s=>s.target.scrollTop=0,null,this.disposables),this.setRowLineHeight=pu(n,s=>s.setRowLineHeight,Ta.setRowLineHeight),this.supportDynamicHeights=pu(n,s=>s.supportDynamicHeights,Ta.supportDynamicHeights),this.layout()}get contentHeight(){return this.rangeMap.size}splice(e,t,r=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,r)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,r=[]){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},o=Hi.intersect(n,s);for(let A=o.start;A<o.end;A++)this.removeItemFromDOM(A);const a={start:e+t,end:this.items.length},l=Hi.intersect(a,n),c=Hi.relativeComplement(a,n),h=r.map(A=>({id:String(this.itemId++),element:A,templateId:this.virtualDelegate.getTemplateId(A),size:this.virtualDelegate.getHeight(A),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(A),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Je.None}));let u;e===0&&t>=this.items.length?(this.rangeMap=new fw,this.rangeMap.splice(0,0,...h),this.items=h,u=[]):(this.rangeMap.splice(e,t,...h),u=this.items.splice(e,t,...h));const p=r.length-t,d=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),f=Y_(l,p),m=Hi.intersect(d,f);for(let A=m.start;A<m.end;A++)this.updateItemInDOM(this.items[A],A);const g=Hi.relativeComplement(f,d);for(const A of g)for(let w=A.start;w<A.end;w++)this.removeItemFromDOM(w);const _=c.map(A=>Y_(A,p)),y=[{start:e,end:e+r.length},..._].map(A=>Hi.intersect(d,A)),x=this.getNextToLastElement(y);for(const A of y)for(let w=A.start;w<A.end;w++)this.insertItemInDOM(w,x);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this.rerender(this.scrollTop,this.renderHeight),u.map(A=>A.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=V0(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){this.horizontalScrolling&&this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;this.items.length===0&&this.scrollableElement.setScrollDimensions({scrollWidth:0});let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e+10})}updateWidth(e){if(!this.horizontalScrolling||typeof this.scrollWidth>"u")return;const t=this.items[e];this.measureItemWidth(t),typeof t.width<"u"&&t.width>this.scrollWidth&&(this.scrollWidth=t.width,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth+10}))}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let r={height:typeof e=="number"?e:x2(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,r.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(r),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this.rerender(this.scrollTop,this.renderHeight),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:I_(this.domNode)}))}render(e,t,r,n){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o=this.getRenderRange(e,t),a=Hi.relativeComplement(o,s),l=Hi.relativeComplement(s,o),c=this.getNextToLastElement(a);for(const u of a)for(let p=u.start;p<u.end;p++)this.insertItemInDOM(p,c);for(const u of l)for(let p=u.start;p<u.end;p++)this.removeItemFromDOM(p);const h=!j0&&!c2&&tT()===0;if(h){const u=`translate3d(-${r}px, -${e}px, 0px)`;this.rowsContainer.style.transform=u,this.rowsContainer.style.webkitTransform=u,h!==this.canUseTranslate3d&&(this.rowsContainer.style.left="0",this.rowsContainer.style.top="0")}else this.rowsContainer.style.left=`-${r}px`,this.rowsContainer.style.top=`-${e}px`,h!==this.canUseTranslate3d&&(this.rowsContainer.style.transform="",this.rowsContainer.style.webkitTransform="");this.horizontalScrolling&&(this.rowsContainer.style.width=`${Math.max(n,this.renderWidth)}px`),this.canUseTranslate3d=h,this.lastRenderTop=e,this.lastRenderHeight=t}insertItemInDOM(e,t){const r=this.items[e];r.row||(r.row=this.cache.alloc(r.templateId)),r.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(r.row.domNode,t):this.rowsContainer.appendChild(r.row.domNode)),this.updateItemInDOM(r,e);const n=this.renderers.get(r.templateId);if(!n)throw new Error(`No renderer found for template id ${r.templateId}`);n&&n.renderElement(r.element,e,r.row.templateData),this.horizontalScrolling&&(this.measureItemWidth(r),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=I_(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,e.row.domNode.style.height=`${e.size}px`,this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("aria-setsize",`${this.length}`),e.row.domNode.setAttribute("aria-posinset",`${t+1}`),wn(e.row.domNode,"drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];t.dragStartDisposable.dispose();const r=this.renderers.get(t.templateId);r&&r.disposeElement&&r.disposeElement(t.element,e,t.row.templateData),this.cache.release(t.row),t.row=null,this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)}get onMouseClick(){return Ve.map(dt(this.domNode,"click"),e=>this.toMouseEvent(e))}get onMouseDblClick(){return Ve.map(dt(this.domNode,"dblclick"),e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return Ve.filter(Ve.map(dt(this.domNode,"auxclick"),e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseUp(){return Ve.map(dt(this.domNode,"mouseup"),e=>this.toMouseEvent(e))}get onMouseDown(){return Ve.map(dt(this.domNode,"mousedown"),e=>this.toMouseEvent(e))}get onMouseOver(){return Ve.map(dt(this.domNode,"mouseover"),e=>this.toMouseEvent(e))}get onMouseMove(){return Ve.map(dt(this.domNode,"mousemove"),e=>this.toMouseEvent(e))}get onMouseOut(){return Ve.map(dt(this.domNode,"mouseout"),e=>this.toMouseEvent(e))}get onContextMenu(){return Ve.map(dt(this.domNode,"contextmenu"),e=>this.toMouseEvent(e))}get onTouchStart(){return Ve.map(dt(this.domNode,"touchstart"),e=>this.toTouchEvent(e))}get onTap(){return Ve.map(dt(this.rowsContainer,$i.Tap),e=>this.toGestureEvent(e))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),r=typeof t>"u"?void 0:this.items[t],n=r&&r.element;return{browserEvent:e,index:t,element:n}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),r=typeof t>"u"?void 0:this.items[t],n=r&&r.element;return{browserEvent:e,index:t,element:n}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),r=typeof t>"u"?void 0:this.items[t],n=r&&r.element;return{browserEvent:e,index:t,element:n}}onScroll(e){try{this.render(e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this.rerender(e.scrollTop,e.height)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}getItemIndexFromEventTarget(e){let t=e;for(;t instanceof HTMLElement&&t!==this.rowsContainer;){const r=t.getAttribute("data-index");if(r){const n=Number(r);if(!isNaN(n))return n}t=t.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}rerender(e,t){const r=this.getRenderRange(e,t);let n,s;e===this.elementTop(r.start)?(n=r.start,s=0):r.end-r.start>1&&(n=r.start+1,s=this.elementTop(n)-e);let o=0;for(;;){const a=this.getRenderRange(e,t);let l=!1;for(let c=a.start;c<a.end;c++){const h=this.probeDynamicHeight(c);h!==0&&this.rangeMap.splice(c,1,this.items[c]),o+=h,l=l||h!==0}if(!l){o!==0&&this.eventuallyUpdateScrollDimensions();const c=Hi.relativeComplement(r,a);for(const u of c)for(let p=u.start;p<u.end;p++)this.items[p].row&&this.removeItemFromDOM(p);const h=Hi.relativeComplement(a,r);for(const u of h)for(let p=u.start;p<u.end;p++){const d=p+1,f=d<this.items.length?this.items[d].row:null,m=f?f.domNode:null;this.insertItemInDOM(p,m)}for(let u=a.start;u<a.end;u++)this.items[u].row&&this.updateItemInDOM(this.items[u],u);typeof n=="number"&&(this.scrollTop=this.elementTop(n)-s),this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth)return 0;const r=t.size,n=this.renderers.get(t.templateId),s=this.cache.alloc(t.templateId);return s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode),n&&n.renderElement(t.element,e,s.templateData),t.size=s.domNode.offsetHeight,t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(s.domNode),this.cache.release(s),t.size-r}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const r=this.items[t.end];return!r||!r.row?null:r.row.domNode}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&t.disposeTemplate(e.row.templateData)}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.disposables=ye(this.disposables)}}Or([ii],gr.prototype,"onMouseClick");Or([ii],gr.prototype,"onMouseDblClick");Or([ii],gr.prototype,"onMouseMiddleClick");Or([ii],gr.prototype,"onMouseUp");Or([ii],gr.prototype,"onMouseDown");Or([ii],gr.prototype,"onMouseOver");Or([ii],gr.prototype,"onMouseMove");Or([ii],gr.prototype,"onMouseOut");Or([ii],gr.prototype,"onContextMenu");Or([ii],gr.prototype,"onTouchStart");Or([ii],gr.prototype,"onTap");class NC{constructor(e){this.spliceables=e}splice(e,t,r){this.spliceables.forEach(n=>n.splice(e,t,r))}}function RC(i,e,t){return Math.min(Math.max(i,e),t)}function LC(i){const e=[];return i.forEach(t=>e.push(t)),e}function kC(i){const e=[];return i.forEach((t,r)=>e.push(r)),e}class xp{constructor(){this.map=new Map,this.ignoreCase=!1}set(e,t){this.map.set(this.toKey(e),t)}get(e){return this.map.get(this.toKey(e))}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e){this.map.forEach(e)}values(){return LC(this.map)}toKey(e){let t=e.toString();return this.ignoreCase&&(t=t.toLowerCase()),t}keys(){return kC(this.map).map(e=>_f.parse(e))}clone(){const e=new xp;return this.map.forEach((t,r)=>e.map.set(r,t)),e}}class BC{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e,t=0){const r=this._map.get(e);if(r)return t!==0&&this.touch(r,t),r.value}set(e,t,r=0){let n=this._map.get(e);if(n)n.value=t,r!==0&&this.touch(n,r);else{switch(n={key:e,value:t,next:void 0,previous:void 0},r){case 0:this.addItemLast(n);break;case 1:this.addItemFirst(n);break;case 2:this.addItemLast(n);break;default:this.addItemLast(n);break}this._map.set(e,n),this._size++}}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._head;for(;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.next}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0)}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const r=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(r.previous=n,n.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===2){if(e===this._tail)return;const r=e.next,n=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=n,n.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}toJSON(){const e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(const[t,r]of e)this.set(t,r)}}class FC extends BC{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e){return super.get(e,2)}peek(e){return super.get(e,0)}set(e,t){super.set(e,t,2),this.checkTrim()}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}PE.bind(void 0,!1);const UC=PE.bind(void 0,!0);function PE(i,e,t){if(!t||t.length<e.length)return null;let r;return i?r=r2(t,e):r=t.indexOf(e)===0,r?e.length>0?[{start:0,end:e.length}]:[]:null}new FC(1e4);function Ny(){const i=[],e=[0];for(let t=1;t<=100;t++)e.push(-t);for(let t=0;t<=100;t++){let r=e.slice(0);r[0]=-t,i.push(r)}return i}Ny();Ny();Ny();var KC=Object.defineProperty,HC=Object.getOwnPropertyDescriptor,Oc=(i,e,t,r)=>{for(var n=HC(e,t),s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&KC(e,t,n),n};class zC{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,r){const n=cs(this.renderedElements,s=>s.templateData===r);if(n>=0){const s=this.renderedElements[n];this.trait.unrender(r),s.index=t}else{const s={index:t,templateData:r};this.renderedElements.push(s)}this.trait.renderIndex(t,r)}splice(e,t,r){const n=[];for(const s of this.renderedElements)s.index<e?n.push(s):s.index>=e+t&&n.push({index:s.index+r-t,templateData:s.templateData});this.renderedElements=n}renderIndexes(e){for(const{index:t,templateData:r}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,r)}disposeTemplate(e){const t=cs(this.renderedElements,r=>r.templateData===e);t<0||this.renderedElements.splice(t,1)}}class Ry{constructor(e){this._trait=e,this._onChange=new ve,this.indexes=[]}get onChange(){return this._onChange.event}get trait(){return this._trait}get renderer(){return new zC(this)}splice(e,t,r){const n=r.length-t,s=e+t,o=[...this.indexes.filter(a=>a<e),...r.map((a,l)=>a?l+e:-1).filter(a=>a!==-1),...this.indexes.filter(a=>a>=s).map(a=>a+n)];this.renderer.splice(e,t,r.length),this.set(o)}renderIndex(e,t){wn(t,this._trait,this.contains(e))}unrender(e){ut(e,this._trait)}set(e,t){const r=this.indexes;this.indexes=e;const n=q_(r,e);return this.renderer.renderIndexes(n),this._onChange.fire({indexes:e,browserEvent:t}),r}get(){return this.indexes}contains(e){return this.indexes.some(t=>t===e)}dispose(){this._onChange=ye(this._onChange)}}Oc([ii],Ry.prototype,"renderer");class jC extends Ry{constructor(e){super("focused"),this.getDomId=e}renderIndex(e,t){super.renderIndex(e,t),t.setAttribute("role","treeitem"),t.setAttribute("id",this.getDomId(e)),this.contains(e)?t.setAttribute("aria-selected","true"):t.removeAttribute("aria-selected")}}class pw{constructor(e,t,r){this.trait=e,this.view=t,this.identityProvider=r}splice(e,t,r){if(!this.identityProvider)return this.trait.splice(e,t,r.map(()=>!1));const n=this.trait.get().map(o=>this.identityProvider.getId(this.view.element(o)).toString()),s=r.map(o=>n.indexOf(this.identityProvider.getId(o).toString())>-1);this.trait.splice(e,t,s)}}function ac(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}class $C{constructor(e,t,r){this.list=e,this.view=t;const n=r.multipleSelectionSupport!==!1;this.disposables=[],this.openController=r.openController||ME;const s=Ve.chain(dt(t.domNode,"keydown")).filter(o=>!ac(o.target)).map(o=>new _i(o));s.filter(o=>o.keyCode===E.Enter).on(this.onEnter,this,this.disposables),s.filter(o=>o.keyCode===E.UpArrow).on(this.onUpArrow,this,this.disposables),s.filter(o=>o.keyCode===E.DownArrow).on(this.onDownArrow,this,this.disposables),s.filter(o=>o.keyCode===E.PageUp).on(this.onPageUpArrow,this,this.disposables),s.filter(o=>o.keyCode===E.PageDown).on(this.onPageDownArrow,this,this.disposables),s.filter(o=>o.keyCode===E.Escape).on(this.onEscape,this,this.disposables),n&&s.filter(o=>(en?o.metaKey:o.ctrlKey)&&o.keyCode===E.KEY_A).on(this.onCtrlA,this,this.disposables)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent),this.openController.shouldOpen(e.browserEvent)&&this.list.open(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent),this.list.reveal(this.list.getFocus()[0]),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(_2(this.list.length),e.browserEvent),this.view.domNode.focus()}onEscape(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.view.domNode.focus()}dispose(){this.disposables=ye(this.disposables)}}function VC(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=E.KEY_A&&i.keyCode<=E.KEY_Z||i.keyCode>=E.KEY_0&&i.keyCode<=E.KEY_9||i.keyCode>=E.US_SEMICOLON&&i.keyCode<=E.US_QUOTE}class WC{constructor(e,t,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=r,this.enabled=!1,this.state=0,this.enabledDisposables=[],this.disposables=[],e.onDidUpdateOptions(this.onDidUpdateListOptions,this,this.disposables),this.onDidUpdateListOptions(e.options)}onDidUpdateListOptions(e){(typeof e.enableKeyboardNavigation>"u"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable()}enable(){if(this.enabled)return;const e=Ve.chain(dt(this.view.domNode,"keydown")).filter(n=>!ac(n.target)).map(n=>new _i(n)).filter(this.keyboardNavigationLabelProvider.mightProducePrintableCharacter?n=>this.keyboardNavigationLabelProvider.mightProducePrintableCharacter(n):n=>VC(n)).map(n=>n.browserEvent.key).event,t=Ve.debounce(e,()=>null,800);Ve.reduce(Ve.any(e,t),(n,s)=>s===null?null:(n||"")+s)(this.onInput,this,this.enabledDisposables),this.enabled=!0}disable(){this.enabled&&(this.enabledDisposables=ye(this.enabledDisposables),this.enabled=!1)}onInput(e){if(!e){this.state=0;return}const t=this.list.getFocus(),r=t.length>0?t[0]:0,n=this.state===0?1:0;this.state=1;for(let s=0;s<this.list.length;s++){const o=(r+s+n)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(typeof l>"u"||UC(e,l)){this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.disposables=ye(this.disposables)}}class GC{constructor(e,t){this.list=e,this.view=t,this.disposables=[],this.disposables=[],Ve.chain(dt(t.domNode,"keydown")).filter(n=>!ac(n.target)).map(n=>new _i(n)).filter(n=>n.keyCode===E.Tab&&!n.ctrlKey&&!n.metaKey&&!n.shiftKey&&!n.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const r=this.view.domElement(t[0]);if(!r)return;const n=r.querySelector("[tabIndex]");if(!n||!(n instanceof HTMLElement)||n.tabIndex===-1)return;const s=window.getComputedStyle(n);s.visibility==="hidden"||s.display==="none"||(e.preventDefault(),e.stopPropagation(),n.focus())}dispose(){this.disposables=ye(this.disposables)}}function YC(i){return en?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function qC(i){return i.browserEvent.shiftKey}function IE(i){return i instanceof MouseEvent&&i.button===2}const OE={isSelectionSingleChangeEvent:YC,isSelectionRangeChangeEvent:qC},ME={shouldOpen:i=>i instanceof MouseEvent?!IE(i):!0};class XC{constructor(e,t,r={}){this.list=e,this.view=t,this.disposables=[],this.multipleSelectionSupport=r.multipleSelectionSupport!==!1,this.multipleSelectionSupport&&(this.multipleSelectionController=r.multipleSelectionController||OE),this.openController=r.openController||ME,t.onMouseDown(this.onMouseDown,this,this.disposables),t.onContextMenu(this.onContextMenu,this,this.disposables),t.onMouseClick(this.onPointer,this,this.disposables),e.onMouseMiddleClick(this.onPointer,this,this.disposables),t.onMouseDblClick(this.onDoubleClick,this,this.disposables),t.onTouchStart(this.onMouseDown,this,this.disposables),t.onTap(this.onPointer,this,this.disposables),Q0.addTarget(t.domNode)}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):en?e.browserEvent.metaKey:e.browserEvent.ctrlKey}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):e.browserEvent.shiftKey}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){document.activeElement!==e.browserEvent.target&&this.view.domNode.focus()}onContextMenu(e){const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onPointer(e){if(ac(e.browserEvent.target))return;let t=this.list.getFocus()[0];const r=this.list.getSelection();t=t===void 0?r[0]:t;const n=e.index;if(typeof n>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent);return}if(this.multipleSelectionSupport&&this.isSelectionRangeChangeEvent(e))return this.changeSelection(e,t);if(this.multipleSelectionSupport&&this.isSelectionChangeEvent(e))return this.changeSelection(e,t);this.list.setFocus([n],e.browserEvent),IE(e.browserEvent)||(this.list.setSelection([n],e.browserEvent),this.openController.shouldOpen(e.browserEvent)&&this.list.open([n],e.browserEvent))}onDoubleClick(e){if(ac(e.browserEvent.target)||this.multipleSelectionSupport&&this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent),this.list.pin(t)}changeSelection(e,t){const r=e.index;if(this.isSelectionRangeChangeEvent(e)&&t!==void 0){const n=Math.min(t,r),s=Math.max(t,r),o=_2(n,s+1),a=this.list.getSelection(),l=e8(q_(a,[t]),t);if(l.length===0)return;const c=q_(o,t8(a,l));this.list.setSelection(c,e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const n=this.list.getSelection(),s=n.filter(o=>o!==r);n.length===s.length?this.list.setSelection([...s,r],e.browserEvent):this.list.setSelection(s,e.browserEvent)}}dispose(){this.disposables=ye(this.disposables)}}class ZC{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix?`.${this.selectorSuffix}`:"",r=[];e.listFocusBackground&&(r.push(`.nila-list${t}:focus .nila-list-row.focused { background-color: ${e.listFocusBackground}; }`),r.push(`.nila-list${t}:focus .nila-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&r.push(`.nila-list${t}:focus .nila-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(r.push(`.nila-list${t}:focus .nila-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),r.push(`.nila-list${t}:focus .nila-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&r.push(`.nila-list${t}:focus .nila-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listFocusAndSelectionBackground&&r.push(`
				.nila-list-drag-image,
				.nila-list${t}:focus .nila-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&r.push(`
				.nila-list-drag-image,
				.nila-list${t}:focus .nila-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusBackground&&(r.push(`.nila-list${t} .nila-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),r.push(`.nila-list${t} .nila-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(r.push(`.nila-list${t} .nila-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),r.push(`.nila-list${t} .nila-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&r.push(`.nila-list${t} .nila-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&r.push(`.nila-list${t}:not(.drop-target) .nila-list-row:hover:not(.selected):not(.focused) { background-color:  ${e.listHoverBackground}; }`),e.listHoverForeground&&r.push(`.nila-list${t} .nila-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&r.push(`.nila-list${t} .nila-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&r.push(`
				.nila-list-drag-image,
				.nila-list${t}:focus .nila-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&r.push(`.nila-list${t} .nila-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&r.push(`.nila-list${t} .nila-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&r.push(`
				.nila-list${t}.drop-target,
				.nila-list${t} .nila-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&r.push(`.nila-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&r.push(`.nila-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&r.push(`.nila-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&r.push(`.nila-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`);const n=r.join(`
`);n!==this.styleElement.innerHTML&&(this.styleElement.innerHTML=n)}}const QC={listFocusBackground:We.fromHex("#073655"),listActiveSelectionBackground:We.fromHex("#0E639C"),listActiveSelectionForeground:We.fromHex("#FFFFFF"),listFocusAndSelectionBackground:We.fromHex("#094771"),listFocusAndSelectionForeground:We.fromHex("#FFFFFF"),listInactiveSelectionBackground:We.fromHex("#3F3F46"),listHoverBackground:We.fromHex("#4f5253"),listDropBackground:We.fromHex("#383B3D")},JC={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},ariaRootRole:CE.TREE};function e8(i,e){const t=i.indexOf(e);if(t===-1)return[];const r=[];let n=t-1;for(;n>=0&&i[n]===e-(t-n);)r.push(i[n--]);for(r.reverse(),n=t;n<i.length&&i[n]===e+(n-t);)r.push(i[n++]);return r}function q_(i,e){const t=[];let r=0,n=0;for(;r<i.length||n<e.length;)if(r>=i.length)t.push(e[n++]);else if(n>=e.length)t.push(i[r++]);else if(i[r]===e[n]){t.push(i[r]),r++,n++;continue}else i[r]<e[n]?t.push(i[r++]):t.push(e[n++]);return t}function t8(i,e){const t=[];let r=0,n=0;for(;r<i.length||n<e.length;)if(r>=i.length)t.push(e[n++]);else if(n>=e.length)t.push(i[r++]);else if(i[r]===e[n]){r++,n++;continue}else i[r]<e[n]?t.push(i[r++]):n++;return t}const mw=(i,e)=>i-e;class i8{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,r){let n=0;for(const s of this.renderers)s.renderElement(e,t,r[n++])}disposeElement(e,t,r){let n=0;for(const s of this.renderers)s.disposeElement&&s.disposeElement(e,t,r[n]),n+=1}disposeTemplate(e){let t=0;for(const r of this.renderers)r.disposeTemplate(e[t++])}}class r8{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,r){const n=this.accessibilityProvider.getAriaLabel(e);n?r.setAttribute("aria-label",n):r.removeAttribute("aria-label");const s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?r.setAttribute("aria-level",`${s}`):r.removeAttribute("aria-level")}disposeTemplate(e){}}var eo;const Mc=(eo=class{constructor(e,t,r,n=JC){this._options=n,this.idPrefix=`list_id_${++eo.InstanceCount}`,this.eventBufferer=new XD,this._onDidUpdateOptions=new ve,this.onDidUpdateOptions=this._onDidUpdateOptions.event,this._onDidOpen=new ve,this.onDidOpen=this._onDidOpen.event,this._onPin=new ve,this.didJustPressContextMenuKey=!1,this._onDidDispose=new ve,this.focus=new jC(a=>this.getElementDomId(a)),this.selection=new Ry("selected"),ly(n,QC,!1);const s=[this.focus.renderer,this.selection.renderer];n.accessibilityProvider&&s.push(new r8(n.accessibilityProvider)),r=r.map(a=>new i8(a.templateId,[...s,a]));const o={...n};if(this.view=new gr(e,t,r,o),Pe(this.view.domNode,this.idPrefix),this.view.domNode.tabIndex=0,this.styleElement=b2(this.view.domNode),this.styleController=n.styleController||new ZC(this.styleElement,this.idPrefix),this.spliceable=new NC([new pw(this.focus,this.view,n.identityProvider),new pw(this.selection,this.view,n.identityProvider),this.view]),this.disposables=[this.focus,this.selection,this.view,this._onDidDispose],this.onDidFocus=Ve.map(dt(this.view.domNode,"focus",!0),()=>null),this.onDidBlur=Ve.map(dt(this.view.domNode,"blur",!0),()=>null),this.disposables.push(new GC(this,this.view)),typeof n.keyboardSupport!="boolean"||n.keyboardSupport){const a=new $C(this,this.view,n);this.disposables.push(a)}if(n.keyboardNavigationLabelProvider){const a=new WC(this,this.view,n.keyboardNavigationLabelProvider);this.disposables.push(a)}(typeof n.mouseSupport!="boolean"||n.mouseSupport)&&(this.mouseController=new XC(this,this.view,n),this.disposables.push(this.mouseController)),this.onFocusChange(this._onFocusChange,this,this.disposables),this.onSelectionChange(this._onSelectionChange,this,this.disposables),this.style(n)}get multipleSelectionController(){return this.mouseController&&this.mouseController.multipleSelectionController||OE}get onFocusChange(){return Ve.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onSelectionChange(){return Ve.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get onPin(){return Ve.map(this._onPin.event,e=>this.toListEvent({indexes:e}))}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){const e=Ve.chain(dt(this.view.domNode,"keydown")).map(n=>new _i(n)).filter(n=>this.didJustPressContextMenuKey=n.keyCode===E.ContextMenu||n.shiftKey&&n.keyCode===E.F10).filter(n=>(n.preventDefault(),n.stopPropagation(),!1)).map(n=>{const s=this.getFocus()[0],o=this.view.element(s),a=this.view.domElement(s)||void 0;return{index:s,element:o,anchor:a,browserEvent:n.browserEvent}}).event,t=Ve.chain(dt(this.view.domNode,"keyup")).filter(()=>{const n=this.didJustPressContextMenuKey;return this.didJustPressContextMenuKey=!1,n}).filter(()=>this.getFocus().length>0).map(n=>{const s=this.getFocus()[0],o=this.view.element(s),a=this.view.domElement(s)||void 0;return{index:s,element:o,anchor:a,browserEvent:n}}).filter(({anchor:n})=>!!n).event,r=Ve.chain(this.view.onContextMenu).filter(()=>!this.didJustPressContextMenuKey).map(({element:n,index:s,browserEvent:o})=>({element:n,index:s,anchor:{x:o.clientX+1,y:o.clientY},browserEvent:o})).event;return Ve.any(e,t,r)}get onKeyDown(){return dt(this.view.domNode,"keydown")}get onKeyUp(){return dt(this.view.domNode,"keyup")}get onKeyPress(){return dt(this.view.domNode,"keypress")}get onDidDispose(){return this._onDidDispose.event}updateOptions(e={}){this._options={...this._options,...e},this._onDidUpdateOptions.fire(this._options)}get options(){return this._options}splice(e,t,r=[]){if(e<0||e>this.view.length)throw new Error(`Invalid start index: ${e}`);if(t<0)throw new Error(`Invalid delete count: ${t}`);t===0&&r.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,r))}updateWidth(e){this.view.updateWidth(e)}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}domFocus(){this.view.domNode.focus()}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const r of e)if(r<0||r>=this.length)throw new Error(`Invalid index ${r}`);e=e.sort(mw),this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setFocus(e,t){for(const r of e)if(r<0||r>=this.length)throw new Error(`Invalid index ${r}`);e=e.sort(mw),this.focus.set(e,t)}focusNext(e=1,t=!1,r,n){if(this.length===0)return;const s=this.focus.get(),o=this.findNextIndex(s.length>0?s[0]+e:0,t,n);o>-1&&this.setFocus([o],r)}focusPrevious(e=1,t=!1,r,n){if(this.length===0)return;const s=this.focus.get(),o=this.findPreviousIndex(s.length>0?s[0]-e:0,t,n);o>-1&&this.setFocus([o],r)}focusNextPage(e,t){let r=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);r=r===0?0:r-1;const n=this.view.element(r),s=this.getFocusedElements()[0];if(s!==n){const o=this.findPreviousIndex(r,!1,t);o>-1&&s!==this.view.element(o)?this.setFocus([o],e):this.setFocus([r],e)}else{const o=this.view.getScrollTop();this.view.setScrollTop(o+this.view.renderHeight-this.view.elementHeight(r)),this.view.getScrollTop()!==o&&setTimeout(()=>this.focusNextPage(e,t),0)}}focusPreviousPage(e,t){let r;const n=this.view.getScrollTop();n===0?r=this.view.indexAt(n):r=this.view.indexAfter(n-1);const s=this.view.element(r),o=this.getFocusedElements()[0];if(o!==s){const a=this.findNextIndex(r,!1,t);a>-1&&o!==this.view.element(a)?this.setFocus([a],e):this.setFocus([r],e)}else{const a=n;this.view.setScrollTop(n-this.view.renderHeight),this.view.getScrollTop()!==a&&setTimeout(()=>this.focusPreviousPage(e,t),0)}}focusLast(e,t){if(this.length===0)return;const r=this.findPreviousIndex(this.length-1,!1,t);r>-1&&this.setFocus([r],e)}focusFirst(e,t){if(this.length===0)return;const r=this.findNextIndex(0,!1,t);r>-1&&this.setFocus([r],e)}findNextIndex(e,t=!1,r){for(let n=0;n<this.length;n++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!r||r(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,r){for(let n=0;n<this.length;n++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!r||r(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new Error(`Invalid index ${e}`);const r=this.view.getScrollTop(),n=this.view.elementTop(e),s=this.view.elementHeight(e);if(ll(t)){const o=s-this.view.renderHeight;this.view.setScrollTop(o*RC(t,0,1)+n)}else{const o=n+s,a=r+this.view.renderHeight;n<r?this.view.setScrollTop(n):o>=a&&this.view.setScrollTop(o-this.view.renderHeight)}}getRelativeTop(e){if(e<0||e>=this.length)throw new Error(`Invalid index ${e}`);const t=this.view.getScrollTop(),r=this.view.elementTop(e),n=this.view.elementHeight(e);if(r<t||r+n>t+this.view.renderHeight)return null;const s=n-this.view.renderHeight;return Math.abs((t-r)/s)}getElementDomId(e){return`${this.idPrefix}_${e}`}isDOMFocused(){return this.view.domNode===document.activeElement}getHTMLElement(){return this.view.domNode}open(e,t){for(const r of e)if(r<0||r>=this.length)throw new Error(`Invalid index ${r}`);this._onDidOpen.fire({indexes:e,elements:e.map(r=>this.view.element(r)),browserEvent:t})}pin(e){for(const t of e)if(t<0||t>=this.length)throw new Error(`Invalid index ${t}`);this._onPin.fire(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(r=>this.view.element(r)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();e.length>0?this.view.domNode.setAttribute("aria-activedescendant",this.getElementDomId(e[0])):this.view.domNode.removeAttribute("aria-activedescendant"),this.view.domNode.setAttribute("role","tree"),wn(this.view.domNode,"element-focused",e.length>0)}_onSelectionChange(){const e=this.selection.get();wn(this.view.domNode,"selection-none",e.length===0),wn(this.view.domNode,"selection-single",e.length===1),wn(this.view.domNode,"selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables=ye(this.disposables),this._onDidOpen.dispose(),this._onPin.dispose(),this._onDidDispose.dispose()}},eo.InstanceCount=0,eo);Oc([ii],Mc.prototype,"onFocusChange");Oc([ii],Mc.prototype,"onSelectionChange");Oc([ii],Mc.prototype,"onPin");Oc([ii],Mc.prototype,"onContextMenu");let n8=Mc;const je=Et("themeService"),NE={ThemingContribution:"base.contributions.theming"};class s8{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new ve}onThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),{dispose:()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)}}}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}}let o8=new s8;Qe.add(NE.ThemingContribution,o8);function a8(i,e){const t=Object.create(null);for(let r in e){const n=e[r];typeof n=="string"?t[r]=i.getColor(n):typeof n=="function"&&(t[r]=n(i))}return t}function l8(i,e,t){function r(n){const s=a8(i.getTheme(),e);typeof t=="function"?t(s):t.style(s)}return r(i.getTheme()),i.onThemeChange(r)}function u8(i,e,t){return l8(e,ly(Object.create(null),h8,!1),i)}const h8={listFocusBackground:j_,listFocusForeground:x5,listActiveSelectionBackground:yE(Df,.1),listActiveSelectionForeground:Tf,listFocusAndSelectionBackground:Df,listFocusAndSelectionForeground:Tf,listInactiveSelectionBackground:w5,listInactiveSelectionForeground:b5,listInactiveFocusBackground:S5,listHoverBackground:E5,listHoverForeground:A5,listDropBackground:D5,listFocusOutline:vg,listSelectionOutline:vg,listHoverOutline:vg,listFilterWidgetBackground:T5,listFilterWidgetOutline:C5,listFilterWidgetNoMatchesOutline:P5,listMatchesShadow:y5};var c8=Object.defineProperty,d8=Object.getOwnPropertyDescriptor,f8=(i,e,t,r)=>{for(var n=r>1?void 0:r?d8(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&c8(e,t,n),n},gw=(i,e)=>(t,r)=>e(t,r,i);const p8=12;class m8{get templateId(){return"suggestion"}renderTemplate(e){const t=Object.create(null);t.disposables=[],t.root=e;const r=Wi(e,oi(".contents")),n=Wi(r,oi(".main"));return t.content=Wi(n,oi("span.label")),t}renderElement(e,t,r){const n=r,s=e.suggestion;n.content.textContent=s.text}disposeElement(){}disposeTemplate(e){e.disposables=ye(e.disposables)}}var nl;let Mf=(nl=class{constructor(e,t,r,n){this.chart=e,this.positionAccessor=t,this.ignoreFocusEvents=!1,this.chartBlurTimeout=new ul,this.showTimeout=new ul,this.onDidSelectEmitter=new ve,this.onDidFocusEmitter=new ve,this.onDidHideEmitter=new ve,this.onDidShowEmitter=new ve,this.onDidSelect=this.onDidSelectEmitter.event,this.onDidFocus=this.onDidFocusEmitter.event,this.onDidHide=this.onDidHideEmitter.event,this.onDidShow=this.onDidShowEmitter.event,this.isAuto=!1,this.focusedItem=null,this.element=oi(".suggest-widget"),this.messageElement=Wi(this.element,oi(".message")),this.listElement=Wi(this.element,oi(".tree"));let s=new m8;this.list=new n8(this.listElement,this,[s],{useShadows:!1,mouseSupport:!0,openController:{shouldOpen:()=>!1},horizontalScrolling:!0}),window.list=this.list,this.toDispose=[u8(this.list,n),this.chart.onBlur(this.onChartBlur.bind(this)),this.list.onSelectionChange(o=>this.onListSelection(o)),this.list.onFocusChange(o=>this.onListFocus(o))],this.suggestWidgetVisible=bC.Visible.bindTo(r),this.chart.addContentWidget(this),this.setState(0)}onChartBlur(){this.chartBlurTimeout.cancelAndSet(()=>{this.setState(0)},150)}onListSelection(e){if(!e.elements.length)return;const t=e.elements[0],r=e.indexes[0];this.onDidSelectEmitter.fire({item:t,index:r})}onListFocus(e){if(this.ignoreFocusEvents||!e.elements.length)return;const t=e.elements[0];if(t===this.focusedItem)return;const r=e.indexes[0];this.focusedItem=t,this.list.reveal(r),this.list.updateWidth(r),this.onDidFocusEmitter.fire({item:t,index:r})}setState(e){if(!this.element)return;const t=this.state!==e;switch(this.state=e,e){case 0:Gr(this.messageElement,this.listElement),this.hide(),this.listHeight=0,t&&this.list.splice(0,this.list.length),this.focusedItem=null;break;case 1:Gr(this.listElement),rs(this.messageElement),ut(this.element,"docs-side"),this.show(),this.focusedItem=null;break;case 2:Gr(this.listElement),rs(this.messageElement),ut(this.element,"docs-side"),this.show(),this.focusedItem=null;break;case 3:Gr(this.messageElement),rs(this.listElement),this.show();break}}showTriggered(e){this.state===0&&(this.isAuto=!!e,this.isAuto||(this.loadingTimeout=setTimeout(()=>{this.loadingTimeout=null,this.setState(1)},50)))}showItems(e){this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=null),e.length===0?this.setState(2):(this.list.splice(0,this.list.length,e),this.setState(3),this.list.reveal(0,0))}getFocusedItem(){if(this.state!==0&&this.state!==2&&this.state!==1)return{item:this.list.getFocusedElements()[0],index:this.list.getFocus()[0]}}show(){const e=this.updateListHeight();e!==this.listHeight&&(this.chart.layoutContentWidget(this),this.listHeight=e),this.suggestWidgetVisible.set(!0),this.showTimeout.cancelAndSet(()=>{this.element.style.visibility="visible",this.list.updateWidth(0),this.onDidShowEmitter.fire(this)},100)}hide(){this.suggestWidgetVisible.reset(),this.element.style.visibility="hidden"}hideWidget(){this.state!==0&&(clearTimeout(this.loadingTimeout),this.setState(0),this.onDidHideEmitter.fire(this))}getPosition(){return this.state===0?null:{position:this.positionAccessor?this.positionAccessor():this.chart.cursor.getPosition(),preference:[oc.BELOW,oc.ABOVE]}}getDomNode(){return this.element}getId(){return Mf.ID}updateListHeight(){let e=0;if(this.state===2||this.state===1)e=this.unfocusedHeight;else{const t=this.list.contentHeight/this.unfocusedHeight;e=Math.min(t,p8)*this.unfocusedHeight}return this.element.style.lineHeight=`${this.unfocusedHeight}px`,this.listElement.style.height=`${e}px`,this.listElement.style.width="270px",this.list.layout(e,270),e}get unfocusedHeight(){return 16}getHeight(e){return this.unfocusedHeight}getTemplateId(e){return"suggestion"}dispose(){this.state=null,this.focusedItem=null,this.element=null,this.messageElement=null,this.listElement=null,this.list.dispose(),this.list=null,this.toDispose=ye(this.toDispose),this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=null),this.chartBlurTimeout.dispose(),this.showTimeout.dispose()}},nl.ID="chart.widget.suggestWidget",nl);Mf=f8([gw(2,mr),gw(3,je)],Mf);class g8{constructor(e){this._toDispose=[],this._onDidCancel=new ve,this._onDidTrigger=new ve,this.onDidTrigger=this._onDidTrigger.event,this.onDidCancel=this._onDidCancel.event,this.state=0,this._chart=e,this._toDispose.push(this._chart.onMouseMove(t=>this._onChartMouseMove(t))),this._toDispose.push(this._chart.onMouseDown(()=>this.cancel(!1)))}dispose(){ye([this._onDidCancel,this._onDidTrigger]),this._toDispose=ye(this._toDispose),this.cancel()}_onChartMouseMove(e){if(this._chart.inDrawingMode.get())return;let t=e.targetType,r=this._chart.dataScourceName;if(t===$t.ORDER){let n=e.targetElement;this.state===0?(this._triggedId=e.targetElement.id,this.trigger({triggerKey:this._triggedId,dsName:r,x:n.x,y:n.y})):this._triggedId!==e.targetElement.id&&(this._triggedId=e.targetElement.id,this.cancel(!0),this.trigger({triggerKey:this._triggedId,dsName:r,x:n.x,y:n.y}))}else!this.stickyTimer&&this.state===2&&(this.state=3,this.stickyTimer=setInterval(()=>{this._chart.cursor.mouseTarget!==$t.CONTENT_WIDGET&&this.cancel(!1)},300))}cancel(e=!1){this.stickyTimer&&(clearInterval(this.stickyTimer),this.stickyTimer=null),this.state=0,this._onDidCancel.fire({retrigger:e})}async trigger(e,t=!1){this.cancel(t),this._requestToken=new l2;let r=await EC(e,this._requestToken.token);ye(this._requestToken),this.state===0&&(this.state=2,this._onDidTrigger.fire({items:r,x:e.x,y:e.y}))}}var _8=Object.defineProperty,v8=Object.getOwnPropertyDescriptor,y8=(i,e,t,r)=>{for(var n=r>1?void 0:r?v8(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&_8(e,t,n),n},_w=(i,e)=>(t,r)=>e(t,r,i),sl;let Bo=(sl=class{constructor(e,t){this._chart=e,this._instantiationService=t,this._model=new g8(e),this._toUnhook=[],this._hookEvents()}static get(e){return e.getContribution(Bo.ID)}_hookEvents(){this._model.onDidCancel(e=>{e.retrigger||this._hideWidgets()}),this._model.onDidTrigger(e=>{this._contentWidget||this._createContentWidget(),this._position={top:e.y,left:e.x},this._contentWidget.showItems(e.items)})}show(e,t,r){this._position={top:r,left:t},this._contentWidget||this._createContentWidget(),this._contentWidget.showItems(e)}_unhookEvents(){ye(this._toUnhook),this._toUnhook.length=0}_hideWidgets(){this._contentWidget&&this._contentWidget.hideWidget()}positionAccessor(){return this._position}_createContentWidget(){this._contentWidget=this._instantiationService.createInstance(Mf,this._chart,()=>this.positionAccessor()),this._toUnhook.push(this._contentWidget.onDidSelect(this._onDidSelectItem,this))}_onDidSelectItem(e){if(!e||!e.item||!e.item.resolve){this._model.cancel();return}e.item.resolve(qh.None).then(()=>{this._contentWidget.hideWidget()})}get id(){return Bo.ID}dispose(){this._unhookEvents(),this._contentWidget&&(this._contentWidget.dispose(),this._contentWidget=null)}},sl.ID="chart.contrib.hover",sl);Bo=y8([_w(0,gt),_w(1,Nt)],Bo);fy(Bo);Rt.registerCommand("workbench.action.highlightOrder",function(i,e,t,r){let n=e.select(o=>o.id===t);if(!n)return;e.getContribution(Bo.ID).show(r,n.x,n.y)});var zi=(i=>(i[i.SIDEBAR_PART=0]="SIDEBAR_PART",i[i.HEADERBAR_PART=1]="HEADERBAR_PART",i[i.CHART_PART=2]="CHART_PART",i[i.STATUSBAR_PART=3]="STATUSBAR_PART",i[i.MARK_PART=4]="MARK_PART",i))(zi||{});const la=Et("partService"),Nc=Et("dataService");function Na(i){return i.replace(/\W/g,"_")}function x8(i){let e=i.split("_"),t=e[0],r=e[1],n=`${t}.${r}`;return{exchange:t,secId:r,symbol:n}}var w8=Object.defineProperty,b8=Object.getOwnPropertyDescriptor,S8=(i,e,t,r)=>{for(var n=r>1?void 0:r?b8(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&w8(e,t,n),n},Md=(i,e)=>(t,r)=>e(t,r,i);const vw=Ve.once;var ol;let Nf=(ol=class{constructor(e,t,r,n){this._chart=e,this.dataService=t,this._chartService=r,this.partService=n,this._toDispose=[],this._registerListeners()}static get(e){return e.getContribution(Bo.ID)}get id(){return Nf.ID}_registerListeners(){this._toDispose.push(this._chart.onPanStart(()=>{let e=this._chartService.timeScale.domain[0];vw(this._chart.onPanEnd)(()=>this._load(e))})),this._toDispose.push(this._chart.onZoomStart(()=>{let e=this._chartService.timeScale.domain[0];vw(this._chart.onZoomEnd)(()=>this._load(e))}))}async _load(e){let t=this._chartService.timeScale.domain[0],r=Math.ceil(e)-Math.ceil(t);if(r<2)return;let n=this._chart.dataScourceName,s=this._chartService.getDataSource(n);if(t>=s.points[0].i)return;let o={name:n,count:r,endTime:new Date(s.points[0].time-1).toISOString(),resolution:this._chartService.dataResolution,range:this._chartService.dataRange,adjust:this._chartService.dataAdjust};this.partService.setMaskHidden(!1);let a=await this.dataService.fetchBarsN(o);Array.isArray(a)&&a.length>0&&this._chartService.updateData(n,a),this.partService.setMaskHidden(!0)}dispose(){ye(this._toDispose),this._toDispose.length=0}},ol.ID="chart.contrib.hover",ol);Nf=S8([Md(0,gt),Md(1,Nc),Md(2,Ie),Md(3,la)],Nf);class E8 extends Je{constructor(){super(),this.registerCommand()}registerCommand(){Rt.registerCommand("workbench.action.setInterval",async(e,t)=>{const r=t.resolution,n=t.range;let s=e.get(Ue),o=e.get(la),a=e.get(Nc),l=s.currentChart,c=l.serialize(),h=c.dataSources[0],u=l.dataRange,p=l.dataResolution,d=t.adjust;if(u===n&&p===r)return;if(n!==Te.Intraday){let m=cs(c.parts[0].series,g=>g.name.startsWith("vwap_"));m>-1&&c.parts[0].series.splice(m,1)}if(n!==Te.Continuous){let m=cs(c.parts[0].series,g=>g.name.startsWith("ma_"));m>-1&&c.parts[0].series.splice(m,1)}let f={name:h,resolution:r,adjust:l.dataAdjust,range:n,endTime:new Date().toISOString(),count:150};if(u===Te.Continuous&&n===Te.Continuous){l.dataResolution=r,o.setMaskHidden(!1);let m=await a.fetchBarsN(f);l=s.currentChart,l.clearData("order"),l.updateData(h,m),l.redraw(),o.setMaskHidden(!0)}else s.loadChart({dsName:h,alias:l.alias,resolution:r,range:n,adjust:d,forceReload:!0,compare:n===Te.FiveDay||n===Te.Intraday?l.compareSymbols:[]})})}}var A8=Object.defineProperty,D8=Object.getOwnPropertyDescriptor,T8=(i,e,t,r)=>{for(var n=r>1?void 0:r?D8(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&A8(e,t,n),n},Eg=(i,e)=>(t,r)=>e(t,r,i);const C8=[{id:"workbench.action.setInterval.1m",label:"1",abbr:"1m",resolution:ce.M,range:Te.Continuous},{id:"workbench.action.setInterval.5m",label:"5",abbr:"5m",resolution:ce.M5,range:Te.Continuous},{id:"workbench.action.setInterval.15m",label:"15",abbr:"15m",resolution:ce.M15,range:Te.Continuous},{id:"workbench.action.setInterval.30m",label:"30",abbr:"30m",resolution:ce.M30,range:Te.Continuous},{id:"workbench.action.setInterval.1h",label:"60",abbr:"1h",resolution:ce.Hour,range:Te.Continuous},{id:"workbench.action.setInterval.1d",label:"K",abbr:"D",resolution:ce.Day,range:Te.Continuous}];let X_=class extends Je{constructor(i,e,t){super(),this.commandService=i,this.configurationService=e,this.chartsService=t,this.actions=[];let r=this.configurationService.getValue("data.resolution.showIntradayData"),n=this.configurationService.getValue("data.resolution.showFiveDayData"),s=[...C8];n&&s.unshift({id:"workbench.action.setInterval.fiveday",label:"",abbr:"1mOf5day",resolution:ce.M,range:Te.FiveDay}),r&&s.unshift({id:"workbench.action.setInterval.intraday",label:"",abbr:"1m",resolution:ce.M,range:Te.Intraday}),s.forEach(o=>{let a=new Re(o.id,o.label,o.id,!0,()=>{this.actions.forEach(c=>c.checked=!1);let l=fs(this.actions,c=>c.id===o.id);return l.checked=!0,this.commandService.executeCommand("workbench.action.setInterval",{resolution:o.resolution,range:o.range,adjust:this.configurationService.getValue("data.adjust.effect")})},"",!1);this.actions.push(a),this._register(a)}),this.actions[0].checked=!0,this._register(this.chartsService.chartAdded(o=>{let a=fs(s,l=>l.resolution===o.dataResolution&&l.range===o.dataRange);this.actions.forEach(l=>l.checked=l.id===a.id)}))}render(i){let e=document.createElement("div");return Pe(e,"resolution-selector"),i.appendChild(e),this.actionBar=new ep(e,{actionItemProvider:t=>this.actionItemProvider(t),orientation:bc.HORIZONTAL,ariaLabel:"Action Selector",animated:!1}),this.actionBar.push(this.actions),this._register(this.actionBar),this.actionBar}actionItemProvider(i){return new P8(null,i,{icon:!1,label:!1})}};X_=T8([Eg(0,ms),Eg(1,it),Eg(2,Ue)],X_);class P8 extends J0{render(e){super.render(e),this.label.innerHTML=this._action.label}}fy(Nf);Qe.as(pt.Workbench).registerWorkbenchContribution(E8,Ti.Running);Qe.as(pt.Toolbar).registerItem(new dy(X_,cl.LEFT,1));var yu={},Rc={},te={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(te,"__esModule",{value:!0});te.SuppressWarnings=K=te.Override=te.Nullable=Ly=te.NotNull=void 0;function I8(i,e,t){}var Ly=te.NotNull=I8;function O8(i,e,t){}te.Nullable=O8;function M8(i,e,t){}var K=te.Override=M8;function N8(i){return(e,t,r)=>{}}te.SuppressWarnings=N8;var Mr={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var RE=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},R8=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.Transition=void 0;const LE=te;let lc=class{constructor(e){if(e==null)throw new Error("target cannot be null.");this.target=e}get isEpsilon(){return!1}get label(){}};lc.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"];RE([LE.NotNull],lc.prototype,"target",void 0);lc=RE([R8(0,LE.NotNull)],lc);Mr.Transition=lc;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Lc=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},L8=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(Rc,"__esModule",{value:!0});Rc.ActionTransition=void 0;const kc=te,k8=Mr;let Fo=class extends k8.Transition{constructor(e,t,r=-1,n=!1){super(e),this.ruleIndex=t,this.actionIndex=r,this.isCtxDependent=n}get serializationType(){return 6}get isEpsilon(){return!0}matches(e,t,r){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}};Lc([kc.Override],Fo.prototype,"serializationType",null);Lc([kc.Override],Fo.prototype,"isEpsilon",null);Lc([kc.Override],Fo.prototype,"matches",null);Lc([kc.Override],Fo.prototype,"toString",null);Fo=Lc([L8(0,kc.NotNull)],Fo);Rc.ActionTransition=Fo;var Nr={};const Rf=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};var Wr=[],rr=[],B8=typeof Uint8Array<"u"?Uint8Array:Array,ky=!1;function kE(){ky=!0;for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=i.length;e<t;++e)Wr[e]=i[e],rr[i.charCodeAt(e)]=e;rr[45]=62,rr[95]=63}function F8(i){ky||kE();var e,t,r,n,s,o,a=i.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=i[a-2]==="="?2:i[a-1]==="="?1:0,o=new B8(a*3/4-s),r=s>0?a-4:a;var l=0;for(e=0,t=0;e<r;e+=4,t+=3)n=rr[i.charCodeAt(e)]<<18|rr[i.charCodeAt(e+1)]<<12|rr[i.charCodeAt(e+2)]<<6|rr[i.charCodeAt(e+3)],o[l++]=n>>16&255,o[l++]=n>>8&255,o[l++]=n&255;return s===2?(n=rr[i.charCodeAt(e)]<<2|rr[i.charCodeAt(e+1)]>>4,o[l++]=n&255):s===1&&(n=rr[i.charCodeAt(e)]<<10|rr[i.charCodeAt(e+1)]<<4|rr[i.charCodeAt(e+2)]>>2,o[l++]=n>>8&255,o[l++]=n&255),o}function U8(i){return Wr[i>>18&63]+Wr[i>>12&63]+Wr[i>>6&63]+Wr[i&63]}function K8(i,e,t){for(var r,n=[],s=e;s<t;s+=3)r=(i[s]<<16)+(i[s+1]<<8)+i[s+2],n.push(U8(r));return n.join("")}function yw(i){ky||kE();for(var e,t=i.length,r=t%3,n="",s=[],o=16383,a=0,l=t-r;a<l;a+=o)s.push(K8(i,a,a+o>l?l:a+o));return r===1?(e=i[t-1],n+=Wr[e>>2],n+=Wr[e<<4&63],n+="=="):r===2&&(e=(i[t-2]<<8)+i[t-1],n+=Wr[e>>10],n+=Wr[e>>4&63],n+=Wr[e<<2&63],n+="="),s.push(n),s.join("")}function wp(i,e,t,r,n){var s,o,a=n*8-r-1,l=(1<<a)-1,c=l>>1,h=-7,u=t?n-1:0,p=t?-1:1,d=i[e+u];for(u+=p,s=d&(1<<-h)-1,d>>=-h,h+=a;h>0;s=s*256+i[e+u],u+=p,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=r;h>0;o=o*256+i[e+u],u+=p,h-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(d?-1:1)*o*Math.pow(2,s-r)}function BE(i,e,t,r,n,s){var o,a,l,c=s*8-n-1,h=(1<<c)-1,u=h>>1,p=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,f=r?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+u>=1?e+=p/l:e+=p*Math.pow(2,1-u),e*l>=2&&(o++,l/=2),o+u>=h?(a=0,o=h):o+u>=1?(a=(e*l-1)*Math.pow(2,n),o=o+u):(a=e*Math.pow(2,u-1)*Math.pow(2,n),o=0));n>=8;i[t+d]=a&255,d+=f,a/=256,n-=8);for(o=o<<n|a,c+=n;c>0;i[t+d]=o&255,d+=f,o/=256,c-=8);i[t+d-f]|=m*128}var H8={}.toString,FE=Array.isArray||function(i){return H8.call(i)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var z8=50;he.TYPED_ARRAY_SUPPORT=Rf.TYPED_ARRAY_SUPPORT!==void 0?Rf.TYPED_ARRAY_SUPPORT:!0;Lf();function Lf(){return he.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function bn(i,e){if(Lf()<e)throw new RangeError("Invalid typed array length");return he.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(e),i.__proto__=he.prototype):(i===null&&(i=new he(e)),i.length=e),i}function he(i,e,t){if(!he.TYPED_ARRAY_SUPPORT&&!(this instanceof he))return new he(i,e,t);if(typeof i=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return By(this,i)}return UE(this,i,e,t)}he.poolSize=8192;he._augment=function(i){return i.__proto__=he.prototype,i};function UE(i,e,t,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?V8(i,e,t,r):typeof e=="string"?$8(i,e,t):W8(i,e)}he.from=function(i,e,t){return UE(null,i,e,t)};he.TYPED_ARRAY_SUPPORT&&(he.prototype.__proto__=Uint8Array.prototype,he.__proto__=Uint8Array);function KE(i){if(typeof i!="number")throw new TypeError('"size" argument must be a number');if(i<0)throw new RangeError('"size" argument must not be negative')}function j8(i,e,t,r){return KE(e),e<=0?bn(i,e):t!==void 0?typeof r=="string"?bn(i,e).fill(t,r):bn(i,e).fill(t):bn(i,e)}he.alloc=function(i,e,t){return j8(null,i,e,t)};function By(i,e){if(KE(e),i=bn(i,e<0?0:Fy(e)|0),!he.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)i[t]=0;return i}he.allocUnsafe=function(i){return By(null,i)};he.allocUnsafeSlow=function(i){return By(null,i)};function $8(i,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!he.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=HE(e,t)|0;i=bn(i,r);var n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}function Z_(i,e){var t=e.length<0?0:Fy(e.length)|0;i=bn(i,t);for(var r=0;r<t;r+=1)i[r]=e[r]&255;return i}function V8(i,e,t,r){if(e.byteLength,t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");return t===void 0&&r===void 0?e=new Uint8Array(e):r===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,r),he.TYPED_ARRAY_SUPPORT?(i=e,i.__proto__=he.prototype):i=Z_(i,e),i}function W8(i,e){if(tn(e)){var t=Fy(e.length)|0;return i=bn(i,t),i.length===0||e.copy(i,0,0,t),i}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||cP(e.length)?bn(i,0):Z_(i,e);if(e.type==="Buffer"&&FE(e.data))return Z_(i,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Fy(i){if(i>=Lf())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Lf().toString(16)+" bytes");return i|0}he.isBuffer=Ha;function tn(i){return!!(i!=null&&i._isBuffer)}he.compare=function(e,t){if(!tn(e)||!tn(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,s=0,o=Math.min(r,n);s<o;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:n<r?1:0};he.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};he.concat=function(e,t){if(!FE(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return he.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=he.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var o=e[r];if(!tn(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,s),s+=o.length}return n};function HE(i,e){if(tn(i))return i.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(i)||i instanceof ArrayBuffer))return i.byteLength;typeof i!="string"&&(i=""+i);var t=i.length;if(t===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return kf(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return YE(i).length;default:if(r)return kf(i).length;e=(""+e).toLowerCase(),r=!0}}he.byteLength=HE;function G8(i,e,t){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(i||(i="utf8");;)switch(i){case"hex":return rP(this,e,t);case"utf8":case"utf-8":return $E(this,e,t);case"ascii":return tP(this,e,t);case"latin1":case"binary":return iP(this,e,t);case"base64":return J8(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nP(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),r=!0}}he.prototype._isBuffer=!0;function Hs(i,e,t){var r=i[e];i[e]=i[t],i[t]=r}he.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Hs(this,t,t+1);return this};he.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Hs(this,t,t+3),Hs(this,t+1,t+2);return this};he.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Hs(this,t,t+7),Hs(this,t+1,t+6),Hs(this,t+2,t+5),Hs(this,t+3,t+4);return this};he.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?$E(this,0,e):G8.apply(this,arguments)};he.prototype.equals=function(e){if(!tn(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:he.compare(this,e)===0};he.prototype.inspect=function(){var e="",t=z8;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};he.prototype.compare=function(e,t,r,n,s){if(!tn(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),t<0||r>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=r)return 0;if(n>=s)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,s>>>=0,this===e)return 0;for(var o=s-n,a=r-t,l=Math.min(o,a),c=this.slice(n,s),h=e.slice(t,r),u=0;u<l;++u)if(c[u]!==h[u]){o=c[u],a=h[u];break}return o<a?-1:a<o?1:0};function zE(i,e,t,r,n){if(i.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:i.length-1),t<0&&(t=i.length+t),t>=i.length){if(n)return-1;t=i.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=he.from(e,r)),tn(e))return e.length===0?-1:xw(i,e,t,r,n);if(typeof e=="number")return e=e&255,he.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(i,e,t):Uint8Array.prototype.lastIndexOf.call(i,e,t):xw(i,[e],t,r,n);throw new TypeError("val must be string, number or Buffer")}function xw(i,e,t,r,n){var s=1,o=i.length,a=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(i.length<2||e.length<2)return-1;s=2,o/=2,a/=2,t/=2}function l(d,f){return s===1?d[f]:d.readUInt16BE(f*s)}var c;if(n){var h=-1;for(c=t;c<o;c++)if(l(i,c)===l(e,h===-1?0:c-h)){if(h===-1&&(h=c),c-h+1===a)return h*s}else h!==-1&&(c-=c-h),h=-1}else for(t+a>o&&(t=o-a),c=t;c>=0;c--){for(var u=!0,p=0;p<a;p++)if(l(i,c+p)!==l(e,p)){u=!1;break}if(u)return c}return-1}he.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};he.prototype.indexOf=function(e,t,r){return zE(this,e,t,r,!0)};he.prototype.lastIndexOf=function(e,t,r){return zE(this,e,t,r,!1)};function Y8(i,e,t,r){t=Number(t)||0;var n=i.length-t;r?(r=Number(r),r>n&&(r=n)):r=n;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(e.substr(o*2,2),16);if(isNaN(a))return o;i[t+o]=a}return o}function q8(i,e,t,r){return Ep(kf(e,i.length-t),i,t,r)}function jE(i,e,t,r){return Ep(uP(e),i,t,r)}function X8(i,e,t,r){return jE(i,e,t,r)}function Z8(i,e,t,r){return Ep(YE(e),i,t,r)}function Q8(i,e,t,r){return Ep(hP(e,i.length-t),i,t,r)}he.prototype.write=function(e,t,r,n){if(t===void 0)n="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")n=t,r=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(r)?(r=r|0,n===void 0&&(n="utf8")):(n=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((r===void 0||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return Y8(this,e,t,r);case"utf8":case"utf-8":return q8(this,e,t,r);case"ascii":return jE(this,e,t,r);case"latin1":case"binary":return X8(this,e,t,r);case"base64":return Z8(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q8(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}};he.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J8(i,e,t){return e===0&&t===i.length?yw(i):yw(i.slice(e,t))}function $E(i,e,t){t=Math.min(i.length,t);for(var r=[],n=e;n<t;){var s=i[n],o=null,a=s>239?4:s>223?3:s>191?2:1;if(n+a<=t){var l,c,h,u;switch(a){case 1:s<128&&(o=s);break;case 2:l=i[n+1],(l&192)===128&&(u=(s&31)<<6|l&63,u>127&&(o=u));break;case 3:l=i[n+1],c=i[n+2],(l&192)===128&&(c&192)===128&&(u=(s&15)<<12|(l&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:l=i[n+1],c=i[n+2],h=i[n+3],(l&192)===128&&(c&192)===128&&(h&192)===128&&(u=(s&15)<<18|(l&63)<<12|(c&63)<<6|h&63,u>65535&&u<1114112&&(o=u))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),n+=a}return eP(r)}var ww=4096;function eP(i){var e=i.length;if(e<=ww)return String.fromCharCode.apply(String,i);for(var t="",r=0;r<e;)t+=String.fromCharCode.apply(String,i.slice(r,r+=ww));return t}function tP(i,e,t){var r="";t=Math.min(i.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(i[n]&127);return r}function iP(i,e,t){var r="";t=Math.min(i.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(i[n]);return r}function rP(i,e,t){var r=i.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);for(var n="",s=e;s<t;++s)n+=lP(i[s]);return n}function nP(i,e,t){for(var r=i.slice(e,t),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+r[s+1]*256);return n}he.prototype.slice=function(e,t){var r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(he.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=he.prototype;else{var s=t-e;n=new he(s,void 0);for(var o=0;o<s;++o)n[o]=this[o+e]}return n};function Yt(i,e,t){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+e>t)throw new RangeError("Trying to access beyond buffer length")}he.prototype.readUIntLE=function(e,t,r){e=e|0,t=t|0,r||Yt(e,t,this.length);for(var n=this[e],s=1,o=0;++o<t&&(s*=256);)n+=this[e+o]*s;return n};he.prototype.readUIntBE=function(e,t,r){e=e|0,t=t|0,r||Yt(e,t,this.length);for(var n=this[e+--t],s=1;t>0&&(s*=256);)n+=this[e+--t]*s;return n};he.prototype.readUInt8=function(e,t){return t||Yt(e,1,this.length),this[e]};he.prototype.readUInt16LE=function(e,t){return t||Yt(e,2,this.length),this[e]|this[e+1]<<8};he.prototype.readUInt16BE=function(e,t){return t||Yt(e,2,this.length),this[e]<<8|this[e+1]};he.prototype.readUInt32LE=function(e,t){return t||Yt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};he.prototype.readUInt32BE=function(e,t){return t||Yt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};he.prototype.readIntLE=function(e,t,r){e=e|0,t=t|0,r||Yt(e,t,this.length);for(var n=this[e],s=1,o=0;++o<t&&(s*=256);)n+=this[e+o]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*t)),n};he.prototype.readIntBE=function(e,t,r){e=e|0,t=t|0,r||Yt(e,t,this.length);for(var n=t,s=1,o=this[e+--n];n>0&&(s*=256);)o+=this[e+--n]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*t)),o};he.prototype.readInt8=function(e,t){return t||Yt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};he.prototype.readInt16LE=function(e,t){t||Yt(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};he.prototype.readInt16BE=function(e,t){t||Yt(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};he.prototype.readInt32LE=function(e,t){return t||Yt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};he.prototype.readInt32BE=function(e,t){return t||Yt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};he.prototype.readFloatLE=function(e,t){return t||Yt(e,4,this.length),wp(this,e,!0,23,4)};he.prototype.readFloatBE=function(e,t){return t||Yt(e,4,this.length),wp(this,e,!1,23,4)};he.prototype.readDoubleLE=function(e,t){return t||Yt(e,8,this.length),wp(this,e,!0,52,8)};he.prototype.readDoubleBE=function(e,t){return t||Yt(e,8,this.length),wp(this,e,!1,52,8)};function Ii(i,e,t,r,n,s){if(!tn(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(t+r>i.length)throw new RangeError("Index out of range")}he.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var s=Math.pow(2,8*r)-1;Ii(this,e,t,r,s,0)}var o=1,a=0;for(this[t]=e&255;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r};he.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var s=Math.pow(2,8*r)-1;Ii(this,e,t,r,s,0)}var o=r-1,a=1;for(this[t+o]=e&255;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r};he.prototype.writeUInt8=function(e,t,r){return e=+e,t=t|0,r||Ii(this,e,t,1,255,0),he.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function bp(i,e,t,r){e<0&&(e=65535+e+1);for(var n=0,s=Math.min(i.length-t,2);n<s;++n)i[t+n]=(e&255<<8*(r?n:1-n))>>>(r?n:1-n)*8}he.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t|0,r||Ii(this,e,t,2,65535,0),he.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):bp(this,e,t,!0),t+2};he.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t|0,r||Ii(this,e,t,2,65535,0),he.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):bp(this,e,t,!1),t+2};function Sp(i,e,t,r){e<0&&(e=4294967295+e+1);for(var n=0,s=Math.min(i.length-t,4);n<s;++n)i[t+n]=e>>>(r?n:3-n)*8&255}he.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t|0,r||Ii(this,e,t,4,4294967295,0),he.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):Sp(this,e,t,!0),t+4};he.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t|0,r||Ii(this,e,t,4,4294967295,0),he.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Sp(this,e,t,!1),t+4};he.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=t|0,!n){var s=Math.pow(2,8*r-1);Ii(this,e,t,r,s-1,-s)}var o=0,a=1,l=0;for(this[t]=e&255;++o<r&&(a*=256);)e<0&&l===0&&this[t+o-1]!==0&&(l=1),this[t+o]=(e/a>>0)-l&255;return t+r};he.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=t|0,!n){var s=Math.pow(2,8*r-1);Ii(this,e,t,r,s-1,-s)}var o=r-1,a=1,l=0;for(this[t+o]=e&255;--o>=0&&(a*=256);)e<0&&l===0&&this[t+o+1]!==0&&(l=1),this[t+o]=(e/a>>0)-l&255;return t+r};he.prototype.writeInt8=function(e,t,r){return e=+e,t=t|0,r||Ii(this,e,t,1,127,-128),he.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};he.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t|0,r||Ii(this,e,t,2,32767,-32768),he.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):bp(this,e,t,!0),t+2};he.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t|0,r||Ii(this,e,t,2,32767,-32768),he.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):bp(this,e,t,!1),t+2};he.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t|0,r||Ii(this,e,t,4,2147483647,-2147483648),he.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Sp(this,e,t,!0),t+4};he.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t|0,r||Ii(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),he.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):Sp(this,e,t,!1),t+4};function VE(i,e,t,r,n,s){if(t+r>i.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function WE(i,e,t,r,n){return n||VE(i,e,t,4),BE(i,e,t,r,23,4),t+4}he.prototype.writeFloatLE=function(e,t,r){return WE(this,e,t,!0,r)};he.prototype.writeFloatBE=function(e,t,r){return WE(this,e,t,!1,r)};function GE(i,e,t,r,n){return n||VE(i,e,t,8),BE(i,e,t,r,52,8),t+8}he.prototype.writeDoubleLE=function(e,t,r){return GE(this,e,t,!0,r)};he.prototype.writeDoubleBE=function(e,t,r){return GE(this,e,t,!1,r)};he.prototype.copy=function(e,t,r,n){if(r||(r=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r,o;if(this===e&&r<t&&t<n)for(o=s-1;o>=0;--o)e[o+t]=this[o+r];else if(s<1e3||!he.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s};he.prototype.fill=function(e,t,r,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!he.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var o;if(typeof e=="number")for(o=t;o<r;++o)this[o]=e;else{var a=tn(e)?e:kf(new he(e,n).toString()),l=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%l]}return this};var sP=/[^+\/0-9A-Za-z-_]/g;function oP(i){if(i=aP(i).replace(sP,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function aP(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function lP(i){return i<16?"0"+i.toString(16):i.toString(16)}function kf(i,e){e=e||1/0;for(var t,r=i.length,n=null,s=[],o=0;o<r;++o){if(t=i.charCodeAt(o),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function uP(i){for(var e=[],t=0;t<i.length;++t)e.push(i.charCodeAt(t)&255);return e}function hP(i,e){for(var t,r,n,s=[],o=0;o<i.length&&!((e-=2)<0);++o)t=i.charCodeAt(o),r=t>>8,n=t%256,s.push(n),s.push(r);return s}function YE(i){return F8(oP(i))}function Ep(i,e,t,r){for(var n=0;n<r&&!(n+t>=e.length||n>=i.length);++n)e[n+t]=i[n];return n}function cP(i){return i!==i}function Ha(i){return i!=null&&(!!i._isBuffer||qE(i)||dP(i))}function qE(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function dP(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&qE(i.slice(0,0))}var Q_;typeof Object.create=="function"?Q_=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:Q_=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e};const Uy=Q_;var fP=/%[sdj%]/g;function Ap(i){if(!Fc(i)){for(var e=[],t=0;t<arguments.length;t++)e.push(Dr(arguments[t]));return e.join(" ")}for(var t=1,r=arguments,n=r.length,s=String(i).replace(fP,function(a){if(a==="%%")return"%";if(t>=n)return a;switch(a){case"%s":return String(r[t++]);case"%d":return Number(r[t++]);case"%j":try{return JSON.stringify(r[t++])}catch{return"[Circular]"}default:return a}}),o=r[t];t<n;o=r[++t])Bc(o)||!ua(o)?s+=" "+o:s+=" "+Dr(o);return s}function Ky(i,e){if(Xr(Rf.process))return function(){return Ky(i,e).apply(this,arguments)};if(ss.noDeprecation===!0)return i;var t=!1;function r(){if(!t){if(ss.throwDeprecation)throw new Error(e);ss.traceDeprecation?console.trace(e):console.error(e),t=!0}return i.apply(this,arguments)}return r}var Nd={},Ag;function XE(i){if(Xr(Ag)&&(Ag=ss.env.NODE_DEBUG||""),i=i.toUpperCase(),!Nd[i])if(new RegExp("\\b"+i+"\\b","i").test(Ag)){var e=0;Nd[i]=function(){var t=Ap.apply(null,arguments);console.error("%s %d: %s",i,e,t)}}else Nd[i]=function(){};return Nd[i]}function Dr(i,e){var t={seen:[],stylize:mP};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),Dp(e)?t.showHidden=e:e&&$y(t,e),Xr(t.showHidden)&&(t.showHidden=!1),Xr(t.depth)&&(t.depth=2),Xr(t.colors)&&(t.colors=!1),Xr(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=pP),Bf(t,i,t.depth)}Dr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Dr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function pP(i,e){var t=Dr.styles[e];return t?"\x1B["+Dr.colors[t][0]+"m"+i+"\x1B["+Dr.colors[t][1]+"m":i}function mP(i,e){return i}function gP(i){var e={};return i.forEach(function(t,r){e[t]=!0}),e}function Bf(i,e,t){if(i.customInspect&&e&&Ws(e.inspect)&&e.inspect!==Dr&&!(e.constructor&&e.constructor.prototype===e)){var r=e.inspect(t,i);return Fc(r)||(r=Bf(i,r,t)),r}var n=_P(i,e);if(n)return n;var s=Object.keys(e),o=gP(s);if(i.showHidden&&(s=Object.getOwnPropertyNames(e)),tl(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return Dg(e);if(s.length===0){if(Ws(e)){var a=e.name?": "+e.name:"";return i.stylize("[Function"+a+"]","special")}if(Vs(e))return i.stylize(RegExp.prototype.toString.call(e),"regexp");if(gl(e))return i.stylize(Date.prototype.toString.call(e),"date");if(tl(e))return Dg(e)}var l="",c=!1,h=["{","}"];if(Hy(e)&&(c=!0,h=["[","]"]),Ws(e)){var u=e.name?": "+e.name:"";l=" [Function"+u+"]"}if(Vs(e)&&(l=" "+RegExp.prototype.toString.call(e)),gl(e)&&(l=" "+Date.prototype.toUTCString.call(e)),tl(e)&&(l=" "+Dg(e)),s.length===0&&(!c||e.length==0))return h[0]+l+h[1];if(t<0)return Vs(e)?i.stylize(RegExp.prototype.toString.call(e),"regexp"):i.stylize("[Object]","special");i.seen.push(e);var p;return c?p=vP(i,e,t,o,s):p=s.map(function(d){return J_(i,e,t,o,d,c)}),i.seen.pop(),yP(p,l,h)}function _P(i,e){if(Xr(e))return i.stylize("undefined","undefined");if(Fc(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return i.stylize(t,"string")}if(zy(e))return i.stylize(""+e,"number");if(Dp(e))return i.stylize(""+e,"boolean");if(Bc(e))return i.stylize("null","null")}function Dg(i){return"["+Error.prototype.toString.call(i)+"]"}function vP(i,e,t,r,n){for(var s=[],o=0,a=e.length;o<a;++o)tA(e,String(o))?s.push(J_(i,e,t,r,String(o),!0)):s.push("");return n.forEach(function(l){l.match(/^\d+$/)||s.push(J_(i,e,t,r,l,!0))}),s}function J_(i,e,t,r,n,s){var o,a,l;if(l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},l.get?l.set?a=i.stylize("[Getter/Setter]","special"):a=i.stylize("[Getter]","special"):l.set&&(a=i.stylize("[Setter]","special")),tA(r,n)||(o="["+n+"]"),a||(i.seen.indexOf(l.value)<0?(Bc(t)?a=Bf(i,l.value,null):a=Bf(i,l.value,t-1),a.indexOf(`
`)>-1&&(s?a=a.split(`
`).map(function(c){return"  "+c}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(c){return"   "+c}).join(`
`))):a=i.stylize("[Circular]","special")),Xr(o)){if(s&&n.match(/^\d+$/))return a;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=i.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=i.stylize(o,"string"))}return o+": "+a}function yP(i,e,t){var r=i.reduce(function(n,s){return s.indexOf(`
`)>=0,n+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?t[0]+(e===""?"":e+`
 `)+" "+i.join(`,
  `)+" "+t[1]:t[0]+e+" "+i.join(", ")+" "+t[1]}function Hy(i){return Array.isArray(i)}function Dp(i){return typeof i=="boolean"}function Bc(i){return i===null}function ZE(i){return i==null}function zy(i){return typeof i=="number"}function Fc(i){return typeof i=="string"}function QE(i){return typeof i=="symbol"}function Xr(i){return i===void 0}function Vs(i){return ua(i)&&jy(i)==="[object RegExp]"}function ua(i){return typeof i=="object"&&i!==null}function gl(i){return ua(i)&&jy(i)==="[object Date]"}function tl(i){return ua(i)&&(jy(i)==="[object Error]"||i instanceof Error)}function Ws(i){return typeof i=="function"}function Ff(i){return i===null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||typeof i=="symbol"||typeof i>"u"}function JE(i){return he.isBuffer(i)}function jy(i){return Object.prototype.toString.call(i)}function Tg(i){return i<10?"0"+i.toString(10):i.toString(10)}var xP=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function wP(){var i=new Date,e=[Tg(i.getHours()),Tg(i.getMinutes()),Tg(i.getSeconds())].join(":");return[i.getDate(),xP[i.getMonth()],e].join(" ")}function eA(){console.log("%s - %s",wP(),Ap.apply(null,arguments))}function $y(i,e){if(!e||!ua(e))return i;for(var t=Object.keys(e),r=t.length;r--;)i[t[r]]=e[t[r]];return i}function tA(i,e){return Object.prototype.hasOwnProperty.call(i,e)}const bP={inherits:Uy,_extend:$y,log:eA,isBuffer:JE,isPrimitive:Ff,isFunction:Ws,isError:tl,isDate:gl,isObject:ua,isRegExp:Vs,isUndefined:Xr,isSymbol:QE,isString:Fc,isNumber:zy,isNullOrUndefined:ZE,isNull:Bc,isBoolean:Dp,isArray:Hy,inspect:Dr,deprecate:Ky,format:Ap,debuglog:XE},SP=Object.freeze(Object.defineProperty({__proto__:null,_extend:$y,debuglog:XE,default:bP,deprecate:Ky,format:Ap,inherits:Uy,inspect:Dr,isArray:Hy,isBoolean:Dp,isBuffer:JE,isDate:gl,isError:tl,isFunction:Ws,isNull:Bc,isNullOrUndefined:ZE,isNumber:zy,isObject:ua,isPrimitive:Ff,isRegExp:Vs,isString:Fc,isSymbol:QE,isUndefined:Xr,log:eA},Symbol.toStringTag,{value:"Module"}));function bw(i,e){if(i===e)return 0;for(var t=i.length,r=e.length,n=0,s=Math.min(t,r);n<s;++n)if(i[n]!==e[n]){t=i[n],r=e[n];break}return t<r?-1:r<t?1:0}var EP=Object.prototype.hasOwnProperty,Sw=Object.keys||function(i){var e=[];for(var t in i)EP.call(i,t)&&e.push(t);return e},Ew=Array.prototype.slice,Cg;function iA(){return typeof Cg<"u"?Cg:Cg=function(){return(function(){}).name==="foo"}()}function Aw(i){return Object.prototype.toString.call(i)}function Dw(i){return Ha(i)||typeof Rf.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i?!!(i instanceof DataView||i.buffer&&i.buffer instanceof ArrayBuffer):!1}function bi(i,e){i||yi(i,!0,e,"==",uc)}var AP=/\s*function\s+([^\(\s]*)\s*/;function rA(i){if(Ws(i)){if(iA())return i.name;var e=i.toString(),t=e.match(AP);return t&&t[1]}}bi.AssertionError=Tp;function Tp(i){this.name="AssertionError",this.actual=i.actual,this.expected=i.expected,this.operator=i.operator,i.message?(this.message=i.message,this.generatedMessage=!1):(this.message=DP(this),this.generatedMessage=!0);var e=i.stackStartFunction||yi;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var r=t.stack,n=rA(e),s=r.indexOf(`
`+n);if(s>=0){var o=r.indexOf(`
`,s+1);r=r.substring(o+1)}this.stack=r}}}Uy(Tp,Error);function Tw(i,e){return typeof i=="string"?i.length<e?i:i.slice(0,e):i}function Cw(i){if(iA()||!Ws(i))return Dr(i);var e=rA(i),t=e?": "+e:"";return"[Function"+t+"]"}function DP(i){return Tw(Cw(i.actual),128)+" "+i.operator+" "+Tw(Cw(i.expected),128)}function yi(i,e,t,r,n){throw new Tp({message:t,actual:i,expected:e,operator:r,stackStartFunction:n})}bi.fail=yi;function uc(i,e){i||yi(i,!0,e,"==",uc)}bi.ok=uc;bi.equal=Vy;function Vy(i,e,t){i!=e&&yi(i,e,t,"==",Vy)}bi.notEqual=Wy;function Wy(i,e,t){i==e&&yi(i,e,t,"!=",Wy)}bi.deepEqual=Gy;function Gy(i,e,t){_l(i,e,!1)||yi(i,e,t,"deepEqual",Gy)}bi.deepStrictEqual=Yy;function Yy(i,e,t){_l(i,e,!0)||yi(i,e,t,"deepStrictEqual",Yy)}function _l(i,e,t,r){if(i===e)return!0;if(Ha(i)&&Ha(e))return bw(i,e)===0;if(gl(i)&&gl(e))return i.getTime()===e.getTime();if(Vs(i)&&Vs(e))return i.source===e.source&&i.global===e.global&&i.multiline===e.multiline&&i.lastIndex===e.lastIndex&&i.ignoreCase===e.ignoreCase;if((i===null||typeof i!="object")&&(e===null||typeof e!="object"))return t?i===e:i==e;if(Dw(i)&&Dw(e)&&Aw(i)===Aw(e)&&!(i instanceof Float32Array||i instanceof Float64Array))return bw(new Uint8Array(i.buffer),new Uint8Array(e.buffer))===0;if(Ha(i)!==Ha(e))return!1;r=r||{actual:[],expected:[]};var n=r.actual.indexOf(i);return n!==-1&&n===r.expected.indexOf(e)?!0:(r.actual.push(i),r.expected.push(e),TP(i,e,t,r))}function Pw(i){return Object.prototype.toString.call(i)=="[object Arguments]"}function TP(i,e,t,r){if(i==null||e===null||e===void 0)return!1;if(Ff(i)||Ff(e))return i===e;if(t&&Object.getPrototypeOf(i)!==Object.getPrototypeOf(e))return!1;var n=Pw(i),s=Pw(e);if(n&&!s||!n&&s)return!1;if(n)return i=Ew.call(i),e=Ew.call(e),_l(i,e,t);var o=Sw(i),a=Sw(e),l,c;if(o.length!==a.length)return!1;for(o.sort(),a.sort(),c=o.length-1;c>=0;c--)if(o[c]!==a[c])return!1;for(c=o.length-1;c>=0;c--)if(l=o[c],!_l(i[l],e[l],t,r))return!1;return!0}bi.notDeepEqual=qy;function qy(i,e,t){_l(i,e,!1)&&yi(i,e,t,"notDeepEqual",qy)}bi.notDeepStrictEqual=Xy;function Xy(i,e,t){_l(i,e,!0)&&yi(i,e,t,"notDeepStrictEqual",Xy)}bi.strictEqual=Zy;function Zy(i,e,t){i!==e&&yi(i,e,t,"===",Zy)}bi.notStrictEqual=Qy;function Qy(i,e,t){i===e&&yi(i,e,t,"!==",Qy)}function Iw(i,e){if(!i||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(i);try{if(i instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},i)===!0}function CP(i){var e;try{i()}catch(t){e=t}return e}function nA(i,e,t,r){var n;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(r=t,t=null),n=CP(e),r=(t&&t.name?" ("+t.name+").":".")+(r?" "+r:"."),i&&!n&&yi(n,t,"Missing expected exception"+r);var s=typeof r=="string",o=!i&&tl(n),a=!i&&n&&!t;if((o&&s&&Iw(n,t)||a)&&yi(n,t,"Got unwanted exception"+r),i&&n&&t&&!Iw(n,t)||!i&&n)throw n}bi.throws=sA;function sA(i,e,t){nA(!0,i,e,t)}bi.doesNotThrow=oA;function oA(i,e,t){nA(!1,i,e,t)}bi.ifError=aA;function aA(i){if(i)throw i}const PP=Object.freeze(Object.defineProperty({__proto__:null,AssertionError:Tp,assert:uc,deepEqual:Gy,deepStrictEqual:Yy,default:bi,doesNotThrow:oA,equal:Vy,fail:yi,ifError:aA,notDeepEqual:qy,notDeepStrictEqual:Xy,notEqual:Wy,notStrictEqual:Qy,ok:uc,strictEqual:Zy,throws:sA},Symbol.toStringTag,{value:"Module"})),Xi=Zv(PP);var Cp={},Tt={};(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(i,"__esModule",{value:!0}),i.MurmurHash=void 0,function(e){function r(l=0){return l}e.initialize=r;function n(l,c){c==null?c=0:typeof c=="string"?c=a(c):typeof c=="object"&&(c=c.hashCode());let g=c;return g=Math.imul(g,3432918353),g=g<<15|g>>>17,g=Math.imul(g,461845907),l=l^g,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196,l&4294967295}e.update=n;function s(l,c){return l=l^c*4,l=l^l>>>16,l=Math.imul(l,2246822507),l=l^l>>>13,l=Math.imul(l,3266489909),l=l^l>>>16,l}e.finish=s;function o(l,c=0){let h=r(c),u=0;for(let p of l)h=n(h,p),u++;return h=s(h,u),h}e.hashCode=o;function a(l){let c=l.length;if(c===0)return 0;let h=0;for(let u=0;u<c;u++){let p=l.charCodeAt(u);h=(h<<5>>>0)-h+p,h|=0}return h}}(i.MurmurHash||(i.MurmurHash={}))})(Tt);var Zi={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var lA=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.ObjectEqualityComparator=void 0;const uA=te;class hc{hashCode(e){return e==null?0:e.hashCode()}equals(e,t){return e==null?t==null:e.equals(t)}}hc.INSTANCE=new hc;lA([uA.Override],hc.prototype,"hashCode",null);lA([uA.Override],hc.prototype,"equals",null);Zi.ObjectEqualityComparator=hc;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var hA=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Cp,"__esModule",{value:!0});Cp.DefaultEqualityComparator=void 0;const cA=te,IP=Tt,Ow=Zi;class cc{hashCode(e){return e==null?0:typeof e=="string"||typeof e=="number"?IP.MurmurHash.hashCode([e]):Ow.ObjectEqualityComparator.INSTANCE.hashCode(e)}equals(e,t){return e==null?t==null:typeof e=="string"||typeof e=="number"?e===t:Ow.ObjectEqualityComparator.INSTANCE.equals(e,t)}}cc.INSTANCE=new cc;hA([cA.Override],cc.prototype,"hashCode",null);hA([cA.Override],cc.prototype,"equals",null);Cp.DefaultEqualityComparator=cc;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var li=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},OP=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.Array2DHashSet=void 0;const MP=Xi,NP=Cp,ui=te,Pg=Tt,Rd=16,Ig=.75;class Pt{constructor(e,t=Rd){if(this.n=0,this.threshold=Math.floor(Rd*Ig),e instanceof Pt){this.comparator=e.comparator,this.buckets=e.buckets.slice(0);for(let r=0;r<this.buckets.length;r++){let n=this.buckets[r];n&&(this.buckets[r]=n.slice(0))}this.n=e.n,this.threshold=e.threshold}else this.comparator=e||NP.DefaultEqualityComparator.INSTANCE,this.buckets=this.createBuckets(t)}getOrAdd(e){return this.n>this.threshold&&this.expand(),this.getOrAddImpl(e)}getOrAddImpl(e){let t=this.getBucket(e),r=this.buckets[t];if(!r)return r=[e],this.buckets[t]=r,this.n++,e;for(let n of r)if(this.comparator.equals(n,e))return n;return r.push(e),this.n++,e}get(e){if(e==null)return e;let t=this.getBucket(e),r=this.buckets[t];if(r){for(let n of r)if(this.comparator.equals(n,e))return n}}getBucket(e){return this.comparator.hashCode(e)&this.buckets.length-1}hashCode(){let e=Pg.MurmurHash.initialize();for(let t of this.buckets)if(t!=null)for(let r of t){if(r==null)break;e=Pg.MurmurHash.update(e,this.comparator.hashCode(r))}return e=Pg.MurmurHash.finish(e,this.size),e}equals(e){return e===this?!0:!(e instanceof Pt)||e.size!==this.size?!1:this.containsAll(e)}expand(){let e=this.buckets,t=this.buckets.length*2,r=this.createBuckets(t);this.buckets=r,this.threshold=Math.floor(t*Ig);let n=this.size;for(let s of e)if(s)for(let o of s){let a=this.getBucket(o),l=this.buckets[a];l||(l=[],this.buckets[a]=l),l.push(o)}MP(this.n===n)}add(e){return this.getOrAdd(e)===e}get size(){return this.n}get isEmpty(){return this.n===0}contains(e){return this.containsFast(this.asElementType(e))}containsFast(e){return e==null?!1:this.get(e)!=null}*[Symbol.iterator](){yield*this.toArray()}toArray(){const e=new Array(this.size);let t=0;for(let r of this.buckets)if(r!=null)for(let n of r){if(n==null)break;e[t++]=n}return e}containsAll(e){if(e instanceof Pt){let t=e;for(let r of t.buckets)if(r!=null)for(let n of r){if(n==null)break;if(!this.containsFast(this.asElementType(n)))return!1}}else for(let t of e)if(!this.containsFast(this.asElementType(t)))return!1;return!0}addAll(e){let t=!1;for(let r of e)this.getOrAdd(r)!==r&&(t=!0);return t}clear(){this.buckets=this.createBuckets(Rd),this.n=0,this.threshold=Math.floor(Rd*Ig)}toString(){if(this.size===0)return"{}";let e="{",t=!0;for(let r of this.buckets)if(r!=null)for(let n of r){if(n==null)break;t?t=!1:e+=", ",e+=n.toString()}return e+="}",e}toTableString(){let e="";for(let t of this.buckets){if(t==null){e+=`null
`;continue}e+="[";let r=!0;for(let n of t)r?r=!1:e+=" ",n==null?e+="_":e+=n.toString();e+=`]
`}return e}asElementType(e){return e}createBuckets(e){return new Array(e)}}li([ui.NotNull],Pt.prototype,"comparator",void 0);li([ui.Override],Pt.prototype,"hashCode",null);li([ui.Override],Pt.prototype,"equals",null);li([ui.Override],Pt.prototype,"add",null);li([ui.Override],Pt.prototype,"size",null);li([ui.Override],Pt.prototype,"isEmpty",null);li([ui.Override],Pt.prototype,"contains",null);li([OP(0,ui.Nullable)],Pt.prototype,"containsFast",null);li([ui.Override],Pt.prototype,Symbol.iterator,null);li([ui.Override],Pt.prototype,"toArray",null);li([ui.Override],Pt.prototype,"containsAll",null);li([ui.Override],Pt.prototype,"addAll",null);li([ui.Override],Pt.prototype,"clear",null);li([ui.Override],Pt.prototype,"toString",null);li([ui.SuppressWarnings("unchecked")],Pt.prototype,"asElementType",null);li([ui.SuppressWarnings("unchecked")],Pt.prototype,"createBuckets",null);Nr.Array2DHashSet=Pt;var Og={},Rn={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Rn,"__esModule",{value:!0});Rn.Array2DHashMap=void 0;const Mw=Nr;class RP{constructor(e){this.keyComparator=e}hashCode(e){return this.keyComparator.hashCode(e.key)}equals(e,t){return this.keyComparator.equals(e.key,t.key)}}class Uf{constructor(e){e instanceof Uf?this.backingStore=new Mw.Array2DHashSet(e.backingStore):this.backingStore=new Mw.Array2DHashSet(new RP(e))}clear(){this.backingStore.clear()}containsKey(e){return this.backingStore.contains({key:e})}get(e){let t=this.backingStore.get({key:e});if(t)return t.value}get isEmpty(){return this.backingStore.isEmpty}put(e,t){let r=this.backingStore.get({key:e,value:t}),n;return r?(n=r.value,r.value=t):this.backingStore.add({key:e,value:t}),n}putIfAbsent(e,t){let r=this.backingStore.get({key:e,value:t}),n;return r?n=r.value:this.backingStore.add({key:e,value:t}),n}get size(){return this.backingStore.size}hashCode(){return this.backingStore.hashCode()}equals(e){return e instanceof Uf?this.backingStore.equals(e.backingStore):!1}}Rn.Array2DHashMap=Uf;var xu={},wu={},ha={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var dA=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(ha,"__esModule",{value:!0});ha.ArrayEqualityComparator=void 0;const fA=te,LP=Tt,kP=Zi;class dc{hashCode(e){return e==null?0:LP.MurmurHash.hashCode(e,0)}equals(e,t){if(e==null)return t==null;if(t==null||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!kP.ObjectEqualityComparator.INSTANCE.equals(e[r],t[r]))return!1;return!0}}dc.INSTANCE=new dc;dA([fA.Override],dc.prototype,"hashCode",null);dA([fA.Override],dc.prototype,"equals",null);ha.ArrayEqualityComparator=dc;var ca={},on={},an={};(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(n,s,o,a){var l=arguments.length,c=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,s,o,a);else for(var u=n.length-1;u>=0;u--)(h=n[u])&&(c=(l<3?h(c):l>3?h(s,o,c):h(s,o))||c);return l>3&&c&&Object.defineProperty(s,o,c),c};Object.defineProperty(i,"__esModule",{value:!0}),i.ATNState=void 0;const t=te;class r{constructor(){this.stateNumber=r.INVALID_STATE_NUMBER,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.optimizedTransitions=this.transitions}getStateNumber(){return this.stateNumber}get nonStopStateNumber(){return this.getStateNumber()}hashCode(){return this.stateNumber}equals(s){return s instanceof r?this.stateNumber===s.stateNumber:!1}get isNonGreedyExitState(){return!1}toString(){return String(this.stateNumber)}getTransitions(){return this.transitions.slice(0)}get numberOfTransitions(){return this.transitions.length}addTransition(s,o){if(this.transitions.length===0)this.epsilonOnlyTransitions=s.isEpsilon;else if(this.epsilonOnlyTransitions!==s.isEpsilon)throw this.epsilonOnlyTransitions=!1,new Error("ATN state "+this.stateNumber+" has both epsilon and non-epsilon transitions.");this.transitions.splice(o!==void 0?o:this.transitions.length,0,s)}transition(s){return this.transitions[s]}setTransition(s,o){this.transitions[s]=o}removeTransition(s){return this.transitions.splice(s,1)[0]}get onlyHasEpsilonTransitions(){return this.epsilonOnlyTransitions}setRuleIndex(s){this.ruleIndex=s}get isOptimized(){return this.optimizedTransitions!==this.transitions}get numberOfOptimizedTransitions(){return this.optimizedTransitions.length}getOptimizedTransition(s){return this.optimizedTransitions[s]}addOptimizedTransition(s){this.isOptimized||(this.optimizedTransitions=new Array),this.optimizedTransitions.push(s)}setOptimizedTransition(s,o){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions[s]=o}removeOptimizedTransition(s){if(!this.isOptimized)throw new Error("This ATNState is not optimized.");this.optimizedTransitions.splice(s,1)}}e([t.Override],r.prototype,"hashCode",null),e([t.Override],r.prototype,"equals",null),e([t.Override],r.prototype,"toString",null),i.ATNState=r,function(n){n.INVALID_STATE_NUMBER=-1}(r=i.ATNState||(i.ATNState={}))})(an);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(on,"__esModule",{value:!0});on.DecisionState=void 0;const BP=an;class FP extends BP.ATNState{constructor(){super(...arguments),this.decision=-1,this.nonGreedy=!1,this.sll=!1}}on.DecisionState=FP;var Mg={},Pp={};(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(i,"__esModule",{value:!0}),i.Arrays=void 0,function(e){function t(s,o,a,l){return r(s,a!==void 0?a:0,l!==void 0?l:s.length,o)}e.binarySearch=t;function r(s,o,a,l){let c=o,h=a-1;for(;c<=h;){let u=c+h>>>1,p=s[u];if(p<l)c=u+1;else if(p>l)h=u-1;else return u}return-(c+1)}function n(s){let o="[",a=!0;for(let l of s)a?a=!1:o+=", ",l===null?o+="null":l===void 0?o+="undefined":o+=l;return o+="]",o}e.toString=n}(i.Arrays||(i.Arrays={}))})(Pp);var Ng={},Nw;function Jy(){return Nw||(Nw=1,function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(l,c,h,u){var p=arguments.length,d=p<3?c:u===null?u=Object.getOwnPropertyDescriptor(c,h):u,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,c,h,u);else for(var m=l.length-1;m>=0;m--)(f=l[m])&&(d=(p<3?f(d):p>3?f(c,h,d):f(c,h))||d);return p>3&&d&&Object.defineProperty(c,h,d),d};Object.defineProperty(i,"__esModule",{value:!0}),i.PredictionContextCache=void 0;const t=Rn,r=te,n=Zi,s=Rr(),o=Xi;class a{constructor(c=!0){this.contexts=new t.Array2DHashMap(n.ObjectEqualityComparator.INSTANCE),this.childContexts=new t.Array2DHashMap(n.ObjectEqualityComparator.INSTANCE),this.joinContexts=new t.Array2DHashMap(n.ObjectEqualityComparator.INSTANCE),this.enableCache=c}getAsCached(c){if(!this.enableCache)return c;let h=this.contexts.get(c);return h||(h=c,this.contexts.put(c,c)),h}getChild(c,h){if(!this.enableCache)return c.getChild(h);let u=new a.PredictionContextAndInt(c,h),p=this.childContexts.get(u);return p||(p=c.getChild(h),p=this.getAsCached(p),this.childContexts.put(u,p)),p}join(c,h){if(!this.enableCache)return s.PredictionContext.join(c,h,this);let u=new a.IdentityCommutativePredictionContextOperands(c,h),p=this.joinContexts.get(u);return p||(p=s.PredictionContext.join(c,h,this),p=this.getAsCached(p),this.joinContexts.put(u,p),p)}}i.PredictionContextCache=a,a.UNCACHED=new a(!1),function(l){class c{constructor(p,d){this.obj=p,this.value=d}equals(p){if(p instanceof c){if(p===this)return!0}else return!1;let d=p;return this.value===d.value&&(this.obj===d.obj||this.obj!=null&&this.obj.equals(d.obj))}hashCode(){let p=5;return p=7*p+(this.obj!=null?this.obj.hashCode():0),p=7*p+this.value,p}}e([r.Override],c.prototype,"equals",null),e([r.Override],c.prototype,"hashCode",null),l.PredictionContextAndInt=c;class h{constructor(p,d){o(p!=null),o(d!=null),this._x=p,this._y=d}get x(){return this._x}get y(){return this._y}equals(p){if(p instanceof h){if(this===p)return!0}else return!1;let d=p;return this._x===d._x&&this._y===d._y||this._x===d._y&&this._y===d._x}hashCode(){return this._x.hashCode()^this._y.hashCode()}}e([r.Override],h.prototype,"equals",null),e([r.Override],h.prototype,"hashCode",null),l.IdentityCommutativePredictionContextOperands=h}(a=i.PredictionContextCache||(i.PredictionContextCache={}))}(Ng)),Ng}var Rw;function Rr(){return Rw||(Rw=1,function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(m,g,_,v){var y=arguments.length,x=y<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,_):v,A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(m,g,_,v);else for(var w=m.length-1;w>=0;w--)(A=m[w])&&(x=(y<3?A(x):y>3?A(g,_,x):A(g,_))||x);return y>3&&x&&Object.defineProperty(g,_,x),x},t=P&&P.__param||function(m,g){return function(_,v){g(_,v,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SingletonPredictionContext=i.PredictionContext=void 0;const r=Rn,n=Nr,s=Pp,o=Tt,a=te,l=Jy(),c=Xi,h=1;class u{constructor(g){this.cachedHashCode=g}static calculateEmptyHashCode(){let g=o.MurmurHash.initialize(h);return g=o.MurmurHash.finish(g,0),g}static calculateSingleHashCode(g,_){let v=o.MurmurHash.initialize(h);return v=o.MurmurHash.update(v,g),v=o.MurmurHash.update(v,_),v=o.MurmurHash.finish(v,2),v}static calculateHashCode(g,_){let v=o.MurmurHash.initialize(h);for(let y of g)v=o.MurmurHash.update(v,y);for(let y of _)v=o.MurmurHash.update(v,y);return v=o.MurmurHash.finish(v,2*g.length),v}static fromRuleContext(g,_,v=!0){if(_.isEmpty)return v?u.EMPTY_FULL:u.EMPTY_LOCAL;let y;_._parent?y=u.fromRuleContext(g,_._parent,v):y=v?u.EMPTY_FULL:u.EMPTY_LOCAL;let A=g.states[_.invokingState].transition(0);return y.getChild(A.followState.stateNumber)}static addEmptyContext(g){return g.addEmptyContext()}static removeEmptyContext(g){return g.removeEmptyContext()}static join(g,_,v=l.PredictionContextCache.UNCACHED){if(g===_)return g;if(g.isEmpty)return u.isEmptyLocal(g)?g:u.addEmptyContext(_);if(_.isEmpty)return u.isEmptyLocal(_)?_:u.addEmptyContext(g);let y=g.size,x=_.size;if(y===1&&x===1&&g.getReturnState(0)===_.getReturnState(0)){let I=v.join(g.getParent(0),_.getParent(0));return I===g.getParent(0)?g:I===_.getParent(0)?_:I.getChild(g.getReturnState(0))}let A=0,w=new Array(y+x),D=new Array(w.length),b=0,S=0,T=!0,C=!0;for(;b<y&&S<x;)g.getReturnState(b)===_.getReturnState(S)?(w[A]=v.join(g.getParent(b),_.getParent(S)),D[A]=g.getReturnState(b),T=T&&w[A]===g.getParent(b),C=C&&w[A]===_.getParent(S),b++,S++):g.getReturnState(b)<_.getReturnState(S)?(w[A]=g.getParent(b),D[A]=g.getReturnState(b),C=!1,b++):(c(_.getReturnState(S)<g.getReturnState(b)),w[A]=_.getParent(S),D[A]=_.getReturnState(S),T=!1,S++),A++;for(;b<y;)w[A]=g.getParent(b),D[A]=g.getReturnState(b),b++,C=!1,A++;for(;S<x;)w[A]=_.getParent(S),D[A]=_.getReturnState(S),S++,T=!1,A++;return T?g:C?_:(A<w.length&&(w=w.slice(0,A),D=D.slice(0,A)),w.length===0?u.EMPTY_FULL:w.length===1?new f(w[0],D[0]):new d(w,D))}static isEmptyLocal(g){return g===u.EMPTY_LOCAL}static getCachedContext(g,_,v){if(g.isEmpty)return g;let y=v.get(g);if(y)return y;if(y=_.get(g),y)return v.put(g,y),y;let x=!1,A=new Array(g.size);for(let D=0;D<A.length;D++){let b=u.getCachedContext(g.getParent(D),_,v);if(x||b!==g.getParent(D)){if(!x){A=new Array(g.size);for(let S=0;S<g.size;S++)A[S]=g.getParent(S);x=!0}A[D]=b}}if(!x)return y=_.putIfAbsent(g,g),v.put(g,y??g),g;let w;if(A.length===1)w=new f(A[0],g.getReturnState(0));else{let D=new Array(g.size);for(let b=0;b<g.size;b++)D[b]=g.getReturnState(b);w=new d(A,D,g.hashCode())}return y=_.putIfAbsent(w,w),v.put(w,y||w),v.put(g,y||w),w}appendSingleContext(g,_){return this.appendContext(u.EMPTY_FULL.getChild(g),_)}getChild(g){return new f(this,g)}hashCode(){return this.cachedHashCode}toStrings(g,_,v=u.EMPTY_FULL){let y=[];e:for(let x=0;;x++){let A=0,w=!0,D=this,b=_,S="";for(S+="[";!D.isEmpty&&D!==v;){let T=0;if(D.size>0){let C=1;for(;1<<C>>>0<D.size;)C++;let I=(1<<C>>>0)-1;if(T=x>>A&I,w=w&&T>=D.size-1,T>=D.size)continue e;A+=C}if(g){S.length>1&&(S+=" ");let I=g.atn.states[b],M=g.ruleNames[I.ruleIndex];S+=M}else D.getReturnState(T)!==u.EMPTY_FULL_STATE_KEY&&(D.isEmpty||(S.length>1&&(S+=" "),S+=D.getReturnState(T)));b=D.getReturnState(T),D=D.getParent(T)}if(S+="]",y.push(S),w)break}return y}}e([a.Override],u.prototype,"hashCode",null),e([t(0,a.NotNull),t(1,a.NotNull),t(2,a.NotNull)],u,"join",null),e([t(0,a.NotNull),t(1,a.NotNull),t(2,a.NotNull)],u,"getCachedContext",null),i.PredictionContext=u;class p extends u{constructor(g){super(u.calculateEmptyHashCode()),this.fullContext=g}get isFullContext(){return this.fullContext}addEmptyContext(){return this}removeEmptyContext(){throw new Error("Cannot remove the empty context from itself.")}getParent(g){throw new Error("index out of bounds")}getReturnState(g){throw new Error("index out of bounds")}findReturnState(g){return-1}get size(){return 0}appendSingleContext(g,_){return _.getChild(this,g)}appendContext(g,_){return g}get isEmpty(){return!0}get hasEmpty(){return!0}equals(g){return this===g}toStrings(g,_,v){return["[]"]}}e([a.Override],p.prototype,"addEmptyContext",null),e([a.Override],p.prototype,"removeEmptyContext",null),e([a.Override],p.prototype,"getParent",null),e([a.Override],p.prototype,"getReturnState",null),e([a.Override],p.prototype,"findReturnState",null),e([a.Override],p.prototype,"size",null),e([a.Override],p.prototype,"appendSingleContext",null),e([a.Override],p.prototype,"appendContext",null),e([a.Override],p.prototype,"isEmpty",null),e([a.Override],p.prototype,"hasEmpty",null),e([a.Override],p.prototype,"equals",null),e([a.Override],p.prototype,"toStrings",null);let d=class Ns extends u{constructor(g,_,v){super(v||u.calculateHashCode(g,_)),c(g.length===_.length),c(_.length>1||_[0]!==u.EMPTY_FULL_STATE_KEY,"Should be using PredictionContext.EMPTY instead."),this.parents=g,this.returnStates=_}getParent(g){return this.parents[g]}getReturnState(g){return this.returnStates[g]}findReturnState(g){return s.Arrays.binarySearch(this.returnStates,g)}get size(){return this.returnStates.length}get isEmpty(){return!1}get hasEmpty(){return this.returnStates[this.returnStates.length-1]===u.EMPTY_FULL_STATE_KEY}addEmptyContext(){if(this.hasEmpty)return this;let g=this.parents.slice(0),_=this.returnStates.slice(0);return g.push(u.EMPTY_FULL),_.push(u.EMPTY_FULL_STATE_KEY),new Ns(g,_)}removeEmptyContext(){if(!this.hasEmpty)return this;if(this.returnStates.length===2)return new f(this.parents[0],this.returnStates[0]);{let g=this.parents.slice(0,this.parents.length-1),_=this.returnStates.slice(0,this.returnStates.length-1);return new Ns(g,_)}}appendContext(g,_){return Ns.appendContextImpl(this,g,new u.IdentityHashMap)}static appendContextImpl(g,_,v){if(_.isEmpty){if(u.isEmptyLocal(_)){if(g.hasEmpty)return u.EMPTY_LOCAL;throw new Error("what to do here?")}return g}if(_.size!==1)throw new Error("Appending a tree suffix is not yet supported.");let y=v.get(g);if(!y){if(g.isEmpty)y=_;else{let x=g.size;g.hasEmpty&&x--;let A=new Array(x),w=new Array(x);for(let D=0;D<x;D++)w[D]=g.getReturnState(D);for(let D=0;D<x;D++)A[D]=Ns.appendContextImpl(g.getParent(D),_,v);A.length===1?y=new f(A[0],w[0]):(c(A.length>1),y=new Ns(A,w)),g.hasEmpty&&(y=u.join(y,_))}v.put(g,y)}return y}equals(g){if(this===g)return!0;if(!(g instanceof Ns)||this.hashCode()!==g.hashCode())return!1;let _=g;return this.equalsImpl(_,new n.Array2DHashSet)}equalsImpl(g,_){let v=[],y=[];for(v.push(this),y.push(g);;){let x=v.pop(),A=y.pop();if(!x||!A)break;let w=new l.PredictionContextCache.IdentityCommutativePredictionContextOperands(x,A);if(!_.add(w))continue;let D=w.x.size;if(D===0){if(!w.x.equals(w.y))return!1;continue}let b=w.y.size;if(D!==b)return!1;for(let S=0;S<D;S++){if(w.x.getReturnState(S)!==w.y.getReturnState(S))return!1;let T=w.x.getParent(S),C=w.y.getParent(S);if(T.hashCode()!==C.hashCode())return!1;T!==C&&(v.push(T),y.push(C))}}return!0}};e([a.NotNull],d.prototype,"parents",void 0),e([a.NotNull],d.prototype,"returnStates",void 0),e([a.Override],d.prototype,"getParent",null),e([a.Override],d.prototype,"getReturnState",null),e([a.Override],d.prototype,"findReturnState",null),e([a.Override],d.prototype,"size",null),e([a.Override],d.prototype,"isEmpty",null),e([a.Override],d.prototype,"hasEmpty",null),e([a.Override],d.prototype,"addEmptyContext",null),e([a.Override],d.prototype,"removeEmptyContext",null),e([a.Override],d.prototype,"appendContext",null),e([a.Override],d.prototype,"equals",null),d=e([t(0,a.NotNull)],d);let f=class pA extends u{constructor(g,_){super(u.calculateSingleHashCode(g,_)),this.parent=g,this.returnState=_}getParent(g){return this.parent}getReturnState(g){return this.returnState}findReturnState(g){return this.returnState===g?0:-1}get size(){return 1}get isEmpty(){return!1}get hasEmpty(){return!1}appendContext(g,_){return _.getChild(this.parent.appendContext(g,_),this.returnState)}addEmptyContext(){let g=[this.parent,u.EMPTY_FULL],_=[this.returnState,u.EMPTY_FULL_STATE_KEY];return new d(g,_)}removeEmptyContext(){return this}equals(g){if(g===this)return!0;if(!(g instanceof pA))return!1;let _=g;return this.hashCode()!==_.hashCode()?!1:this.returnState===_.returnState&&this.parent.equals(_.parent)}};e([a.NotNull],f.prototype,"parent",void 0),e([a.Override],f.prototype,"getParent",null),e([a.Override],f.prototype,"getReturnState",null),e([a.Override],f.prototype,"findReturnState",null),e([a.Override],f.prototype,"size",null),e([a.Override],f.prototype,"isEmpty",null),e([a.Override],f.prototype,"hasEmpty",null),e([a.Override],f.prototype,"appendContext",null),e([a.Override],f.prototype,"addEmptyContext",null),e([a.Override],f.prototype,"removeEmptyContext",null),e([a.Override],f.prototype,"equals",null),f=e([t(0,a.NotNull)],f),i.SingletonPredictionContext=f,function(m){m.EMPTY_LOCAL=new p(!1),m.EMPTY_FULL=new p(!0),m.EMPTY_LOCAL_STATE_KEY=-(1<<31>>>0),m.EMPTY_FULL_STATE_KEY=(1<<31>>>0)-1;class g extends r.Array2DHashMap{constructor(){super(_.INSTANCE)}}m.IdentityHashMap=g;class _{IdentityEqualityComparator(){}hashCode(y){return y.hashCode()}equals(y,x){return y===x}}_.INSTANCE=new _,e([a.Override],_.prototype,"hashCode",null),e([a.Override],_.prototype,"equals",null),m.IdentityEqualityComparator=_}(u=i.PredictionContext||(i.PredictionContext={}))}(Mg)),Mg}var da={},Ut={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ut,"__esModule",{value:!0});var ex=Ut.toCharArray=Ut.toMap=Ut.equals=Ut.join=Ut.escapeWhitespace=void 0;function UP(i,e){return e?i.replace(/ /,""):i.replace(/\t/,"\\t").replace(/\n/,"\\n").replace(/\r/,"\\r")}Ut.escapeWhitespace=UP;function KP(i,e){let t="",r=!0;for(let n of i)r?r=!1:t+=e,t+=n;return t}Ut.join=KP;function HP(i,e){return i===e?!0:i===void 0||e===void 0?!1:i.equals(e)}Ut.equals=HP;function zP(i){let e=new Map;for(let t=0;t<i.length;t++)e.set(i[t],t);return e}Ut.toMap=zP;function jP(i){if(typeof i=="string"){let e=new Uint16Array(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}else return i.toCharArray()}ex=Ut.toCharArray=jP;(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(p,d,f,m){var g=arguments.length,_=g<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,f):m,v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(p,d,f,m);else for(var y=p.length-1;y>=0;y--)(v=p[y])&&(_=(g<3?v(_):g>3?v(d,f,_):v(d,f))||_);return g>3&&_&&Object.defineProperty(d,f,_),_},t=P&&P.__param||function(p,d){return function(f,m){d(f,m,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SemanticContext=void 0;const r=Nr,n=ha,s=Tt,o=te,a=Zi,l=Ut;function c(p){let d;for(let f of p){if(d===void 0){d=f;continue}d.compareTo(f)<0&&(d=f)}return d}function h(p){let d;for(let f of p){if(d===void 0){d=f;continue}d.compareTo(f)>0&&(d=f)}return d}class u{static get NONE(){return u._NONE===void 0&&(u._NONE=new u.Predicate),u._NONE}evalPrecedence(d,f){return this}static and(d,f){if(!d||d===u.NONE)return f;if(f===u.NONE)return d;let m=new u.AND(d,f);return m.opnds.length===1?m.opnds[0]:m}static or(d,f){if(!d)return f;if(d===u.NONE||f===u.NONE)return u.NONE;let m=new u.OR(d,f);return m.opnds.length===1?m.opnds[0]:m}}i.SemanticContext=u,function(p){function m(A){let w=[];for(let D=0;D<A.length;D++){let b=A[D];b instanceof p.PrecedencePredicate&&(w.push(b),A.splice(D,1),D--)}return w}class g extends p{constructor(w=-1,D=-1,b=!1){super(),this.ruleIndex=w,this.predIndex=D,this.isCtxDependent=b}eval(w,D){let b=this.isCtxDependent?D:void 0;return w.sempred(b,this.ruleIndex,this.predIndex)}hashCode(){let w=s.MurmurHash.initialize();return w=s.MurmurHash.update(w,this.ruleIndex),w=s.MurmurHash.update(w,this.predIndex),w=s.MurmurHash.update(w,this.isCtxDependent?1:0),w=s.MurmurHash.finish(w,3),w}equals(w){return w instanceof g?this===w?!0:this.ruleIndex===w.ruleIndex&&this.predIndex===w.predIndex&&this.isCtxDependent===w.isCtxDependent:!1}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}}e([o.Override],g.prototype,"eval",null),e([o.Override],g.prototype,"hashCode",null),e([o.Override],g.prototype,"equals",null),e([o.Override],g.prototype,"toString",null),p.Predicate=g;class _ extends p{constructor(w){super(),this.precedence=w}eval(w,D){return w.precpred(D,this.precedence)}evalPrecedence(w,D){if(w.precpred(D,this.precedence))return p.NONE}compareTo(w){return this.precedence-w.precedence}hashCode(){let w=1;return w=31*w+this.precedence,w}equals(w){return w instanceof _?this===w?!0:this.precedence===w.precedence:!1}toString(){return"{"+this.precedence+">=prec}?"}}e([o.Override],_.prototype,"eval",null),e([o.Override],_.prototype,"evalPrecedence",null),e([o.Override],_.prototype,"compareTo",null),e([o.Override],_.prototype,"hashCode",null),e([o.Override],_.prototype,"equals",null),e([o.Override],_.prototype,"toString",null),p.PrecedencePredicate=_;class v extends p{}p.Operator=v;let y=class lf extends v{constructor(w,D){super();let b=new r.Array2DHashSet(a.ObjectEqualityComparator.INSTANCE);w instanceof lf?b.addAll(w.opnds):b.add(w),D instanceof lf?b.addAll(D.opnds):b.add(D),this.opnds=b.toArray();let S=m(this.opnds),T=h(S);T&&this.opnds.push(T)}get operands(){return this.opnds}equals(w){return this===w?!0:w instanceof lf?n.ArrayEqualityComparator.INSTANCE.equals(this.opnds,w.opnds):!1}hashCode(){return s.MurmurHash.hashCode(this.opnds,40363613)}eval(w,D){for(let b of this.opnds)if(!b.eval(w,D))return!1;return!0}evalPrecedence(w,D){let b=!1,S=[];for(let C of this.opnds){let I=C.evalPrecedence(w,D);if(b=b||I!==C,I==null)return;I!==p.NONE&&S.push(I)}if(!b)return this;if(S.length===0)return p.NONE;let T=S[0];for(let C=1;C<S.length;C++)T=p.and(T,S[C]);return T}toString(){return l.join(this.opnds,"&&")}};e([o.Override],y.prototype,"operands",null),e([o.Override],y.prototype,"equals",null),e([o.Override],y.prototype,"hashCode",null),e([o.Override],y.prototype,"eval",null),e([o.Override],y.prototype,"evalPrecedence",null),e([o.Override],y.prototype,"toString",null),y=e([t(0,o.NotNull),t(1,o.NotNull)],y),p.AND=y;let x=class uf extends v{constructor(w,D){super();let b=new r.Array2DHashSet(a.ObjectEqualityComparator.INSTANCE);w instanceof uf?b.addAll(w.opnds):b.add(w),D instanceof uf?b.addAll(D.opnds):b.add(D),this.opnds=b.toArray();let S=m(this.opnds),T=c(S);T&&this.opnds.push(T)}get operands(){return this.opnds}equals(w){return this===w?!0:w instanceof uf?n.ArrayEqualityComparator.INSTANCE.equals(this.opnds,w.opnds):!1}hashCode(){return s.MurmurHash.hashCode(this.opnds,486279973)}eval(w,D){for(let b of this.opnds)if(b.eval(w,D))return!0;return!1}evalPrecedence(w,D){let b=!1,S=[];for(let C of this.opnds){let I=C.evalPrecedence(w,D);if(b=b||I!==C,I===p.NONE)return p.NONE;I&&S.push(I)}if(!b)return this;if(S.length===0)return;let T=S[0];for(let C=1;C<S.length;C++)T=p.or(T,S[C]);return T}toString(){return l.join(this.opnds,"||")}};e([o.Override],x.prototype,"operands",null),e([o.Override],x.prototype,"equals",null),e([o.Override],x.prototype,"hashCode",null),e([o.Override],x.prototype,"eval",null),e([o.Override],x.prototype,"evalPrecedence",null),e([o.Override],x.prototype,"toString",null),x=e([t(0,o.NotNull),t(1,o.NotNull)],x),p.OR=x}(u=i.SemanticContext||(i.SemanticContext={}))})(da);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Lt=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Yi=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(ca,"__esModule",{value:!0});ca.ATNConfig=void 0;const $P=Rn,VP=on,vn=Tt,nt=te,WP=Zi,Lw=Rr(),Rs=da,kw=Xi,Rg=2147483648;let xi=class wh{constructor(e,t,r){typeof t=="number"?(kw((t&16777215)===t),this._state=e,this.altAndOuterContextDepth=t,this._context=r):(this._state=e,this.altAndOuterContextDepth=t.altAndOuterContextDepth,this._context=r)}static create(e,t,r,n=Rs.SemanticContext.NONE,s){return n!==Rs.SemanticContext.NONE?s!=null?new yl(s,n,e,t,r,!1):new Uo(n,e,t,r):s!=null?new vl(s,e,t,r,!1):new wh(e,t,r)}get state(){return this._state}get alt(){return this.altAndOuterContextDepth&16777215}get context(){return this._context}set context(e){this._context=e}get reachesIntoOuterContext(){return this.outerContextDepth!==0}get outerContextDepth(){return this.altAndOuterContextDepth>>>24&127}set outerContextDepth(e){kw(e>=0),e=Math.min(e,127),this.altAndOuterContextDepth=e<<24|(this.altAndOuterContextDepth&-2130706433)>>>0}get lexerActionExecutor(){}get semanticContext(){return Rs.SemanticContext.NONE}get hasPassedThroughNonGreedyDecision(){return!1}clone(){return this.transform(this.state,!1)}transform(e,t,r){return r==null?this.transformImpl(e,this._context,this.semanticContext,t,this.lexerActionExecutor):r instanceof Lw.PredictionContext?this.transformImpl(e,r,this.semanticContext,t,this.lexerActionExecutor):r instanceof Rs.SemanticContext?this.transformImpl(e,this._context,r,t,this.lexerActionExecutor):this.transformImpl(e,this._context,this.semanticContext,t,r)}transformImpl(e,t,r,n,s){let o=n&&wh.checkNonGreedyDecision(this,e);return r!==Rs.SemanticContext.NONE?s!=null||o?new yl(s,r,e,this,t,o):new Uo(r,e,this,t):s!=null||o?new vl(s,e,this,t,o):new wh(e,this,t)}static checkNonGreedyDecision(e,t){return e.hasPassedThroughNonGreedyDecision||t instanceof VP.DecisionState&&t.nonGreedy}appendContext(e,t){if(typeof e=="number"){let r=this.context.appendSingleContext(e,t);return this.transform(this.state,!1,r)}else{let r=this.context.appendContext(e,t);return this.transform(this.state,!1,r)}}contains(e){if(this.state.stateNumber!==e.state.stateNumber||this.alt!==e.alt||!this.semanticContext.equals(e.semanticContext))return!1;let t=[],r=[];for(t.push(this.context),r.push(e.context);;){let n=t.pop(),s=r.pop();if(!n||!s)break;if(n===s)return!0;if(n.size<s.size)return!1;if(s.isEmpty)return n.hasEmpty;for(let o=0;o<s.size;o++){let a=n.findReturnState(s.getReturnState(o));if(a<0)return!1;t.push(n.getParent(a)),r.push(s.getParent(o))}}return!1}get isPrecedenceFilterSuppressed(){return(this.altAndOuterContextDepth&Rg)!==0}set isPrecedenceFilterSuppressed(e){e?this.altAndOuterContextDepth|=Rg:this.altAndOuterContextDepth&=~Rg}equals(e){return this===e?!0:e instanceof wh?this.state.stateNumber===e.state.stateNumber&&this.alt===e.alt&&this.reachesIntoOuterContext===e.reachesIntoOuterContext&&this.context.equals(e.context)&&this.semanticContext.equals(e.semanticContext)&&this.isPrecedenceFilterSuppressed===e.isPrecedenceFilterSuppressed&&this.hasPassedThroughNonGreedyDecision===e.hasPassedThroughNonGreedyDecision&&WP.ObjectEqualityComparator.INSTANCE.equals(this.lexerActionExecutor,e.lexerActionExecutor):!1}hashCode(){let e=vn.MurmurHash.initialize(7);return e=vn.MurmurHash.update(e,this.state.stateNumber),e=vn.MurmurHash.update(e,this.alt),e=vn.MurmurHash.update(e,this.reachesIntoOuterContext?1:0),e=vn.MurmurHash.update(e,this.context),e=vn.MurmurHash.update(e,this.semanticContext),e=vn.MurmurHash.update(e,this.hasPassedThroughNonGreedyDecision?1:0),e=vn.MurmurHash.update(e,this.lexerActionExecutor),e=vn.MurmurHash.finish(e,7),e}toDotString(){let e="";e+=`digraph G {
`,e+=`rankdir=LR;
`;let t=new $P.Array2DHashMap(Lw.PredictionContext.IdentityEqualityComparator.INSTANCE),r=[];function n(s){let o=t.size,a=t.putIfAbsent(s,o);return a??(r.push(s),o)}for(r.push(this.context),t.put(this.context,0);;){let s=r.pop();if(!s)break;for(let o=0;o<s.size;o++)e+="  s"+n(s),e+="->",e+="s"+n(s.getParent(o)),e+='[label="'+s.getReturnState(o)+`"];
`}return e+=`}
`,e.toString()}toString(e,t,r){r==null&&(r=t!=null),t==null&&(t=!0);let n="",s;r?s=this.context.toStrings(e,this.state.stateNumber):s=["?"];let o=!0;for(let a of s)o?o=!1:n+=", ",n+="(",n+=this.state,t&&(n+=",",n+=this.alt),this.context&&(n+=",",n+=a),this.semanticContext!==Rs.SemanticContext.NONE&&(n+=",",n+=this.semanticContext),this.reachesIntoOuterContext&&(n+=",up="+this.outerContextDepth),n+=")";return n.toString()}};Lt([nt.NotNull],xi.prototype,"_state",void 0);Lt([nt.NotNull],xi.prototype,"_context",void 0);Lt([nt.NotNull],xi.prototype,"state",null);Lt([nt.NotNull,Yi(0,nt.NotNull)],xi.prototype,"context",null);Lt([nt.NotNull],xi.prototype,"semanticContext",null);Lt([nt.Override],xi.prototype,"clone",null);Lt([Yi(0,nt.NotNull),Yi(2,nt.NotNull)],xi.prototype,"transformImpl",null);Lt([nt.Override],xi.prototype,"equals",null);Lt([nt.Override],xi.prototype,"hashCode",null);Lt([Yi(0,nt.NotNull),Yi(3,nt.NotNull)],xi,"create",null);xi=Lt([Yi(0,nt.NotNull),Yi(2,nt.NotNull)],xi);ca.ATNConfig=xi;let Uo=class extends xi{constructor(e,t,r,n){typeof r=="number"?super(t,r,n):super(t,r,n),this._semanticContext=e}get semanticContext(){return this._semanticContext}};Lt([nt.NotNull],Uo.prototype,"_semanticContext",void 0);Lt([nt.Override],Uo.prototype,"semanticContext",null);Uo=Lt([Yi(1,nt.NotNull),Yi(2,nt.NotNull)],Uo);let vl=class extends xi{constructor(e,t,r,n,s){if(typeof r=="number")super(t,r,n);else if(super(t,r,n),r.semanticContext!==Rs.SemanticContext.NONE)throw new Error("Not supported");this._lexerActionExecutor=e,this.passedThroughNonGreedyDecision=s}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};Lt([nt.Override],vl.prototype,"lexerActionExecutor",null);Lt([nt.Override],vl.prototype,"hasPassedThroughNonGreedyDecision",null);vl=Lt([Yi(1,nt.NotNull),Yi(2,nt.NotNull)],vl);let yl=class extends Uo{constructor(e,t,r,n,s,o){typeof n=="number"?super(t,r,n,s):super(t,r,n,s),this._lexerActionExecutor=e,this.passedThroughNonGreedyDecision=o}get lexerActionExecutor(){return this._lexerActionExecutor}get hasPassedThroughNonGreedyDecision(){return this.passedThroughNonGreedyDecision}};Lt([nt.Override],yl.prototype,"lexerActionExecutor",null);Lt([nt.Override],yl.prototype,"hasPassedThroughNonGreedyDecision",null);yl=Lt([Yi(1,nt.NotNull),Yi(2,nt.NotNull)],yl);var Lr={};const GP=Zv(SP);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Lr,"__esModule",{value:!0});Lr.BitSet=void 0;const YP=GP,qP=Tt,bu=new Uint16Array(0);function ki(i){return i>>>4}function Ra(i){return i*16}function e1(i){let e=1;for(let t=0;t<16;t++){if(i&e)return t;e=e<<1>>>0}throw new RangeError("No specified bit found")}function Bw(i){let e=32768;for(let t=15;t>=0;t--){if(i&e)return t;e=e>>>1}throw new RangeError("No specified bit found")}function ir(i,e){return i&=15,e&=15,i===e?1<<i>>>0:65535>>>15-e^65535>>>16-i}const t1=new Uint8Array(65536);for(let i=0;i<16;i++){const e=1<<i>>>0;let t=0;for(;t<t1.length;){t+=e;for(let r=0;r<e;r++)t1[t]++,t++}}class za{constructor(e){if(!e)this.data=bu;else if(typeof e=="number"){if(e<0)throw new RangeError("nbits cannot be negative");this.data=new Uint16Array(ki(e-1)+1)}else if(e instanceof za)this.data=e.data.slice(0);else{let t=-1;for(let r of e)t<r&&(t=r);this.data=new Uint16Array(ki(t-1)+1);for(let r of e)this.set(r)}}and(e){const t=this.data,r=e.data,n=Math.min(t.length,r.length);let s=-1;for(let o=0;o<n;o++)(t[o]&=r[o])!==0&&(s=o);s===-1&&(this.data=bu),s<t.length-1&&(this.data=t.slice(0,s+1))}andNot(e){const t=this.data,r=e.data,n=Math.min(t.length,r.length);let s=-1;for(let o=0;o<n;o++)(t[o]&=r[o]^65535)!==0&&(s=o);s===-1&&(this.data=bu),s<t.length-1&&(this.data=t.slice(0,s+1))}cardinality(){if(this.isEmpty)return 0;const e=this.data,t=e.length;let r=0;for(let n=0;n<t;n++)r+=t1[e[n]];return r}clear(e,t){e==null?this.data.fill(0):t==null?this.set(e,!1):this.set(e,t,!1)}flip(e,t){if(t==null&&(t=e),e<0||t<e)throw new RangeError;let r=ki(e);const n=ki(t);if(r===n)this.data[r]^=ir(e,t);else{for(this.data[r++]^=ir(e,15);r<n;)this.data[r++]^=65535;this.data[r++]^=ir(0,t)}}get(e,t){if(t===void 0)return!!(this.data[ki(e)]&ir(e,e));{let r=new za(t+1);for(let n=e;n<=t;n++)r.set(n,this.get(n));return r}}intersects(e){let t=Math.min(this.length(),e.length());if(t===0)return!1;let r=ki(t-1);for(let n=0;n<=r;n++)if(this.data[n]&e.data[n])return!0;return!1}get isEmpty(){return this.length()===0}length(){return this.data.length?this.previousSetBit(Ra(this.data.length)-1)+1:0}nextClearBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,r=t.length;let n=ki(e);if(n>r)return-1;let s=65535^ir(e,15);if((t[n]|s)===65535){for(n++,s=0;n<r&&t[n]===65535;n++);if(n===r)return-1}return Ra(n)+e1((t[n]|s)^65535)}nextSetBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,r=t.length;let n=ki(e);if(n>r)return-1;let s=ir(e,15);if(!(t[n]&s)){for(n++,s=65535;n<r&&t[n]===0;n++);if(n>=r)return-1}return Ra(n)+e1(t[n]&s)}or(e){const t=this.data,r=e.data,n=Math.min(t.length,r.length),s=Math.max(t.length,r.length),o=t.length===s?t:new Uint16Array(s);let a=-1;for(let c=0;c<n;c++)(o[c]=t[c]|r[c])!==0&&(a=c);const l=t.length>r.length?t:r;for(let c=n;c<s;c++)(o[c]=l[c])!==0&&(a=c);a===-1?this.data=bu:o.length===a+1?this.data=o:this.data=o.slice(0,a)}previousClearBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,r=t.length;let n=ki(e);n>=r&&(n=r-1);let s=65535^ir(0,e);if((t[n]|s)===65535){for(s=0,n--;n>=0&&t[n]===65535;n--);if(n<0)return-1}return Ra(n)+Bw((t[n]|s)^65535)}previousSetBit(e){if(e<0)throw new RangeError("fromIndex cannot be negative");const t=this.data,r=t.length;let n=ki(e);n>=r&&(n=r-1);let s=ir(0,e);if(!(t[n]&s)){for(n--,s=65535;n>=0&&t[n]===0;n--);if(n<0)return-1}return Ra(n)+Bw(t[n]&s)}set(e,t,r){if(t===void 0?(t=e,r=!0):typeof t=="boolean"&&(r=t,t=e),r===void 0&&(r=!0),e<0||e>t)throw new RangeError;let n=ki(e),s=ki(t);if(r&&s>=this.data.length){let o=new Uint16Array(s+1);this.data.forEach((a,l)=>o[l]=a),this.data=o}else if(!r){if(n>=this.data.length)return;s>=this.data.length&&(s=this.data.length-1,t=this.data.length*16-1)}if(n===s)this._setBits(n,r,ir(e,t));else{for(this._setBits(n++,r,ir(e,15));n<s;)this.data[n++]=r?65535:0;this._setBits(n,r,ir(0,t))}}_setBits(e,t,r){t?this.data[e]|=r:this.data[e]&=65535^r}get size(){return this.data.byteLength*8}hashCode(){return qP.MurmurHash.hashCode(this.data,22)}equals(e){if(e===this)return!0;if(!(e instanceof za))return!1;const t=this.length();if(t!==e.length())return!1;if(t===0)return!0;let r=ki(t-1);for(let n=0;n<=r;n++)if(this.data[n]!==e.data[n])return!1;return!0}toString(){let e="{",t=!0;for(let r=this.nextSetBit(0);r>=0;r=this.nextSetBit(r+1))t?t=!1:e+=", ",e+=r;return e+="}",e}xor(e){const t=this.data,r=e.data,n=Math.min(t.length,r.length),s=Math.max(t.length,r.length),o=t.length===s?t:new Uint16Array(s);let a=-1;for(let c=0;c<n;c++)(o[c]=t[c]^r[c])!==0&&(a=c);const l=t.length>r.length?t:r;for(let c=n;c<s;c++)(o[c]=l[c])!==0&&(a=c);a===-1?this.data=bu:o.length===a+1?this.data=o:this.data=o.slice(0,a+1)}clone(){return new za(this)}[Symbol.iterator](){return new XP(this.data)}[YP.inspect.custom](){return"BitSet "+this.toString()}}Lr.BitSet=za;class XP{constructor(e){this.data=e,this.index=0,this.mask=65535}next(){for(;this.index<this.data.length;){const e=this.data[this.index]&this.mask;if(e!==0){const t=Ra(this.index)+e1(e);return this.mask=ir(t+1,15),{done:!1,value:t}}this.index++,this.mask=65535}return{done:!0,value:-1}}[Symbol.iterator](){return this}}var Fw;function Uc(){if(Fw)return wu;Fw=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(_,v,y,x){var A=arguments.length,w=A<3?v:x===null?x=Object.getOwnPropertyDescriptor(v,y):x,D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(_,v,y,x);else for(var b=_.length-1;b>=0;b--)(D=_[b])&&(w=(A<3?D(w):A>3?D(v,y,w):D(v,y))||w);return A>3&&w&&Object.defineProperty(v,y,w),w};Object.defineProperty(wu,"__esModule",{value:!0}),wu.ATNConfigSet=void 0;const e=Rn,t=Nr,r=ha,n=hn(),s=ca,o=Lr,a=te,l=Zi,c=Rr(),h=Jy(),u=da,p=Xi,d=Ut;class f{hashCode(v){return v.state^v.alt}equals(v,y){return v.state===y.state&&v.alt===y.alt}}f.INSTANCE=new f;function m(_){return _?new e.Array2DHashMap(_):new e.Array2DHashMap(f.INSTANCE)}let g=class i1{constructor(v,y){this._uniqueAlt=0,this._hasSemanticContext=!1,this._dipsIntoOuterContext=!1,this.outermostConfigSet=!1,this.cachedHashCode=-1,v?(y?(this.mergedConfigs=void 0,this.unmerged=void 0):v.isReadOnly?(this.mergedConfigs=m(),this.unmerged=[]):(this.mergedConfigs=m(v.mergedConfigs),this.unmerged=v.unmerged.slice(0)),this.configs=v.configs.slice(0),this._dipsIntoOuterContext=v._dipsIntoOuterContext,this._hasSemanticContext=v._hasSemanticContext,this.outermostConfigSet=v.outermostConfigSet,(y||!v.isReadOnly)&&(this._uniqueAlt=v._uniqueAlt,this._conflictInfo=v._conflictInfo)):(this.mergedConfigs=m(),this.unmerged=[],this.configs=[],this._uniqueAlt=n.ATN.INVALID_ALT_NUMBER)}getRepresentedAlternatives(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts.clone();let v=new o.BitSet;for(let y of this)v.set(y.alt);return v}get isReadOnly(){return this.mergedConfigs==null}get isOutermostConfigSet(){return this.outermostConfigSet}set isOutermostConfigSet(v){if(this.outermostConfigSet&&!v)throw new Error("IllegalStateException");p(!v||!this._dipsIntoOuterContext),this.outermostConfigSet=v}getStates(){let v=new t.Array2DHashSet(l.ObjectEqualityComparator.INSTANCE);for(let y of this.configs)v.add(y.state);return v}optimizeConfigs(v){if(this.configs.length!==0)for(let y of this.configs)y.context=v.atn.getCachedContext(y.context)}clone(v){let y=new i1(this,v);return!v&&this.isReadOnly&&y.addAll(this.configs),y}get size(){return this.configs.length}get isEmpty(){return this.configs.length===0}contains(v){if(!(v instanceof s.ATNConfig))return!1;if(this.mergedConfigs&&this.unmerged){let y=v,x=this.getKey(y),A=this.mergedConfigs.get(x);if(A!=null&&this.canMerge(y,x,A))return A.contains(y);for(let w of this.unmerged)if(w.contains(v))return!0}else for(let y of this.configs)if(y.contains(v))return!0;return!1}*[Symbol.iterator](){yield*this.configs}toArray(){return this.configs}add(v,y){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");p(!this.outermostConfigSet||!v.reachesIntoOuterContext),y==null&&(y=h.PredictionContextCache.UNCACHED);let x,A=this.getKey(v),w=this.mergedConfigs.get(A);if(x=w==null,w!=null&&this.canMerge(v,A,w)){w.outerContextDepth=Math.max(w.outerContextDepth,v.outerContextDepth),v.isPrecedenceFilterSuppressed&&(w.isPrecedenceFilterSuppressed=!0);let D=c.PredictionContext.join(w.context,v.context,y);return this.updatePropertiesForMergedConfig(v),w.context===D?!1:(w.context=D,!0)}for(let D=0;D<this.unmerged.length;D++){let b=this.unmerged[D];if(this.canMerge(v,A,b)){b.outerContextDepth=Math.max(b.outerContextDepth,v.outerContextDepth),v.isPrecedenceFilterSuppressed&&(b.isPrecedenceFilterSuppressed=!0);let S=c.PredictionContext.join(b.context,v.context,y);return this.updatePropertiesForMergedConfig(v),b.context===S?!1:(b.context=S,x&&(this.mergedConfigs.put(A,b),this.unmerged.splice(D,1)),!0)}}return this.configs.push(v),x?this.mergedConfigs.put(A,v):this.unmerged.push(v),this.updatePropertiesForAddedConfig(v),!0}updatePropertiesForMergedConfig(v){this._dipsIntoOuterContext=this._dipsIntoOuterContext||v.reachesIntoOuterContext,p(!this.outermostConfigSet||!this._dipsIntoOuterContext)}updatePropertiesForAddedConfig(v){this.configs.length===1?this._uniqueAlt=v.alt:this._uniqueAlt!==v.alt&&(this._uniqueAlt=n.ATN.INVALID_ALT_NUMBER),this._hasSemanticContext=this._hasSemanticContext||!u.SemanticContext.NONE.equals(v.semanticContext),this._dipsIntoOuterContext=this._dipsIntoOuterContext||v.reachesIntoOuterContext,p(!this.outermostConfigSet||!this._dipsIntoOuterContext)}canMerge(v,y,x){return v.state.stateNumber!==x.state.stateNumber||y.alt!==x.alt?!1:v.semanticContext.equals(x.semanticContext)}getKey(v){return{state:v.state.stateNumber,alt:v.alt}}containsAll(v){for(let y of v)if(!(y instanceof s.ATNConfig)||!this.contains(y))return!1;return!0}addAll(v,y){this.ensureWritable();let x=!1;for(let A of v)this.add(A,y)&&(x=!0);return x}clear(){if(this.ensureWritable(),!this.mergedConfigs||!this.unmerged)throw new Error("Covered by ensureWritable but duplicated here for strict null check limitation");this.mergedConfigs.clear(),this.unmerged.length=0,this.configs.length=0,this._dipsIntoOuterContext=!1,this._hasSemanticContext=!1,this._uniqueAlt=n.ATN.INVALID_ALT_NUMBER,this._conflictInfo=void 0}equals(v){return this===v?!0:v instanceof i1?this.outermostConfigSet===v.outermostConfigSet&&d.equals(this._conflictInfo,v._conflictInfo)&&r.ArrayEqualityComparator.INSTANCE.equals(this.configs,v.configs):!1}hashCode(){if(this.isReadOnly&&this.cachedHashCode!==-1)return this.cachedHashCode;let v=1;return v=5*v^(this.outermostConfigSet?1:0),v=5*v^r.ArrayEqualityComparator.INSTANCE.hashCode(this.configs),this.isReadOnly&&(this.cachedHashCode=v),v}toString(v){v==null&&(v=!1);let y="",x=this.configs.slice(0);x.sort((A,w)=>A.alt!==w.alt?A.alt-w.alt:A.state.stateNumber!==w.state.stateNumber?A.state.stateNumber-w.state.stateNumber:A.semanticContext.toString().localeCompare(w.semanticContext.toString())),y+="[";for(let A=0;A<x.length;A++)A>0&&(y+=", "),y+=x[A].toString(void 0,!0,v);return y+="]",this._hasSemanticContext&&(y+=",hasSemanticContext="+this._hasSemanticContext),this._uniqueAlt!==n.ATN.INVALID_ALT_NUMBER&&(y+=",uniqueAlt="+this._uniqueAlt),this._conflictInfo!=null&&(y+=",conflictingAlts="+this._conflictInfo.conflictedAlts,this._conflictInfo.isExact||(y+="*")),this._dipsIntoOuterContext&&(y+=",dipsIntoOuterContext"),y.toString()}get uniqueAlt(){return this._uniqueAlt}get hasSemanticContext(){return this._hasSemanticContext}set hasSemanticContext(v){this.ensureWritable(),this._hasSemanticContext=v}get conflictInfo(){return this._conflictInfo}set conflictInfo(v){this.ensureWritable(),this._conflictInfo=v}get conflictingAlts(){if(this._conflictInfo!=null)return this._conflictInfo.conflictedAlts}get isExactConflict(){return this._conflictInfo==null?!1:this._conflictInfo.isExact}get dipsIntoOuterContext(){return this._dipsIntoOuterContext}get(v){return this.configs[v]}ensureWritable(){if(this.isReadOnly)throw new Error("This ATNConfigSet is read only.")}};return i([a.NotNull],g.prototype,"getRepresentedAlternatives",null),i([a.Override],g.prototype,"size",null),i([a.Override],g.prototype,"isEmpty",null),i([a.Override],g.prototype,"contains",null),i([a.Override],g.prototype,Symbol.iterator,null),i([a.Override],g.prototype,"toArray",null),i([a.Override],g.prototype,"containsAll",null),i([a.Override],g.prototype,"clear",null),i([a.Override],g.prototype,"equals",null),i([a.Override],g.prototype,"hashCode",null),wu.ATNConfigSet=g,wu}var Su={},Lg={},kg={},Uw;function Ip(){return Uw||(Uw=1,function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(h,u,p,d){var f=arguments.length,m=f<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,p):d,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(h,u,p,d);else for(var _=h.length-1;_>=0;_--)(g=h[_])&&(m=(f<3?g(m):f>3?g(u,p,m):g(u,p))||m);return f>3&&m&&Object.defineProperty(u,p,m),m},t=P&&P.__param||function(h,u){return function(p,d){u(p,d,h)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DFAState=void 0;const r=hn(),n=Lr,s=Tt,o=te,a=Rr(),l=Xi;class c{constructor(u){this.stateNumber=-1,this.configs=u,this.edges=new Map,this.contextEdges=new Map}get isContextSensitive(){return!!this.contextSymbols}isContextSymbol(u){return this.isContextSensitive?this.contextSymbols.get(u):!1}setContextSymbol(u){l(this.isContextSensitive),this.contextSymbols.set(u)}setContextSensitive(u){l(!this.configs.isOutermostConfigSet),!this.isContextSensitive&&(this.contextSymbols||(this.contextSymbols=new n.BitSet))}get acceptStateInfo(){return this._acceptStateInfo}set acceptStateInfo(u){this._acceptStateInfo=u}get isAcceptState(){return!!this._acceptStateInfo}get prediction(){return this._acceptStateInfo?this._acceptStateInfo.prediction:r.ATN.INVALID_ALT_NUMBER}get lexerActionExecutor(){if(this._acceptStateInfo)return this._acceptStateInfo.lexerActionExecutor}getTarget(u){return this.edges.get(u)}setTarget(u,p){this.edges.set(u,p)}getEdgeMap(){return this.edges}getContextTarget(u){return u===a.PredictionContext.EMPTY_FULL_STATE_KEY&&(u=-1),this.contextEdges.get(u)}setContextTarget(u,p){if(!this.isContextSensitive)throw new Error("The state is not context sensitive.");u===a.PredictionContext.EMPTY_FULL_STATE_KEY&&(u=-1),this.contextEdges.set(u,p)}getContextEdgeMap(){let u=new Map(this.contextEdges),p=u.get(-1);if(p!==void 0)if(u.size===1){let d=new Map;return d.set(a.PredictionContext.EMPTY_FULL_STATE_KEY,p),d}else u.delete(-1),u.set(a.PredictionContext.EMPTY_FULL_STATE_KEY,p);return u}hashCode(){let u=s.MurmurHash.initialize(7);return u=s.MurmurHash.update(u,this.configs.hashCode()),u=s.MurmurHash.finish(u,1),u}equals(u){if(this===u)return!0;if(!(u instanceof c))return!1;let p=u;return this.configs.equals(p.configs)}toString(){let u="";return u+=this.stateNumber+":"+this.configs,this.isAcceptState&&(u+="=>",this.predicates?u+=this.predicates:u+=this.prediction),u.toString()}}e([o.NotNull],c.prototype,"configs",void 0),e([o.NotNull],c.prototype,"edges",void 0),e([o.NotNull],c.prototype,"contextEdges",void 0),e([o.Override],c.prototype,"hashCode",null),e([o.Override],c.prototype,"equals",null),e([o.Override],c.prototype,"toString",null),i.DFAState=c,function(h){let u=class{constructor(d,f){this.alt=f,this.pred=d}toString(){return"("+this.pred+", "+this.alt+")"}};e([o.NotNull],u.prototype,"pred",void 0),e([o.Override],u.prototype,"toString",null),u=e([t(0,o.NotNull)],u),h.PredPrediction=u}(c=i.DFAState||(i.DFAState={}))}(kg)),kg}var Kw;function Op(){return Kw||(Kw=1,function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(l,c,h,u){var p=arguments.length,d=p<3?c:u===null?u=Object.getOwnPropertyDescriptor(c,h):u,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(l,c,h,u);else for(var m=l.length-1;m>=0;m--)(f=l[m])&&(d=(p<3?f(d):p>3?f(c,h,d):f(c,h))||d);return p>3&&d&&Object.defineProperty(c,h,d),d},t=P&&P.__param||function(l,c){return function(h,u){c(h,u,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ATNSimulator=void 0;const r=Uc(),n=Ip(),s=te,o=Rr();let a=class bh{constructor(c){this.atn=c}static get ERROR(){return bh._ERROR||(bh._ERROR=new n.DFAState(new r.ATNConfigSet),bh._ERROR.stateNumber=o.PredictionContext.EMPTY_FULL_STATE_KEY),bh._ERROR}clearDFA(){this.atn.clearDFA()}};e([s.NotNull],a.prototype,"atn",void 0),e([s.NotNull],a,"ERROR",null),a=e([t(0,s.NotNull)],a),i.ATNSimulator=a,a=i.ATNSimulator||(i.ATNSimulator={}),i.ATNSimulator=a}(Lg)),Lg}var gs={},Kc={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Kc,"__esModule",{value:!0});Kc.ConsoleErrorListener=void 0;class r1{syntaxError(e,t,r,n,s,o){console.error(`line ${r}:${n} ${s}`)}}Kc.ConsoleErrorListener=r1;r1.INSTANCE=new r1;var Rl={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ZP=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Hw=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(Rl,"__esModule",{value:!0});Rl.ProxyErrorListener=void 0;const Bg=te;class mA{constructor(e){if(this.delegates=e,!e)throw new Error("Invalid delegates")}getDelegates(){return this.delegates}syntaxError(e,t,r,n,s,o){this.delegates.forEach(a=>{a.syntaxError&&a.syntaxError(e,t,r,n,s,o)})}}ZP([Bg.Override,Hw(0,Bg.NotNull),Hw(4,Bg.NotNull)],mA.prototype,"syntaxError",null);Rl.ProxyErrorListener=mA;var _t={},Ln={};(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(i,"__esModule",{value:!0}),i.IntStream=void 0,function(e){e.EOF=-1,e.UNKNOWN_SOURCE_NAME="<unknown>"}(i.IntStream||(i.IntStream={}))})(Ln);(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(i,"__esModule",{value:!0}),i.Token=void 0;const e=Ln;(function(t){t.INVALID_TYPE=0,t.EPSILON=-2,t.MIN_USER_TOKEN_TYPE=1,t.EOF=e.IntStream.EOF,t.DEFAULT_CHANNEL=0,t.HIDDEN_CHANNEL=1,t.MIN_USER_CHANNEL_VALUE=2})(i.Token||(i.Token={}))})(_t);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ln=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Mp=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(gs,"__esModule",{value:!0});gs.Recognizer=void 0;const QP=Kc,JP=Rl,qi=te,zw=_t,eI=Ut;class Kt{constructor(){this._listeners=[QP.ConsoleErrorListener.INSTANCE],this._stateNumber=-1}getTokenTypeMap(){let e=this.vocabulary,t=Kt.tokenTypeMapCache.get(e);if(t==null){let r=new Map;for(let n=0;n<=this.atn.maxTokenType;n++){let s=e.getLiteralName(n);s!=null&&r.set(s,n);let o=e.getSymbolicName(n);o!=null&&r.set(o,n)}r.set("EOF",zw.Token.EOF),t=r,Kt.tokenTypeMapCache.set(e,t)}return t}getRuleIndexMap(){let e=this.ruleNames;if(e==null)throw new Error("The current recognizer does not provide a list of rule names.");let t=Kt.ruleIndexMapCache.get(e);return t==null&&(t=eI.toMap(e),Kt.ruleIndexMapCache.set(e,t)),t}getTokenType(e){let t=this.getTokenTypeMap().get(e);return t??zw.Token.INVALID_TYPE}get serializedATN(){throw new Error("there is no serialized ATN")}get atn(){return this._interp.atn}get interpreter(){return this._interp}set interpreter(e){this._interp=e}get parseInfo(){return Promise.resolve(void 0)}getErrorHeader(e){let t=e.getOffendingToken();if(!t)return"";let r=t.line,n=t.charPositionInLine;return"line "+r+":"+n}addErrorListener(e){if(!e)throw new TypeError("listener must not be null");this._listeners.push(e)}removeErrorListener(e){let t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}removeErrorListeners(){this._listeners.length=0}getErrorListeners(){return this._listeners.slice(0)}getErrorListenerDispatch(){return new JP.ProxyErrorListener(this.getErrorListeners())}sempred(e,t,r){return!0}precpred(e,t){return!0}action(e,t,r){}get state(){return this._stateNumber}set state(e){this._stateNumber=e}}Kt.EOF=-1;Kt.tokenTypeMapCache=new WeakMap;Kt.ruleIndexMapCache=new WeakMap;ln([qi.SuppressWarnings("serial"),qi.NotNull],Kt.prototype,"_listeners",void 0);ln([qi.NotNull],Kt.prototype,"getTokenTypeMap",null);ln([qi.NotNull],Kt.prototype,"getRuleIndexMap",null);ln([qi.NotNull],Kt.prototype,"serializedATN",null);ln([qi.NotNull],Kt.prototype,"atn",null);ln([qi.NotNull,Mp(0,qi.NotNull)],Kt.prototype,"interpreter",null);ln([qi.NotNull,Mp(0,qi.NotNull)],Kt.prototype,"getErrorHeader",null);ln([Mp(0,qi.NotNull)],Kt.prototype,"addErrorListener",null);ln([Mp(0,qi.NotNull)],Kt.prototype,"removeErrorListener",null);ln([qi.NotNull],Kt.prototype,"getErrorListeners",null);gs.Recognizer=Kt;var kn={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var _s=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(kn,"__esModule",{value:!0});var tx=kn.VocabularyImpl=void 0;const Cn=te,tI=_t;class Pr{constructor(e,t,r){this.literalNames=e,this.symbolicNames=t,this.displayNames=r,this._maxTokenType=Math.max(this.displayNames.length,Math.max(this.literalNames.length,this.symbolicNames.length))-1}get maxTokenType(){return this._maxTokenType}getLiteralName(e){if(e>=0&&e<this.literalNames.length)return this.literalNames[e]}getSymbolicName(e){if(e>=0&&e<this.symbolicNames.length)return this.symbolicNames[e];if(e===tI.Token.EOF)return"EOF"}getDisplayName(e){if(e>=0&&e<this.displayNames.length){let n=this.displayNames[e];if(n)return n}let t=this.getLiteralName(e);if(t)return t;let r=this.getSymbolicName(e);return r||String(e)}}Pr.EMPTY_VOCABULARY=new Pr([],[],[]);_s([Cn.NotNull],Pr.prototype,"literalNames",void 0);_s([Cn.NotNull],Pr.prototype,"symbolicNames",void 0);_s([Cn.NotNull],Pr.prototype,"displayNames",void 0);_s([Cn.Override],Pr.prototype,"maxTokenType",null);_s([Cn.Override],Pr.prototype,"getLiteralName",null);_s([Cn.Override],Pr.prototype,"getSymbolicName",null);_s([Cn.Override,Cn.NotNull],Pr.prototype,"getDisplayName",null);_s([Cn.NotNull],Pr,"EMPTY_VOCABULARY",void 0);tx=kn.VocabularyImpl=Pr;var jw;function gA(){if(jw)return Su;jw=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(a,l,c,h){var u=arguments.length,p=u<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(a,l,c,h);else for(var f=a.length-1;f>=0;f--)(d=a[f])&&(p=(u<3?d(p):u>3?d(l,c,p):d(l,c))||p);return u>3&&p&&Object.defineProperty(l,c,p),p};Object.defineProperty(Su,"__esModule",{value:!0}),Su.DFASerializer=void 0;const e=Op(),t=te,r=Rr(),n=gs,s=kn;let o=class{constructor(l,c,h,u){c instanceof n.Recognizer?(h=c.ruleNames,u=c.atn,c=c.vocabulary):c||(c=s.VocabularyImpl.EMPTY_VOCABULARY),this.dfa=l,this.vocabulary=c,this.ruleNames=h,this.atn=u}toString(){if(!this.dfa.s0)return"";let l="";if(this.dfa.states){let h=new Array(...this.dfa.states.toArray());h.sort((u,p)=>u.stateNumber-p.stateNumber);for(let u of h){let p=u.getEdgeMap(),d=[...p.keys()].sort((g,_)=>g-_),f=u.getContextEdgeMap(),m=[...f.keys()].sort((g,_)=>g-_);for(let g of d){let _=p.get(g);if((_==null||_===e.ATNSimulator.ERROR)&&!u.isContextSymbol(g))continue;let v=!1;l+=this.getStateString(u)+"-"+this.getEdgeLabel(g)+"->",u.isContextSymbol(g)&&(l+="!",v=!0);let y=_;y&&y.stateNumber!==e.ATNSimulator.ERROR.stateNumber?l+=this.getStateString(y)+`
`:v&&(l+=`ctx
`)}if(u.isContextSensitive)for(let g of m)l+=this.getStateString(u)+"-"+this.getContextLabel(g)+"->"+this.getStateString(f.get(g))+`
`}}let c=l;return c.length===0?"":c}getContextLabel(l){if(l===r.PredictionContext.EMPTY_FULL_STATE_KEY)return"ctx:EMPTY_FULL";if(l===r.PredictionContext.EMPTY_LOCAL_STATE_KEY)return"ctx:EMPTY_LOCAL";if(this.atn&&l>0&&l<=this.atn.states.length){let h=this.atn.states[l].ruleIndex;if(this.ruleNames&&h>=0&&h<this.ruleNames.length)return"ctx:"+String(l)+"("+this.ruleNames[h]+")"}return"ctx:"+String(l)}getEdgeLabel(l){return this.vocabulary.getDisplayName(l)}getStateString(l){if(l===e.ATNSimulator.ERROR)return"ERROR";let c=l.stateNumber,h="s"+c;if(l.isAcceptState&&(l.predicates?h=":s"+c+"=>"+l.predicates:h=":s"+c+"=>"+l.prediction),l.isContextSensitive){h+="*";for(let u of l.configs)if(u.reachesIntoOuterContext){h+="*";break}}return h}};return i([t.NotNull],o.prototype,"dfa",void 0),i([t.NotNull],o.prototype,"vocabulary",void 0),i([t.Override],o.prototype,"toString",null),Su.DFASerializer=o,Su}var Eu={},$w;function iI(){if($w)return Eu;$w=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(o,a,l,c){var h=arguments.length,u=h<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,a,l,c);else for(var d=o.length-1;d>=0;d--)(p=o[d])&&(u=(h<3?p(u):h>3?p(a,l,u):p(a,l))||u);return h>3&&u&&Object.defineProperty(a,l,u),u},e=P&&P.__param||function(o,a){return function(l,c){a(l,c,o)}};Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.LexerDFASerializer=void 0;const t=gA(),r=te,n=kn;let s=class extends t.DFASerializer{constructor(a){super(a,n.VocabularyImpl.EMPTY_VOCABULARY)}getEdgeLabel(a){return"'"+String.fromCodePoint(a)+"'"}};return i([r.Override,r.NotNull],s.prototype,"getEdgeLabel",null),s=i([e(0,r.NotNull)],s),Eu.LexerDFASerializer=s,Eu}var Ll={},qt={};(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(i,"__esModule",{value:!0}),i.ATNStateType=void 0,function(e){e[e.INVALID_TYPE=0]="INVALID_TYPE",e[e.BASIC=1]="BASIC",e[e.RULE_START=2]="RULE_START",e[e.BLOCK_START=3]="BLOCK_START",e[e.PLUS_BLOCK_START=4]="PLUS_BLOCK_START",e[e.STAR_BLOCK_START=5]="STAR_BLOCK_START",e[e.TOKEN_START=6]="TOKEN_START",e[e.RULE_STOP=7]="RULE_STOP",e[e.BLOCK_END=8]="BLOCK_END",e[e.STAR_LOOP_BACK=9]="STAR_LOOP_BACK",e[e.STAR_LOOP_ENTRY=10]="STAR_LOOP_ENTRY",e[e.PLUS_LOOP_BACK=11]="PLUS_LOOP_BACK",e[e.LOOP_END=12]="LOOP_END"}(i.ATNStateType||(i.ATNStateType={}))})(qt);/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var rI=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.StarLoopEntryState=void 0;const nI=qt,sI=Lr,oI=on,aI=te;class _A extends oI.DecisionState{constructor(){super(...arguments),this.precedenceRuleDecision=!1,this.precedenceLoopbackStates=new sI.BitSet}get stateType(){return nI.ATNStateType.STAR_LOOP_ENTRY}}rI([aI.Override],_A.prototype,"stateType",null);Ll.StarLoopEntryState=_A;var Vw;function vA(){if(Vw)return xu;Vw=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(p,d,f,m){var g=arguments.length,_=g<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,f):m,v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(p,d,f,m);else for(var y=p.length-1;y>=0;y--)(v=p[y])&&(_=(g<3?v(_):g>3?v(d,f,_):v(d,f))||_);return g>3&&_&&Object.defineProperty(d,f,_),_},e=P&&P.__param||function(p,d){return function(f,m){d(f,m,p)}};Object.defineProperty(xu,"__esModule",{value:!0}),xu.DFA=void 0;const t=Nr,r=Uc(),n=gA(),s=Ip(),o=iI(),a=te,l=Zi,c=Ll,h=kn;let u=class{constructor(d,f=0){if(this.states=new t.Array2DHashSet(l.ObjectEqualityComparator.INSTANCE),this.nextStateNumber=0,!d.atn)throw new Error("The ATNState must be associated with an ATN");this.atnStartState=d,this.atn=d.atn,this.decision=f;let m=!1;d instanceof c.StarLoopEntryState&&d.precedenceRuleDecision&&(m=!0,this.s0=new s.DFAState(new r.ATNConfigSet),this.s0full=new s.DFAState(new r.ATNConfigSet)),this.precedenceDfa=m}get isPrecedenceDfa(){return this.precedenceDfa}getPrecedenceStartState(d,f){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");return f?this.s0full.getTarget(d):this.s0.getTarget(d)}setPrecedenceStartState(d,f,m){if(!this.isPrecedenceDfa)throw new Error("Only precedence DFAs may contain a precedence start state.");d<0||(f?this.s0full.setTarget(d,m):this.s0.setTarget(d,m))}get isEmpty(){return this.isPrecedenceDfa?this.s0.getEdgeMap().size===0&&this.s0full.getEdgeMap().size===0:this.s0==null&&this.s0full==null}get isContextSensitive(){return this.isPrecedenceDfa?this.s0full.getEdgeMap().size>0:this.s0full!=null}addState(d){return d.stateNumber=this.nextStateNumber++,this.states.getOrAdd(d)}toString(d,f){if(d||(d=h.VocabularyImpl.EMPTY_VOCABULARY),!this.s0)return"";let m;return f?m=new n.DFASerializer(this,d,f,this.atnStartState.atn):m=new n.DFASerializer(this,d),m.toString()}toLexerString(){return this.s0?new o.LexerDFASerializer(this).toString():""}};return i([a.NotNull],u.prototype,"states",void 0),i([a.NotNull],u.prototype,"atnStartState",void 0),i([a.NotNull],u.prototype,"atn",void 0),u=i([e(0,a.NotNull)],u),xu.DFA=u,xu}var Au={},kl={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Np=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(kl,"__esModule",{value:!0});kl.IntegerList=void 0;const lI=Pp,Rp=te,Fg=new Int32Array(0),uI=4,Ug=(1<<31>>>0)-1-8;class An{constructor(e){if(!e)this._data=Fg,this._size=0;else if(e instanceof An)this._data=e._data.slice(0),this._size=e._size;else if(typeof e=="number")e===0?(this._data=Fg,this._size=0):(this._data=new Int32Array(e),this._size=0);else{this._data=Fg,this._size=0;for(let t of e)this.add(t)}}add(e){this._data.length===this._size&&this.ensureCapacity(this._size+1),this._data[this._size]=e,this._size++}addAll(e){if(Array.isArray(e))this.ensureCapacity(this._size+e.length),this._data.subarray(this._size,this._size+e.length).set(e),this._size+=e.length;else if(e instanceof An)this.ensureCapacity(this._size+e._size),this._data.subarray(this._size,this._size+e.size).set(e._data),this._size+=e._size;else{this.ensureCapacity(this._size+e.size);let t=0;for(let r of e)this._data[this._size+t]=r,t++;this._size+=e.size}}get(e){if(e<0||e>=this._size)throw RangeError();return this._data[e]}contains(e){for(let t=0;t<this._size;t++)if(this._data[t]===e)return!0;return!1}set(e,t){if(e<0||e>=this._size)throw RangeError();let r=this._data[e];return this._data[e]=t,r}removeAt(e){let t=this.get(e);return this._data.copyWithin(e,e+1,this._size),this._data[this._size-1]=0,this._size--,t}removeRange(e,t){if(e<0||t<0||e>this._size||t>this._size||e>t)throw RangeError();this._data.copyWithin(t,e,this._size),this._data.fill(0,this._size-(t-e),this._size),this._size-=t-e}get isEmpty(){return this._size===0}get size(){return this._size}trimToSize(){this._data.length!==this._size&&(this._data=this._data.slice(0,this._size))}clear(){this._data.fill(0,0,this._size),this._size=0}toArray(){return this._size===0?[]:Array.from(this._data.subarray(0,this._size))}sort(){this._data.subarray(0,this._size).sort()}equals(e){if(e===this)return!0;if(!(e instanceof An)||this._size!==e._size)return!1;for(let t=0;t<this._size;t++)if(this._data[t]!==e._data[t])return!1;return!0}hashCode(){let e=1;for(let t=0;t<this._size;t++)e=31*e+this._data[t];return e}toString(){return this._data.toString()}binarySearch(e,t,r){if(t===void 0&&(t=0),r===void 0&&(r=this._size),t<0||r<0||t>this._size||r>this._size)throw new RangeError;if(t>r)throw new RangeError;return lI.Arrays.binarySearch(this._data,e,t,r)}ensureCapacity(e){if(e<0||e>Ug)throw new RangeError;let t;for(this._data.length===0?t=uI:t=this._data.length;t<e;)t=t*2,(t<0||t>Ug)&&(t=Ug);let r=new Int32Array(t);r.set(this._data),this._data=r}toCharArray(){let e=new Uint16Array(this._size),t=0,r=!1;for(let n=0;n<this._size;n++){let s=this._data[n];if(s>=0&&s<65536){e[t]=s,t++;continue}if(!r){let a=new Uint16Array(this.charArraySize());a.set(e,0),e=a,r=!0}let o=String.fromCodePoint(s);e[t]=o.charCodeAt(0),e[t+1]=o.charCodeAt(1),t+=2}return e}charArraySize(){let e=0;for(let t=0;t<this._size;t++)e+=this._data[t]>=65536?2:1;return e}}Np([Rp.NotNull],An.prototype,"_data",void 0);Np([Rp.Override],An.prototype,"equals",null);Np([Rp.Override],An.prototype,"hashCode",null);Np([Rp.Override],An.prototype,"toString",null);kl.IntegerList=An;var ri={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ix=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(ri,"__esModule",{value:!0});ri.Interval=void 0;const rx=te,yA=1e3;class Bt{constructor(e,t){this.a=e,this.b=t}static get INVALID(){return Bt._INVALID}static of(e,t){return e!==t||e<0||e>yA?new Bt(e,t):(Bt.cache[e]==null&&(Bt.cache[e]=new Bt(e,e)),Bt.cache[e])}get length(){return this.b<this.a?0:this.b-this.a+1}equals(e){return e===this?!0:e instanceof Bt?this.a===e.a&&this.b===e.b:!1}hashCode(){let e=23;return e=e*31+this.a,e=e*31+this.b,e}startsBeforeDisjoint(e){return this.a<e.a&&this.b<e.a}startsBeforeNonDisjoint(e){return this.a<=e.a&&this.b>=e.a}startsAfter(e){return this.a>e.a}startsAfterDisjoint(e){return this.a>e.b}startsAfterNonDisjoint(e){return this.a>e.a&&this.a<=e.b}disjoint(e){return this.startsBeforeDisjoint(e)||this.startsAfterDisjoint(e)}adjacent(e){return this.a===e.b+1||this.b===e.a-1}properlyContains(e){return e.a>=this.a&&e.b<=this.b}union(e){return Bt.of(Math.min(this.a,e.a),Math.max(this.b,e.b))}intersection(e){return Bt.of(Math.max(this.a,e.a),Math.min(this.b,e.b))}differenceNotProperlyContained(e){let t;return e.startsBeforeNonDisjoint(this)?t=Bt.of(Math.max(this.a,e.b+1),this.b):e.startsAfterNonDisjoint(this)&&(t=Bt.of(this.a,e.a-1)),t}toString(){return this.a+".."+this.b}}Bt._INVALID=new Bt(-1,-2);Bt.cache=new Array(yA+1);ix([rx.Override],Bt.prototype,"equals",null);ix([rx.Override],Bt.prototype,"hashCode",null);ix([rx.Override],Bt.prototype,"toString",null);ri.Interval=Bt;var Du={},Lp={},vs={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Oi=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},xA=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(vs,"__esModule",{value:!0});vs.CommonToken=void 0;const hI=ri,Mi=te,Ww=_t;let ei=class Sh{constructor(e,t,r=Sh.EMPTY_SOURCE,n=Ww.Token.DEFAULT_CHANNEL,s=0,o=0){this._line=0,this._charPositionInLine=-1,this._channel=Ww.Token.DEFAULT_CHANNEL,this.index=-1,this._text=t,this._type=e,this.source=r,this._channel=n,this.start=s,this.stop=o,r.source!=null&&(this._line=r.source.line,this._charPositionInLine=r.source.charPositionInLine)}static fromToken(e){let t=new Sh(e.type,void 0,Sh.EMPTY_SOURCE,e.channel,e.startIndex,e.stopIndex);return t._line=e.line,t.index=e.tokenIndex,t._charPositionInLine=e.charPositionInLine,e instanceof Sh?(t._text=e._text,t.source=e.source):(t._text=e.text,t.source={source:e.tokenSource,stream:e.inputStream}),t}get type(){return this._type}set type(e){this._type=e}get line(){return this._line}set line(e){this._line=e}get text(){if(this._text!=null)return this._text;let e=this.inputStream;if(e==null)return;let t=e.size;return this.start<t&&this.stop<t?e.getText(hI.Interval.of(this.start,this.stop)):"<EOF>"}set text(e){this._text=e}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(e){this._charPositionInLine=e}get channel(){return this._channel}set channel(e){this._channel=e}get startIndex(){return this.start}set startIndex(e){this.start=e}get stopIndex(){return this.stop}set stopIndex(e){this.stop=e}get tokenIndex(){return this.index}set tokenIndex(e){this.index=e}get tokenSource(){return this.source.source}get inputStream(){return this.source.stream}toString(e){let t="";this._channel>0&&(t=",channel="+this._channel);let r=this.text;r!=null?(r=r.replace(/\n/g,"\\n"),r=r.replace(/\r/g,"\\r"),r=r.replace(/\t/g,"\\t")):r="<no text>";let n=String(this._type);return e&&(n=e.vocabulary.getDisplayName(this._type)),"[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+r+"',<"+n+">"+t+","+this._line+":"+this.charPositionInLine+"]"}};ei.EMPTY_SOURCE={source:void 0,stream:void 0};Oi([Mi.NotNull],ei.prototype,"source",void 0);Oi([Mi.Override],ei.prototype,"type",null);Oi([Mi.Override],ei.prototype,"line",null);Oi([Mi.Override],ei.prototype,"text",null);Oi([Mi.Override],ei.prototype,"charPositionInLine",null);Oi([Mi.Override],ei.prototype,"channel",null);Oi([Mi.Override],ei.prototype,"startIndex",null);Oi([Mi.Override],ei.prototype,"stopIndex",null);Oi([Mi.Override],ei.prototype,"tokenIndex",null);Oi([Mi.Override],ei.prototype,"tokenSource",null);Oi([Mi.Override],ei.prototype,"inputStream",null);Oi([Mi.Override],ei.prototype,"toString",null);Oi([xA(0,Mi.NotNull)],ei,"fromToken",null);ei=Oi([xA(2,Mi.NotNull)],ei);vs.CommonToken=ei;(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(o,a,l,c){var h=arguments.length,u=h<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,a,l,c);else for(var d=o.length-1;d>=0;d--)(p=o[d])&&(u=(h<3?p(u):h>3?p(a,l,u):p(a,l))||u);return h>3&&u&&Object.defineProperty(a,l,u),u};Object.defineProperty(i,"__esModule",{value:!0}),i.CommonTokenFactory=void 0;const t=vs,r=ri,n=te;class s{constructor(a=!1){this.copyText=a}create(a,l,c,h,u,p,d,f){let m=new t.CommonToken(l,c,a,h,u,p);return m.line=d,m.charPositionInLine=f,c==null&&this.copyText&&a.stream!=null&&(m.text=a.stream.getText(r.Interval.of(u,p))),m}createSimple(a,l){return new t.CommonToken(a,l)}}e([n.Override],s.prototype,"create",null),e([n.Override],s.prototype,"createSimple",null),i.CommonTokenFactory=s,function(o){o.DEFAULT=new o}(s=i.CommonTokenFactory||(i.CommonTokenFactory={}))})(Lp);var Hc={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Hc,"__esModule",{value:!0});Hc.IntegerStack=void 0;const cI=kl;class dI extends cI.IntegerList{constructor(e){super(e)}push(e){this.add(e)}pop(){return this.removeAt(this.size-1)}peek(){return this.get(this.size-1)}}Hc.IntegerStack=dI;var Kg={},zc={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(zc,"__esModule",{value:!0});zc.AcceptStateInfo=void 0;class fI{constructor(e,t){this._prediction=e,this._lexerActionExecutor=t}get prediction(){return this._prediction}get lexerActionExecutor(){return this._lexerActionExecutor}}zc.AcceptStateInfo=fI;var kp={},Bp={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var fa=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},pI=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(Bp,"__esModule",{value:!0});Bp.LexerIndexedCustomAction=void 0;const Ld=Tt,pa=te;let Pn=class wA{constructor(e,t){this._offset=e,this._action=t}get offset(){return this._offset}get action(){return this._action}get actionType(){return this._action.actionType}get isPositionDependent(){return!0}execute(e){this._action.execute(e)}hashCode(){let e=Ld.MurmurHash.initialize();return e=Ld.MurmurHash.update(e,this._offset),e=Ld.MurmurHash.update(e,this._action),Ld.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof wA?this._offset===e._offset&&this._action.equals(e._action):!1}};fa([pa.NotNull],Pn.prototype,"action",null);fa([pa.Override],Pn.prototype,"actionType",null);fa([pa.Override],Pn.prototype,"isPositionDependent",null);fa([pa.Override],Pn.prototype,"execute",null);fa([pa.Override],Pn.prototype,"hashCode",null);fa([pa.Override],Pn.prototype,"equals",null);Pn=fa([pI(1,pa.NotNull)],Pn);Bp.LexerIndexedCustomAction=Pn;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var ma=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},nx=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(kp,"__esModule",{value:!0});kp.LexerActionExecutor=void 0;const mI=ha,Hg=Bp,zg=Tt,ps=te;let In=class Eh{constructor(e){this._lexerActions=e;let t=zg.MurmurHash.initialize();for(let r of e)t=zg.MurmurHash.update(t,r);this.cachedHashCode=zg.MurmurHash.finish(t,e.length)}static append(e,t){if(!e)return new Eh([t]);let r=e._lexerActions.slice(0);return r.push(t),new Eh(r)}fixOffsetBeforeMatch(e){let t;for(let r=0;r<this._lexerActions.length;r++)this._lexerActions[r].isPositionDependent&&!(this._lexerActions[r]instanceof Hg.LexerIndexedCustomAction)&&(t||(t=this._lexerActions.slice(0)),t[r]=new Hg.LexerIndexedCustomAction(e,this._lexerActions[r]));return t?new Eh(t):this}get lexerActions(){return this._lexerActions}execute(e,t,r){let n=!1,s=t.index;try{for(let o of this._lexerActions){if(o instanceof Hg.LexerIndexedCustomAction){let a=o.offset;t.seek(r+a),o=o.action,n=r+a!==s}else o.isPositionDependent&&(t.seek(s),n=!1);o.execute(e)}}finally{n&&t.seek(s)}}hashCode(){return this.cachedHashCode}equals(e){return e===this?!0:e instanceof Eh?this.cachedHashCode===e.cachedHashCode&&mI.ArrayEqualityComparator.INSTANCE.equals(this._lexerActions,e._lexerActions):!1}};ma([ps.NotNull],In.prototype,"_lexerActions",void 0);ma([ps.NotNull],In.prototype,"lexerActions",null);ma([nx(0,ps.NotNull)],In.prototype,"execute",null);ma([ps.Override],In.prototype,"hashCode",null);ma([ps.Override],In.prototype,"equals",null);ma([ps.NotNull,nx(1,ps.NotNull)],In,"append",null);In=ma([nx(0,ps.NotNull)],In);kp.LexerActionExecutor=In;var ga={},un={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(un,"__esModule",{value:!0});var rt=un.RecognitionException=void 0;class gI extends Error{constructor(e,t,r,n){super(n),this._offendingState=-1,this._recognizer=e,this.input=t,this.ctx=r,e&&(this._offendingState=e.state)}get offendingState(){return this._offendingState}setOffendingState(e){this._offendingState=e}get expectedTokens(){if(this._recognizer)return this._recognizer.atn.getExpectedTokens(this._offendingState,this.ctx)}get context(){return this.ctx}get inputStream(){return this.input}getOffendingToken(e){if(!(e&&e!==this._recognizer))return this.offendingToken}setOffendingToken(e,t){e===this._recognizer&&(this.offendingToken=t)}get recognizer(){return this._recognizer}}rt=un.RecognitionException=gI;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var sx=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},_I=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(ga,"__esModule",{value:!0});ga.LexerNoViableAltException=void 0;const vI=un,ox=te,yI=ri,xI=Ut;let fc=class extends vI.RecognitionException{constructor(e,t,r,n){super(e,t),this._startIndex=r,this._deadEndConfigs=n}get startIndex(){return this._startIndex}get deadEndConfigs(){return this._deadEndConfigs}get inputStream(){return super.inputStream}toString(){let e="";return this._startIndex>=0&&this._startIndex<this.inputStream.size&&(e=this.inputStream.getText(yI.Interval.of(this._startIndex,this._startIndex)),e=xI.escapeWhitespace(e,!1)),`LexerNoViableAltException('${e}')`}};sx([ox.Override],fc.prototype,"inputStream",null);sx([ox.Override],fc.prototype,"toString",null);fc=sx([_I(1,ox.NotNull)],fc);ga.LexerNoViableAltException=fc;var Tu={},Gw;function wI(){if(Gw)return Tu;Gw=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(n,s,o,a){var l=arguments.length,c=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,s,o,a);else for(var u=n.length-1;u>=0;u--)(h=n[u])&&(c=(l<3?h(c):l>3?h(s,o,c):h(s,o))||c);return l>3&&c&&Object.defineProperty(s,o,c),c};Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.OrderedATNConfigSet=void 0;const e=Uc(),t=te;let r=class bA extends e.ATNConfigSet{constructor(s,o){s!=null&&o!=null?super(s,o):super()}clone(s){let o=new bA(this,s);return!s&&this.isReadOnly&&o.addAll(this),o}getKey(s){return{state:0,alt:s.hashCode()}}canMerge(s,o,a){return s.equals(a)}};return i([t.Override],r.prototype,"clone",null),i([t.Override],r.prototype,"getKey",null),i([t.Override],r.prototype,"canMerge",null),Tu.OrderedATNConfigSet=r,Tu}var ys={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var SA=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(ys,"__esModule",{value:!0});ys.RuleStopState=void 0;const bI=an,SI=qt,EA=te;class ax extends bI.ATNState{get nonStopStateNumber(){return-1}get stateType(){return SI.ATNStateType.RULE_STOP}}SA([EA.Override],ax.prototype,"nonStopStateNumber",null);SA([EA.Override],ax.prototype,"stateType",null);ys.RuleStopState=ax;var Yw;function Fp(){return Yw||(Yw=1,function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(A,w,D,b){var S=arguments.length,T=S<3?w:b===null?b=Object.getOwnPropertyDescriptor(w,D):b,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(A,w,D,b);else for(var I=A.length-1;I>=0;I--)(C=A[I])&&(T=(S<3?C(T):S>3?C(w,D,T):C(w,D))||T);return S>3&&T&&Object.defineProperty(w,D,T),T},t=P&&P.__param||function(A,w){return function(D,b){w(D,b,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.LexerATNSimulator=void 0;const r=zc,n=hn(),s=ca,o=Uc(),a=Op(),l=Ip(),c=ri,h=Ln,u=xs(),p=kp,d=ga,f=te,m=wI(),g=Rr(),_=ys,v=_t,y=Xi;let x=class Fi extends a.ATNSimulator{constructor(w,D){super(w),this.optimize_tail_calls=!0,this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=u.Lexer.DEFAULT_MODE,this.prevAccept=new Fi.SimState,this.recog=D}copyState(w){this._charPositionInLine=w.charPositionInLine,this._line=w._line,this.mode=w.mode,this.startIndex=w.startIndex}match(w,D){this.mode=D;let b=w.mark();try{this.startIndex=w.index,this.prevAccept.reset();let S=this.atn.modeToDFA[D].s0;return S==null?this.matchATN(w):this.execATN(w,S)}finally{w.release(b)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this._line=1,this._charPositionInLine=0,this.mode=u.Lexer.DEFAULT_MODE}matchATN(w){let D=this.atn.modeToStartState[this.mode];Fi.debug&&console.log(`matchATN mode ${this.mode} start: ${D}`);let b=this.mode,S=this.computeStartState(w,D),T=S.hasSemanticContext;T&&(S.hasSemanticContext=!1);let C=this.addDFAState(S);if(!T){let M=this.atn.modeToDFA[this.mode];M.s0?C=M.s0:M.s0=C}let I=this.execATN(w,C);return Fi.debug&&console.log(`DFA after matchATN: ${this.atn.modeToDFA[b].toLexerString()}`),I}execATN(w,D){Fi.debug&&console.log(`start state closure=${D.configs}`),D.isAcceptState&&this.captureSimState(this.prevAccept,w,D);let b=w.LA(1),S=D;for(;;){Fi.debug&&console.log(`execATN loop starting closure: ${S.configs}`);let T=this.getExistingTargetState(S,b);if(T==null&&(T=this.computeTargetState(w,S,b)),T===a.ATNSimulator.ERROR||(b!==h.IntStream.EOF&&this.consume(w),T.isAcceptState&&(this.captureSimState(this.prevAccept,w,T),b===h.IntStream.EOF)))break;b=w.LA(1),S=T}return this.failOrAccept(this.prevAccept,w,S.configs,b)}getExistingTargetState(w,D){let b=w.getTarget(D);return Fi.debug&&b!=null&&console.log("reuse state "+w.stateNumber+" edge to "+b.stateNumber),b}computeTargetState(w,D,b){let S=new m.OrderedATNConfigSet;return this.getReachableConfigSet(w,D.configs,S,b),S.isEmpty?(S.hasSemanticContext||this.addDFAEdge(D,b,a.ATNSimulator.ERROR),a.ATNSimulator.ERROR):this.addDFAEdge(D,b,S)}failOrAccept(w,D,b,S){if(w.dfaState!=null){let T=w.dfaState.lexerActionExecutor;return this.accept(D,T,this.startIndex,w.index,w.line,w.charPos),w.dfaState.prediction}else{if(S===h.IntStream.EOF&&D.index===this.startIndex)return v.Token.EOF;throw new d.LexerNoViableAltException(this.recog,D,this.startIndex,b)}}getReachableConfigSet(w,D,b,S){let T=n.ATN.INVALID_ALT_NUMBER;for(let C of D){let I=C.alt===T;if(I&&C.hasPassedThroughNonGreedyDecision)continue;Fi.debug&&console.log(`testing ${this.getTokenName(S)} at ${C.toString(this.recog,!0)}`);let M=C.state.numberOfOptimizedTransitions;for(let k=0;k<M;k++){let H=C.state.getOptimizedTransition(k),Y=this.getReachableTarget(H,S);if(Y!=null){let O=C.lexerActionExecutor,B;O!=null?(O=O.fixOffsetBeforeMatch(w.index-this.startIndex),B=C.transform(Y,!0,O)):(y(C.lexerActionExecutor==null),B=C.transform(Y,!0));let q=S===h.IntStream.EOF;if(this.closure(w,B,b,I,!0,q)){T=C.alt;break}}}}}accept(w,D,b,S,T,C){Fi.debug&&console.log(`ACTION ${D}`),w.seek(S),this._line=T,this._charPositionInLine=C,D!=null&&this.recog!=null&&D.execute(this.recog,w,b)}getReachableTarget(w,D){if(w.matches(D,u.Lexer.MIN_CHAR_VALUE,u.Lexer.MAX_CHAR_VALUE))return w.target}computeStartState(w,D){let b=g.PredictionContext.EMPTY_FULL,S=new m.OrderedATNConfigSet;for(let T=0;T<D.numberOfTransitions;T++){let C=D.transition(T).target,I=s.ATNConfig.create(C,T+1,b);this.closure(w,I,S,!1,!1,!1)}return S}closure(w,D,b,S,T,C){if(Fi.debug&&console.log("closure("+D.toString(this.recog,!0)+")"),D.state instanceof _.RuleStopState){Fi.debug&&(this.recog!=null?console.log(`closure at ${this.recog.ruleNames[D.state.ruleIndex]} rule stop ${D}`):console.log(`closure at rule stop ${D}`));let M=D.context;if(M.isEmpty)return b.add(D),!0;M.hasEmpty&&(b.add(D.transform(D.state,!0,g.PredictionContext.EMPTY_FULL)),S=!0);for(let k=0;k<M.size;k++){let H=M.getReturnState(k);if(H===g.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let Y=M.getParent(k),O=this.atn.states[H],B=D.transform(O,!1,Y);S=this.closure(w,B,b,S,T,C)}return S}D.state.onlyHasEpsilonTransitions||(!S||!D.hasPassedThroughNonGreedyDecision)&&b.add(D);let I=D.state;for(let M=0;M<I.numberOfOptimizedTransitions;M++){let k=I.getOptimizedTransition(M),H=this.getEpsilonTarget(w,D,k,b,T,C);H!=null&&(S=this.closure(w,H,b,S,T,C))}return S}getEpsilonTarget(w,D,b,S,T,C){let I;switch(b.serializationType){case 3:let M=b;if(this.optimize_tail_calls&&M.optimizedTailCall&&!D.context.hasEmpty)I=D.transform(b.target,!0);else{let H=D.context.getChild(M.followState.stateNumber);I=D.transform(b.target,!0,H)}break;case 10:throw new Error("Precedence predicates are not supported in lexers.");case 4:let k=b;Fi.debug&&console.log("EVAL rule "+k.ruleIndex+":"+k.predIndex),S.hasSemanticContext=!0,this.evaluatePredicate(w,k.ruleIndex,k.predIndex,T)?I=D.transform(b.target,!0):I=void 0;break;case 6:if(D.context.hasEmpty){let H=p.LexerActionExecutor.append(D.lexerActionExecutor,this.atn.lexerActions[b.actionIndex]);I=D.transform(b.target,!0,H);break}else{I=D.transform(b.target,!0);break}case 1:I=D.transform(b.target,!0);break;case 5:case 2:case 7:if(C&&b.matches(h.IntStream.EOF,u.Lexer.MIN_CHAR_VALUE,u.Lexer.MAX_CHAR_VALUE)){I=D.transform(b.target,!1);break}I=void 0;break;default:I=void 0;break}return I}evaluatePredicate(w,D,b,S){if(this.recog==null)return!0;if(!S)return this.recog.sempred(void 0,D,b);let T=this._charPositionInLine,C=this._line,I=w.index,M=w.mark();try{return this.consume(w),this.recog.sempred(void 0,D,b)}finally{this._charPositionInLine=T,this._line=C,w.seek(I),w.release(M)}}captureSimState(w,D,b){w.index=D.index,w.line=this._line,w.charPos=this._charPositionInLine,w.dfaState=b}addDFAEdge(w,D,b){if(b instanceof o.ATNConfigSet){let S=b.hasSemanticContext;S&&(b.hasSemanticContext=!1);let T=this.addDFAState(b);return S||this.addDFAEdge(w,D,T),T}else Fi.debug&&console.log("EDGE "+w+" -> "+b+" upon "+String.fromCharCode(D)),w!=null&&w.setTarget(D,b)}addDFAState(w){y(!w.hasSemanticContext);let D=new l.DFAState(w),b=this.atn.modeToDFA[this.mode].states.get(D);if(b!=null)return b;w.optimizeConfigs(this);let S=new l.DFAState(w.clone(!0)),T;for(let C of w)if(C.state instanceof _.RuleStopState){T=C;break}if(T!=null){let C=this.atn.ruleToTokenType[T.state.ruleIndex],I=T.lexerActionExecutor;S.acceptStateInfo=new r.AcceptStateInfo(C,I)}return this.atn.modeToDFA[this.mode].addState(S)}getDFA(w){return this.atn.modeToDFA[w]}getText(w){return w.getText(c.Interval.of(this.startIndex,w.index-1))}get line(){return this._line}set line(w){this._line=w}get charPositionInLine(){return this._charPositionInLine}set charPositionInLine(w){this._charPositionInLine=w}consume(w){w.LA(1)===10?(this._line++,this._charPositionInLine=0):this._charPositionInLine++,w.consume()}getTokenName(w){return w===-1?"EOF":"'"+String.fromCharCode(w)+"'"}};e([f.NotNull],x.prototype,"prevAccept",void 0),e([t(0,f.NotNull)],x.prototype,"copyState",null),e([t(0,f.NotNull)],x.prototype,"match",null),e([f.Override],x.prototype,"reset",null),e([t(0,f.NotNull)],x.prototype,"matchATN",null),e([t(0,f.NotNull),t(1,f.NotNull)],x.prototype,"execATN",null),e([t(0,f.NotNull)],x.prototype,"getExistingTargetState",null),e([f.NotNull,t(0,f.NotNull),t(1,f.NotNull)],x.prototype,"computeTargetState",null),e([t(0,f.NotNull),t(1,f.NotNull),t(2,f.NotNull)],x.prototype,"getReachableConfigSet",null),e([t(0,f.NotNull)],x.prototype,"accept",null),e([f.NotNull,t(0,f.NotNull),t(1,f.NotNull)],x.prototype,"computeStartState",null),e([t(0,f.NotNull),t(1,f.NotNull),t(2,f.NotNull)],x.prototype,"closure",null),e([t(0,f.NotNull),t(1,f.NotNull),t(2,f.NotNull),t(3,f.NotNull)],x.prototype,"getEpsilonTarget",null),e([t(0,f.NotNull)],x.prototype,"evaluatePredicate",null),e([t(0,f.NotNull),t(1,f.NotNull),t(2,f.NotNull)],x.prototype,"captureSimState",null),e([f.NotNull,t(0,f.NotNull)],x.prototype,"addDFAState",null),e([f.NotNull],x.prototype,"getDFA",null),e([f.NotNull,t(0,f.NotNull)],x.prototype,"getText",null),e([t(0,f.NotNull)],x.prototype,"consume",null),e([f.NotNull],x.prototype,"getTokenName",null),x=e([t(0,f.NotNull)],x),i.LexerATNSimulator=x,function(A){A.debug=!1,A.dfa_debug=!1;class w{constructor(){this.index=-1,this.line=0,this.charPos=-1}reset(){this.index=-1,this.line=0,this.charPos=-1,this.dfaState=void 0}}A.SimState=w}(x=i.LexerATNSimulator||(i.LexerATNSimulator={})),i.LexerATNSimulator=x}(Kg)),Kg}var qw;function xs(){if(qw)return Du;qw=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(u,p,d,f){var m=arguments.length,g=m<3?p:f===null?f=Object.getOwnPropertyDescriptor(p,d):f,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(u,p,d,f);else for(var v=u.length-1;v>=0;v--)(_=u[v])&&(g=(m<3?_(g):m>3?_(p,d,g):_(p,d))||g);return m>3&&g&&Object.defineProperty(p,d,g),g};Object.defineProperty(Du,"__esModule",{value:!0}),Du.Lexer=void 0;const e=Lp,t=Hc,r=ri,n=Ln,s=Fp(),o=ga,a=te,l=gs,c=_t;let h=class Xn extends l.Recognizer{constructor(p){super(),this._factory=e.CommonTokenFactory.DEFAULT,this._tokenStartCharIndex=-1,this._tokenStartLine=0,this._tokenStartCharPositionInLine=0,this._hitEOF=!1,this._channel=0,this._type=0,this._modeStack=new t.IntegerStack,this._mode=Xn.DEFAULT_MODE,this._input=p,this._tokenFactorySourcePair={source:this,stream:p}}static get DEFAULT_TOKEN_CHANNEL(){return c.Token.DEFAULT_CHANNEL}static get HIDDEN(){return c.Token.HIDDEN_CHANNEL}reset(p){(p===void 0||p)&&this._input.seek(0),this._token=void 0,this._type=c.Token.INVALID_TYPE,this._channel=c.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartCharPositionInLine=-1,this._tokenStartLine=-1,this._text=void 0,this._hitEOF=!1,this._mode=Xn.DEFAULT_MODE,this._modeStack.clear(),this.interpreter.reset()}nextToken(){if(this._input==null)throw new Error("nextToken requires a non-null input stream.");let p=this._input.mark();try{e:for(;;){if(this._hitEOF)return this.emitEOF();this._token=void 0,this._channel=c.Token.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartCharPositionInLine=this.interpreter.charPositionInLine,this._tokenStartLine=this.interpreter.line,this._text=void 0;do{this._type=c.Token.INVALID_TYPE;let d;try{d=this.interpreter.match(this._input,this._mode)}catch(f){if(f instanceof o.LexerNoViableAltException)this.notifyListeners(f),this.recover(f),d=Xn.SKIP;else throw f}if(this._input.LA(1)===n.IntStream.EOF&&(this._hitEOF=!0),this._type===c.Token.INVALID_TYPE&&(this._type=d),this._type===Xn.SKIP)continue e}while(this._type===Xn.MORE);return this._token==null?this.emit():this._token}}finally{this._input.release(p)}}skip(){this._type=Xn.SKIP}more(){this._type=Xn.MORE}mode(p){this._mode=p}pushMode(p){s.LexerATNSimulator.debug&&console.log("pushMode "+p),this._modeStack.push(this._mode),this.mode(p)}popMode(){if(this._modeStack.isEmpty)throw new Error("EmptyStackException");return s.LexerATNSimulator.debug&&console.log("popMode back to "+this._modeStack.peek()),this.mode(this._modeStack.pop()),this._mode}get tokenFactory(){return this._factory}set tokenFactory(p){this._factory=p}get inputStream(){return this._input}set inputStream(p){this.reset(!1),this._input=p,this._tokenFactorySourcePair={source:this,stream:this._input}}get sourceName(){return this._input.sourceName}emit(p){return p||(p=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.charIndex-1,this._tokenStartLine,this._tokenStartCharPositionInLine)),this._token=p,p}emitEOF(){let p=this.charPositionInLine,d=this.line,f=this._factory.create(this._tokenFactorySourcePair,c.Token.EOF,void 0,c.Token.DEFAULT_CHANNEL,this._input.index,this._input.index-1,d,p);return this.emit(f),f}get line(){return this.interpreter.line}set line(p){this.interpreter.line=p}get charPositionInLine(){return this.interpreter.charPositionInLine}set charPositionInLine(p){this.interpreter.charPositionInLine=p}get charIndex(){return this._input.index}get text(){return this._text!=null?this._text:this.interpreter.getText(this._input)}set text(p){this._text=p}get token(){return this._token}set token(p){this._token=p}set type(p){this._type=p}get type(){return this._type}set channel(p){this._channel=p}get channel(){return this._channel}getAllTokens(){let p=[],d=this.nextToken();for(;d.type!==c.Token.EOF;)p.push(d),d=this.nextToken();return p}notifyListeners(p){let d=this._input.getText(r.Interval.of(this._tokenStartCharIndex,this._input.index)),f="token recognition error at: '"+this.getErrorDisplay(d)+"'",m=this.getErrorListenerDispatch();m.syntaxError&&m.syntaxError(this,void 0,this._tokenStartLine,this._tokenStartCharPositionInLine,f,p)}getErrorDisplay(p){if(typeof p=="number"){switch(p){case c.Token.EOF:return"<EOF>";case 10:return"\\n";case 9:return"\\t";case 13:return"\\r"}return String.fromCharCode(p)}return p.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}getCharErrorDisplay(p){return"'"+this.getErrorDisplay(p)+"'"}recover(p){p instanceof o.LexerNoViableAltException?this._input.LA(1)!==n.IntStream.EOF&&this.interpreter.consume(this._input):this._input.consume()}};return h.DEFAULT_MODE=0,h.MORE=-2,h.SKIP=-3,h.MIN_CHAR_VALUE=0,h.MAX_CHAR_VALUE=1114111,i([a.Override],h.prototype,"nextToken",null),i([a.Override],h.prototype,"tokenFactory",null),i([a.Override],h.prototype,"inputStream",null),i([a.Override],h.prototype,"sourceName",null),i([a.Override],h.prototype,"line",null),i([a.Override],h.prototype,"charPositionInLine",null),Du.Lexer=h,Du}var Xw;function _a(){if(Xw)return Au;Xw=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(h,u,p,d){var f=arguments.length,m=f<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,p):d,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(h,u,p,d);else for(var _=h.length-1;_>=0;_--)(g=h[_])&&(m=(f<3?g(m):f>3?g(u,p,m):g(u,p))||m);return f>3&&m&&Object.defineProperty(u,p,m),m},e=P&&P.__param||function(h,u){return function(p,d){u(p,d,h)}};Object.defineProperty(Au,"__esModule",{value:!0}),Au.IntervalSet=void 0;const t=ha,r=kl,n=ri,s=xs(),o=Tt,a=te,l=_t;let c=class Xe{constructor(u){this.readonly=!1,u!=null?this._intervals=u.slice(0):this._intervals=[]}static get COMPLETE_CHAR_SET(){return Xe._COMPLETE_CHAR_SET===void 0&&(Xe._COMPLETE_CHAR_SET=Xe.of(s.Lexer.MIN_CHAR_VALUE,s.Lexer.MAX_CHAR_VALUE),Xe._COMPLETE_CHAR_SET.setReadonly(!0)),Xe._COMPLETE_CHAR_SET}static get EMPTY_SET(){return Xe._EMPTY_SET==null&&(Xe._EMPTY_SET=new Xe,Xe._EMPTY_SET.setReadonly(!0)),Xe._EMPTY_SET}static of(u,p=u){let d=new Xe;return d.add(u,p),d}clear(){if(this.readonly)throw new Error("can't alter readonly IntervalSet");this._intervals.length=0}add(u,p=u){this.addRange(n.Interval.of(u,p))}addRange(u){if(this.readonly)throw new Error("can't alter readonly IntervalSet");if(!(u.b<u.a)){for(let p=0;p<this._intervals.length;p++){let d=this._intervals[p];if(u.equals(d))return;if(u.adjacent(d)||!u.disjoint(d)){let f=u.union(d);for(this._intervals[p]=f;p<this._intervals.length-1;){p++;let m=this._intervals[p];if(!f.adjacent(m)&&f.disjoint(m))break;this._intervals.splice(p,1),p--,this._intervals[p]=f.union(m)}return}if(u.startsBeforeDisjoint(d)){this._intervals.splice(p,0,u);return}}this._intervals.push(u)}}static or(u){let p=new Xe;for(let d of u)p.addAll(d);return p}addAll(u){if(u==null)return this;if(u instanceof Xe){let p=u,d=p._intervals.length;for(let f=0;f<d;f++){let m=p._intervals[f];this.add(m.a,m.b)}}else for(let p of u.toArray())this.add(p);return this}complementRange(u,p){return this.complement(Xe.of(u,p))}complement(u){if(u.isNil)return Xe.EMPTY_SET;let p;return u instanceof Xe?p=u:(p=new Xe,p.addAll(u)),p.subtract(this)}subtract(u){if(u==null||u.isNil)return new Xe(this._intervals);if(u instanceof Xe)return Xe.subtract(this,u);let p=new Xe;return p.addAll(u),Xe.subtract(this,p)}static subtract(u,p){if(u.isNil)return new Xe;let d=new Xe(u._intervals);if(p.isNil)return d;let f=0,m=0;for(;f<d._intervals.length&&m<p._intervals.length;){let g=d._intervals[f],_=p._intervals[m];if(_.b<g.a){m++;continue}if(_.a>g.b){f++;continue}let v,y;if(_.a>g.a&&(v=new n.Interval(g.a,_.a-1)),_.b<g.b&&(y=new n.Interval(_.b+1,g.b)),v)if(y){d._intervals[f]=v,d._intervals.splice(f+1,0,y),f++,m++;continue}else{d._intervals[f]=v,f++;continue}else if(y){d._intervals[f]=y,m++;continue}else{d._intervals.splice(f,1);continue}}return d}or(u){let p=new Xe;return p.addAll(this),p.addAll(u),p}and(u){if(u.isNil)return new Xe;let p=this._intervals,d=u._intervals,f,m=p.length,g=d.length,_=0,v=0;for(;_<m&&v<g;){let y=p[_],x=d[v];y.startsBeforeDisjoint(x)?_++:x.startsBeforeDisjoint(y)?v++:y.properlyContains(x)?(f||(f=new Xe),f.addRange(y.intersection(x)),v++):x.properlyContains(y)?(f||(f=new Xe),f.addRange(y.intersection(x)),_++):y.disjoint(x)||(f||(f=new Xe),f.addRange(y.intersection(x)),y.startsAfterNonDisjoint(x)?v++:x.startsAfterNonDisjoint(y)&&_++)}return f||new Xe}contains(u){let p=this._intervals.length,d=0,f=p-1;for(;d<=f;){let m=d+f>>1,g=this._intervals[m],_=g.a;if(g.b<u)d=m+1;else if(_>u)f=m-1;else return!0}return!1}get isNil(){return this._intervals==null||this._intervals.length===0}get maxElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[this._intervals.length-1].b}get minElement(){if(this.isNil)throw new RangeError("set is empty");return this._intervals[0].a}get intervals(){return this._intervals}hashCode(){let u=o.MurmurHash.initialize();for(let p of this._intervals)u=o.MurmurHash.update(u,p.a),u=o.MurmurHash.update(u,p.b);return u=o.MurmurHash.finish(u,this._intervals.length*2),u}equals(u){return u==null||!(u instanceof Xe)?!1:t.ArrayEqualityComparator.INSTANCE.equals(this._intervals,u._intervals)}toString(u=!1){let p="";if(this._intervals==null||this._intervals.length===0)return"{}";this.size>1&&(p+="{");let d=!0;for(let f of this._intervals){d?d=!1:p+=", ";let m=f.a,g=f.b;m===g?m===l.Token.EOF?p+="<EOF>":u?p+="'"+String.fromCodePoint(m)+"'":p+=m:u?p+="'"+String.fromCodePoint(m)+"'..'"+String.fromCodePoint(g)+"'":p+=m+".."+g}return this.size>1&&(p+="}"),p}toStringVocabulary(u){if(this._intervals==null||this._intervals.length===0)return"{}";let p="";this.size>1&&(p+="{");let d=!0;for(let f of this._intervals){d?d=!1:p+=", ";let m=f.a,g=f.b;if(m===g)p+=this.elementName(u,m);else for(let _=m;_<=g;_++)_>m&&(p+=", "),p+=this.elementName(u,_)}return this.size>1&&(p+="}"),p}elementName(u,p){return p===l.Token.EOF?"<EOF>":p===l.Token.EPSILON?"<EPSILON>":u.getDisplayName(p)}get size(){let u=0,p=this._intervals.length;if(p===1){let d=this._intervals[0];return d.b-d.a+1}for(let d=0;d<p;d++){let f=this._intervals[d];u+=f.b-f.a+1}return u}toIntegerList(){let u=new r.IntegerList(this.size),p=this._intervals.length;for(let d=0;d<p;d++){let f=this._intervals[d],m=f.a,g=f.b;for(let _=m;_<=g;_++)u.add(_)}return u}toSet(){let u=new Set;for(let p of this._intervals){let d=p.a,f=p.b;for(let m=d;m<=f;m++)u.add(m)}return u}toArray(){let u=new Array,p=this._intervals.length;for(let d=0;d<p;d++){let f=this._intervals[d],m=f.a,g=f.b;for(let _=m;_<=g;_++)u.push(_)}return u}remove(u){if(this.readonly)throw new Error("can't alter readonly IntervalSet");let p=this._intervals.length;for(let d=0;d<p;d++){let f=this._intervals[d],m=f.a,g=f.b;if(u<m)break;if(u===m&&u===g){this._intervals.splice(d,1);break}if(u===m){this._intervals[d]=n.Interval.of(f.a+1,f.b);break}if(u===g){this._intervals[d]=n.Interval.of(f.a,f.b-1);break}if(u>m&&u<g){let _=f.b;this._intervals[d]=n.Interval.of(f.a,u-1),this.add(u+1,_)}}}get isReadonly(){return this.readonly}setReadonly(u){if(this.readonly&&!u)throw new Error("can't alter readonly IntervalSet");this.readonly=u}};return i([a.Override],c.prototype,"addAll",null),i([a.Override],c.prototype,"complement",null),i([a.Override],c.prototype,"subtract",null),i([a.Override],c.prototype,"or",null),i([a.Override],c.prototype,"and",null),i([a.Override],c.prototype,"contains",null),i([a.Override],c.prototype,"isNil",null),i([a.Override],c.prototype,"hashCode",null),i([a.Override],c.prototype,"equals",null),i([e(0,a.NotNull)],c.prototype,"toStringVocabulary",null),i([a.NotNull,e(0,a.NotNull)],c.prototype,"elementName",null),i([a.Override],c.prototype,"size",null),i([a.Override],c.prototype,"remove",null),i([a.NotNull],c,"of",null),i([a.NotNull],c,"subtract",null),Au.IntervalSet=c,Au}var jc={},$c={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var EI=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty($c,"__esModule",{value:!0});$c.BasicState=void 0;const AI=an,DI=qt,TI=te;class AA extends AI.ATNState{get stateType(){return DI.ATNStateType.BASIC}}EI([TI.Override],AA.prototype,"stateType",null);$c.BasicState=AA;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var CI=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(jc,"__esModule",{value:!0});jc.InvalidState=void 0;const PI=qt,II=$c,OI=te;class DA extends II.BasicState{get stateType(){return PI.ATNStateType.INVALID_TYPE}}CI([OI.Override],DA.prototype,"stateType",null);jc.InvalidState=DA;var Cu={},Bl={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Bl,"__esModule",{value:!0});Bl.AbstractPredicateTransition=void 0;const MI=Mr;class NI extends MI.Transition{constructor(e){super(e)}}Bl.AbstractPredicateTransition=NI;var Pu={},Iu={},Zw;function lx(){if(Zw)return Iu;Zw=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(a,l,c,h){var u=arguments.length,p=u<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(a,l,c,h);else for(var f=a.length-1;f>=0;f--)(d=a[f])&&(p=(u<3?d(p):u>3?d(l,c,p):d(l,c))||p);return u>3&&p&&Object.defineProperty(l,c,p),p},e=P&&P.__param||function(a,l){return function(c,h){l(c,h,a)}};Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.SetTransition=void 0;const t=_a(),r=te,n=_t,s=Mr;let o=class extends s.Transition{constructor(l,c){super(l),c==null&&(c=t.IntervalSet.of(n.Token.INVALID_TYPE)),this.set=c}get serializationType(){return 7}get label(){return this.set}matches(l,c,h){return this.set.contains(l)}toString(){return this.set.toString()}};return i([r.NotNull],o.prototype,"set",void 0),i([r.Override],o.prototype,"serializationType",null),i([r.Override,r.NotNull],o.prototype,"label",null),i([r.Override],o.prototype,"matches",null),i([r.Override,r.NotNull],o.prototype,"toString",null),o=i([e(0,r.NotNull),e(1,r.Nullable)],o),Iu.SetTransition=o,Iu}var Qw;function ux(){if(Qw)return Pu;Qw=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h},e=P&&P.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.NotSetTransition=void 0;const t=te,r=lx();let n=class extends r.SetTransition{constructor(o,a){super(o,a)}get serializationType(){return 8}matches(o,a,l){return o>=a&&o<=l&&!super.matches(o,a,l)}toString(){return"~"+super.toString()}};return i([t.Override],n.prototype,"serializationType",null),i([t.Override],n.prototype,"matches",null),i([t.Override],n.prototype,"toString",null),n=i([e(0,t.NotNull),e(1,t.Nullable)],n),Pu.NotSetTransition=n,Pu}var Fl={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Vc=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Jw=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.RuleTransition=void 0;const xl=te,RI=Mr;let Ko=class extends RI.Transition{constructor(e,t,r,n){super(e),this.tailCall=!1,this.optimizedTailCall=!1,this.ruleIndex=t,this.precedence=r,this.followState=n}get serializationType(){return 3}get isEpsilon(){return!0}matches(e,t,r){return!1}};Vc([xl.NotNull],Ko.prototype,"followState",void 0);Vc([xl.Override],Ko.prototype,"serializationType",null);Vc([xl.Override],Ko.prototype,"isEpsilon",null);Vc([xl.Override],Ko.prototype,"matches",null);Ko=Vc([Jw(0,xl.NotNull),Jw(3,xl.NotNull)],Ko);Fl.RuleTransition=Ko;var Wc={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Up=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},LI=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.WildcardTransition=void 0;const pc=te,kI=Mr;let wl=class extends kI.Transition{constructor(e){super(e)}get serializationType(){return 9}matches(e,t,r){return e>=t&&e<=r}toString(){return"."}};Up([pc.Override],wl.prototype,"serializationType",null);Up([pc.Override],wl.prototype,"matches",null);Up([pc.Override,pc.NotNull],wl.prototype,"toString",null);wl=Up([LI(0,pc.NotNull)],wl);Wc.WildcardTransition=wl;var eb;function BI(){if(eb)return Cu;eb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(g,_,v,y){var x=arguments.length,A=x<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,v):y,w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(g,_,v,y);else for(var D=g.length-1;D>=0;D--)(w=g[D])&&(A=(x<3?w(A):x>3?w(_,v,A):w(_,v))||A);return x>3&&A&&Object.defineProperty(_,v,A),A},e=P&&P.__param||function(g,_){return function(v,y){_(v,y,g)}};Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.LL1Analyzer=void 0;const t=Bl,r=Nr,n=ca,s=Lr,o=_a(),a=te,l=ux(),c=Zi,h=Rr(),u=ys,p=Fl,d=_t,f=Wc;let m=class n1{constructor(_){this.atn=_}getDecisionLookahead(_){if(_==null)return;let v=new Array(_.numberOfTransitions);for(let y=0;y<_.numberOfTransitions;y++){let x=new o.IntervalSet;v[y]=x;let A=new r.Array2DHashSet(c.ObjectEqualityComparator.INSTANCE);this._LOOK(_.transition(y).target,void 0,h.PredictionContext.EMPTY_LOCAL,x,A,new s.BitSet,!1,!1),(x.size===0||x.contains(n1.HIT_PRED))&&(x=void 0,v[y]=x)}return v}LOOK(_,v,y){if(y===void 0){if(_.atn==null)throw new Error("Illegal state");y=_.atn.ruleToStopState[_.ruleIndex]}else y===null&&(y=void 0);let x=new o.IntervalSet;return this._LOOK(_,y,v,x,new r.Array2DHashSet,new s.BitSet,!0,!0),x}_LOOK(_,v,y,x,A,w,D,b){let S=n.ATNConfig.create(_,0,y);if(!A.add(S))return;if(_===v){if(h.PredictionContext.isEmptyLocal(y)){x.add(d.Token.EPSILON);return}else if(y.isEmpty){b&&x.add(d.Token.EOF);return}}if(_ instanceof u.RuleStopState){if(y.isEmpty&&!h.PredictionContext.isEmptyLocal(y)){b&&x.add(d.Token.EOF);return}let C=w.get(_.ruleIndex);try{w.clear(_.ruleIndex);for(let I=0;I<y.size;I++){if(y.getReturnState(I)===h.PredictionContext.EMPTY_FULL_STATE_KEY)continue;let M=this.atn.states[y.getReturnState(I)];this._LOOK(M,v,y.getParent(I),x,A,w,D,b)}}finally{C&&w.set(_.ruleIndex)}}let T=_.numberOfTransitions;for(let C=0;C<T;C++){let I=_.transition(C);if(I instanceof p.RuleTransition){if(w.get(I.ruleIndex))continue;let M=y.getChild(I.followState.stateNumber);try{w.set(I.ruleIndex),this._LOOK(I.target,v,M,x,A,w,D,b)}finally{w.clear(I.ruleIndex)}}else if(I instanceof t.AbstractPredicateTransition)D?this._LOOK(I.target,v,y,x,A,w,D,b):x.add(n1.HIT_PRED);else if(I.isEpsilon)this._LOOK(I.target,v,y,x,A,w,D,b);else if(I instanceof f.WildcardTransition)x.addAll(o.IntervalSet.of(d.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType));else{let M=I.label;M!=null&&(I instanceof l.NotSetTransition&&(M=M.complement(o.IntervalSet.of(d.Token.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType))),x.addAll(M))}}}};return m.HIT_PRED=d.Token.INVALID_TYPE,i([a.NotNull],m.prototype,"atn",void 0),i([a.NotNull,e(0,a.NotNull),e(1,a.NotNull)],m.prototype,"LOOK",null),i([e(0,a.NotNull),e(2,a.NotNull),e(3,a.NotNull),e(4,a.NotNull),e(5,a.NotNull)],m.prototype,"_LOOK",null),m=i([e(0,a.NotNull)],m),Cu.LL1Analyzer=m,Cu}var tb;function hn(){return tb||(tb=1,function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(f,m,g,_){var v=arguments.length,y=v<3?m:_===null?_=Object.getOwnPropertyDescriptor(m,g):_,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,m,g,_);else for(var A=f.length-1;A>=0;A--)(x=f[A])&&(y=(v<3?x(y):v>3?x(m,g,y):x(m,g))||y);return v>3&&y&&Object.defineProperty(m,g,y),y},t=P&&P.__param||function(f,m){return function(g,_){m(g,_,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ATN=void 0;const r=Rn,n=vA(),s=_a(),o=jc,a=BI(),l=te,c=Zi,h=Rr(),u=_t,p=Xi;let d=class{constructor(m,g){this.states=[],this.decisionToState=[],this.modeNameToStartState=new Map,this.modeToStartState=[],this.contextCache=new r.Array2DHashMap(c.ObjectEqualityComparator.INSTANCE),this.decisionToDFA=[],this.modeToDFA=[],this.LL1Table=new Map,this.grammarType=m,this.maxTokenType=g}clearDFA(){this.decisionToDFA=new Array(this.decisionToState.length);for(let m=0;m<this.decisionToDFA.length;m++)this.decisionToDFA[m]=new n.DFA(this.decisionToState[m],m);this.modeToDFA=new Array(this.modeToStartState.length);for(let m=0;m<this.modeToDFA.length;m++)this.modeToDFA[m]=new n.DFA(this.modeToStartState[m]);this.contextCache.clear(),this.LL1Table.clear()}get contextCacheSize(){return this.contextCache.size}getCachedContext(m){return h.PredictionContext.getCachedContext(m,this.contextCache,new h.PredictionContext.IdentityHashMap)}getDecisionToDFA(){return p(this.decisionToDFA!=null&&this.decisionToDFA.length===this.decisionToState.length),this.decisionToDFA}nextTokens(m,g){return g?new a.LL1Analyzer(this).LOOK(m,g):(m.nextTokenWithinRule||(m.nextTokenWithinRule=this.nextTokens(m,h.PredictionContext.EMPTY_LOCAL),m.nextTokenWithinRule.setReadonly(!0)),m.nextTokenWithinRule)}addState(m){m.atn=this,m.stateNumber=this.states.length,this.states.push(m)}removeState(m){let g=new o.InvalidState;g.atn=this,g.stateNumber=m.stateNumber,this.states[m.stateNumber]=g}defineMode(m,g){this.modeNameToStartState.set(m,g),this.modeToStartState.push(g),this.modeToDFA.push(new n.DFA(g)),this.defineDecisionState(g)}defineDecisionState(m){return this.decisionToState.push(m),m.decision=this.decisionToState.length-1,this.decisionToDFA.push(new n.DFA(m,m.decision)),m.decision}getDecisionState(m){if(this.decisionToState.length>0)return this.decisionToState[m]}get numberOfDecisions(){return this.decisionToState.length}getExpectedTokens(m,g){if(m<0||m>=this.states.length)throw new RangeError("Invalid state number.");let _=g,v=this.states[m],y=this.nextTokens(v);if(!y.contains(u.Token.EPSILON))return y;let x=new s.IntervalSet;for(x.addAll(y),x.remove(u.Token.EPSILON);_!=null&&_.invokingState>=0&&y.contains(u.Token.EPSILON);){let w=this.states[_.invokingState].transition(0);y=this.nextTokens(w.followState),x.addAll(y),x.remove(u.Token.EPSILON),_=_._parent}return y.contains(u.Token.EPSILON)&&x.add(u.Token.EOF),x}};e([l.NotNull],d.prototype,"states",void 0),e([l.NotNull],d.prototype,"decisionToState",void 0),e([l.NotNull],d.prototype,"modeNameToStartState",void 0),e([l.NotNull],d.prototype,"modeToStartState",void 0),e([l.NotNull],d.prototype,"decisionToDFA",void 0),e([l.NotNull],d.prototype,"modeToDFA",void 0),e([l.NotNull],d.prototype,"nextTokens",null),e([t(0,l.NotNull)],d.prototype,"removeState",null),e([t(0,l.NotNull),t(1,l.NotNull)],d.prototype,"defineMode",null),e([t(0,l.NotNull)],d.prototype,"defineDecisionState",null),e([l.NotNull],d.prototype,"getExpectedTokens",null),d=e([t(0,l.NotNull)],d),i.ATN=d,function(f){f.INVALID_ALT_NUMBER=0}(d=i.ATN||(i.ATN={})),i.ATN=d}(Og)),Og}var Gc={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var FI=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Gc,"__esModule",{value:!0});Gc.ATNDeserializationOptions=void 0;const UI=te;class Jn{constructor(e){this.readOnly=!1,e?(this.verifyATN=e.verifyATN,this.generateRuleBypassTransitions=e.generateRuleBypassTransitions,this.optimize=e.optimize):(this.verifyATN=!0,this.generateRuleBypassTransitions=!1,this.optimize=!0)}static get defaultOptions(){return Jn._defaultOptions==null&&(Jn._defaultOptions=new Jn,Jn._defaultOptions.makeReadOnly()),Jn._defaultOptions}get isReadOnly(){return this.readOnly}makeReadOnly(){this.readOnly=!0}get isVerifyATN(){return this.verifyATN}set isVerifyATN(e){this.throwIfReadOnly(),this.verifyATN=e}get isGenerateRuleBypassTransitions(){return this.generateRuleBypassTransitions}set isGenerateRuleBypassTransitions(e){this.throwIfReadOnly(),this.generateRuleBypassTransitions=e}get isOptimize(){return this.optimize}set isOptimize(e){this.throwIfReadOnly(),this.optimize=e}throwIfReadOnly(){if(this.isReadOnly)throw new Error("The object is read only.")}}FI([UI.NotNull],Jn,"defaultOptions",null);Gc.ATNDeserializationOptions=Jn;var Yc={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var qc=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},KI=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(Yc,"__esModule",{value:!0});Yc.AtomTransition=void 0;const HI=_a(),Ho=te,zI=Mr;let zo=class extends zI.Transition{constructor(e,t){super(e),this._label=t}get serializationType(){return 5}get label(){return HI.IntervalSet.of(this._label)}matches(e,t,r){return this._label===e}toString(){return String(this.label)}};qc([Ho.Override],zo.prototype,"serializationType",null);qc([Ho.Override,Ho.NotNull],zo.prototype,"label",null);qc([Ho.Override],zo.prototype,"matches",null);qc([Ho.Override,Ho.NotNull],zo.prototype,"toString",null);zo=qc([KI(0,Ho.NotNull)],zo);Yc.AtomTransition=zo;var Kp={},va={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(va,"__esModule",{value:!0});va.BlockStartState=void 0;const jI=on;class $I extends jI.DecisionState{}va.BlockStartState=$I;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var VI=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Kp,"__esModule",{value:!0});Kp.BasicBlockStartState=void 0;const WI=qt,GI=va,YI=te;class TA extends GI.BlockStartState{get stateType(){return WI.ATNStateType.BLOCK_START}}VI([YI.Override],TA.prototype,"stateType",null);Kp.BasicBlockStartState=TA;var Hp={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var qI=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Hp,"__esModule",{value:!0});Hp.BlockEndState=void 0;const XI=an,ZI=qt,QI=te;class CA extends XI.ATNState{get stateType(){return ZI.ATNStateType.BLOCK_END}}qI([QI.Override],CA.prototype,"stateType",null);Hp.BlockEndState=CA;var zp={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Xc=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},JI=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(zp,"__esModule",{value:!0});zp.EpsilonTransition=void 0;const bl=te,e4=Mr;let jo=class extends e4.Transition{constructor(e,t=-1){super(e),this._outermostPrecedenceReturn=t}get outermostPrecedenceReturn(){return this._outermostPrecedenceReturn}get serializationType(){return 1}get isEpsilon(){return!0}matches(e,t,r){return!1}toString(){return"epsilon"}};Xc([bl.Override],jo.prototype,"serializationType",null);Xc([bl.Override],jo.prototype,"isEpsilon",null);Xc([bl.Override],jo.prototype,"matches",null);Xc([bl.Override,bl.NotNull],jo.prototype,"toString",null);jo=Xc([JI(0,bl.NotNull)],jo);zp.EpsilonTransition=jo;var jp={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Ul=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},t4=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(jp,"__esModule",{value:!0});jp.LexerChannelAction=void 0;const kd=Tt,$o=te;class Bn{constructor(e){this._channel=e}get channel(){return this._channel}get actionType(){return 0}get isPositionDependent(){return!1}execute(e){e.channel=this._channel}hashCode(){let e=kd.MurmurHash.initialize();return e=kd.MurmurHash.update(e,this.actionType),e=kd.MurmurHash.update(e,this._channel),kd.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof Bn?this._channel===e._channel:!1}toString(){return`channel(${this._channel})`}}Ul([$o.Override],Bn.prototype,"actionType",null);Ul([$o.Override],Bn.prototype,"isPositionDependent",null);Ul([$o.Override,t4(0,$o.NotNull)],Bn.prototype,"execute",null);Ul([$o.Override],Bn.prototype,"hashCode",null);Ul([$o.Override],Bn.prototype,"equals",null);Ul([$o.Override],Bn.prototype,"toString",null);jp.LexerChannelAction=Bn;var $p={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Zc=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},i4=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty($p,"__esModule",{value:!0});$p.LexerCustomAction=void 0;const Ou=Tt,Sl=te;class ws{constructor(e,t){this._ruleIndex=e,this._actionIndex=t}get ruleIndex(){return this._ruleIndex}get actionIndex(){return this._actionIndex}get actionType(){return 1}get isPositionDependent(){return!0}execute(e){e.action(void 0,this._ruleIndex,this._actionIndex)}hashCode(){let e=Ou.MurmurHash.initialize();return e=Ou.MurmurHash.update(e,this.actionType),e=Ou.MurmurHash.update(e,this._ruleIndex),e=Ou.MurmurHash.update(e,this._actionIndex),Ou.MurmurHash.finish(e,3)}equals(e){return e===this?!0:e instanceof ws?this._ruleIndex===e._ruleIndex&&this._actionIndex===e._actionIndex:!1}}Zc([Sl.Override],ws.prototype,"actionType",null);Zc([Sl.Override],ws.prototype,"isPositionDependent",null);Zc([Sl.Override,i4(0,Sl.NotNull)],ws.prototype,"execute",null);Zc([Sl.Override],ws.prototype,"hashCode",null);Zc([Sl.Override],ws.prototype,"equals",null);$p.LexerCustomAction=ws;var Vp={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Kl=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},r4=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(Vp,"__esModule",{value:!0});Vp.LexerModeAction=void 0;const Bd=Tt,Vo=te;class Fn{constructor(e){this._mode=e}get mode(){return this._mode}get actionType(){return 2}get isPositionDependent(){return!1}execute(e){e.mode(this._mode)}hashCode(){let e=Bd.MurmurHash.initialize();return e=Bd.MurmurHash.update(e,this.actionType),e=Bd.MurmurHash.update(e,this._mode),Bd.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof Fn?this._mode===e._mode:!1}toString(){return`mode(${this._mode})`}}Kl([Vo.Override],Fn.prototype,"actionType",null);Kl([Vo.Override],Fn.prototype,"isPositionDependent",null);Kl([Vo.Override,r4(0,Vo.NotNull)],Fn.prototype,"execute",null);Kl([Vo.Override],Fn.prototype,"hashCode",null);Kl([Vo.Override],Fn.prototype,"equals",null);Kl([Vo.Override],Fn.prototype,"toString",null);Vp.LexerModeAction=Fn;var PA={};(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(o,a,l,c){var h=arguments.length,u=h<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,a,l,c);else for(var d=o.length-1;d>=0;d--)(p=o[d])&&(u=(h<3?p(u):h>3?p(a,l,u):p(a,l))||u);return h>3&&u&&Object.defineProperty(a,l,u),u},t=P&&P.__param||function(o,a){return function(l,c){a(l,c,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.LexerMoreAction=void 0;const r=Tt,n=te;class s{constructor(){}get actionType(){return 3}get isPositionDependent(){return!1}execute(a){a.more()}hashCode(){let a=r.MurmurHash.initialize();return a=r.MurmurHash.update(a,this.actionType),r.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"more"}}e([n.Override],s.prototype,"actionType",null),e([n.Override],s.prototype,"isPositionDependent",null),e([n.Override,t(0,n.NotNull)],s.prototype,"execute",null),e([n.Override],s.prototype,"hashCode",null),e([n.Override],s.prototype,"equals",null),e([n.Override],s.prototype,"toString",null),i.LexerMoreAction=s,function(o){o.INSTANCE=new o}(s=i.LexerMoreAction||(i.LexerMoreAction={}))})(PA);var IA={};(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(o,a,l,c){var h=arguments.length,u=h<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,a,l,c);else for(var d=o.length-1;d>=0;d--)(p=o[d])&&(u=(h<3?p(u):h>3?p(a,l,u):p(a,l))||u);return h>3&&u&&Object.defineProperty(a,l,u),u},t=P&&P.__param||function(o,a){return function(l,c){a(l,c,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.LexerPopModeAction=void 0;const r=Tt,n=te;class s{constructor(){}get actionType(){return 4}get isPositionDependent(){return!1}execute(a){a.popMode()}hashCode(){let a=r.MurmurHash.initialize();return a=r.MurmurHash.update(a,this.actionType),r.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"popMode"}}e([n.Override],s.prototype,"actionType",null),e([n.Override],s.prototype,"isPositionDependent",null),e([n.Override,t(0,n.NotNull)],s.prototype,"execute",null),e([n.Override],s.prototype,"hashCode",null),e([n.Override],s.prototype,"equals",null),e([n.Override],s.prototype,"toString",null),i.LexerPopModeAction=s,function(o){o.INSTANCE=new o}(s=i.LexerPopModeAction||(i.LexerPopModeAction={}))})(IA);var Wp={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Hl=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},n4=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(Wp,"__esModule",{value:!0});Wp.LexerPushModeAction=void 0;const Fd=Tt,Wo=te;class Un{constructor(e){this._mode=e}get mode(){return this._mode}get actionType(){return 5}get isPositionDependent(){return!1}execute(e){e.pushMode(this._mode)}hashCode(){let e=Fd.MurmurHash.initialize();return e=Fd.MurmurHash.update(e,this.actionType),e=Fd.MurmurHash.update(e,this._mode),Fd.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof Un?this._mode===e._mode:!1}toString(){return`pushMode(${this._mode})`}}Hl([Wo.Override],Un.prototype,"actionType",null);Hl([Wo.Override],Un.prototype,"isPositionDependent",null);Hl([Wo.Override,n4(0,Wo.NotNull)],Un.prototype,"execute",null);Hl([Wo.Override],Un.prototype,"hashCode",null);Hl([Wo.Override],Un.prototype,"equals",null);Hl([Wo.Override],Un.prototype,"toString",null);Wp.LexerPushModeAction=Un;var OA={};(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(o,a,l,c){var h=arguments.length,u=h<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,a,l,c);else for(var d=o.length-1;d>=0;d--)(p=o[d])&&(u=(h<3?p(u):h>3?p(a,l,u):p(a,l))||u);return h>3&&u&&Object.defineProperty(a,l,u),u},t=P&&P.__param||function(o,a){return function(l,c){a(l,c,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.LexerSkipAction=void 0;const r=Tt,n=te;class s{constructor(){}get actionType(){return 6}get isPositionDependent(){return!1}execute(a){a.skip()}hashCode(){let a=r.MurmurHash.initialize();return a=r.MurmurHash.update(a,this.actionType),r.MurmurHash.finish(a,1)}equals(a){return a===this}toString(){return"skip"}}e([n.Override],s.prototype,"actionType",null),e([n.Override],s.prototype,"isPositionDependent",null),e([n.Override,t(0,n.NotNull)],s.prototype,"execute",null),e([n.Override],s.prototype,"hashCode",null),e([n.Override],s.prototype,"equals",null),e([n.Override],s.prototype,"toString",null),i.LexerSkipAction=s,function(o){o.INSTANCE=new o}(s=i.LexerSkipAction||(i.LexerSkipAction={}))})(OA);var Gp={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var zl=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},s4=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.LexerTypeAction=void 0;const Ud=Tt,Go=te;class Kn{constructor(e){this._type=e}get type(){return this._type}get actionType(){return 7}get isPositionDependent(){return!1}execute(e){e.type=this._type}hashCode(){let e=Ud.MurmurHash.initialize();return e=Ud.MurmurHash.update(e,this.actionType),e=Ud.MurmurHash.update(e,this._type),Ud.MurmurHash.finish(e,2)}equals(e){return e===this?!0:e instanceof Kn?this._type===e._type:!1}toString(){return`type(${this._type})`}}zl([Go.Override],Kn.prototype,"actionType",null);zl([Go.Override],Kn.prototype,"isPositionDependent",null);zl([Go.Override,s4(0,Go.NotNull)],Kn.prototype,"execute",null);zl([Go.Override],Kn.prototype,"hashCode",null);zl([Go.Override],Kn.prototype,"equals",null);zl([Go.Override],Kn.prototype,"toString",null);Gp.LexerTypeAction=Kn;var Qc={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var o4=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Qc,"__esModule",{value:!0});Qc.LoopEndState=void 0;const a4=an,l4=qt,u4=te;class MA extends a4.ATNState{get stateType(){return l4.ATNStateType.LOOP_END}}o4([u4.Override],MA.prototype,"stateType",null);Qc.LoopEndState=MA;var Mu={},Yp={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var NA=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Yp,"__esModule",{value:!0});Yp.ConflictInfo=void 0;const RA=te,h4=Ut;class Jc{constructor(e,t){this._conflictedAlts=e,this.exact=t}get conflictedAlts(){return this._conflictedAlts}get isExact(){return this.exact}equals(e){return e===this?!0:e instanceof Jc?this.isExact===e.isExact&&h4.equals(this.conflictedAlts,e.conflictedAlts):!1}hashCode(){return this.conflictedAlts.hashCode()}}NA([RA.Override],Jc.prototype,"equals",null);NA([RA.Override],Jc.prototype,"hashCode",null);Yp.ConflictInfo=Jc;var Nu={},Ru={},Lu={},jl={},ed={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var td=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},c4=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(ed,"__esModule",{value:!0});ed.PredicateTransition=void 0;const d4=Bl,El=te,f4=da;let Yo=class extends d4.AbstractPredicateTransition{constructor(e,t,r,n){super(e),this.ruleIndex=t,this.predIndex=r,this.isCtxDependent=n}get serializationType(){return 4}get isEpsilon(){return!0}matches(e,t,r){return!1}get predicate(){return new f4.SemanticContext.Predicate(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}};td([El.Override],Yo.prototype,"serializationType",null);td([El.Override],Yo.prototype,"isEpsilon",null);td([El.Override],Yo.prototype,"matches",null);td([El.Override,El.NotNull],Yo.prototype,"toString",null);Yo=td([c4(0,El.NotNull)],Yo);ed.PredicateTransition=Yo;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var LA=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},p4=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(jl,"__esModule",{value:!0});var Zt=jl.FailedPredicateException=void 0;const m4=un,kA=te,g4=ed;let Kf=class BA extends m4.RecognitionException{constructor(e,t,r){super(e,e.inputStream,e.context,BA.formatMessage(t,r));let s=e.interpreter.atn.states[e.state].transition(0);s instanceof g4.PredicateTransition?(this._ruleIndex=s.ruleIndex,this._predicateIndex=s.predIndex):(this._ruleIndex=0,this._predicateIndex=0),this._predicate=t,super.setOffendingToken(e,e.currentToken)}get ruleIndex(){return this._ruleIndex}get predicateIndex(){return this._predicateIndex}get predicate(){return this._predicate}static formatMessage(e,t){return t||`failed predicate: {${e}}?`}};LA([kA.NotNull],Kf,"formatMessage",null);Kf=LA([p4(0,kA.NotNull)],Kf);Zt=jl.FailedPredicateException=Kf;var ya={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var _4=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},v4=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(ya,"__esModule",{value:!0});ya.InputMismatchException=void 0;const y4=un,x4=te;let s1=class extends y4.RecognitionException{constructor(e,t,r){r===void 0&&(r=e.context),super(e,e.inputStream,r),t!==void 0&&this.setOffendingState(t),this.setOffendingToken(e,e.currentToken)}};s1=_4([v4(0,x4.NotNull)],s1);ya.InputMismatchException=s1;var ib;function hx(){if(ib)return Lu;ib=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(p,d,f,m){var g=arguments.length,_=g<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,f):m,v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(p,d,f,m);else for(var y=p.length-1;y>=0;y--)(v=p[y])&&(_=(g<3?v(_):g>3?v(d,f,_):v(d,f))||_);return g>3&&_&&Object.defineProperty(d,f,_),_},e=P&&P.__param||function(p,d){return function(f,m){d(f,m,p)}};Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.DefaultErrorStrategy=void 0;const t=an,r=qt,n=jl,s=ya,o=_a(),a=em(),l=Rr(),c=_t,h=te;let u=class{constructor(){this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.nextTokensState=t.ATNState.INVALID_STATE_NUMBER}reset(d){this.endErrorCondition(d)}beginErrorCondition(d){this.errorRecoveryMode=!0}inErrorRecoveryMode(d){return this.errorRecoveryMode}endErrorCondition(d){this.errorRecoveryMode=!1,this.lastErrorStates=void 0,this.lastErrorIndex=-1}reportMatch(d){this.endErrorCondition(d)}reportError(d,f){this.inErrorRecoveryMode(d)||(this.beginErrorCondition(d),f instanceof a.NoViableAltException?this.reportNoViableAlternative(d,f):f instanceof s.InputMismatchException?this.reportInputMismatch(d,f):f instanceof n.FailedPredicateException?this.reportFailedPredicate(d,f):(console.error(`unknown recognition error type: ${f}`),this.notifyErrorListeners(d,f.toString(),f)))}notifyErrorListeners(d,f,m){let g=m.getOffendingToken(d);g===void 0&&(g=null),d.notifyErrorListeners(f,g,m)}recover(d,f){this.lastErrorIndex===d.inputStream.index&&this.lastErrorStates&&this.lastErrorStates.contains(d.state)&&d.consume(),this.lastErrorIndex=d.inputStream.index,this.lastErrorStates||(this.lastErrorStates=new o.IntervalSet),this.lastErrorStates.add(d.state);let m=this.getErrorRecoverySet(d);this.consumeUntil(d,m)}sync(d){let f=d.interpreter.atn.states[d.state];if(this.inErrorRecoveryMode(d))return;let g=d.inputStream.LA(1),_=d.atn.nextTokens(f);if(_.contains(g)){this.nextTokensContext=void 0,this.nextTokensState=t.ATNState.INVALID_STATE_NUMBER;return}if(_.contains(c.Token.EPSILON)){this.nextTokensContext===void 0&&(this.nextTokensContext=d.context,this.nextTokensState=d.state);return}switch(f.stateType){case r.ATNStateType.BLOCK_START:case r.ATNStateType.STAR_BLOCK_START:case r.ATNStateType.PLUS_BLOCK_START:case r.ATNStateType.STAR_LOOP_ENTRY:if(this.singleTokenDeletion(d))return;throw new s.InputMismatchException(d);case r.ATNStateType.PLUS_LOOP_BACK:case r.ATNStateType.STAR_LOOP_BACK:this.reportUnwantedToken(d);let y=d.getExpectedTokens().or(this.getErrorRecoverySet(d));this.consumeUntil(d,y);break}}reportNoViableAlternative(d,f){let m=d.inputStream,g;m?f.startToken.type===c.Token.EOF?g="<EOF>":g=m.getTextFromRange(f.startToken,f.getOffendingToken()):g="<unknown input>";let _="no viable alternative at input "+this.escapeWSAndQuote(g);this.notifyErrorListeners(d,_,f)}reportInputMismatch(d,f){let m=f.expectedTokens,g=m?m.toStringVocabulary(d.vocabulary):"",_="mismatched input "+this.getTokenErrorDisplay(f.getOffendingToken(d))+" expecting "+g;this.notifyErrorListeners(d,_,f)}reportFailedPredicate(d,f){let g="rule "+d.ruleNames[d.context.ruleIndex]+" "+f.message;this.notifyErrorListeners(d,g,f)}reportUnwantedToken(d){if(this.inErrorRecoveryMode(d))return;this.beginErrorCondition(d);let f=d.currentToken,m=this.getTokenErrorDisplay(f),g=this.getExpectedTokens(d),_="extraneous input "+m+" expecting "+g.toStringVocabulary(d.vocabulary);d.notifyErrorListeners(_,f,void 0)}reportMissingToken(d){if(this.inErrorRecoveryMode(d))return;this.beginErrorCondition(d);let f=d.currentToken,g="missing "+this.getExpectedTokens(d).toStringVocabulary(d.vocabulary)+" at "+this.getTokenErrorDisplay(f);d.notifyErrorListeners(g,f,void 0)}recoverInline(d){let f=this.singleTokenDeletion(d);if(f)return d.consume(),f;if(this.singleTokenInsertion(d))return this.getMissingSymbol(d);throw this.nextTokensContext===void 0?new s.InputMismatchException(d):new s.InputMismatchException(d,this.nextTokensState,this.nextTokensContext)}singleTokenInsertion(d){let f=d.inputStream.LA(1),g=d.interpreter.atn.states[d.state].transition(0).target,_=d.interpreter.atn;return _.nextTokens(g,l.PredictionContext.fromRuleContext(_,d.context)).contains(f)?(this.reportMissingToken(d),!0):!1}singleTokenDeletion(d){let f=d.inputStream.LA(2);if(this.getExpectedTokens(d).contains(f)){this.reportUnwantedToken(d),d.consume();let g=d.currentToken;return this.reportMatch(d),g}}getMissingSymbol(d){let f=d.currentToken,m=this.getExpectedTokens(d),g=c.Token.INVALID_TYPE;m.isNil||(g=m.minElement);let _;g===c.Token.EOF?_="<missing EOF>":_="<missing "+d.vocabulary.getDisplayName(g)+">";let v=f,y=d.inputStream.tryLT(-1);return v.type===c.Token.EOF&&y!=null&&(v=y),this.constructToken(d.inputStream.tokenSource,g,_,v)}constructToken(d,f,m,g){let _=d.tokenFactory,v=g.tokenSource,y=v?v.inputStream:void 0;return _.create({source:d,stream:y},f,m,c.Token.DEFAULT_CHANNEL,-1,-1,g.line,g.charPositionInLine)}getExpectedTokens(d){return d.getExpectedTokens()}getTokenErrorDisplay(d){if(!d)return"<no token>";let f=this.getSymbolText(d);return f||(this.getSymbolType(d)===c.Token.EOF?f="<EOF>":f=`<${this.getSymbolType(d)}>`),this.escapeWSAndQuote(f)}getSymbolText(d){return d.text}getSymbolType(d){return d.type}escapeWSAndQuote(d){return d=d.replace(`
`,"\\n"),d=d.replace("\r","\\r"),d=d.replace("	","\\t"),"'"+d+"'"}getErrorRecoverySet(d){let f=d.interpreter.atn,m=d.context,g=new o.IntervalSet;for(;m&&m.invokingState>=0;){let v=f.states[m.invokingState].transition(0),y=f.nextTokens(v.followState);g.addAll(y),m=m._parent}return g.remove(c.Token.EPSILON),g}consumeUntil(d,f){let m=d.inputStream.LA(1);for(;m!==c.Token.EOF&&!f.contains(m);)d.consume(),m=d.inputStream.LA(1)}};return i([h.Override],u.prototype,"reset",null),i([e(0,h.NotNull)],u.prototype,"beginErrorCondition",null),i([h.Override],u.prototype,"inErrorRecoveryMode",null),i([e(0,h.NotNull)],u.prototype,"endErrorCondition",null),i([h.Override],u.prototype,"reportMatch",null),i([h.Override],u.prototype,"reportError",null),i([e(0,h.NotNull)],u.prototype,"notifyErrorListeners",null),i([h.Override],u.prototype,"recover",null),i([h.Override],u.prototype,"sync",null),i([e(0,h.NotNull),e(1,h.NotNull)],u.prototype,"reportNoViableAlternative",null),i([e(0,h.NotNull),e(1,h.NotNull)],u.prototype,"reportInputMismatch",null),i([e(0,h.NotNull),e(1,h.NotNull)],u.prototype,"reportFailedPredicate",null),i([e(0,h.NotNull)],u.prototype,"reportUnwantedToken",null),i([e(0,h.NotNull)],u.prototype,"reportMissingToken",null),i([h.Override],u.prototype,"recoverInline",null),i([e(0,h.NotNull)],u.prototype,"singleTokenInsertion",null),i([e(0,h.NotNull)],u.prototype,"singleTokenDeletion",null),i([h.NotNull,e(0,h.NotNull)],u.prototype,"getMissingSymbol",null),i([h.NotNull,e(0,h.NotNull)],u.prototype,"getExpectedTokens",null),i([e(0,h.NotNull)],u.prototype,"getSymbolText",null),i([e(0,h.NotNull)],u.prototype,"getSymbolType",null),i([h.NotNull,e(0,h.NotNull)],u.prototype,"escapeWSAndQuote",null),i([h.NotNull,e(0,h.NotNull)],u.prototype,"getErrorRecoverySet",null),i([e(0,h.NotNull),e(1,h.NotNull)],u.prototype,"consumeUntil",null),Lu.DefaultErrorStrategy=u,Lu}var bs={},kr={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var cn=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(kr,"__esModule",{value:!0});kr.TerminalNode=void 0;const w4=ri,dn=te,b4=_t;class Br{constructor(e){this._symbol=e}getChild(e){throw new RangeError("Terminal Node has no children.")}get symbol(){return this._symbol}get parent(){return this._parent}setParent(e){this._parent=e}get payload(){return this._symbol}get sourceInterval(){let e=this._symbol.tokenIndex;return new w4.Interval(e,e)}get childCount(){return 0}accept(e){return e.visitTerminal(this)}get text(){return this._symbol.text||""}toStringTree(e){return this.toString()}toString(){return this._symbol.type===b4.Token.EOF?"<EOF>":this._symbol.text||""}}cn([dn.Override],Br.prototype,"getChild",null);cn([dn.Override],Br.prototype,"parent",null);cn([dn.Override],Br.prototype,"setParent",null);cn([dn.Override],Br.prototype,"payload",null);cn([dn.Override],Br.prototype,"sourceInterval",null);cn([dn.Override],Br.prototype,"childCount",null);cn([dn.Override],Br.prototype,"accept",null);cn([dn.Override],Br.prototype,"text",null);cn([dn.Override],Br.prototype,"toStringTree",null);cn([dn.Override],Br.prototype,"toString",null);kr.TerminalNode=Br;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var S4=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(bs,"__esModule",{value:!0});bs.ErrorNode=void 0;const E4=te,A4=kr;class FA extends A4.TerminalNode{constructor(e){super(e)}accept(e){return e.visitErrorNode(this)}}S4([E4.Override],FA.prototype,"accept",null);bs.ErrorNode=FA;var qp={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var cx=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},D4=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(qp,"__esModule",{value:!0});qp.ParseInfo=void 0;const dx=te;let mc=class{constructor(e){this.atnSimulator=e}getDecisionInfo(){return this.atnSimulator.getDecisionInfo()}getLLDecisions(){let e=this.atnSimulator.getDecisionInfo(),t=[];for(let r=0;r<e.length;r++)e[r].LL_Fallback>0&&t.push(r);return t}getTotalTimeInPrediction(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let r of e)t+=r.timeInPrediction;return t}getTotalSLLLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let r of e)t+=r.SLL_TotalLook;return t}getTotalLLLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let r of e)t+=r.LL_TotalLook;return t}getTotalSLLATNLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let r of e)t+=r.SLL_ATNTransitions;return t}getTotalLLATNLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let r of e)t+=r.LL_ATNTransitions;return t}getTotalATNLookaheadOps(){let e=this.atnSimulator.getDecisionInfo(),t=0;for(let r of e)t+=r.SLL_ATNTransitions,t+=r.LL_ATNTransitions;return t}getDFASize(e){if(e)return this.atnSimulator.atn.decisionToDFA[e].states.size;{let t=0,r=this.atnSimulator.atn.decisionToDFA;for(let n=0;n<r.length;n++)t+=this.getDFASize(n);return t}}};cx([dx.NotNull],mc.prototype,"getDecisionInfo",null);cx([dx.NotNull],mc.prototype,"getLLDecisions",null);mc=cx([D4(0,dx.NotNull)],mc);qp.ParseInfo=mc;var id={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var fx=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(id,"__esModule",{value:!0});id.ProxyParserErrorListener=void 0;const T4=Rl,px=te;class Xp extends T4.ProxyErrorListener{constructor(e){super(e)}reportAmbiguity(e,t,r,n,s,o,a){this.getDelegates().forEach(l=>{l.reportAmbiguity&&l.reportAmbiguity(e,t,r,n,s,o,a)})}reportAttemptingFullContext(e,t,r,n,s,o){this.getDelegates().forEach(a=>{a.reportAttemptingFullContext&&a.reportAttemptingFullContext(e,t,r,n,s,o)})}reportContextSensitivity(e,t,r,n,s,o){this.getDelegates().forEach(a=>{a.reportContextSensitivity&&a.reportContextSensitivity(e,t,r,n,s,o)})}}fx([px.Override],Xp.prototype,"reportAmbiguity",null);fx([px.Override],Xp.prototype,"reportAttemptingFullContext",null);fx([px.Override],Xp.prototype,"reportContextSensitivity",null);id.ProxyParserErrorListener=Xp;var jg={},ku={},rd={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(rd,"__esModule",{value:!0});rd.ParseCancellationException=void 0;class C4 extends Error{constructor(e){super(e.message),this.cause=e,this.stack=e.stack}getCause(){return this.cause}}rd.ParseCancellationException=C4;var rb;function UA(){if(rb)return ku;rb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(o,a,l,c){var h=arguments.length,u=h<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,a,l,c);else for(var d=o.length-1;d>=0;d--)(p=o[d])&&(u=(h<3?p(u):h>3?p(a,l,u):p(a,l))||u);return h>3&&u&&Object.defineProperty(a,l,u),u};Object.defineProperty(ku,"__esModule",{value:!0}),ku.BailErrorStrategy=void 0;const e=hx(),t=ya,r=te,n=rd;let s=class extends e.DefaultErrorStrategy{recover(a,l){for(let c=a.context;c;c=c.parent)c.exception=l;throw new n.ParseCancellationException(l)}recoverInline(a){let l=new t.InputMismatchException(a);for(let c=a.context;c;c=c.parent)c.exception=l;throw new n.ParseCancellationException(l)}sync(a){}};return i([r.Override],s.prototype,"recover",null),i([r.Override],s.prototype,"recoverInline",null),i([r.Override],s.prototype,"sync",null),ku.BailErrorStrategy=s,ku}var Zp={},mx={},us={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(us,"__esModule",{value:!0});us.isSupplementaryCodePoint=us.isLowSurrogate=us.isHighSurrogate=void 0;function P4(i){return i>=55296&&i<=56319}us.isHighSurrogate=P4;function I4(i){return i>=56320&&i<=57343}us.isLowSurrogate=I4;function O4(i){return i>=65536}us.isSupplementaryCodePoint=O4;(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(i,"__esModule",{value:!0}),i.CodePointBuffer=void 0;const e=Xi,t=us;class r{constructor(s,o){this.buffer=s,this._position=0,this._size=o}static withArray(s){return new r(s,s.length)}get position(){return this._position}set position(s){if(s<0||s>this._size)throw new RangeError;this._position=s}get remaining(){return this._size-this.position}get(s){return this.buffer[s]}array(){return this.buffer.slice(0,this._size)}static builder(s){return new r.Builder(s)}}i.CodePointBuffer=r,function(n){let s;(function(a){a[a.BYTE=0]="BYTE",a[a.CHAR=1]="CHAR",a[a.INT=2]="INT"})(s||(s={}));class o{constructor(l){this.type=0,this.buffer=new Uint8Array(l),this.prevHighSurrogate=-1,this.position=0}build(){return new n(this.buffer,this.position)}static roundUpToNextPowerOfTwo(l){let c=32-Math.clz32(l-1);return Math.pow(2,c)}ensureRemaining(l){switch(this.type){case 0:if(this.buffer.length-this.position<l){let c=o.roundUpToNextPowerOfTwo(this.buffer.length+l),h=new Uint8Array(c);h.set(this.buffer.subarray(0,this.position),0),this.buffer=h}break;case 1:if(this.buffer.length-this.position<l){let c=o.roundUpToNextPowerOfTwo(this.buffer.length+l),h=new Uint16Array(c);h.set(this.buffer.subarray(0,this.position),0),this.buffer=h}break;case 2:if(this.buffer.length-this.position<l){let c=o.roundUpToNextPowerOfTwo(this.buffer.length+l),h=new Int32Array(c);h.set(this.buffer.subarray(0,this.position),0),this.buffer=h}break}}append(l){this.ensureRemaining(l.length),this.appendArray(l)}appendArray(l){switch(this.type){case 0:this.appendArrayByte(l);break;case 1:this.appendArrayChar(l);break;case 2:this.appendArrayInt(l);break}}appendArrayByte(l){e(this.prevHighSurrogate===-1);let c=l,h=0,u=l.length,p=this.buffer,d=this.position;for(;h<u;){let f=c[h];if(f<=255)p[d]=f;else if(l=l.subarray(h,u),this.position=d,t.isHighSurrogate(f)){this.byteToIntBuffer(l.length),this.appendArrayInt(l);return}else{this.byteToCharBuffer(l.length),this.appendArrayChar(l);return}h++,d++}this.position=d}appendArrayChar(l){e(this.prevHighSurrogate===-1);let c=l,h=0,u=l.length,p=this.buffer,d=this.position;for(;h<u;){let f=c[h];if(!t.isHighSurrogate(f))p[d]=f;else{l=l.subarray(h,u),this.position=d,this.charToIntBuffer(l.length),this.appendArrayInt(l);return}h++,d++}this.position=d}appendArrayInt(l){let c=l,h=0,u=l.length,p=this.buffer,d=this.position;for(;h<u;){let f=c[h];h++,this.prevHighSurrogate!==-1?t.isLowSurrogate(f)?(p[d]=String.fromCharCode(this.prevHighSurrogate,f).codePointAt(0),d++,this.prevHighSurrogate=-1):(p[d]=this.prevHighSurrogate,d++,t.isHighSurrogate(f)?this.prevHighSurrogate=f:(p[d]=f,d++,this.prevHighSurrogate=-1)):t.isHighSurrogate(f)?this.prevHighSurrogate=f:(p[d]=f,d++)}this.prevHighSurrogate!==-1&&(p[d]=this.prevHighSurrogate,d++),this.position=d}byteToCharBuffer(l){let c=new Uint16Array(Math.max(this.position+l,this.buffer.length>>1));c.set(this.buffer.subarray(0,this.position),0),this.type=1,this.buffer=c}byteToIntBuffer(l){let c=new Int32Array(Math.max(this.position+l,this.buffer.length>>2));c.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=c}charToIntBuffer(l){let c=new Int32Array(Math.max(this.position+l,this.buffer.length>>1));c.set(this.buffer.subarray(0,this.position),0),this.type=2,this.buffer=c}}n.Builder=o}(r=i.CodePointBuffer||(i.CodePointBuffer={}))})(mx);var nd={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var fn=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(nd,"__esModule",{value:!0});nd.CodePointCharStream=void 0;const nb=Xi,Kd=Ln,M4=ri,pn=te;class Qi{constructor(e,t,r,n){nb(t===0),this._array=e,this._size=r,this._name=n,this._position=0}get internalStorage(){return this._array}static fromBuffer(e,t){return(t===void 0||t.length===0)&&(t=Kd.IntStream.UNKNOWN_SOURCE_NAME),new Qi(e.array(),e.position,e.remaining,t)}consume(){if(this._size-this._position===0)throw nb(this.LA(1)===Kd.IntStream.EOF),new RangeError("cannot consume EOF");this._position++}get index(){return this._position}get size(){return this._size}mark(){return-1}release(e){}seek(e){this._position=e}get sourceName(){return this._name}toString(){return this.getText(M4.Interval.of(0,this.size-1))}LA(e){let t;switch(Math.sign(e)){case-1:return t=this.index+e,t<0?Kd.IntStream.EOF:this._array[t];case 0:return 0;case 1:return t=this.index+e-1,t>=this.size?Kd.IntStream.EOF:this._array[t]}throw new RangeError("Not reached")}getText(e){const t=Math.min(e.a,this.size),r=Math.min(e.b-e.a+1,this.size-t);return this._array instanceof Int32Array?String.fromCodePoint(...Array.from(this._array.subarray(t,t+r))):String.fromCharCode(...Array.from(this._array.subarray(t,t+r)))}}fn([pn.Override],Qi.prototype,"consume",null);fn([pn.Override],Qi.prototype,"index",null);fn([pn.Override],Qi.prototype,"size",null);fn([pn.Override],Qi.prototype,"mark",null);fn([pn.Override],Qi.prototype,"release",null);fn([pn.Override],Qi.prototype,"seek",null);fn([pn.Override],Qi.prototype,"sourceName",null);fn([pn.Override],Qi.prototype,"toString",null);fn([pn.Override],Qi.prototype,"LA",null);fn([pn.Override],Qi.prototype,"getText",null);nd.CodePointCharStream=Qi;(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(i,"__esModule",{value:!0}),i.CharStreams=void 0;const e=mx,t=nd,r=Ln;(function(n){function s(o,a){(a===void 0||a.length===0)&&(a=r.IntStream.UNKNOWN_SOURCE_NAME);let l=e.CodePointBuffer.builder(o.length),c=new Uint16Array(o.length);for(let h=0;h<o.length;h++)c[h]=o.charCodeAt(h);return l.append(c),t.CodePointCharStream.fromBuffer(l.build(),a)}n.fromString=s})(i.CharStreams||(i.CharStreams={}))})(Zp);var $l={},sd={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Si=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},N4=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(sd,"__esModule",{value:!0});sd.BufferedTokenStream=void 0;const sb=Xi,ob=vs,$g=ri,Vg=xs(),Wt=te,Cs=_t;let ti=class{constructor(e){if(this.tokens=[],this.p=-1,this.fetchedEOF=!1,e==null)throw new Error("tokenSource cannot be null");this._tokenSource=e}get tokenSource(){return this._tokenSource}set tokenSource(e){this._tokenSource=e,this.tokens.length=0,this.p=-1,this.fetchedEOF=!1}get index(){return this.p}mark(){return 0}release(e){}seek(e){this.lazyInit(),this.p=this.adjustSeekIndex(e)}get size(){return this.tokens.length}consume(){let e;if(this.p>=0?this.fetchedEOF?e=this.p<this.tokens.length-1:e=this.p<this.tokens.length:e=!1,!e&&this.LA(1)===Cs.Token.EOF)throw new Error("cannot consume EOF");this.sync(this.p+1)&&(this.p=this.adjustSeekIndex(this.p+1))}sync(e){sb(e>=0);let t=e-this.tokens.length+1;return t>0?this.fetch(t)>=t:!0}fetch(e){if(this.fetchedEOF)return 0;for(let t=0;t<e;t++){let r=this.tokenSource.nextToken();if(this.isWritableToken(r)&&(r.tokenIndex=this.tokens.length),this.tokens.push(r),r.type===Cs.Token.EOF)return this.fetchedEOF=!0,t+1}return e}get(e){if(e<0||e>=this.tokens.length)throw new RangeError("token index "+e+" out of range 0.."+(this.tokens.length-1));return this.tokens[e]}getRange(e,t){if(e<0||t<0)return[];this.lazyInit();let r=new Array;t>=this.tokens.length&&(t=this.tokens.length-1);for(let n=e;n<=t;n++){let s=this.tokens[n];if(s.type===Cs.Token.EOF)break;r.push(s)}return r}LA(e){let t=this.LT(e);return t?t.type:Cs.Token.INVALID_TYPE}tryLB(e){if(!(this.p-e<0))return this.tokens[this.p-e]}LT(e){let t=this.tryLT(e);if(t===void 0)throw new RangeError("requested lookback index out of range");return t}tryLT(e){if(this.lazyInit(),e===0)throw new RangeError("0 is not a valid lookahead index");if(e<0)return this.tryLB(-e);let t=this.p+e-1;return this.sync(t),t>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[t]}adjustSeekIndex(e){return e}lazyInit(){this.p===-1&&this.setup()}setup(){this.sync(0),this.p=this.adjustSeekIndex(0)}getTokens(e,t,r){if(this.lazyInit(),e===void 0)return sb(t===void 0&&r===void 0),this.tokens;if(t===void 0&&(t=this.tokens.length-1),e<0||t>=this.tokens.length||t<0||e>=this.tokens.length)throw new RangeError("start "+e+" or stop "+t+" not in 0.."+(this.tokens.length-1));if(e>t)return[];if(r===void 0)return this.tokens.slice(e,t+1);typeof r=="number"&&(r=new Set().add(r));let n=r,s=this.tokens.slice(e,t+1);return s=s.filter(o=>n.has(o.type)),s}nextTokenOnChannel(e,t){if(this.sync(e),e>=this.size)return this.size-1;let r=this.tokens[e];for(;r.channel!==t;){if(r.type===Cs.Token.EOF)return e;e++,this.sync(e),r=this.tokens[e]}return e}previousTokenOnChannel(e,t){if(this.sync(e),e>=this.size)return this.size-1;for(;e>=0;){let r=this.tokens[e];if(r.type===Cs.Token.EOF||r.channel===t)return e;e--}return e}getHiddenTokensToRight(e,t=-1){if(this.lazyInit(),e<0||e>=this.tokens.length)throw new RangeError(e+" not in 0.."+(this.tokens.length-1));let r=this.nextTokenOnChannel(e+1,Vg.Lexer.DEFAULT_TOKEN_CHANNEL),n,s=e+1;return r===-1?n=this.size-1:n=r,this.filterForChannel(s,n,t)}getHiddenTokensToLeft(e,t=-1){if(this.lazyInit(),e<0||e>=this.tokens.length)throw new RangeError(e+" not in 0.."+(this.tokens.length-1));if(e===0)return[];let r=this.previousTokenOnChannel(e-1,Vg.Lexer.DEFAULT_TOKEN_CHANNEL);if(r===e-1)return[];let n=r+1,s=e-1;return this.filterForChannel(n,s,t)}filterForChannel(e,t,r){let n=new Array;for(let s=e;s<=t;s++){let o=this.tokens[s];r===-1?o.channel!==Vg.Lexer.DEFAULT_TOKEN_CHANNEL&&n.push(o):o.channel===r&&n.push(o)}return n}get sourceName(){return this.tokenSource.sourceName}getText(e){e===void 0?e=$g.Interval.of(0,this.size-1):e instanceof $g.Interval||(e=e.sourceInterval);let t=e.a,r=e.b;if(t<0||r<0)return"";this.fill(),r>=this.tokens.length&&(r=this.tokens.length-1);let n="";for(let s=t;s<=r;s++){let o=this.tokens[s];if(o.type===Cs.Token.EOF)break;n+=o.text}return n.toString()}getTextFromRange(e,t){return this.isToken(e)&&this.isToken(t)?this.getText($g.Interval.of(e.tokenIndex,t.tokenIndex)):""}fill(){this.lazyInit();const e=1e3;for(;;)if(this.fetch(e)<e)return}isWritableToken(e){return e instanceof ob.CommonToken}isToken(e){return e instanceof ob.CommonToken}};Si([Wt.NotNull],ti.prototype,"_tokenSource",void 0);Si([Wt.Override],ti.prototype,"tokenSource",null);Si([Wt.Override],ti.prototype,"index",null);Si([Wt.Override],ti.prototype,"mark",null);Si([Wt.Override],ti.prototype,"release",null);Si([Wt.Override],ti.prototype,"seek",null);Si([Wt.Override],ti.prototype,"size",null);Si([Wt.Override],ti.prototype,"consume",null);Si([Wt.Override],ti.prototype,"get",null);Si([Wt.Override],ti.prototype,"LA",null);Si([Wt.NotNull,Wt.Override],ti.prototype,"LT",null);Si([Wt.Override],ti.prototype,"sourceName",null);Si([Wt.NotNull,Wt.Override],ti.prototype,"getText",null);Si([Wt.NotNull,Wt.Override],ti.prototype,"getTextFromRange",null);ti=Si([N4(0,Wt.NotNull)],ti);sd.BufferedTokenStream=ti;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Qp=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},R4=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty($l,"__esModule",{value:!0});$l.CommonTokenStream=void 0;const L4=sd,Jp=te,ab=_t;let Al=class extends L4.BufferedTokenStream{constructor(e,t=ab.Token.DEFAULT_CHANNEL){super(e),this.channel=t}adjustSeekIndex(e){return this.nextTokenOnChannel(e,this.channel)}tryLB(e){if(this.p-e<0)return;let t=this.p,r=1;for(;r<=e&&t>0;)t=this.previousTokenOnChannel(t-1,this.channel),r++;if(!(t<0))return this.tokens[t]}tryLT(e){if(this.lazyInit(),e===0)throw new RangeError("0 is not a valid lookahead index");if(e<0)return this.tryLB(-e);let t=this.p,r=1;for(;r<e;)this.sync(t+1)&&(t=this.nextTokenOnChannel(t+1,this.channel)),r++;return this.tokens[t]}getNumberOfOnChannelTokens(){let e=0;this.fill();for(let t of this.tokens)if(t.channel===this.channel&&e++,t.type===ab.Token.EOF)break;return e}};Qp([Jp.Override],Al.prototype,"adjustSeekIndex",null);Qp([Jp.Override],Al.prototype,"tryLB",null);Qp([Jp.Override],Al.prototype,"tryLT",null);Al=Qp([R4(0,Jp.NotNull)],Al);$l.CommonTokenStream=Al;var od={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var xa=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},KA=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(od,"__esModule",{value:!0});od.ListTokenSource=void 0;const k4=Lp,Dn=te,Wg=_t;let On=class{constructor(e,t){if(this.i=0,this._factory=k4.CommonTokenFactory.DEFAULT,e==null)throw new Error("tokens cannot be null");this.tokens=e,this._sourceName=t}get charPositionInLine(){if(this.i<this.tokens.length)return this.tokens[this.i].charPositionInLine;if(this.eofToken!=null)return this.eofToken.charPositionInLine;if(this.tokens.length>0){let e=this.tokens[this.tokens.length-1],t=e.text;if(t!=null){let r=t.lastIndexOf(`
`);if(r>=0)return t.length-r-1}return e.charPositionInLine+e.stopIndex-e.startIndex+1}return 0}nextToken(){if(this.i>=this.tokens.length){if(this.eofToken==null){let t=-1;if(this.tokens.length>0){let n=this.tokens[this.tokens.length-1].stopIndex;n!==-1&&(t=n+1)}let r=Math.max(-1,t-1);this.eofToken=this._factory.create({source:this,stream:this.inputStream},Wg.Token.EOF,"EOF",Wg.Token.DEFAULT_CHANNEL,t,r,this.line,this.charPositionInLine)}return this.eofToken}let e=this.tokens[this.i];return this.i===this.tokens.length-1&&e.type===Wg.Token.EOF&&(this.eofToken=e),this.i++,e}get line(){if(this.i<this.tokens.length)return this.tokens[this.i].line;if(this.eofToken!=null)return this.eofToken.line;if(this.tokens.length>0){let e=this.tokens[this.tokens.length-1],t=e.line,r=e.text;if(r!=null)for(let n=0;n<r.length;n++)r.charAt(n)===`
`&&t++;return t}return 1}get inputStream(){if(this.i<this.tokens.length)return this.tokens[this.i].inputStream;if(this.eofToken!=null)return this.eofToken.inputStream;if(this.tokens.length>0)return this.tokens[this.tokens.length-1].inputStream}get sourceName(){if(this._sourceName)return this._sourceName;let e=this.inputStream;return e!=null?e.sourceName:"List"}set tokenFactory(e){this._factory=e}get tokenFactory(){return this._factory}};xa([Dn.Override],On.prototype,"charPositionInLine",null);xa([Dn.Override],On.prototype,"nextToken",null);xa([Dn.Override],On.prototype,"line",null);xa([Dn.Override],On.prototype,"inputStream",null);xa([Dn.Override],On.prototype,"sourceName",null);xa([Dn.Override,Dn.NotNull,KA(0,Dn.NotNull)],On.prototype,"tokenFactory",null);On=xa([KA(0,Dn.NotNull)],On);od.ListTokenSource=On;var Bu={},lb;function B4(){if(lb)return Bu;lb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.MultiMap=void 0;let i=class extends Map{constructor(){super()}map(t,r){let n=super.get(t);n||(n=[],super.set(t,n)),n.push(r)}getPairs(){let t=[];return this.forEach((r,n)=>{r.forEach(s=>{t.push([n,s])})}),t}};return Bu.MultiMap=i,Bu}var Fu={},Uu={},Ku={},Hu={},Ss={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Ss,"__esModule",{value:!0});Ss.RuleNode=void 0;class F4{}Ss.RuleNode=F4;var zu={},ub;function Es(){if(ub)return zu;ub=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(d,f,m,g){var _=arguments.length,v=_<3?f:g===null?g=Object.getOwnPropertyDescriptor(f,m):g,y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(d,f,m,g);else for(var x=d.length-1;x>=0;x--)(y=d[x])&&(v=(_<3?y(v):_>3?y(f,m,v):y(f,m))||v);return _>3&&v&&Object.defineProperty(f,m,v),v},e=P&&P.__param||function(d,f){return function(m,g){f(m,g,d)}};Object.defineProperty(zu,"__esModule",{value:!0}),zu.Trees=void 0;const t=hn(),r=vs,n=bs,s=te,o=ld(),a=Fr(),l=Ss,c=kr,h=_t,u=Ut;let p=class Zn{static toStringTree(f,m){let g;m instanceof o.Parser?g=m.ruleNames:g=m;let _=u.escapeWhitespace(this.getNodeText(f,g),!1);if(f.childCount===0)return _;let v="";v+="(",_=u.escapeWhitespace(this.getNodeText(f,g),!1),v+=_,v+=" ";for(let y=0;y<f.childCount;y++)y>0&&(v+=" "),v+=this.toStringTree(f.getChild(y),g);return v+=")",v}static getNodeText(f,m){let g;if(m instanceof o.Parser)g=m.ruleNames;else if(m)g=m;else{let _=f.payload;return typeof _.text=="string"?_.text:f.payload.toString()}if(f instanceof l.RuleNode){let _=f.ruleContext,v=_.ruleIndex,y=g[v],x=_.altNumber;return x!==t.ATN.INVALID_ALT_NUMBER?y+":"+x:y}else{if(f instanceof n.ErrorNode)return f.toString();if(f instanceof c.TerminalNode)return f.symbol.text||""}throw new TypeError("Unexpected node type")}static getChildren(f){let m=[];for(let g=0;g<f.childCount;g++)m.push(f.getChild(g));return m}static getAncestors(f){let m=[],g=f.parent;for(;g;)m.unshift(g),g=g.parent;return m}static isAncestorOf(f,m){if(!f||!m||!f.parent)return!1;let g=m.parent;for(;g;){if(f===g)return!0;g=g.parent}return!1}static findAllTokenNodes(f,m){return Zn.findAllNodes(f,m,!0)}static findAllRuleNodes(f,m){return Zn.findAllNodes(f,m,!1)}static findAllNodes(f,m,g){let _=[];return Zn._findAllNodes(f,m,g,_),_}static _findAllNodes(f,m,g,_){g&&f instanceof c.TerminalNode?f.symbol.type===m&&_.push(f):!g&&f instanceof a.ParserRuleContext&&f.ruleIndex===m&&_.push(f);for(let v=0;v<f.childCount;v++)Zn._findAllNodes(f.getChild(v),m,g,_)}static getDescendants(f){let m=[];function g(_){m.push(_);const v=_.childCount;for(let y=0;y<v;y++)g(_.getChild(y))}return g(f),m}static getRootOfSubtreeEnclosingRegion(f,m,g){let _=f.childCount;for(let v=0;v<_;v++){let y=f.getChild(v),x=Zn.getRootOfSubtreeEnclosingRegion(y,m,g);if(x)return x}if(f instanceof a.ParserRuleContext){let v=f.stop;if(m>=f.start.tokenIndex&&(v==null||g<=v.tokenIndex))return f}}static stripChildrenOutOfRange(f,m,g,_){if(!f)return;let v=f.childCount;for(let y=0;y<v;y++){let x=f.getChild(y),A=x.sourceInterval;if(x instanceof a.ParserRuleContext&&(A.b<g||A.a>_)&&Zn.isAncestorOf(x,m)){let w=new r.CommonToken(h.Token.INVALID_TYPE,"...");f.children[y]=new c.TerminalNode(w)}}}static findNodeSuchThat(f,m){if(m(f))return f;let g=f.childCount;for(let _=0;_<g;_++){let v=Zn.findNodeSuchThat(f.getChild(_),m);if(v!==void 0)return v}}};return i([e(0,s.NotNull)],p,"toStringTree",null),i([s.NotNull,e(0,s.NotNull)],p,"getAncestors",null),i([e(0,s.NotNull)],p,"getRootOfSubtreeEnclosingRegion",null),zu.Trees=p,zu}var hb;function zA(){if(hb)return Hu;hb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(c,h,u,p){var d=arguments.length,f=d<3?h:p===null?p=Object.getOwnPropertyDescriptor(h,u):p,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(c,h,u,p);else for(var g=c.length-1;g>=0;g--)(m=c[g])&&(f=(d<3?m(f):d>3?m(h,u,f):m(h,u))||f);return d>3&&f&&Object.defineProperty(h,u,f),f};Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.RuleContext=void 0;const e=hn(),t=gs,r=Ss,n=ri,s=te,o=Es(),a=Fr();let l=class HA extends r.RuleNode{constructor(h,u){super(),this._parent=h,this.invokingState=u??-1}static getChildContext(h,u){return new HA(h,u)}depth(){let h=0,u=this;for(;u;)u=u._parent,h++;return h}get isEmpty(){return this.invokingState===-1}get sourceInterval(){return n.Interval.INVALID}get ruleContext(){return this}get parent(){return this._parent}setParent(h){this._parent=h}get payload(){return this}get text(){if(this.childCount===0)return"";let h="";for(let u=0;u<this.childCount;u++)h+=this.getChild(u).text;return h.toString()}get ruleIndex(){return-1}get altNumber(){return e.ATN.INVALID_ALT_NUMBER}set altNumber(h){}getChild(h){throw new RangeError("i must be greater than or equal to 0 and less than childCount")}get childCount(){return 0}accept(h){return h.visitChildren(this)}toStringTree(h){return o.Trees.toStringTree(this,h)}toString(h,u){const p=h instanceof t.Recognizer?h.ruleNames:h;u=u||a.ParserRuleContext.emptyContext();let d="",f=this;for(d+="[";f&&f!==u;){if(!p)f.isEmpty||(d+=f.invokingState);else{let m=f.ruleIndex,g=m>=0&&m<p.length?p[m]:m.toString();d+=g}f._parent&&(p||!f._parent.isEmpty)&&(d+=" "),f=f._parent}return d+="]",d.toString()}};return i([s.Override],l.prototype,"sourceInterval",null),i([s.Override],l.prototype,"ruleContext",null),i([s.Override],l.prototype,"parent",null),i([s.Override],l.prototype,"setParent",null),i([s.Override],l.prototype,"payload",null),i([s.Override],l.prototype,"text",null),i([s.Override],l.prototype,"getChild",null),i([s.Override],l.prototype,"childCount",null),i([s.Override],l.prototype,"accept",null),i([s.Override],l.prototype,"toStringTree",null),Hu.RuleContext=l,Hu}var cb;function Fr(){if(cb)return Ku;cb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(a,l,c,h){var u=arguments.length,p=u<3?l:h===null?h=Object.getOwnPropertyDescriptor(l,c):h,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(a,l,c,h);else for(var f=a.length-1;f>=0;f--)(d=a[f])&&(p=(u<3?d(p):u>3?d(l,c,p):d(l,c))||p);return u>3&&p&&Object.defineProperty(l,c,p),p};Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.ParserRuleContext=void 0;const e=bs,t=ri,r=te,n=zA(),s=kr;let o=class o1 extends n.RuleContext{constructor(l,c){c==null?super():super(l,c)}static emptyContext(){return o1.EMPTY}copyFrom(l){if(this._parent=l._parent,this.invokingState=l.invokingState,this._start=l._start,this._stop=l._stop,l.children){this.children=[];for(let c of l.children)c instanceof e.ErrorNode&&this.addChild(c)}}enterRule(l){}exitRule(l){}addAnyChild(l){return this.children?this.children.push(l):this.children=[l],l}addChild(l){if(l instanceof s.TerminalNode){l.setParent(this),this.addAnyChild(l);return}else if(l instanceof n.RuleContext){this.addAnyChild(l);return}else return l=new s.TerminalNode(l),this.addAnyChild(l),l.setParent(this),l}addErrorNode(l){if(l instanceof e.ErrorNode){const c=l;return c.setParent(this),this.addAnyChild(c)}else{const c=l;let h=new e.ErrorNode(c);return this.addAnyChild(h),h.setParent(this),h}}removeLastChild(){this.children&&this.children.pop()}get parent(){let l=super.parent;if(l===void 0||l instanceof o1)return l;throw new TypeError("Invalid parent type for ParserRuleContext")}getChild(l,c){if(!this.children||l<0||l>=this.children.length)throw new RangeError("index parameter must be between >= 0 and <= number of children.");if(c==null)return this.children[l];let h=this.tryGetChild(l,c);if(h===void 0)throw new Error("The specified node does not exist");return h}tryGetChild(l,c){if(!this.children||l<0||l>=this.children.length)return;let h=-1;for(let u of this.children)if(u instanceof c&&(h++,h===l))return u}getToken(l,c){let h=this.tryGetToken(l,c);if(h===void 0)throw new Error("The specified token does not exist");return h}tryGetToken(l,c){if(!this.children||c<0||c>=this.children.length)return;let h=-1;for(let u of this.children)if(u instanceof s.TerminalNode&&u.symbol.type===l&&(h++,h===c))return u}getTokens(l){let c=[];if(!this.children)return c;for(let h of this.children)h instanceof s.TerminalNode&&h.symbol.type===l&&c.push(h);return c}get ruleContext(){return this}getRuleContext(l,c){return this.getChild(l,c)}tryGetRuleContext(l,c){return this.tryGetChild(l,c)}getRuleContexts(l){let c=[];if(!this.children)return c;for(let h of this.children)h instanceof l&&c.push(h);return c}get childCount(){return this.children?this.children.length:0}get sourceInterval(){return this._start?!this._stop||this._stop.tokenIndex<this._start.tokenIndex?t.Interval.of(this._start.tokenIndex,this._start.tokenIndex-1):t.Interval.of(this._start.tokenIndex,this._stop.tokenIndex):t.Interval.INVALID}get start(){return this._start}get stop(){return this._stop}toInfoString(l){return"ParserRuleContext"+l.getRuleInvocationStack(this).reverse()+"{start="+this._start+", stop="+this._stop+"}"}};return o.EMPTY=new o,i([r.Override],o.prototype,"parent",null),i([r.Override],o.prototype,"childCount",null),i([r.Override],o.prototype,"sourceInterval",null),Ku.ParserRuleContext=o,Ku}var db;function jA(){if(db)return Uu;db=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(n,s,o,a){var l=arguments.length,c=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,s,o,a);else for(var u=n.length-1;u>=0;u--)(h=n[u])&&(c=(l<3?h(c):l>3?h(s,o,c):h(s,o))||c);return l>3&&c&&Object.defineProperty(s,o,c),c};Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.InterpreterRuleContext=void 0;const e=te,t=Fr();let r=class extends t.ParserRuleContext{constructor(s,o,a){a!==void 0?super(o,a):super(),this._ruleIndex=s}get ruleIndex(){return this._ruleIndex}};return i([e.Override],r.prototype,"ruleIndex",null),Uu.InterpreterRuleContext=r,Uu}var fb;function $A(){if(fb)return Fu;fb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(_,v,y,x){var A=arguments.length,w=A<3?v:x===null?x=Object.getOwnPropertyDescriptor(v,y):x,D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(_,v,y,x);else for(var b=_.length-1;b>=0;b--)(D=_[b])&&(w=(A<3?D(w):A>3?D(v,y,w):D(v,y))||w);return A>3&&w&&Object.defineProperty(v,y,w),w},e=P&&P.__param||function(_,v){return function(y,x){v(y,x,_)}};Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.ParserInterpreter=void 0;const t=an,r=qt,n=Lr,s=jl,o=ya,a=jA(),l=Qc,c=te,h=te,u=ld(),p=ud(),d=un,f=Ll,m=_t;let g=class a1 extends u.Parser{constructor(v,y,x,A,w){if(super(v instanceof a1?v.inputStream:w),this._parentContextStack=[],this.overrideDecision=-1,this.overrideDecisionInputIndex=-1,this.overrideDecisionAlt=-1,this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0,v instanceof a1){let D=v;this._grammarFileName=D._grammarFileName,this._atn=D._atn,this.pushRecursionContextStates=D.pushRecursionContextStates,this._ruleNames=D._ruleNames,this._vocabulary=D._vocabulary,this.interpreter=new p.ParserATNSimulator(this._atn,this)}else{y=y,x=x,A=A,this._grammarFileName=v,this._atn=A,this._ruleNames=x.slice(0),this._vocabulary=y,this.pushRecursionContextStates=new n.BitSet(A.states.length);for(let D of A.states)D instanceof f.StarLoopEntryState&&D.precedenceRuleDecision&&this.pushRecursionContextStates.set(D.stateNumber);this.interpreter=new p.ParserATNSimulator(A,this)}}reset(v){v===void 0?super.reset():super.reset(v),this.overrideDecisionReached=!1,this._overrideDecisionRoot=void 0}get atn(){return this._atn}get vocabulary(){return this._vocabulary}get ruleNames(){return this._ruleNames}get grammarFileName(){return this._grammarFileName}parse(v){let y=this._atn.ruleToStartState[v];for(this._rootContext=this.createInterpreterRuleContext(void 0,t.ATNState.INVALID_STATE_NUMBER,v),y.isPrecedenceRule?this.enterRecursionRule(this._rootContext,y.stateNumber,v,0):this.enterRule(this._rootContext,y.stateNumber,v);;){let x=this.atnState;switch(x.stateType){case r.ATNStateType.RULE_STOP:if(this._ctx.isEmpty)if(y.isPrecedenceRule){let A=this._ctx,w=this._parentContextStack.pop();return this.unrollRecursionContexts(w[0]),A}else return this.exitRule(),this._rootContext;this.visitRuleStopState(x);break;default:try{this.visitState(x)}catch(A){if(A instanceof d.RecognitionException)this.state=this._atn.ruleToStopState[x.ruleIndex].stateNumber,this.context.exception=A,this.errorHandler.reportError(this,A),this.recover(A);else throw A}break}}}enterRecursionRule(v,y,x,A){this._parentContextStack.push([this._ctx,v.invokingState]),super.enterRecursionRule(v,y,x,A)}get atnState(){return this._atn.states[this.state]}visitState(v){let y=1;v.numberOfTransitions>1&&(y=this.visitDecisionState(v));let x=v.transition(y-1);switch(x.serializationType){case 1:if(this.pushRecursionContextStates.get(v.stateNumber)&&!(x.target instanceof l.LoopEndState)){let T=this._parentContextStack[this._parentContextStack.length-1],C=this.createInterpreterRuleContext(T[0],T[1],this._ctx.ruleIndex);this.pushNewRecursionContext(C,this._atn.ruleToStartState[v.ruleIndex].stateNumber,this._ctx.ruleIndex)}break;case 5:this.match(x._label);break;case 2:case 7:case 8:x.matches(this._input.LA(1),m.Token.MIN_USER_TOKEN_TYPE,65535)||this.recoverInline(),this.matchWildcard();break;case 9:this.matchWildcard();break;case 3:let A=x.target,w=A.ruleIndex,D=this.createInterpreterRuleContext(this._ctx,v.stateNumber,w);A.isPrecedenceRule?this.enterRecursionRule(D,A.stateNumber,w,x.precedence):this.enterRule(D,x.target.stateNumber,w);break;case 4:let b=x;if(!this.sempred(this._ctx,b.ruleIndex,b.predIndex))throw new s.FailedPredicateException(this);break;case 6:let S=x;this.action(this._ctx,S.ruleIndex,S.actionIndex);break;case 10:if(!this.precpred(this._ctx,x.precedence)){let T=x.precedence;throw new s.FailedPredicateException(this,`precpred(_ctx, ${T})`)}break;default:throw new Error("UnsupportedOperationException: Unrecognized ATN transition type.")}this.state=x.target.stateNumber}visitDecisionState(v){let y;this.errorHandler.sync(this);let x=v.decision;return x===this.overrideDecision&&this._input.index===this.overrideDecisionInputIndex&&!this.overrideDecisionReached?(y=this.overrideDecisionAlt,this.overrideDecisionReached=!0):y=this.interpreter.adaptivePredict(this._input,x,this._ctx),y}createInterpreterRuleContext(v,y,x){return new a.InterpreterRuleContext(x,v,y)}visitRuleStopState(v){if(this._atn.ruleToStartState[v.ruleIndex].isPrecedenceRule){let A=this._parentContextStack.pop();this.unrollRecursionContexts(A[0]),this.state=A[1]}else this.exitRule();let x=this._atn.states[this.state].transition(0);this.state=x.followState.stateNumber}addDecisionOverride(v,y,x){this.overrideDecision=v,this.overrideDecisionInputIndex=y,this.overrideDecisionAlt=x}get overrideDecisionRoot(){return this._overrideDecisionRoot}recover(v){let y=this._input.index;if(this.errorHandler.recover(this,v),this._input.index===y){let x=v.getOffendingToken();if(!x)throw new Error("Expected exception to have an offending token");let A=x.tokenSource,w=A!==void 0?A.inputStream:void 0,D={source:A,stream:w};if(v instanceof o.InputMismatchException){let b=v.expectedTokens;if(b===void 0)throw new Error("Expected the exception to provide expected tokens");let S=m.Token.INVALID_TYPE;b.isNil||(S=b.minElement);let T=this.tokenFactory.create(D,S,x.text,m.Token.DEFAULT_CHANNEL,-1,-1,x.line,x.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,T))}else{x.tokenSource;let b=this.tokenFactory.create(D,m.Token.INVALID_TYPE,x.text,m.Token.DEFAULT_CHANNEL,-1,-1,x.line,x.charPositionInLine);this._ctx.addErrorNode(this.createErrorNode(this._ctx,b))}}}recoverInline(){return this._errHandler.recoverInline(this)}get rootContext(){return this._rootContext}};return i([c.NotNull],g.prototype,"_vocabulary",void 0),i([h.Override],g.prototype,"reset",null),i([h.Override],g.prototype,"atn",null),i([h.Override],g.prototype,"vocabulary",null),i([h.Override],g.prototype,"ruleNames",null),i([h.Override],g.prototype,"grammarFileName",null),i([h.Override],g.prototype,"enterRecursionRule",null),g=i([e(1,c.NotNull)],g),Fu.ParserInterpreter=g,Fu}var ju={},pb;function U4(){if(pb)return ju;pb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(n,s,o,a){var l=arguments.length,c=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,s,o,a);else for(var u=n.length-1;u>=0;u--)(h=n[u])&&(c=(l<3?h(c):l>3?h(s,o,c):h(s,o))||c);return l>3&&c&&Object.defineProperty(s,o,c),c},e=P&&P.__param||function(n,s){return function(o,a){s(o,a,n)}};Object.defineProperty(ju,"__esModule",{value:!0}),ju.ParseTreeMatch=void 0;const t=te;let r=class{constructor(s,o,a,l){if(!s)throw new Error("tree cannot be null");if(!o)throw new Error("pattern cannot be null");if(!a)throw new Error("labels cannot be null");this._tree=s,this._pattern=o,this._labels=a,this._mismatchedNode=l}get(s){let o=this._labels.get(s);if(!(!o||o.length===0))return o[o.length-1]}getAll(s){const o=this._labels.get(s);return o||[]}get labels(){return this._labels}get mismatchedNode(){return this._mismatchedNode}get succeeded(){return!this._mismatchedNode}get pattern(){return this._pattern}get tree(){return this._tree}toString(){return`Match ${this.succeeded?"succeeded":"failed"}; found ${this.labels.size} labels`}};return i([t.NotNull,e(0,t.NotNull)],r.prototype,"getAll",null),i([t.NotNull],r.prototype,"labels",null),i([t.NotNull],r.prototype,"pattern",null),i([t.NotNull],r.prototype,"tree",null),i([t.Override],r.prototype,"toString",null),r=i([e(0,t.NotNull),e(1,t.NotNull),e(2,t.NotNull)],r),ju.ParseTreeMatch=r,ju}var $u={},Vu={},Wu={},mb;function K4(){if(mb)return Wu;mb=1,Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.XPathLexer=void 0;const i=_x(),e=xs(),t=Fp(),r=kn,n=Ut;let s=class Ui extends e.Lexer{constructor(a){super(a),this._interp=new t.LexerATNSimulator(Ui._ATN,this)}get vocabulary(){return Ui.VOCABULARY}get grammarFileName(){return"XPathLexer.g4"}get ruleNames(){return Ui.ruleNames}get serializedATN(){return Ui._serializedATN}get channelNames(){return Ui.channelNames}get modeNames(){return Ui.modeNames}action(a,l,c){switch(l){case 4:this.ID_action(a,c);break}}ID_action(a,l){switch(l){case 0:let c=this.text;c.charAt(0)===c.charAt(0).toUpperCase()?this.type=Ui.TOKEN_REF:this.type=Ui.RULE_REF;break}}static get _ATN(){return Ui.__ATN||(Ui.__ATN=new i.ATNDeserializer().deserialize(n.toCharArray(Ui._serializedATN))),Ui.__ATN}};return Wu.XPathLexer=s,s.TOKEN_REF=1,s.RULE_REF=2,s.ANYWHERE=3,s.ROOT=4,s.WILDCARD=5,s.BANG=6,s.ID=7,s.STRING=8,s.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],s.modeNames=["DEFAULT_MODE"],s.ruleNames=["ANYWHERE","ROOT","WILDCARD","BANG","ID","NameChar","NameStartChar","STRING"],s._LITERAL_NAMES=[void 0,void 0,void 0,"'//'","'/'","'*'","'!'"],s._SYMBOLIC_NAMES=[void 0,"TOKEN_REF","RULE_REF","ANYWHERE","ROOT","WILDCARD","BANG","ID","STRING"],s.VOCABULARY=new r.VocabularyImpl(s._LITERAL_NAMES,s._SYMBOLIC_NAMES,[]),s._serializedATNSegments=2,s._serializedATNSegment0=`
2\b					\x07	\x07\b	\b			\x07
\f"\v\x07\x07\b\b		\x07	,
	\f		/\v			-
\x07\x07	\b\v	\r

2;C\\aac|\r(*<>?AOR_\uD801\uDA02\uDA38\uDA3D\uDA6E\uDA77\uDA77\uDA86\uDA86\uDA9D\uDAA1\uDAA3\uDAB1"C\\c|\r(*<>?AOR_`,s._serializedATNSegment1=`1\x07	\v\x07	\v\r%')\x071\x071\x071\x07,\b\x1B\x07#\x1B
 \b\r\x07"  !!#" #$\b$\f%&	&'(	()-\x07)*,\v+*,/-.-+.0/-01\x07)1 -`,s._serializedATN=n.join([s._serializedATNSegment0,s._serializedATNSegment1],""),Wu}var Gu={},gb;function H4(){if(gb)return Gu;gb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(r,n,s,o){var a=arguments.length,l=a<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,s):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,n,s,o);else for(var h=r.length-1;h>=0;h--)(c=r[h])&&(l=(a<3?c(l):a>3?c(n,s,l):c(n,s))||l);return a>3&&l&&Object.defineProperty(n,s,l),l};Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.XPathLexerErrorListener=void 0;const e=te;let t=class{syntaxError(n,s,o,a,l,c){}};return i([e.Override],t.prototype,"syntaxError",null),Gu.XPathLexerErrorListener=t,Gu}var Yu={},qu={},_b;function Vl(){if(_b)return qu;_b=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(r,n,s,o){var a=arguments.length,l=a<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,s):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,n,s,o);else for(var h=r.length-1;h>=0;h--)(c=r[h])&&(l=(a<3?c(l):a>3?c(n,s,l):c(n,s))||l);return a>3&&l&&Object.defineProperty(n,s,l),l};Object.defineProperty(qu,"__esModule",{value:!0}),qu.XPathElement=void 0;const e=te;let t=class{constructor(n){this.nodeName=n,this.invert=!1}toString(){let n=this.invert?"!":"";return Object.constructor.name+"["+n+this.nodeName+"]"}};return i([e.Override],t.prototype,"toString",null),qu.XPathElement=t,qu}var vb;function z4(){if(vb)return Yu;vb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h};Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.XPathRuleAnywhereElement=void 0;const e=te,t=Es(),r=Vl();let n=class extends r.XPathElement{constructor(o,a){super(o),this.ruleIndex=a}evaluate(o){return t.Trees.findAllRuleNodes(o,this.ruleIndex)}};return i([e.Override],n.prototype,"evaluate",null),Yu.XPathRuleAnywhereElement=n,Yu}var Xu={},yb;function j4(){if(yb)return Xu;yb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(o,a,l,c){var h=arguments.length,u=h<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,a,l,c);else for(var d=o.length-1;d>=0;d--)(p=o[d])&&(u=(h<3?p(u):h>3?p(a,l,u):p(a,l))||u);return h>3&&u&&Object.defineProperty(a,l,u),u};Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.XPathRuleElement=void 0;const e=Fr(),t=te,r=Es(),n=Vl();let s=class extends n.XPathElement{constructor(a,l){super(a),this.ruleIndex=l}evaluate(a){let l=[];for(let c of r.Trees.getChildren(a))c instanceof e.ParserRuleContext&&(c.ruleIndex===this.ruleIndex&&!this.invert||c.ruleIndex!==this.ruleIndex&&this.invert)&&l.push(c);return l}};return i([t.Override],s.prototype,"evaluate",null),Xu.XPathRuleElement=s,Xu}var Zu={},xb;function $4(){if(xb)return Zu;xb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h};Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.XPathTokenAnywhereElement=void 0;const e=te,t=Es(),r=Vl();let n=class extends r.XPathElement{constructor(o,a){super(o),this.tokenType=a}evaluate(o){return t.Trees.findAllTokenNodes(o,this.tokenType)}};return i([e.Override],n.prototype,"evaluate",null),Zu.XPathTokenAnywhereElement=n,Zu}var Qu={},wb;function V4(){if(wb)return Qu;wb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(o,a,l,c){var h=arguments.length,u=h<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,a,l,c);else for(var d=o.length-1;d>=0;d--)(p=o[d])&&(u=(h<3?p(u):h>3?p(a,l,u):p(a,l))||u);return h>3&&u&&Object.defineProperty(a,l,u),u};Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.XPathTokenElement=void 0;const e=te,t=kr,r=Es(),n=Vl();let s=class extends n.XPathElement{constructor(a,l){super(a),this.tokenType=l}evaluate(a){let l=[];for(let c of r.Trees.getChildren(a))c instanceof t.TerminalNode&&(c.symbol.type===this.tokenType&&!this.invert||c.symbol.type!==this.tokenType&&this.invert)&&l.push(c);return l}};return i([e.Override],s.prototype,"evaluate",null),Qu.XPathTokenElement=s,Qu}var Ju={},bb;function W4(){if(bb)return Ju;bb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(o,a,l,c){var h=arguments.length,u=h<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,a,l,c);else for(var d=o.length-1;d>=0;d--)(p=o[d])&&(u=(h<3?p(u):h>3?p(a,l,u):p(a,l))||u);return h>3&&u&&Object.defineProperty(a,l,u),u};Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.XPathWildcardAnywhereElement=void 0;const e=te,t=Es(),r=gx(),n=Vl();let s=class extends n.XPathElement{constructor(){super(r.XPath.WILDCARD)}evaluate(a){return this.invert?[]:t.Trees.getDescendants(a)}};return i([e.Override],s.prototype,"evaluate",null),Ju.XPathWildcardAnywhereElement=s,Ju}var eh={},Sb;function G4(){if(Sb)return eh;Sb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(o,a,l,c){var h=arguments.length,u=h<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,a,l,c);else for(var d=o.length-1;d>=0;d--)(p=o[d])&&(u=(h<3?p(u):h>3?p(a,l,u):p(a,l))||u);return h>3&&u&&Object.defineProperty(a,l,u),u};Object.defineProperty(eh,"__esModule",{value:!0}),eh.XPathWildcardElement=void 0;const e=te,t=Es(),r=gx(),n=Vl();let s=class extends n.XPathElement{constructor(){super(r.XPath.WILDCARD)}evaluate(a){let l=[];if(this.invert)return l;for(let c of t.Trees.getChildren(a))l.push(c);return l}};return i([e.Override],s.prototype,"evaluate",null),eh.XPathWildcardElement=s,eh}var Eb;function gx(){if(Eb)return Vu;Eb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.XPath=void 0;const i=Zp,e=$l,t=ga,r=Fr(),n=_t,s=K4(),o=H4(),a=z4(),l=j4(),c=$4(),h=V4(),u=W4(),p=G4();let d=class VA{constructor(m,g){this.parser=m,this.path=g,this.elements=this.split(g)}split(m){let g=new s.XPathLexer(i.CharStreams.fromString(m));g.recover=w=>{throw w},g.removeErrorListeners(),g.addErrorListener(new o.XPathLexerErrorListener);let _=new e.CommonTokenStream(g);try{_.fill()}catch(w){if(w instanceof t.LexerNoViableAltException){let b="Invalid tokens or characters at index "+g.charPositionInLine+" in path '"+m+"' -- "+w.message;throw new RangeError(b)}throw w}let v=_.getTokens(),y=[],x=v.length,A=0;e:for(;A<x;){let w=v[A],D;switch(w.type){case s.XPathLexer.ROOT:case s.XPathLexer.ANYWHERE:let b=w.type===s.XPathLexer.ANYWHERE;A++,D=v[A];let S=D.type===s.XPathLexer.BANG;S&&(A++,D=v[A]);let T=this.getXPathElement(D,b);T.invert=S,y.push(T),A++;break;case s.XPathLexer.TOKEN_REF:case s.XPathLexer.RULE_REF:case s.XPathLexer.WILDCARD:y.push(this.getXPathElement(w,!1)),A++;break;case n.Token.EOF:break e;default:throw new Error("Unknowth path element "+w)}}return y}getXPathElement(m,g){if(m.type===n.Token.EOF)throw new Error("Missing path element at end of path");let _=m.text;if(_==null)throw new Error("Expected wordToken to have text content.");let v=this.parser.getTokenType(_),y=this.parser.getRuleIndex(_);switch(m.type){case s.XPathLexer.WILDCARD:return g?new u.XPathWildcardAnywhereElement:new p.XPathWildcardElement;case s.XPathLexer.TOKEN_REF:case s.XPathLexer.STRING:if(v===n.Token.INVALID_TYPE)throw new Error(_+" at index "+m.startIndex+" isn't a valid token name");return g?new c.XPathTokenAnywhereElement(_,v):new h.XPathTokenElement(_,v);default:if(y===-1)throw new Error(_+" at index "+m.startIndex+" isn't a valid rule name");return g?new a.XPathRuleAnywhereElement(_,y):new l.XPathRuleElement(_,y)}}static findAll(m,g,_){return new VA(_,g).evaluate(m)}evaluate(m){let g=new r.ParserRuleContext;g.addChild(m);let _=new Set([g]),v=0;for(;v<this.elements.length;){let y=new Set;for(let x of _)x.childCount>0&&this.elements[v].evaluate(x).forEach(y.add,y);v++,_=y}return _}};return Vu.XPath=d,d.WILDCARD="*",d.NOT="!",Vu}var Ab;function Y4(){if(Ab)return $u;Ab=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h},e=P&&P.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty($u,"__esModule",{value:!0}),$u.ParseTreePattern=void 0;const t=te,r=gx();let n=class{constructor(o,a,l,c){this._matcher=o,this._patternRuleIndex=l,this._pattern=a,this._patternTree=c}match(o){return this._matcher.match(o,this)}matches(o){return this._matcher.match(o,this).succeeded}findAll(o,a){let l=r.XPath.findAll(o,a,this._matcher.parser),c=[];for(let h of l){let u=this.match(h);u.succeeded&&c.push(u)}return c}get matcher(){return this._matcher}get pattern(){return this._pattern}get patternRuleIndex(){return this._patternRuleIndex}get patternTree(){return this._patternTree}};return i([t.NotNull],n.prototype,"_pattern",void 0),i([t.NotNull],n.prototype,"_patternTree",void 0),i([t.NotNull],n.prototype,"_matcher",void 0),i([t.NotNull,e(0,t.NotNull)],n.prototype,"match",null),i([e(0,t.NotNull)],n.prototype,"matches",null),i([t.NotNull,e(0,t.NotNull),e(1,t.NotNull)],n.prototype,"findAll",null),i([t.NotNull],n.prototype,"matcher",null),i([t.NotNull],n.prototype,"pattern",null),i([t.NotNull],n.prototype,"patternTree",null),n=i([e(0,t.NotNull),e(1,t.NotNull),e(3,t.NotNull)],n),$u.ParseTreePattern=n,$u}var th={},Db;function q4(){if(Db)return th;Db=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h},e=P&&P.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(th,"__esModule",{value:!0}),th.RuleTagToken=void 0;const t=te,r=_t;let n=class{constructor(o,a,l){if(o==null||o.length===0)throw new Error("ruleName cannot be null or empty.");this._ruleName=o,this.bypassTokenType=a,this._label=l}get ruleName(){return this._ruleName}get label(){return this._label}get channel(){return r.Token.DEFAULT_CHANNEL}get text(){return this._label!=null?"<"+this._label+":"+this._ruleName+">":"<"+this._ruleName+">"}get type(){return this.bypassTokenType}get line(){return 0}get charPositionInLine(){return-1}get tokenIndex(){return-1}get startIndex(){return-1}get stopIndex(){return-1}get tokenSource(){}get inputStream(){}toString(){return this._ruleName+":"+this.bypassTokenType}};return i([t.NotNull],n.prototype,"ruleName",null),i([t.Override],n.prototype,"channel",null),i([t.Override],n.prototype,"text",null),i([t.Override],n.prototype,"type",null),i([t.Override],n.prototype,"line",null),i([t.Override],n.prototype,"charPositionInLine",null),i([t.Override],n.prototype,"tokenIndex",null),i([t.Override],n.prototype,"startIndex",null),i([t.Override],n.prototype,"stopIndex",null),i([t.Override],n.prototype,"tokenSource",null),i([t.Override],n.prototype,"inputStream",null),i([t.Override],n.prototype,"toString",null),n=i([e(0,t.NotNull)],n),th.RuleTagToken=n,th}var ih={},rh={},Tb;function WA(){if(Tb)return rh;Tb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(rh,"__esModule",{value:!0}),rh.Chunk=void 0;let i=class{};return rh.Chunk=i,rh}var Cb;function X4(){if(Cb)return ih;Cb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(n,s,o,a){var l=arguments.length,c=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,s,o,a);else for(var u=n.length-1;u>=0;u--)(h=n[u])&&(c=(l<3?h(c):l>3?h(s,o,c):h(s,o))||c);return l>3&&c&&Object.defineProperty(s,o,c),c};Object.defineProperty(ih,"__esModule",{value:!0}),ih.TagChunk=void 0;const e=WA(),t=te;let r=class extends e.Chunk{constructor(s,o){if(super(),s==null||s.length===0)throw new Error("tag cannot be null or empty");this._tag=s,this._label=o}get tag(){return this._tag}get label(){return this._label}toString(){return this._label!=null?this._label+":"+this._tag:this._tag}};return i([t.NotNull],r.prototype,"tag",null),i([t.Override],r.prototype,"toString",null),ih.TagChunk=r,ih}var nh={},Pb;function Z4(){if(Pb)return nh;Pb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h},e=P&&P.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(nh,"__esModule",{value:!0}),nh.TextChunk=void 0;const t=WA(),r=te;let n=class extends t.Chunk{constructor(o){if(super(),o==null)throw new Error("text cannot be null");this._text=o}get text(){return this._text}toString(){return"'"+this._text+"'"}};return i([r.NotNull],n.prototype,"_text",void 0),i([r.NotNull],n.prototype,"text",null),i([r.Override],n.prototype,"toString",null),n=i([e(0,r.NotNull)],n),nh.TextChunk=n,nh}var sh={},Ib;function Q4(){if(Ib)return sh;Ib=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h},e=P&&P.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(sh,"__esModule",{value:!0}),sh.TokenTagToken=void 0;const t=vs,r=te;let n=class extends t.CommonToken{constructor(o,a,l){super(a),this._tokenName=o,this._label=l}get tokenName(){return this._tokenName}get label(){return this._label}get text(){return this._label!=null?"<"+this._label+":"+this._tokenName+">":"<"+this._tokenName+">"}toString(){return this._tokenName+":"+this.type}};return i([r.NotNull],n.prototype,"_tokenName",void 0),i([r.NotNull],n.prototype,"tokenName",null),i([r.Override],n.prototype,"text",null),i([r.Override],n.prototype,"toString",null),n=i([e(0,r.NotNull)],n),sh.TokenTagToken=n,sh}var Ob;function J4(){return Ob||(Ob=1,function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(D,b,S,T){var C=arguments.length,I=C<3?b:T===null?T=Object.getOwnPropertyDescriptor(b,S):T,M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(D,b,S,T);else for(var k=D.length-1;k>=0;k--)(M=D[k])&&(I=(C<3?M(I):C>3?M(b,S,I):M(b,S))||I);return C>3&&I&&Object.defineProperty(b,S,I),I},t=P&&P.__param||function(D,b){return function(S,T){b(S,T,D)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ParseTreePatternMatcher=void 0;const r=UA(),n=Zp,s=$l,o=od,a=B4(),l=te,c=rd,h=$A(),u=Fr(),p=U4(),d=Y4(),f=un,m=Ss,g=q4(),_=X4(),v=kr,y=Z4(),x=_t,A=Q4();class w{constructor(b,S){this.start="<",this.stop=">",this.escape="\\",this.escapeRE=/\\/g,this._lexer=b,this._parser=S}setDelimiters(b,S,T){if(!b)throw new Error("start cannot be null or empty");if(!S)throw new Error("stop cannot be null or empty");this.start=b,this.stop=S,this.escape=T,this.escapeRE=new RegExp(T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g")}matches(b,S,T=0){if(typeof S=="string"){let C=this.compile(S,T);return this.matches(b,C)}else{let C=new a.MultiMap;return!this.matchImpl(b,S.patternTree,C)}}match(b,S,T=0){if(typeof S=="string"){let C=this.compile(S,T);return this.match(b,C)}else{let C=new a.MultiMap,I=this.matchImpl(b,S.patternTree,C);return new p.ParseTreeMatch(b,S,C,I)}}compile(b,S){let T=this.tokenize(b),C=new o.ListTokenSource(T),I=new s.CommonTokenStream(C);const M=this._parser;let k=new h.ParserInterpreter(M.grammarFileName,M.vocabulary,M.ruleNames,M.getATNWithBypassAlts(),I),H;try{k.errorHandler=new r.BailErrorStrategy,H=k.parse(S)}catch(Y){throw Y instanceof c.ParseCancellationException?Y.getCause():Y instanceof f.RecognitionException?Y:Y instanceof Error?new w.CannotInvokeStartRule(Y):Y}if(I.LA(1)!==x.Token.EOF)throw new w.StartRuleDoesNotConsumeFullPattern;return new d.ParseTreePattern(this,b,S,H)}get lexer(){return this._lexer}get parser(){return this._parser}matchImpl(b,S,T){if(!b)throw new TypeError("tree cannot be null");if(!S)throw new TypeError("patternTree cannot be null");if(b instanceof v.TerminalNode&&S instanceof v.TerminalNode){let C;if(b.symbol.type===S.symbol.type)if(S.symbol instanceof A.TokenTagToken){let I=S.symbol;T.map(I.tokenName,b);const M=I.label;M&&T.map(M,b)}else b.text===S.text||C||(C=b);else C||(C=b);return C}if(b instanceof u.ParserRuleContext&&S instanceof u.ParserRuleContext){let C,I=this.getRuleTagToken(S);if(I){if(b.ruleContext.ruleIndex===S.ruleContext.ruleIndex){T.map(I.ruleName,b);const k=I.label;k&&T.map(k,b)}else C||(C=b);return C}if(b.childCount!==S.childCount)return C||(C=b),C;let M=b.childCount;for(let k=0;k<M;k++){let H=this.matchImpl(b.getChild(k),S.getChild(k),T);if(H)return H}return C}return b}getRuleTagToken(b){if(b instanceof m.RuleNode&&b.childCount===1&&b.getChild(0)instanceof v.TerminalNode){let S=b.getChild(0);if(S.symbol instanceof g.RuleTagToken)return S.symbol}}tokenize(b){let S=this.split(b),T=[];for(let C of S)if(C instanceof _.TagChunk){let I=C;const M=I.tag.substr(0,1);if(M===M.toUpperCase()){let k=this._parser.getTokenType(I.tag);if(k===x.Token.INVALID_TYPE)throw new Error("Unknown token "+I.tag+" in pattern: "+b);let H=new A.TokenTagToken(I.tag,k,I.label);T.push(H)}else if(M===M.toLowerCase()){let k=this._parser.getRuleIndex(I.tag);if(k===-1)throw new Error("Unknown rule "+I.tag+" in pattern: "+b);let H=this._parser.getATNWithBypassAlts().ruleToTokenType[k];T.push(new g.RuleTagToken(I.tag,H,I.label))}else throw new Error("invalid tag: "+I.tag+" in pattern: "+b)}else{let I=C;this._lexer.inputStream=n.CharStreams.fromString(I.text);let M=this._lexer.nextToken();for(;M.type!==x.Token.EOF;)T.push(M),M=this._lexer.nextToken()}return T}split(b){let S=0,T=b.length,C=[],I=[],M=[];for(;S<T;)S===b.indexOf(this.escape+this.start,S)?S+=this.escape.length+this.start.length:S===b.indexOf(this.escape+this.stop,S)?S+=this.escape.length+this.stop.length:S===b.indexOf(this.start,S)?(I.push(S),S+=this.start.length):S===b.indexOf(this.stop,S)?(M.push(S),S+=this.stop.length):S++;if(I.length>M.length)throw new Error("unterminated tag in pattern: "+b);if(I.length<M.length)throw new Error("missing start tag in pattern: "+b);let k=I.length;for(let H=0;H<k;H++)if(I[H]>=M[H])throw new Error("tag delimiters out of order in pattern: "+b);if(k===0){let H=b.substring(0,T);C.push(new y.TextChunk(H))}if(k>0&&I[0]>0){let H=b.substring(0,I[0]);C.push(new y.TextChunk(H))}for(let H=0;H<k;H++){let Y=b.substring(I[H]+this.start.length,M[H]),O=Y,B,q=Y.indexOf(":");if(q>=0&&(B=Y.substring(0,q),O=Y.substring(q+1,Y.length)),C.push(new _.TagChunk(O,B)),H+1<k){let le=b.substring(M[H]+this.stop.length,I[H+1]);C.push(new y.TextChunk(le))}}if(k>0){let H=M[k-1]+this.stop.length;if(H<T){let Y=b.substring(H,T);C.push(new y.TextChunk(Y))}}for(let H=0;H<C.length;H++){let Y=C[H];if(Y instanceof y.TextChunk){let O=Y.text.replace(this.escapeRE,"");O.length<Y.text.length&&(C[H]=new y.TextChunk(O))}}return C}}e([l.NotNull,t(1,l.NotNull)],w.prototype,"match",null),e([l.NotNull],w.prototype,"lexer",null),e([l.NotNull],w.prototype,"parser",null),e([t(0,l.NotNull),t(1,l.NotNull),t(2,l.NotNull)],w.prototype,"matchImpl",null),i.ParseTreePatternMatcher=w,function(D){class b extends Error{constructor(C){super(`CannotInvokeStartRule: ${C}`),this.error=C}}D.CannotInvokeStartRule=b;class S extends Error{constructor(){super("StartRuleDoesNotConsumeFullPattern")}}D.StartRuleDoesNotConsumeFullPattern=S}(w=i.ParseTreePatternMatcher||(i.ParseTreePatternMatcher={}))}(jg)),jg}var oh={},ah={},lh={},Mb;function ad(){if(Mb)return lh;Mb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(n,s,o,a){var l=arguments.length,c=l<3?s:a===null?a=Object.getOwnPropertyDescriptor(s,o):a,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,s,o,a);else for(var u=n.length-1;u>=0;u--)(h=n[u])&&(c=(l<3?h(c):l>3?h(s,o,c):h(s,o))||c);return l>3&&c&&Object.defineProperty(s,o,c),c},e=P&&P.__param||function(n,s){return function(o,a){s(o,a,n)}};Object.defineProperty(lh,"__esModule",{value:!0}),lh.DecisionEventInfo=void 0;const t=te;let r=class{constructor(s,o,a,l,c,h){this.decision=s,this.fullCtx=h,this.stopIndex=c,this.input=a,this.startIndex=l,this.state=o}};return i([t.NotNull],r.prototype,"input",void 0),r=i([e(2,t.NotNull)],r),lh.DecisionEventInfo=r,lh}var Nb;function eO(){if(Nb)return ah;Nb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h},e=P&&P.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(ah,"__esModule",{value:!0}),ah.AmbiguityInfo=void 0;const t=ad(),r=te;let n=class extends t.DecisionEventInfo{constructor(o,a,l,c,h,u){super(o,a,c,h,u,a.useContext),this.ambigAlts=l}get ambiguousAlternatives(){return this.ambigAlts}};return i([r.NotNull],n.prototype,"ambigAlts",void 0),i([r.NotNull],n.prototype,"ambiguousAlternatives",null),n=i([e(1,r.NotNull),e(2,r.NotNull),e(3,r.NotNull)],n),ah.AmbiguityInfo=n,ah}var uh={},Rb;function tO(){if(Rb)return uh;Rb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h},e=P&&P.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(uh,"__esModule",{value:!0}),uh.ContextSensitivityInfo=void 0;const t=ad(),r=te;let n=class extends t.DecisionEventInfo{constructor(o,a,l,c,h){super(o,a,l,c,h,!0)}};return n=i([e(1,r.NotNull),e(2,r.NotNull)],n),uh.ContextSensitivityInfo=n,uh}var hh={},Lb;function iO(){if(Lb)return hh;Lb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(r,n,s,o){var a=arguments.length,l=a<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,s):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,n,s,o);else for(var h=r.length-1;h>=0;h--)(c=r[h])&&(l=(a<3?c(l):a>3?c(n,s,l):c(n,s))||l);return a>3&&l&&Object.defineProperty(n,s,l),l};Object.defineProperty(hh,"__esModule",{value:!0}),hh.DecisionInfo=void 0;const e=te;let t=class{constructor(n){this.invocations=0,this.timeInPrediction=0,this.SLL_TotalLook=0,this.SLL_MinLook=0,this.SLL_MaxLook=0,this.LL_TotalLook=0,this.LL_MinLook=0,this.LL_MaxLook=0,this.contextSensitivities=[],this.errors=[],this.ambiguities=[],this.predicateEvals=[],this.SLL_ATNTransitions=0,this.SLL_DFATransitions=0,this.LL_Fallback=0,this.LL_ATNTransitions=0,this.LL_DFATransitions=0,this.decision=n}toString(){return"{decision="+this.decision+", contextSensitivities="+this.contextSensitivities.length+", errors="+this.errors.length+", ambiguities="+this.ambiguities.length+", SLL_lookahead="+this.SLL_TotalLook+", SLL_ATNTransitions="+this.SLL_ATNTransitions+", SLL_DFATransitions="+this.SLL_DFATransitions+", LL_Fallback="+this.LL_Fallback+", LL_lookahead="+this.LL_TotalLook+", LL_ATNTransitions="+this.LL_ATNTransitions+"}"}};return i([e.Override],t.prototype,"toString",null),hh.DecisionInfo=t,hh}var ch={},kb;function rO(){if(kb)return ch;kb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h},e=P&&P.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(ch,"__esModule",{value:!0}),ch.ErrorInfo=void 0;const t=ad(),r=te;let n=class extends t.DecisionEventInfo{constructor(o,a,l,c,h){super(o,a,l,c,h,a.useContext)}};return n=i([e(1,r.NotNull),e(2,r.NotNull)],n),ch.ErrorInfo=n,ch}var dh={},Bb;function nO(){if(Bb)return dh;Bb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h},e=P&&P.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(dh,"__esModule",{value:!0}),dh.LookaheadEventInfo=void 0;const t=ad(),r=te;let n=class extends t.DecisionEventInfo{constructor(o,a,l,c,h,u,p){super(o,a,c,h,u,p),this.predictedAlt=l}};return n=i([e(3,r.NotNull)],n),dh.LookaheadEventInfo=n,dh}var fh={},Fb;function sO(){if(Fb)return fh;Fb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h},e=P&&P.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(fh,"__esModule",{value:!0}),fh.PredicateEvalInfo=void 0;const t=ad(),r=te;let n=class extends t.DecisionEventInfo{constructor(o,a,l,c,h,u,p,d){super(a,o,l,c,h,o.useContext),this.semctx=u,this.evalResult=p,this.predictedAlt=d}};return n=i([e(0,r.NotNull),e(2,r.NotNull),e(5,r.NotNull)],n),fh.PredicateEvalInfo=n,fh}var ph={},Ub;function GA(){if(Ub)return ph;Ub=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h},e=P&&P.__param||function(s,o){return function(a,l){o(a,l,s)}};Object.defineProperty(ph,"__esModule",{value:!0}),ph.SimulatorState=void 0;const t=te,r=Fr();let n=class{constructor(o,a,l,c){this.outerContext=o??r.ParserRuleContext.emptyContext(),this.s0=a,this.useContext=l,this.remainingOuterContext=c}};return n=i([e(1,t.NotNull)],n),ph.SimulatorState=n,ph}var Kb;function Hb(){if(Kb)return oh;Kb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(m,g,_,v){var y=arguments.length,x=y<3?g:v===null?v=Object.getOwnPropertyDescriptor(g,_):v,A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(m,g,_,v);else for(var w=m.length-1;w>=0;w--)(A=m[w])&&(x=(y<3?A(x):y>3?A(g,_,x):A(g,_))||x);return y>3&&x&&Object.defineProperty(g,_,x),x},e=P&&P.__param||function(m,g){return function(_,v){g(_,v,m)}};Object.defineProperty(oh,"__esModule",{value:!0}),oh.ProfilingATNSimulator=void 0;const t=eO(),r=hn(),n=Op(),s=tO(),o=iO(),a=rO(),l=te,c=nO(),h=ud(),u=sO(),p=da,d=GA();let f=class extends h.ParserATNSimulator{constructor(g){super(g.interpreter.atn,g),this._startIndex=0,this._sllStopIndex=0,this._llStopIndex=0,this.currentDecision=0,this.conflictingAltResolvedBySLL=0,this.optimize_ll1=!1,this.reportAmbiguities=!0,this.numDecisions=this.atn.decisionToState.length,this.decisions=[];for(let _=0;_<this.numDecisions;_++)this.decisions.push(new o.DecisionInfo(_))}adaptivePredict(g,_,v,y){if(y!==void 0)return super.adaptivePredict(g,_,v,y);try{this._input=g,this._startIndex=g.index,this._sllStopIndex=this._startIndex-1,this._llStopIndex=-1,this.currentDecision=_,this.currentState=void 0,this.conflictingAltResolvedBySLL=r.ATN.INVALID_ALT_NUMBER;let x=ss.hrtime(),A=super.adaptivePredict(g,_,v),w=ss.hrtime(),D=(w[0]-x[0])*1e9;D===0?D=w[1]-x[1]:D+=1e9-x[1]+w[1],this.decisions[_].timeInPrediction+=D,this.decisions[_].invocations++;let b=this._sllStopIndex-this._startIndex+1;if(this.decisions[_].SLL_TotalLook+=b,this.decisions[_].SLL_MinLook=this.decisions[_].SLL_MinLook===0?b:Math.min(this.decisions[_].SLL_MinLook,b),b>this.decisions[_].SLL_MaxLook&&(this.decisions[_].SLL_MaxLook=b,this.decisions[_].SLL_MaxLookEvent=new c.LookaheadEventInfo(_,void 0,A,g,this._startIndex,this._sllStopIndex,!1)),this._llStopIndex>=0){let S=this._llStopIndex-this._startIndex+1;this.decisions[_].LL_TotalLook+=S,this.decisions[_].LL_MinLook=this.decisions[_].LL_MinLook===0?S:Math.min(this.decisions[_].LL_MinLook,S),S>this.decisions[_].LL_MaxLook&&(this.decisions[_].LL_MaxLook=S,this.decisions[_].LL_MaxLookEvent=new c.LookaheadEventInfo(_,void 0,A,g,this._startIndex,this._llStopIndex,!0))}return A}finally{this._input=void 0,this.currentDecision=-1}}getStartState(g,_,v,y){let x=super.getStartState(g,_,v,y);return this.currentState=x,x}computeStartState(g,_,v){let y=super.computeStartState(g,_,v);return this.currentState=y,y}computeReachSet(g,_,v,y){if(this._input===void 0)throw new Error("Invalid state");let x=super.computeReachSet(g,_,v,y);return x==null&&this.decisions[this.currentDecision].errors.push(new a.ErrorInfo(this.currentDecision,_,this._input,this._startIndex,this._input.index)),this.currentState=x,x}getExistingTargetState(g,_){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");this.currentState.useContext?this._llStopIndex=this._input.index:this._sllStopIndex=this._input.index;let v=super.getExistingTargetState(g,_);if(v!=null&&(this.currentState=new d.SimulatorState(this.currentState.outerContext,v,this.currentState.useContext,this.currentState.remainingOuterContext),this.currentState.useContext?this.decisions[this.currentDecision].LL_DFATransitions++:this.decisions[this.currentDecision].SLL_DFATransitions++,v===n.ATNSimulator.ERROR)){let y=new d.SimulatorState(this.currentState.outerContext,g,this.currentState.useContext,this.currentState.remainingOuterContext);this.decisions[this.currentDecision].errors.push(new a.ErrorInfo(this.currentDecision,y,this._input,this._startIndex,this._input.index))}return v}computeTargetState(g,_,v,y,x,A){let w=super.computeTargetState(g,_,v,y,x,A);return x?this.decisions[this.currentDecision].LL_ATNTransitions++:this.decisions[this.currentDecision].SLL_ATNTransitions++,w}evalSemanticContextImpl(g,_,v){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let y=super.evalSemanticContextImpl(g,_,v);if(!(g instanceof p.SemanticContext.PrecedencePredicate)){let A=this._llStopIndex>=0?this._llStopIndex:this._sllStopIndex;this.decisions[this.currentDecision].predicateEvals.push(new u.PredicateEvalInfo(this.currentState,this.currentDecision,this._input,this._startIndex,A,g,y,v))}return y}reportContextSensitivity(g,_,v,y,x){if(this._input===void 0)throw new Error("Invalid state");_!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new s.ContextSensitivityInfo(this.currentDecision,v,this._input,y,x)),super.reportContextSensitivity(g,_,v,y,x)}reportAttemptingFullContext(g,_,v,y,x){_!=null?this.conflictingAltResolvedBySLL=_.nextSetBit(0):this.conflictingAltResolvedBySLL=v.s0.configs.getRepresentedAlternatives().nextSetBit(0),this.decisions[this.currentDecision].LL_Fallback++,super.reportAttemptingFullContext(g,_,v,y,x)}reportAmbiguity(g,_,v,y,x,A,w){if(this.currentState===void 0||this._input===void 0)throw new Error("Invalid state");let D;A!=null?D=A.nextSetBit(0):D=w.getRepresentedAlternatives().nextSetBit(0),this.conflictingAltResolvedBySLL!==r.ATN.INVALID_ALT_NUMBER&&D!==this.conflictingAltResolvedBySLL&&this.decisions[this.currentDecision].contextSensitivities.push(new s.ContextSensitivityInfo(this.currentDecision,this.currentState,this._input,v,y)),this.decisions[this.currentDecision].ambiguities.push(new t.AmbiguityInfo(this.currentDecision,this.currentState,A,this._input,v,y)),super.reportAmbiguity(g,_,v,y,x,A,w)}getDecisionInfo(){return this.decisions}getCurrentState(){return this.currentState}};return i([l.Override,e(0,l.NotNull)],f.prototype,"adaptivePredict",null),i([l.Override],f.prototype,"getStartState",null),i([l.Override],f.prototype,"computeStartState",null),i([l.Override],f.prototype,"computeReachSet",null),i([l.Override],f.prototype,"getExistingTargetState",null),i([l.Override],f.prototype,"computeTargetState",null),i([l.Override],f.prototype,"evalSemanticContextImpl",null),i([l.Override],f.prototype,"reportContextSensitivity",null),i([l.Override],f.prototype,"reportAttemptingFullContext",null),i([l.Override,e(0,l.NotNull),e(5,l.NotNull),e(6,l.NotNull)],f.prototype,"reportAmbiguity",null),oh.ProfilingATNSimulator=f,oh}var zb;function ld(){if(zb)return Ru;zb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(y,x,A,w){var D=arguments.length,b=D<3?x:w===null?w=Object.getOwnPropertyDescriptor(x,A):w,S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(y,x,A,w);else for(var T=y.length-1;T>=0;T--)(S=y[T])&&(b=(D<3?S(b):D>3?S(x,A,b):S(x,A))||b);return D>3&&b&&Object.defineProperty(x,A,b),b},e=P&&P.__param||function(y,x){return function(A,w){x(A,w,y)}},t=P&&P.__awaiter||function(y,x,A,w){function D(b){return b instanceof A?b:new A(function(S){S(b)})}return new(A||(A=Promise))(function(b,S){function T(M){try{I(w.next(M))}catch(k){S(k)}}function C(M){try{I(w.throw(M))}catch(k){S(k)}}function I(M){M.done?b(M.value):D(M.value).then(T,C)}I((w=w.apply(y,x||[])).next())})};Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.Parser=void 0;const r=Ut,n=Gc,s=_x(),o=hx(),a=bs,l=Hc,c=xs(),h=te,u=qp,p=ud(),d=id,f=gs,m=kr,g=_t;class _{constructor(x,A){this.ruleNames=x,this.tokenStream=A}enterEveryRule(x){console.log("enter   "+this.ruleNames[x.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}exitEveryRule(x){console.log("exit    "+this.ruleNames[x.ruleIndex]+", LT(1)="+this.tokenStream.LT(1).text)}visitErrorNode(x){}visitTerminal(x){let A=x.parent.ruleContext,w=x.symbol;console.log("consume "+w+" rule "+this.ruleNames[A.ruleIndex])}}i([h.Override],_.prototype,"enterEveryRule",null),i([h.Override],_.prototype,"exitEveryRule",null),i([h.Override],_.prototype,"visitErrorNode",null),i([h.Override],_.prototype,"visitTerminal",null);let v=class hf extends f.Recognizer{constructor(x){super(),this._errHandler=new o.DefaultErrorStrategy,this._precedenceStack=new l.IntegerStack,this._buildParseTrees=!0,this._parseListeners=[],this._syntaxErrors=0,this.matchedEOF=!1,this._precedenceStack.push(0),this.inputStream=x}reset(x){(x===void 0||x)&&this.inputStream.seek(0),this._errHandler.reset(this),this._ctx=void 0,this._syntaxErrors=0,this.matchedEOF=!1,this.isTrace=!1,this._precedenceStack.clear(),this._precedenceStack.push(0);let A=this.interpreter;A!=null&&A.reset()}match(x){let A=this.currentToken;return A.type===x?(x===g.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()):(A=this._errHandler.recoverInline(this),this._buildParseTrees&&A.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,A))),A}matchWildcard(){let x=this.currentToken;return x.type>0?(this._errHandler.reportMatch(this),this.consume()):(x=this._errHandler.recoverInline(this),this._buildParseTrees&&x.tokenIndex===-1&&this._ctx.addErrorNode(this.createErrorNode(this._ctx,x))),x}set buildParseTree(x){this._buildParseTrees=x}get buildParseTree(){return this._buildParseTrees}getParseListeners(){return this._parseListeners}addParseListener(x){if(x==null)throw new TypeError("listener cannot be null");this._parseListeners.push(x)}removeParseListener(x){let A=this._parseListeners.findIndex(w=>w===x);A!==-1&&this._parseListeners.splice(A,1)}removeParseListeners(){this._parseListeners.length=0}triggerEnterRuleEvent(){for(let x of this._parseListeners)x.enterEveryRule&&x.enterEveryRule(this._ctx),this._ctx.enterRule(x)}triggerExitRuleEvent(){for(let x=this._parseListeners.length-1;x>=0;x--){let A=this._parseListeners[x];this._ctx.exitRule(A),A.exitEveryRule&&A.exitEveryRule(this._ctx)}}get numberOfSyntaxErrors(){return this._syntaxErrors}get tokenFactory(){return this._input.tokenSource.tokenFactory}getATNWithBypassAlts(){let x=this.serializedATN;if(x==null)throw new Error("The current parser does not support an ATN with bypass alternatives.");let A=hf.bypassAltsAtnCache.get(x);if(A==null){let w=new n.ATNDeserializationOptions;w.isGenerateRuleBypassTransitions=!0,A=new s.ATNDeserializer(w).deserialize(r.toCharArray(x)),hf.bypassAltsAtnCache.set(x,A)}return A}compileParseTreePattern(x,A,w){return t(this,void 0,void 0,function*(){if(!w){if(this.inputStream){let T=this.inputStream.tokenSource;T instanceof c.Lexer&&(w=T)}if(!w)throw new Error("Parser can't discover a lexer to use")}let D=w,b=yield Promise.resolve().then(()=>J4());return new b.ParseTreePatternMatcher(D,this).compile(x,A)})}get errorHandler(){return this._errHandler}set errorHandler(x){this._errHandler=x}get inputStream(){return this._input}set inputStream(x){this.reset(!1),this._input=x}get currentToken(){return this._input.LT(1)}notifyErrorListeners(x,A,w){A===void 0?A=this.currentToken:A===null&&(A=void 0),this._syntaxErrors++;let D=-1,b=-1;A!=null&&(D=A.line,b=A.charPositionInLine);let S=this.getErrorListenerDispatch();S.syntaxError&&S.syntaxError(this,A,D,b,x,w)}consume(){let x=this.currentToken;x.type!==hf.EOF&&this.inputStream.consume();let A=this._parseListeners.length!==0;if(this._buildParseTrees||A)if(this._errHandler.inErrorRecoveryMode(this)){let w=this._ctx.addErrorNode(this.createErrorNode(this._ctx,x));if(A)for(let D of this._parseListeners)D.visitErrorNode&&D.visitErrorNode(w)}else{let w=this.createTerminalNode(this._ctx,x);if(this._ctx.addChild(w),A)for(let D of this._parseListeners)D.visitTerminal&&D.visitTerminal(w)}return x}createTerminalNode(x,A){return new m.TerminalNode(A)}createErrorNode(x,A){return new a.ErrorNode(A)}addContextToParseTree(){let x=this._ctx._parent;x!=null&&x.addChild(this._ctx)}enterRule(x,A,w){this.state=A,this._ctx=x,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}enterLeftFactoredRule(x,A,w){if(this.state=A,this._buildParseTrees){let D=this._ctx.getChild(this._ctx.childCount-1);this._ctx.removeLastChild(),D._parent=x,x.addChild(D)}this._ctx=x,this._ctx._start=this._input.LT(1),this._buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this.matchedEOF?this._ctx._stop=this._input.LT(1):this._ctx._stop=this._input.tryLT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx._parent}enterOuterAlt(x,A){if(x.altNumber=A,this._buildParseTrees&&this._ctx!==x){let w=this._ctx._parent;w!=null&&(w.removeLastChild(),w.addChild(x))}this._ctx=x}get precedence(){return this._precedenceStack.isEmpty?-1:this._precedenceStack.peek()}enterRecursionRule(x,A,w,D){this.state=A,this._precedenceStack.push(D),this._ctx=x,this._ctx._start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(x,A,w){let D=this._ctx;D._parent=x,D.invokingState=A,D._stop=this._input.tryLT(-1),this._ctx=x,this._ctx._start=D._start,this._buildParseTrees&&this._ctx.addChild(D),this.triggerEnterRuleEvent()}unrollRecursionContexts(x){this._precedenceStack.pop(),this._ctx._stop=this._input.tryLT(-1);let A=this._ctx;if(this._parseListeners.length>0)for(;this._ctx!==x;)this.triggerExitRuleEvent(),this._ctx=this._ctx._parent;else this._ctx=x;A._parent=x,this._buildParseTrees&&x!=null&&x.addChild(A)}getInvokingContext(x){let A=this._ctx;for(;A&&A.ruleIndex!==x;)A=A._parent;return A}get context(){return this._ctx}set context(x){this._ctx=x}precpred(x,A){return A>=this._precedenceStack.peek()}getErrorListenerDispatch(){return new d.ProxyParserErrorListener(this.getErrorListeners())}inContext(x){return!1}isExpectedToken(x){let A=this.interpreter.atn,w=this._ctx,D=A.states[this.state],b=A.nextTokens(D);if(b.contains(x))return!0;if(!b.contains(g.Token.EPSILON))return!1;for(;w!=null&&w.invokingState>=0&&b.contains(g.Token.EPSILON);){let T=A.states[w.invokingState].transition(0);if(b=A.nextTokens(T.followState),b.contains(x))return!0;w=w._parent}return!!(b.contains(g.Token.EPSILON)&&x===g.Token.EOF)}get isMatchedEOF(){return this.matchedEOF}getExpectedTokens(){return this.atn.getExpectedTokens(this.state,this.context)}getExpectedTokensWithinCurrentRule(){let x=this.interpreter.atn,A=x.states[this.state];return x.nextTokens(A)}getRuleIndex(x){let A=this.getRuleIndexMap().get(x);return A??-1}get ruleContext(){return this._ctx}getRuleInvocationStack(x=this._ctx){let A=x,w=this.ruleNames,D=[];for(;A!=null;){let b=A.ruleIndex;b<0?D.push("n/a"):D.push(w[b]),A=A._parent}return D}getDFAStrings(){let x=[];for(let A of this._interp.atn.decisionToDFA)x.push(A.toString(this.vocabulary,this.ruleNames));return x}dumpDFA(){let x=!1;for(let A of this._interp.atn.decisionToDFA)A.isEmpty||(x&&console.log(),console.log("Decision "+A.decision+":"),ss.stdout.write(A.toString(this.vocabulary,this.ruleNames)),x=!0)}get sourceName(){return this._input.sourceName}get parseInfo(){return Promise.resolve().then(()=>Hb()).then(x=>{let A=this.interpreter;if(A instanceof x.ProfilingATNSimulator)return new u.ParseInfo(A)})}setProfile(x){return t(this,void 0,void 0,function*(){let A=yield Promise.resolve().then(()=>Hb()),w=this.interpreter;x?w instanceof A.ProfilingATNSimulator||(this.interpreter=new A.ProfilingATNSimulator(this)):w instanceof A.ProfilingATNSimulator&&(this.interpreter=new p.ParserATNSimulator(this.atn,this)),this.interpreter.setPredictionMode(w.getPredictionMode())})}set isTrace(x){x?(this._tracer?this.removeParseListener(this._tracer):this._tracer=new _(this.ruleNames,this._input),this.addParseListener(this._tracer)):this._tracer&&(this.removeParseListener(this._tracer),this._tracer=void 0)}get isTrace(){return this._tracer!=null}};return v.bypassAltsAtnCache=new Map,i([h.NotNull],v.prototype,"_errHandler",void 0),i([h.NotNull],v.prototype,"match",null),i([h.NotNull],v.prototype,"matchWildcard",null),i([h.NotNull],v.prototype,"getParseListeners",null),i([e(0,h.NotNull)],v.prototype,"addParseListener",null),i([h.NotNull],v.prototype,"getATNWithBypassAlts",null),i([h.NotNull,e(0,h.NotNull)],v.prototype,"errorHandler",null),i([h.Override],v.prototype,"inputStream",null),i([h.NotNull],v.prototype,"currentToken",null),i([e(0,h.NotNull)],v.prototype,"enterRule",null),i([h.Override,e(0,h.Nullable)],v.prototype,"precpred",null),i([h.Override],v.prototype,"getErrorListenerDispatch",null),i([h.NotNull],v.prototype,"getExpectedTokens",null),i([h.NotNull],v.prototype,"getExpectedTokensWithinCurrentRule",null),i([h.Override],v.prototype,"parseInfo",null),Ru.Parser=v,Ru}var jb;function em(){if(jb)return Nu;jb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(s,o,a,l){var c=arguments.length,h=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(s,o,a,l);else for(var p=s.length-1;p>=0;p--)(u=s[p])&&(h=(c<3?u(h):c>3?u(o,a,h):u(o,a))||h);return c>3&&h&&Object.defineProperty(o,a,h),h};Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.NoViableAltException=void 0;const e=ld(),t=un,r=te;let n=class extends t.RecognitionException{constructor(o,a,l,c,h,u){o instanceof e.Parser&&(a===void 0&&(a=o.inputStream),l===void 0&&(l=o.currentToken),c===void 0&&(c=o.currentToken),u===void 0&&(u=o.context)),super(o,a,u),this._deadEndConfigs=h,this._startToken=l,this.setOffendingToken(o,c)}get startToken(){return this._startToken}get deadEndConfigs(){return this._deadEndConfigs}};return i([r.NotNull],n.prototype,"_startToken",void 0),Nu.NoViableAltException=n,Nu}var YA={};(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__decorate||function(o,a,l,c){var h=arguments.length,u=h<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,l):c,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,a,l,c);else for(var d=o.length-1;d>=0;d--)(p=o[d])&&(u=(h<3?p(u):h>3?p(a,l,u):p(a,l))||u);return h>3&&u&&Object.defineProperty(a,l,u),u};Object.defineProperty(i,"__esModule",{value:!0}),i.PredictionMode=void 0;const t=Rn,r=Tt,n=te,s=ys;(function(o){o[o.SLL=0]="SLL",o[o.LL=1]="LL",o[o.LL_EXACT_AMBIG_DETECTION=2]="LL_EXACT_AMBIG_DETECTION"})(i.PredictionMode||(i.PredictionMode={})),function(o){class a extends t.Array2DHashMap{constructor(){super(l.INSTANCE)}}class l{AltAndContextConfigEqualityComparator(){}hashCode(p){let d=r.MurmurHash.initialize(7);return d=r.MurmurHash.update(d,p.state.stateNumber),d=r.MurmurHash.update(d,p.context),d=r.MurmurHash.finish(d,2),d}equals(p,d){return p===d?!0:p==null||d==null?!1:p.state.stateNumber===d.state.stateNumber&&p.context.equals(d.context)}}l.INSTANCE=new l,e([n.Override],l.prototype,"hashCode",null),e([n.Override],l.prototype,"equals",null);function c(u){for(let p of u)if(p.state instanceof s.RuleStopState)return!0;return!1}o.hasConfigInRuleStopState=c;function h(u){for(let p of u)if(!(p.state instanceof s.RuleStopState))return!1;return!0}o.allConfigsInRuleStopStates=h}(i.PredictionMode||(i.PredictionMode={}))})(YA);var $b;function ud(){if($b)return Mu;$b=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(Se,R,L,U){var W=arguments.length,G=W<3?R:U===null?U=Object.getOwnPropertyDescriptor(R,L):U,j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(Se,R,L,U);else for(var ee=Se.length-1;ee>=0;ee--)(j=Se[ee])&&(G=(W<3?j(G):W>3?j(R,L,G):j(R,L))||G);return W>3&&G&&Object.defineProperty(R,L,G),G},e=P&&P.__param||function(Se,R){return function(L,U){R(L,U,Se)}};Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.ParserATNSimulator=void 0;const t=zc,r=Rc,n=Nr,s=Pp,o=hn(),a=ca,l=Uc(),c=Op(),h=qt,u=Yc,p=Lr,d=Yp,f=on,m=Ip(),g=kl,_=ri,v=Ln,y=te,x=ux(),A=em(),w=Zi,D=Fr(),b=Rr(),S=Jy(),T=YA,C=ys,I=Fl,M=da,k=lx(),H=GA(),Y=_t,O=kn,B=Xi,q=65535,le=-(1<<31>>>0);let X=class ke extends c.ATNSimulator{constructor(R,L){super(R),this.predictionMode=T.PredictionMode.LL,this.force_global_context=!1,this.always_try_local_context=!0,this.enable_global_context_dfa=!1,this.optimize_unique_closure=!0,this.optimize_ll1=!0,this.optimize_tail_calls=!0,this.tail_call_preserves_sll=!0,this.treat_sllk1_conflict_as_ambiguity=!1,this.reportAmbiguities=!1,this.userWantsCtxSensitive=!0,this._parser=L}getPredictionMode(){return this.predictionMode}setPredictionMode(R){this.predictionMode=R}reset(){}adaptivePredict(R,L,U,W){W===void 0&&(W=!1);let G=this.atn.decisionToDFA[L];if(B(G!=null),this.optimize_ll1&&!G.isPrecedenceDfa&&!G.isEmpty){let ae=R.LA(1);if(ae>=0&&ae<=65535){let ge=(L<<16>>>0)+ae,$=this.atn.LL1Table.get(ge);if($!=null)return $}}this.dfa=G,this.force_global_context?W=!0:this.always_try_local_context||(W=W||G.isContextSensitive),this.userWantsCtxSensitive=W||this.predictionMode!==T.PredictionMode.SLL&&U!=null&&!this.atn.decisionToState[L].sll,U==null&&(U=D.ParserRuleContext.emptyContext());let j;G.isEmpty||(j=this.getStartState(G,R,U,W)),j==null&&(U==null&&(U=D.ParserRuleContext.emptyContext()),ke.debug&&console.log("ATN decision "+G.decision+" exec LA(1)=="+this.getLookaheadName(R)+", outerContext="+U.toString(this._parser)),j=this.computeStartState(G,U,W));let ee=R.mark(),ne=R.index;try{let ae=this.execDFA(G,R,ne,j);return ke.debug&&console.log("DFA after predictATN: "+G.toString(this._parser.vocabulary,this._parser.ruleNames)),ae}finally{this.dfa=void 0,R.seek(ne),R.release(ee)}}getStartState(R,L,U,W){if(!W)if(R.isPrecedenceDfa){let ee=R.getPrecedenceStartState(this._parser.precedence,!1);return ee==null?void 0:new H.SimulatorState(U,ee,!1,U)}else return R.s0==null?void 0:new H.SimulatorState(U,R.s0,!1,U);if(!this.enable_global_context_dfa)return;let G=U;B(U!=null);let j;for(R.isPrecedenceDfa?j=R.getPrecedenceStartState(this._parser.precedence,!0):j=R.s0full;G!=null&&j!=null&&j.isContextSensitive;)G=this.skipTailCalls(G),j=j.getContextTarget(this.getReturnState(G)),G.isEmpty?B(j==null||!j.isContextSensitive):G=G.parent;if(j!=null)return new H.SimulatorState(U,j,W,G)}execDFA(R,L,U,W){let G=W.outerContext;ke.dfa_debug&&console.log("DFA decision "+R.decision+" exec LA(1)=="+this.getLookaheadName(L)+", outerContext="+G.toString(this._parser)),ke.dfa_debug&&console.log(R.toString(this._parser.vocabulary,this._parser.ruleNames));let j=W.s0,ee=L.LA(1),ne=W.remainingOuterContext;for(;;){if(ke.dfa_debug&&console.log("DFA state "+j.stateNumber+" LA(1)=="+this.getLookaheadName(L)),W.useContext)for(;j.isContextSymbol(ee);){let $;if(ne!=null&&(ne=this.skipTailCalls(ne),$=j.getContextTarget(this.getReturnState(ne))),$==null){let z=new H.SimulatorState(W.outerContext,j,W.useContext,ne);return this.execATN(R,L,U,z)}B(ne!=null),ne=ne.parent,j=$}if(this.isAcceptState(j,W.useContext)){j.predicates!=null?ke.dfa_debug&&console.log("accept "+j):ke.dfa_debug&&console.log("accept; predict "+j.prediction+" in state "+j.stateNumber);break}B(!this.isAcceptState(j,W.useContext));let ge=this.getExistingTargetState(j,ee);if(ge==null){ke.dfa_debug&&ee>=0&&console.log("no edge for "+this._parser.vocabulary.getDisplayName(ee));let $;if(ke.dfa_debug){let Q=_.Interval.of(U,this._parser.inputStream.index);console.log("ATN exec upon "+this._parser.inputStream.getText(Q)+" at DFA state "+j.stateNumber)}let z=new H.SimulatorState(G,j,W.useContext,ne);return $=this.execATN(R,L,U,z),ke.dfa_debug&&console.log("back from DFA update, alt="+$+`, dfa=
`+R.toString(this._parser.vocabulary,this._parser.ruleNames)),ke.dfa_debug&&console.log("DFA decision "+R.decision+" predicts "+$),$}else if(ge===c.ATNSimulator.ERROR){let $=new H.SimulatorState(G,j,W.useContext,ne);return this.handleNoViableAlt(L,U,$)}j=ge,!this.isAcceptState(j,W.useContext)&&ee!==v.IntStream.EOF&&(L.consume(),ee=L.LA(1))}if(!W.useContext&&j.configs.conflictInfo!=null&&R.atnStartState instanceof f.DecisionState&&!(!this.userWantsCtxSensitive||!j.configs.dipsIntoOuterContext&&j.configs.isExactConflict||this.treat_sllk1_conflict_as_ambiguity&&L.index===U)){B(!W.useContext);let ge,$=j.predicates;if($!=null){let z=L.index;if(z!==U&&L.seek(U),ge=this.evalSemanticContext($,G,!0),ge.cardinality()===1)return ge.nextSetBit(0);z!==U&&L.seek(z)}if(this.reportAmbiguities){let z=new H.SimulatorState(G,j,W.useContext,ne);this.reportAttemptingFullContext(R,ge,z,U,L.index)}return L.seek(U),this.adaptivePredict(L,R.decision,G,!0)}let ae=j.predicates;if(ae!=null){let ge=L.index;U!==ge&&L.seek(U);let $=this.evalSemanticContext(ae,G,this.reportAmbiguities&&this.predictionMode===T.PredictionMode.LL_EXACT_AMBIG_DETECTION);switch($.cardinality()){case 0:throw this.noViableAlt(L,G,j.configs,U);case 1:return $.nextSetBit(0);default:return U!==ge&&L.seek(ge),this.reportAmbiguity(R,j,U,ge,j.configs.isExactConflict,$,j.configs),$.nextSetBit(0)}}return ke.dfa_debug&&console.log("DFA decision "+R.decision+" predicts "+j.prediction),j.prediction}isAcceptState(R,L){return R.isAcceptState?R.configs.conflictingAlts==null?!0:L&&this.predictionMode===T.PredictionMode.LL_EXACT_AMBIG_DETECTION?R.configs.isExactConflict:!0:!1}execATN(R,L,U,W){ke.debug&&console.log("execATN decision "+R.decision+" exec LA(1)=="+this.getLookaheadName(L));let G=W.outerContext,j=W.useContext,ee=L.LA(1),ne=W,ae=new S.PredictionContextCache;for(;;){let ge=this.computeReachSet(R,ne,ee,ae);if(ge==null)return this.setDFAEdge(ne.s0,L.LA(1),c.ATNSimulator.ERROR),this.handleNoViableAlt(L,U,ne);let $=ge.s0;if(B($.isAcceptState||$.prediction===o.ATN.INVALID_ALT_NUMBER),B($.isAcceptState||$.configs.conflictInfo==null),this.isAcceptState($,j)){let z=$.configs.conflictingAlts,Q=z==null?$.prediction:o.ATN.INVALID_ALT_NUMBER;if(Q!==o.ATN.INVALID_ALT_NUMBER){if(this.optimize_ll1&&L.index===U&&!R.isPrecedenceDfa&&ge.outerContext===ge.remainingOuterContext&&R.decision>=0&&!$.configs.hasSemanticContext&&ee>=0&&ee<=q){let fe=(R.decision<<16>>>0)+ee;this.atn.LL1Table.set(fe,Q)}j&&this.always_try_local_context&&this.reportContextSensitivity(R,Q,ge,U,L.index)}Q=$.prediction;let se=z!=null&&this.userWantsCtxSensitive;if(se&&(se=!j&&($.configs.dipsIntoOuterContext||!$.configs.isExactConflict)&&(!this.treat_sllk1_conflict_as_ambiguity||L.index!==U)),$.configs.hasSemanticContext){let fe=$.predicates;if(fe!=null){let _e=L.index;switch(_e!==U&&L.seek(U),z=this.evalSemanticContext(fe,G,se||this.reportAmbiguities),z.cardinality()){case 0:throw this.noViableAlt(L,G,$.configs,U);case 1:return z.nextSetBit(0)}_e!==U&&L.seek(_e)}}if(se){B(!j),B(this.isAcceptState($,!1)),ke.debug&&console.log("RETRY with outerContext="+G);let fe=this.computeStartState(R,G,!0);return this.reportAmbiguities&&this.reportAttemptingFullContext(R,z,ge,U,L.index),L.seek(U),this.execATN(R,L,U,fe)}else return z!=null&&(this.reportAmbiguities&&z.cardinality()>1&&this.reportAmbiguity(R,$,U,L.index,$.configs.isExactConflict,z,$.configs),Q=z.nextSetBit(0)),Q}ne=ge,ee!==v.IntStream.EOF&&(L.consume(),ee=L.LA(1))}}handleNoViableAlt(R,L,U){if(U.s0!=null){let W=new p.BitSet,G=0;for(let j of U.s0.configs)(j.reachesIntoOuterContext||j.state instanceof C.RuleStopState)&&(W.set(j.alt),G=Math.max(G,j.alt));switch(W.cardinality()){case 0:break;case 1:return W.nextSetBit(0);default:if(!U.s0.configs.hasSemanticContext)return W.nextSetBit(0);let j=new l.ATNConfigSet;for(let ne of U.s0.configs)(ne.reachesIntoOuterContext||ne.state instanceof C.RuleStopState)&&j.add(ne);let ee=this.getPredsForAmbigAlts(W,j,G);if(ee!=null){let ne=this.getPredicatePredictions(W,ee);if(ne!=null){let ae=R.index;try{R.seek(L);let ge=this.evalSemanticContext(ne,U.outerContext,!1);if(!ge.isEmpty)return ge.nextSetBit(0)}finally{R.seek(ae)}}}return W.nextSetBit(0)}}throw this.noViableAlt(R,U.outerContext,U.s0.configs,L)}computeReachSet(R,L,U,W){let G=L.useContext,j=L.remainingOuterContext,ee=L.s0;if(G)for(;ee.isContextSymbol(U);){let ge;if(j!=null&&(j=this.skipTailCalls(j),ge=ee.getContextTarget(this.getReturnState(j))),ge==null)break;B(j!=null),j=j.parent,ee=ge}if(B(!this.isAcceptState(ee,G)),this.isAcceptState(ee,G))return new H.SimulatorState(L.outerContext,ee,G,j);let ne=ee,ae=this.getExistingTargetState(ne,U);if(ae==null){let ge=this.computeTargetState(R,ne,j,U,G,W);ae=ge[0],j=ge[1]}if(ae!==c.ATNSimulator.ERROR)return B(!G||!ae.configs.dipsIntoOuterContext),new H.SimulatorState(L.outerContext,ae,G,j)}getExistingTargetState(R,L){return R.getTarget(L)}computeTargetState(R,L,U,W,G,j){let ee=L.configs.toArray(),ne,ae=new l.ATNConfigSet,ge;do{let z=!G||U!=null;z||(ae.isOutermostConfigSet=!0);let Q=new l.ATNConfigSet,se;for(let be of ee){if(ke.debug&&console.log("testing "+this.getTokenName(W)+" at "+be.toString()),be.state instanceof C.RuleStopState){B(be.context.isEmpty),(G&&!be.reachesIntoOuterContext||W===v.IntStream.EOF)&&(se==null&&(se=[]),se.push(be));continue}let ie=be.state.numberOfOptimizedTransitions;for(let Me=0;Me<ie;Me++){let at=be.state.getOptimizedTransition(Me),kt=this.getReachableTarget(be,at,W);kt!=null&&Q.add(be.transform(kt,!1),j)}}if(this.optimize_unique_closure&&se==null&&W!==Y.Token.EOF&&Q.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER){Q.isOutermostConfigSet=ae.isOutermostConfigSet,ae=Q;break}let fe=!1,_e=W===Y.Token.EOF;if(this.closure(Q,ae,fe,z,j,_e),ge=ae.dipsIntoOuterContext,W===v.IntStream.EOF&&(ae=this.removeAllConfigsNotInRuleStopState(ae,j)),se!=null&&(!G||!T.PredictionMode.hasConfigInRuleStopState(ae))){B(se.length>0);for(let be of se)ae.add(be,j)}if(G&&ge){ae.clear(),U=U,U=this.skipTailCalls(U);let be=this.getReturnState(U);if(ne==null&&(ne=new g.IntegerList),U.isEmpty?U=void 0:U=U.parent,ne.add(be),be!==b.PredictionContext.EMPTY_FULL_STATE_KEY)for(let ie=0;ie<ee.length;ie++)ee[ie]=ee[ie].appendContext(be,j)}}while(G&&ge);return ae.isEmpty?(this.setDFAEdge(L,W,c.ATNSimulator.ERROR),[c.ATNSimulator.ERROR,U]):[this.addDFAEdge(R,L,W,ne,ae,j),U]}removeAllConfigsNotInRuleStopState(R,L){if(T.PredictionMode.allConfigsInRuleStopStates(R))return R;let U=new l.ATNConfigSet;for(let W of R)W.state instanceof C.RuleStopState&&U.add(W,L);return U}computeStartState(R,L,U){let W=R.isPrecedenceDfa?R.getPrecedenceStartState(this._parser.precedence,U):U?R.s0full:R.s0;if(W!=null){if(!U)return new H.SimulatorState(L,W,U,L);W.setContextSensitive(this.atn)}R.decision;let G=R.atnStartState,j=0,ee=L,ne=U?b.PredictionContext.EMPTY_FULL:b.PredictionContext.EMPTY_LOCAL,ae=new S.PredictionContextCache;if(U){if(!this.enable_global_context_dfa)for(;ee!=null;)ee.isEmpty?(j=b.PredictionContext.EMPTY_FULL_STATE_KEY,ee=void 0):(j=this.getReturnState(ee),ne=ne.appendSingleContext(j,ae),ee=ee.parent);for(;W!=null&&W.isContextSensitive&&ee!=null;){let $;if(ee=this.skipTailCalls(ee),ee.isEmpty?($=W.getContextTarget(b.PredictionContext.EMPTY_FULL_STATE_KEY),j=b.PredictionContext.EMPTY_FULL_STATE_KEY,ee=void 0):(j=this.getReturnState(ee),$=W.getContextTarget(j),ne=ne.appendSingleContext(j,ae),ee=ee.parent),$==null)break;W=$}}if(W!=null&&!W.isContextSensitive)return new H.SimulatorState(L,W,U,ee);let ge=new l.ATNConfigSet;for(;;){let $=new l.ATNConfigSet,z=G.numberOfTransitions;for(let ie=0;ie<z;ie++){let Me=G.transition(ie).target;$.add(a.ATNConfig.create(Me,ie+1,ne))}let Q=ee!=null;Q||(ge.isOutermostConfigSet=!0),this.closure($,ge,!0,Q,ae,!1);let fe=ge.dipsIntoOuterContext,_e;if(U&&!this.enable_global_context_dfa){W=this.addDFAState(R,ge,ae);break}else W==null?R.isPrecedenceDfa?(ge=this.applyPrecedenceFilter(ge,L,ae),_e=this.addDFAState(R,ge,ae),R.setPrecedenceStartState(this._parser.precedence,U,_e)):(_e=this.addDFAState(R,ge,ae),U?R.s0full?_e=R.s0full:R.s0full=_e:R.s0?_e=R.s0:R.s0=_e):(R.isPrecedenceDfa&&(ge=this.applyPrecedenceFilter(ge,L,ae)),_e=this.addDFAState(R,ge,ae),W.setContextTarget(j,_e));if(W=_e,!U||!fe)break;_e.setContextSensitive(this.atn),ee=ee,ge.clear(),ee=this.skipTailCalls(ee);let be=this.getReturnState(ee);ee.isEmpty?ee=void 0:ee=ee.parent,be!==b.PredictionContext.EMPTY_FULL_STATE_KEY&&(ne=ne.appendSingleContext(be,ae)),j=be}return new H.SimulatorState(L,W,U,ee)}applyPrecedenceFilter(R,L,U){let W=new Map,G=new l.ATNConfigSet;for(let j of R){if(j.alt!==1)continue;let ee=j.semanticContext.evalPrecedence(this._parser,L);ee!=null&&(W.set(j.state.stateNumber,j.context),ee!==j.semanticContext?G.add(j.transform(j.state,!1,ee),U):G.add(j,U))}for(let j of R)if(j.alt!==1){if(!j.isPrecedenceFilterSuppressed){let ee=W.get(j.state.stateNumber);if(ee!=null&&ee.equals(j.context))continue}G.add(j,U)}return G}getReachableTarget(R,L,U){if(L.matches(U,0,this.atn.maxTokenType))return L.target}predicateDFAState(R,L,U){let W=this.getConflictingAltsFromConfigSet(L);if(!W)throw new Error("This unhandled scenario is intended to be unreachable, but I'm currently not sure of why we know that's the case.");ke.debug&&console.log("predicateDFAState "+R);let G=this.getPredsForAmbigAlts(W,L,U),j;return G!=null&&(j=this.getPredicatePredictions(W,G),R.predicates=j),j}getPredsForAmbigAlts(R,L,U){let W=new Array(U+1),G=W.length;for(let ne of L)R.get(ne.alt)&&(W[ne.alt]=M.SemanticContext.or(W[ne.alt],ne.semanticContext));let j=0;for(let ne=0;ne<G;ne++)W[ne]==null?W[ne]=M.SemanticContext.NONE:W[ne]!==M.SemanticContext.NONE&&j++;let ee=W;return j===0&&(ee=void 0),ke.debug&&console.log("getPredsForAmbigAlts result "+(ee?s.Arrays.toString(ee):"undefined")),ee}getPredicatePredictions(R,L){let U=[],W=!1;for(let G=1;G<L.length;G++){let j=L[G];B(j!=null),R!=null&&R.get(G)&&j===M.SemanticContext.NONE?U.push(new m.DFAState.PredPrediction(j,G)):j!==M.SemanticContext.NONE&&(W=!0,U.push(new m.DFAState.PredPrediction(j,G)))}if(W)return U}evalSemanticContext(R,L,U){let W=new p.BitSet;for(let G of R){if(G.pred===M.SemanticContext.NONE){if(W.set(G.alt),!U)break;continue}let j=this.evalSemanticContextImpl(G.pred,L,G.alt);if((ke.debug||ke.dfa_debug)&&console.log("eval pred "+G+"="+j),j&&((ke.debug||ke.dfa_debug)&&console.log("PREDICT "+G.alt),W.set(G.alt),!U))break}return W}evalSemanticContextImpl(R,L,U){return R.eval(this._parser,L)}closure(R,L,U,W,G,j){G==null&&(G=S.PredictionContextCache.UNCACHED);let ee=R,ne=new n.Array2DHashSet(w.ObjectEqualityComparator.INSTANCE);for(;ee.size>0;){let ae=new l.ATNConfigSet;for(let ge of ee)this.closureImpl(ge,L,ae,ne,U,W,G,0,j);ee=ae}}closureImpl(R,L,U,W,G,j,ee,ne,ae){if(ke.debug&&console.log("closure("+R.toString(this._parser,!0)+")"),R.state instanceof C.RuleStopState)if(R.context.isEmpty)if(j)ke.debug&&console.log("FALLING off rule "+this.getRuleName(R.state.ruleIndex)),R.context===b.PredictionContext.EMPTY_FULL?R=R.transform(R.state,!1,b.PredictionContext.EMPTY_LOCAL):!R.reachesIntoOuterContext&&b.PredictionContext.isEmptyLocal(R.context)&&L.add(R,ee);else{L.add(R,ee);return}else{let $=R.context.hasEmpty,z=R.context.size-($?1:0);for(let Q=0;Q<z;Q++){let se=R.context.getParent(Q),fe=this.atn.states[R.context.getReturnState(Q)],_e=a.ATNConfig.create(fe,R.alt,se,R.semanticContext);_e.outerContextDepth=R.outerContextDepth,_e.isPrecedenceFilterSuppressed=R.isPrecedenceFilterSuppressed,B(ne>le),this.closureImpl(_e,L,U,W,G,j,ee,ne-1,ae)}if(!$||!j)return;R=R.transform(R.state,!1,b.PredictionContext.EMPTY_LOCAL)}let ge=R.state;ge.onlyHasEpsilonTransitions||(L.add(R,ee),ke.debug&&console.log("added config "+L));for(let $=0;$<ge.numberOfOptimizedTransitions;$++){if($===0&&ge.stateType===h.ATNStateType.STAR_LOOP_ENTRY&&ge.precedenceRuleDecision&&!R.context.hasEmpty){let fe=ge,_e=!0;for(let be=0;be<R.context.size;be++)if(!fe.precedenceLoopbackStates.get(R.context.getReturnState(be))){_e=!1;break}if(_e)continue}let z=ge.getOptimizedTransition($),Q=!(z instanceof r.ActionTransition)&&G,se=this.getEpsilonTarget(R,z,Q,ne===0,ee,ae);if(se!=null){if(z instanceof I.RuleTransition&&U!=null&&!G){U.add(se,ee);continue}let fe=ne;if(R.state instanceof C.RuleStopState){if(this.dfa!=null&&this.dfa.isPrecedenceDfa&&z.outermostPrecedenceReturn===this.dfa.atnStartState.ruleIndex&&(se.isPrecedenceFilterSuppressed=!0),se.outerContextDepth=se.outerContextDepth+1,!W.add(se))continue;B(fe>le),fe--,ke.debug&&console.log("dips into outer ctx: "+se)}else if(z instanceof I.RuleTransition)this.optimize_tail_calls&&z.optimizedTailCall&&(!this.tail_call_preserves_sll||!b.PredictionContext.isEmptyLocal(R.context))?(B(se.context===R.context),fe===0&&(fe--,!this.tail_call_preserves_sll&&b.PredictionContext.isEmptyLocal(R.context)&&(se.outerContextDepth=se.outerContextDepth+1))):fe>=0&&fe++;else if(!z.isEpsilon&&!W.add(se))continue;this.closureImpl(se,L,U,W,Q,j,ee,fe,ae)}}}getRuleName(R){return this._parser!=null&&R>=0?this._parser.ruleNames[R]:"<rule "+R+">"}getEpsilonTarget(R,L,U,W,G,j){switch(L.serializationType){case 3:return this.ruleTransition(R,L,G);case 10:return this.precedenceTransition(R,L,U,W);case 4:return this.predTransition(R,L,U,W);case 6:return this.actionTransition(R,L);case 1:return R.transform(L.target,!1);case 5:case 2:case 7:return j&&L.matches(Y.Token.EOF,0,1)?R.transform(L.target,!1):void 0;default:return}}actionTransition(R,L){return ke.debug&&console.log("ACTION edge "+L.ruleIndex+":"+L.actionIndex),R.transform(L.target,!1)}precedenceTransition(R,L,U,W){ke.debug&&(console.log("PRED (collectPredicates="+U+") "+L.precedence+">=_p, ctx dependent=true"),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let G;if(U&&W){let j=M.SemanticContext.and(R.semanticContext,L.predicate);G=R.transform(L.target,!1,j)}else G=R.transform(L.target,!1);return ke.debug&&console.log("config from pred transition="+G),G}predTransition(R,L,U,W){ke.debug&&(console.log("PRED (collectPredicates="+U+") "+L.ruleIndex+":"+L.predIndex+", ctx dependent="+L.isCtxDependent),this._parser!=null&&console.log("context surrounding pred is "+this._parser.getRuleInvocationStack()));let G;if(U&&(!L.isCtxDependent||L.isCtxDependent&&W)){let j=M.SemanticContext.and(R.semanticContext,L.predicate);G=R.transform(L.target,!1,j)}else G=R.transform(L.target,!1);return ke.debug&&console.log("config from pred transition="+G),G}ruleTransition(R,L,U){ke.debug&&console.log("CALL rule "+this.getRuleName(L.target.ruleIndex)+", ctx="+R.context);let W=L.followState,G;return this.optimize_tail_calls&&L.optimizedTailCall&&(!this.tail_call_preserves_sll||!b.PredictionContext.isEmptyLocal(R.context))?G=R.context:U!=null?G=U.getChild(R.context,W.stateNumber):G=R.context.getChild(W.stateNumber),R.transform(L.target,!1,G)}isConflicted(R,L){if(R.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER||R.size<=1)return;let U=R.toArray();U.sort(ke.STATE_ALT_SORT_COMPARATOR);let W=!R.dipsIntoOuterContext,G=new p.BitSet,j=U[0].alt;G.set(j);let ee=U[0].state.nonStopStateNumber;for(let z of U){let Q=z.state.nonStopStateNumber;if(Q!==ee){if(z.alt!==j)return;ee=Q}}let ne;if(W){ee=U[0].state.nonStopStateNumber,ne=new p.BitSet;let z=j;for(let se of U){if(se.state.nonStopStateNumber!==ee)break;let fe=se.alt;ne.set(fe),z=fe}ee=U[0].state.nonStopStateNumber;let Q=j;for(let se of U){let fe=se.state.nonStopStateNumber,_e=se.alt;if(fe!==ee){if(Q!==z){W=!1;break}ee=fe,Q=j}else if(_e!==Q){if(_e!==ne.nextSetBit(Q+1)){W=!1;break}Q=_e}}}ee=U[0].state.nonStopStateNumber;let ae=0,ge=0,$=U[0].context;for(let z=1;z<U.length;z++){let Q=U[z];if(Q.alt!==j||Q.state.nonStopStateNumber!==ee)break;ge=z,$=L.join($,U[z].context)}for(let z=ge+1;z<U.length;z++){let Q=U[z],se=Q.state;if(G.set(Q.alt),se.nonStopStateNumber!==ee){ee=se.nonStopStateNumber,ae=z,ge=z,$=Q.context;for(let Me=ae+1;Me<U.length;Me++){let at=U[Me];if(at.alt!==j||at.state.nonStopStateNumber!==ee)break;ge=Me,$=L.join($,at.context)}z=ge;continue}let fe=Q.context,_e=Q.alt,be=z;for(let Me=be+1;Me<U.length;Me++){let at=U[Me];if(at.alt!==_e||at.state.nonStopStateNumber!==ee)break;be=Me,fe=L.join(fe,at.context)}z=be;let ie=L.join($,fe);if(!$.equals(ie))return;W=W&&$.equals(fe)}return new d.ConflictInfo(G,W)}getConflictingAltsFromConfigSet(R){let L=R.conflictingAlts;return L==null&&R.uniqueAlt!==o.ATN.INVALID_ALT_NUMBER&&(L=new p.BitSet,L.set(R.uniqueAlt)),L}getTokenName(R){if(R===Y.Token.EOF)return"EOF";let U=(this._parser!=null?this._parser.vocabulary:O.VocabularyImpl.EMPTY_VOCABULARY).getDisplayName(R);return U===String(R)?U:U+"<"+R+">"}getLookaheadName(R){return this.getTokenName(R.LA(1))}dumpDeadEndConfigs(R){console.log("dead end configs: ");let L=R.deadEndConfigs;if(L)for(let U of L){let W="no edges";if(U.state.numberOfOptimizedTransitions>0){let G=U.state.getOptimizedTransition(0);G instanceof u.AtomTransition?W="Atom "+this.getTokenName(G._label):G instanceof k.SetTransition&&(W=(G instanceof x.NotSetTransition?"~":"")+"Set "+G.set.toString())}console.log(U.toString(this._parser,!0)+":"+W)}}noViableAlt(R,L,U,W){return new A.NoViableAltException(this._parser,R,R.get(W),R.LT(1),U,L)}getUniqueAlt(R){let L=o.ATN.INVALID_ALT_NUMBER;for(let U of R)if(L===o.ATN.INVALID_ALT_NUMBER)L=U.alt;else if(U.alt!==L)return o.ATN.INVALID_ALT_NUMBER;return L}configWithAltAtStopState(R,L){for(let U of R)if(U.alt===L&&U.state instanceof C.RuleStopState)return!0;return!1}addDFAEdge(R,L,U,W,G,j){B(W==null||W.isEmpty||R.isContextSensitive);let ee=L,ne=this.addDFAState(R,G,j);if(W!=null)for(let ae of W.toArray()){if(ae===b.PredictionContext.EMPTY_FULL_STATE_KEY&&ee.configs.isOutermostConfigSet)continue;ee.setContextSensitive(this.atn),ee.setContextSymbol(U);let ge=ee.getContextTarget(ae);if(ge!=null){ee=ge;continue}ge=this.addDFAContextState(R,ee.configs,ae,j),B(ae!==b.PredictionContext.EMPTY_FULL_STATE_KEY||ge.configs.isOutermostConfigSet),ee.setContextTarget(ae,ge),ee=ge}return ke.debug&&console.log("EDGE "+ee+" -> "+ne+" upon "+this.getTokenName(U)),this.setDFAEdge(ee,U,ne),ke.debug&&console.log(`DFA=
`+R.toString(this._parser!=null?this._parser.vocabulary:O.VocabularyImpl.EMPTY_VOCABULARY,this._parser!=null?this._parser.ruleNames:void 0)),ne}setDFAEdge(R,L,U){R!=null&&R.setTarget(L,U)}addDFAContextState(R,L,U,W){if(U!==b.PredictionContext.EMPTY_FULL_STATE_KEY){let G=new l.ATNConfigSet;for(let j of L)G.add(j.appendContext(U,W));return this.addDFAState(R,G,W)}else return B(!L.isOutermostConfigSet,"Shouldn't be adding a duplicate edge."),L=L.clone(!0),L.isOutermostConfigSet=!0,this.addDFAState(R,L,W)}addDFAState(R,L,U){let W=this.enable_global_context_dfa||!L.isOutermostConfigSet;if(W){L.isReadOnly||L.optimizeConfigs(this);let ae=this.createDFAState(R,L),ge=R.states.get(ae);if(ge!=null)return ge}L.isReadOnly||L.conflictInfo==null&&(L.conflictInfo=this.isConflicted(L,U));let G=this.createDFAState(R,L.clone(!0)),j=this.atn.getDecisionState(R.decision),ee=this.getUniqueAlt(L);if(ee!==o.ATN.INVALID_ALT_NUMBER)G.acceptStateInfo=new t.AcceptStateInfo(ee);else if(L.conflictingAlts!=null){let ae=L.conflictingAlts;ae&&(G.acceptStateInfo=new t.AcceptStateInfo(ae.nextSetBit(0)))}if(G.isAcceptState&&L.hasSemanticContext&&this.predicateDFAState(G,L,j.numberOfTransitions),!W)return G;let ne=R.addState(G);return ke.debug&&ne===G&&console.log("adding new DFA state: "+G),ne}createDFAState(R,L){return new m.DFAState(L)}reportAttemptingFullContext(R,L,U,W,G){if(ke.debug||ke.retry_debug){let j=_.Interval.of(W,G);console.log("reportAttemptingFullContext decision="+R.decision+":"+U.s0.configs+", input="+this._parser.inputStream.getText(j))}if(this._parser!=null){let j=this._parser.getErrorListenerDispatch();j.reportAttemptingFullContext&&j.reportAttemptingFullContext(this._parser,R,W,G,L,U)}}reportContextSensitivity(R,L,U,W,G){if(ke.debug||ke.retry_debug){let j=_.Interval.of(W,G);console.log("reportContextSensitivity decision="+R.decision+":"+U.s0.configs+", input="+this._parser.inputStream.getText(j))}if(this._parser!=null){let j=this._parser.getErrorListenerDispatch();j.reportContextSensitivity&&j.reportContextSensitivity(this._parser,R,W,G,L,U)}}reportAmbiguity(R,L,U,W,G,j,ee){if(ke.debug||ke.retry_debug){let ne=_.Interval.of(U,W);console.log("reportAmbiguity "+j+":"+ee+", input="+this._parser.inputStream.getText(ne))}if(this._parser!=null){let ne=this._parser.getErrorListenerDispatch();ne.reportAmbiguity&&ne.reportAmbiguity(this._parser,R,U,W,G,j,ee)}}getReturnState(R){return R.isEmpty?b.PredictionContext.EMPTY_FULL_STATE_KEY:this.atn.states[R.invokingState].transition(0).followState.stateNumber}skipTailCalls(R){if(!this.optimize_tail_calls)return R;for(;!R.isEmpty;){let L=this.atn.states[R.invokingState];if(B(L.numberOfTransitions===1&&L.transition(0).serializationType===3),!L.transition(0).tailCall)break;R=R.parent}return R}get parser(){return this._parser}};return X.debug=!1,X.dfa_debug=!1,X.retry_debug=!1,X.STATE_ALT_SORT_COMPARATOR=(Se,R)=>{let L=Se.state.nonStopStateNumber-R.state.nonStopStateNumber;return L!==0||(L=Se.alt-R.alt,L!==0)?L:0},i([y.NotNull],X.prototype,"predictionMode",void 0),i([y.NotNull],X.prototype,"getPredictionMode",null),i([e(0,y.NotNull)],X.prototype,"setPredictionMode",null),i([y.Override],X.prototype,"reset",null),i([e(0,y.NotNull)],X.prototype,"adaptivePredict",null),i([e(0,y.NotNull),e(1,y.NotNull),e(2,y.NotNull)],X.prototype,"getStartState",null),i([e(0,y.NotNull),e(1,y.NotNull),e(3,y.NotNull)],X.prototype,"execDFA",null),i([e(0,y.NotNull),e(1,y.NotNull),e(3,y.NotNull)],X.prototype,"execATN",null),i([e(0,y.NotNull),e(2,y.NotNull)],X.prototype,"handleNoViableAlt",null),i([e(0,y.NotNull)],X.prototype,"getExistingTargetState",null),i([y.NotNull,e(0,y.NotNull),e(1,y.NotNull)],X.prototype,"computeTargetState",null),i([y.NotNull,e(0,y.NotNull)],X.prototype,"removeAllConfigsNotInRuleStopState",null),i([y.NotNull],X.prototype,"computeStartState",null),i([y.NotNull,e(0,y.NotNull)],X.prototype,"applyPrecedenceFilter",null),i([e(0,y.NotNull),e(1,y.NotNull)],X.prototype,"getReachableTarget",null),i([e(0,y.NotNull),e(1,y.NotNull)],X.prototype,"getPredsForAmbigAlts",null),i([e(0,y.NotNull)],X.prototype,"evalSemanticContext",null),i([e(0,y.NotNull)],X.prototype,"evalSemanticContextImpl",null),i([e(1,y.NotNull),e(4,y.Nullable)],X.prototype,"closure",null),i([e(0,y.NotNull),e(1,y.NotNull),e(2,y.Nullable),e(3,y.NotNull),e(6,y.NotNull)],X.prototype,"closureImpl",null),i([y.NotNull],X.prototype,"getRuleName",null),i([e(0,y.NotNull),e(1,y.NotNull)],X.prototype,"getEpsilonTarget",null),i([y.NotNull,e(0,y.NotNull),e(1,y.NotNull)],X.prototype,"actionTransition",null),i([y.Nullable,e(0,y.NotNull),e(1,y.NotNull)],X.prototype,"precedenceTransition",null),i([y.Nullable,e(0,y.NotNull),e(1,y.NotNull)],X.prototype,"predTransition",null),i([y.NotNull,e(0,y.NotNull),e(1,y.NotNull),e(2,y.Nullable)],X.prototype,"ruleTransition",null),i([e(0,y.NotNull)],X.prototype,"isConflicted",null),i([y.NotNull],X.prototype,"getTokenName",null),i([e(0,y.NotNull)],X.prototype,"dumpDeadEndConfigs",null),i([y.NotNull,e(0,y.NotNull),e(1,y.NotNull),e(2,y.NotNull)],X.prototype,"noViableAlt",null),i([e(0,y.NotNull)],X.prototype,"getUniqueAlt",null),i([e(0,y.NotNull)],X.prototype,"configWithAltAtStopState",null),i([y.NotNull,e(0,y.NotNull),e(1,y.NotNull),e(4,y.NotNull)],X.prototype,"addDFAEdge",null),i([e(0,y.Nullable),e(2,y.Nullable)],X.prototype,"setDFAEdge",null),i([y.NotNull,e(0,y.NotNull),e(1,y.NotNull)],X.prototype,"addDFAContextState",null),i([y.NotNull,e(0,y.NotNull),e(1,y.NotNull)],X.prototype,"addDFAState",null),i([y.NotNull,e(0,y.NotNull),e(1,y.NotNull)],X.prototype,"createDFAState",null),i([e(0,y.NotNull),e(2,y.NotNull)],X.prototype,"reportAttemptingFullContext",null),i([e(0,y.NotNull),e(2,y.NotNull)],X.prototype,"reportContextSensitivity",null),i([e(0,y.NotNull),e(5,y.NotNull),e(6,y.NotNull)],X.prototype,"reportAmbiguity",null),X=i([e(0,y.NotNull)],X),Mu.ParserATNSimulator=X,Mu}var tm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var oO=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(tm,"__esModule",{value:!0});tm.PlusBlockStartState=void 0;const aO=qt,lO=va,uO=te;class qA extends lO.BlockStartState{get stateType(){return aO.ATNStateType.PLUS_BLOCK_START}}oO([uO.Override],qA.prototype,"stateType",null);tm.PlusBlockStartState=qA;var im={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var hO=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(im,"__esModule",{value:!0});im.PlusLoopbackState=void 0;const cO=qt,dO=on,fO=te;class XA extends dO.DecisionState{get stateType(){return cO.ATNStateType.PLUS_LOOP_BACK}}hO([fO.Override],XA.prototype,"stateType",null);im.PlusLoopbackState=XA;var rm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var hd=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},pO=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(rm,"__esModule",{value:!0});rm.PrecedencePredicateTransition=void 0;const mO=Bl,cd=te,gO=da;let qo=class extends mO.AbstractPredicateTransition{constructor(e,t){super(e),this.precedence=t}get serializationType(){return 10}get isEpsilon(){return!0}matches(e,t,r){return!1}get predicate(){return new gO.SemanticContext.PrecedencePredicate(this.precedence)}toString(){return this.precedence+" >= _p"}};hd([cd.Override],qo.prototype,"serializationType",null);hd([cd.Override],qo.prototype,"isEpsilon",null);hd([cd.Override],qo.prototype,"matches",null);hd([cd.Override],qo.prototype,"toString",null);qo=hd([pO(0,cd.NotNull)],qo);rm.PrecedencePredicateTransition=qo;var nm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var dd=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},_O=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(nm,"__esModule",{value:!0});nm.RangeTransition=void 0;const vO=_a(),Xo=te,yO=Mr;let Zo=class extends yO.Transition{constructor(e,t,r){super(e),this.from=t,this.to=r}get serializationType(){return 2}get label(){return vO.IntervalSet.of(this.from,this.to)}matches(e,t,r){return e>=this.from&&e<=this.to}toString(){return"'"+String.fromCodePoint(this.from)+"'..'"+String.fromCodePoint(this.to)+"'"}};dd([Xo.Override],Zo.prototype,"serializationType",null);dd([Xo.Override,Xo.NotNull],Zo.prototype,"label",null);dd([Xo.Override],Zo.prototype,"matches",null);dd([Xo.Override,Xo.NotNull],Zo.prototype,"toString",null);Zo=dd([_O(0,Xo.NotNull)],Zo);nm.RangeTransition=Zo;var sm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var xO=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(sm,"__esModule",{value:!0});sm.RuleStartState=void 0;const wO=an,bO=qt,SO=te;class ZA extends wO.ATNState{constructor(){super(...arguments),this.isPrecedenceRule=!1,this.leftFactored=!1}get stateType(){return bO.ATNStateType.RULE_START}}xO([SO.Override],ZA.prototype,"stateType",null);sm.RuleStartState=ZA;var om={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var EO=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(om,"__esModule",{value:!0});om.StarBlockStartState=void 0;const AO=qt,DO=va,TO=te;class QA extends DO.BlockStartState{get stateType(){return AO.ATNStateType.STAR_BLOCK_START}}EO([TO.Override],QA.prototype,"stateType",null);om.StarBlockStartState=QA;var am={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var CO=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(am,"__esModule",{value:!0});am.StarLoopbackState=void 0;const PO=an,IO=qt,OO=te;class JA extends PO.ATNState{get loopEntryState(){return this.transition(0).target}get stateType(){return IO.ATNStateType.STAR_LOOP_BACK}}CO([OO.Override],JA.prototype,"stateType",null);am.StarLoopbackState=JA;var lm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var MO=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(lm,"__esModule",{value:!0});lm.TokensStartState=void 0;const NO=qt,RO=on,LO=te;class e3 extends RO.DecisionState{get stateType(){return NO.ATNStateType.TOKEN_START}}MO([LO.Override],e3.prototype,"stateType",null);lm.TokensStartState=e3;var um={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(um,"__esModule",{value:!0});um.UUID=void 0;const kO=Tt;class Hf{constructor(e,t,r,n){this.data=new Uint32Array(4),this.data[0]=e,this.data[1]=t,this.data[2]=r,this.data[3]=n}static fromString(e){if(!/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/.test(e))throw new Error("Incorrectly formatted UUID");let t=e.split("-"),r=parseInt(t[0],16),n=(parseInt(t[1],16)<<16>>>0)+parseInt(t[2],16),s=(parseInt(t[3],16)<<16>>>0)+parseInt(t[4].substr(0,4),16),o=parseInt(t[4].substr(-8),16);return new Hf(r,n,s,o)}hashCode(){return kO.MurmurHash.hashCode([this.data[0],this.data[1],this.data[2],this.data[3]])}equals(e){return e===this?!0:e instanceof Hf?this.data[0]===e.data[0]&&this.data[1]===e.data[1]&&this.data[2]===e.data[2]&&this.data[3]===e.data[3]:!1}toString(){return("00000000"+this.data[0].toString(16)).substr(-8)+"-"+("0000"+(this.data[1]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[1].toString(16)).substr(-4)+"-"+("0000"+(this.data[2]>>>16).toString(16)).substr(-4)+"-"+("0000"+this.data[2].toString(16)).substr(-4)+("00000000"+this.data[3].toString(16)).substr(-8)}}um.UUID=Hf;var Vb;function _x(){if(Vb)return yu;Vb=1;/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var i=P&&P.__decorate||function(ge,$,z,Q){var se=arguments.length,fe=se<3?$:Q===null?Q=Object.getOwnPropertyDescriptor($,z):Q,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")fe=Reflect.decorate(ge,$,z,Q);else for(var be=ge.length-1;be>=0;be--)(_e=ge[be])&&(fe=(se<3?_e(fe):se>3?_e($,z,fe):_e($,z))||fe);return se>3&&fe&&Object.defineProperty($,z,fe),fe},e=P&&P.__param||function(ge,$){return function(z,Q){$(z,Q,ge)}};Object.defineProperty(yu,"__esModule",{value:!0}),yu.ATNDeserializer=void 0;const t=Rc,r=Nr,n=hn(),s=Gc,o=qt,a=Yc,l=Kp,c=$c,h=Lr,u=Hp,p=va,d=on,f=vA(),m=zp,g=_a(),_=jc,v=jp,y=$p,x=Vp,A=PA,w=IA,D=Wp,b=OA,S=Gp,T=Qc,C=te,I=ux(),M=ud(),k=tm,H=im,Y=rm,O=ed,B=nm,q=sm,le=ys,X=Fl,Se=lx(),R=om,L=am,U=Ll,W=_t,G=lm,j=um,ee=Wc;var ne;(function(ge){ge[ge.UNICODE_BMP=0]="UNICODE_BMP",ge[ge.UNICODE_SMP=1]="UNICODE_SMP"})(ne||(ne={}));let ae=class Ee{constructor($){$===void 0&&($=s.ATNDeserializationOptions.defaultOptions),this.deserializationOptions=$}static get SERIALIZED_VERSION(){return 3}static isFeatureSupported($,z){let Q=Ee.SUPPORTED_UUIDS.findIndex(se=>se.equals($));return Q<0?!1:Ee.SUPPORTED_UUIDS.findIndex(se=>se.equals(z))>=Q}static getUnicodeDeserializer($){return $===0?{readUnicode:(z,Q)=>Ee.toInt(z[Q]),size:1}:{readUnicode:(z,Q)=>Ee.toInt32(z,Q),size:2}}deserialize($){$=$.slice(0);for(let re=1;re<$.length;re++)$[re]=$[re]-2&65535;let z=0,Q=Ee.toInt($[z++]);if(Q!==Ee.SERIALIZED_VERSION){let re=`Could not deserialize ATN with version ${Q} (expected ${Ee.SERIALIZED_VERSION}).`;throw new Error(re)}let se=Ee.toUUID($,z);if(z+=8,Ee.SUPPORTED_UUIDS.findIndex(re=>re.equals(se))<0){let re=`Could not deserialize ATN with UUID ${se} (expected ${Ee.SERIALIZED_UUID} or a legacy UUID).`;throw new Error(re)}let fe=Ee.isFeatureSupported(Ee.ADDED_LEXER_ACTIONS,se),_e=Ee.toInt($[z++]),be=Ee.toInt($[z++]),ie=new n.ATN(_e,be),Me=[],at=[],kt=Ee.toInt($[z++]);for(let re=0;re<kt;re++){let Ne=Ee.toInt($[z++]);if(Ne===o.ATNStateType.INVALID_TYPE){ie.addState(new _.InvalidState);continue}let Ke=Ee.toInt($[z++]);Ke===65535&&(Ke=-1);let $e=this.stateFactory(Ne,Ke);if(Ne===o.ATNStateType.LOOP_END){let Ot=Ee.toInt($[z++]);Me.push([$e,Ot])}else if($e instanceof p.BlockStartState){let Ot=Ee.toInt($[z++]);at.push([$e,Ot])}ie.addState($e)}for(let re of Me)re[0].loopBackState=ie.states[re[1]];for(let re of at)re[0].endState=ie.states[re[1]];let ct=Ee.toInt($[z++]);for(let re=0;re<ct;re++){let Ne=Ee.toInt($[z++]);ie.states[Ne].nonGreedy=!0}let _n=Ee.toInt($[z++]);for(let re=0;re<_n;re++){let Ne=Ee.toInt($[z++]);ie.states[Ne].sll=!0}let zr=Ee.toInt($[z++]);for(let re=0;re<zr;re++){let Ne=Ee.toInt($[z++]);ie.states[Ne].isPrecedenceRule=!0}let xd=Ee.toInt($[z++]);ie.grammarType===0&&(ie.ruleToTokenType=new Int32Array(xd)),ie.ruleToStartState=new Array(xd);for(let re=0;re<xd;re++){let Ne=Ee.toInt($[z++]),Ke=ie.states[Ne];if(Ke.leftFactored=Ee.toInt($[z++])!==0,ie.ruleToStartState[re]=Ke,ie.grammarType===0){let $e=Ee.toInt($[z++]);$e===65535&&($e=W.Token.EOF),ie.ruleToTokenType[re]=$e,Ee.isFeatureSupported(Ee.ADDED_LEXER_ACTIONS,se)||Ee.toInt($[z++])}}ie.ruleToStopState=new Array(xd);for(let re of ie.states)re instanceof le.RuleStopState&&(ie.ruleToStopState[re.ruleIndex]=re,ie.ruleToStartState[re.ruleIndex].stopState=re);let rg=Ee.toInt($[z++]);for(let re=0;re<rg;re++){let Ne=Ee.toInt($[z++]);ie.modeToStartState.push(ie.states[Ne])}ie.modeToDFA=new Array(rg);for(let re=0;re<rg;re++)ie.modeToDFA[re]=new f.DFA(ie.modeToStartState[re]);let ng=[];z=this.deserializeSets($,z,ng,Ee.getUnicodeDeserializer(0)),Ee.isFeatureSupported(Ee.ADDED_UNICODE_SMP,se)&&(z=this.deserializeSets($,z,ng,Ee.getUnicodeDeserializer(1)));let xD=Ee.toInt($[z++]);for(let re=0;re<xD;re++){let Ne=Ee.toInt($[z]),Ke=Ee.toInt($[z+1]),$e=Ee.toInt($[z+2]),Ot=Ee.toInt($[z+3]),zn=Ee.toInt($[z+4]),Xt=Ee.toInt($[z+5]),er=this.edgeFactory(ie,$e,Ne,Ke,Ot,zn,Xt,ng);ie.states[Ne].addTransition(er),z+=6}let wD=new r.Array2DHashSet({hashCode:re=>re.stopState^re.returnState^re.outermostPrecedenceReturn,equals:(re,Ne)=>re.stopState===Ne.stopState&&re.returnState===Ne.returnState&&re.outermostPrecedenceReturn===Ne.outermostPrecedenceReturn}),Mx=[];for(let re of ie.states){let Ne=re.ruleIndex>=0&&ie.ruleToStartState[re.ruleIndex].leftFactored;for(let Ke=0;Ke<re.numberOfTransitions;Ke++){let $e=re.transition(Ke);if(!($e instanceof X.RuleTransition))continue;let Ot=$e;if(!ie.ruleToStartState[Ot.target.ruleIndex].leftFactored&&Ne)continue;let Xt=-1;ie.ruleToStartState[Ot.target.ruleIndex].isPrecedenceRule&&Ot.precedence===0&&(Xt=Ot.target.ruleIndex);let er={stopState:Ot.target.ruleIndex,returnState:Ot.followState.stateNumber,outermostPrecedenceReturn:Xt};wD.add(er)&&Mx.push(er)}}for(let re of Mx){let Ne=new m.EpsilonTransition(ie.states[re.returnState],re.outermostPrecedenceReturn);ie.ruleToStopState[re.stopState].addTransition(Ne)}for(let re of ie.states){if(re instanceof p.BlockStartState){if(re.endState===void 0)throw new Error("IllegalStateException");if(re.endState.startState!==void 0)throw new Error("IllegalStateException");re.endState.startState=re}if(re instanceof H.PlusLoopbackState){let Ne=re;for(let Ke=0;Ke<Ne.numberOfTransitions;Ke++){let $e=Ne.transition(Ke).target;$e instanceof k.PlusBlockStartState&&($e.loopBackState=Ne)}}else if(re instanceof L.StarLoopbackState){let Ne=re;for(let Ke=0;Ke<Ne.numberOfTransitions;Ke++){let $e=Ne.transition(Ke).target;$e instanceof U.StarLoopEntryState&&($e.loopBackState=Ne)}}}let sg=Ee.toInt($[z++]);for(let re=1;re<=sg;re++){let Ne=Ee.toInt($[z++]),Ke=ie.states[Ne];ie.decisionToState.push(Ke),Ke.decision=re-1}if(ie.grammarType===0)if(fe){ie.lexerActions=new Array(Ee.toInt($[z++]));for(let re=0;re<ie.lexerActions.length;re++){let Ne=Ee.toInt($[z++]),Ke=Ee.toInt($[z++]);Ke===65535&&(Ke=-1);let $e=Ee.toInt($[z++]);$e===65535&&($e=-1);let Ot=this.lexerActionFactory(Ne,Ke,$e);ie.lexerActions[re]=Ot}}else{let re=[];for(let Ne of ie.states)for(let Ke=0;Ke<Ne.numberOfTransitions;Ke++){let $e=Ne.transition(Ke);if(!($e instanceof t.ActionTransition))continue;let Ot=$e.ruleIndex,zn=$e.actionIndex,Xt=new y.LexerCustomAction(Ot,zn);Ne.setTransition(Ke,new t.ActionTransition($e.target,Ot,re.length,!1)),re.push(Xt)}ie.lexerActions=re}this.markPrecedenceDecisions(ie),ie.decisionToDFA=new Array(sg);for(let re=0;re<sg;re++)ie.decisionToDFA[re]=new f.DFA(ie.decisionToState[re],re);if(this.deserializationOptions.isVerifyATN&&this.verifyATN(ie),this.deserializationOptions.isGenerateRuleBypassTransitions&&ie.grammarType===1){ie.ruleToTokenType=new Int32Array(ie.ruleToStartState.length);for(let re=0;re<ie.ruleToStartState.length;re++)ie.ruleToTokenType[re]=ie.maxTokenType+re+1;for(let re=0;re<ie.ruleToStartState.length;re++){let Ne=new l.BasicBlockStartState;Ne.ruleIndex=re,ie.addState(Ne);let Ke=new u.BlockEndState;Ke.ruleIndex=re,ie.addState(Ke),Ne.endState=Ke,ie.defineDecisionState(Ne),Ke.startState=Ne;let $e,Ot;if(ie.ruleToStartState[re].isPrecedenceRule){$e=void 0;for(let Xt of ie.states){if(Xt.ruleIndex!==re||!(Xt instanceof U.StarLoopEntryState))continue;let er=Xt.transition(Xt.numberOfTransitions-1).target;if(er instanceof T.LoopEndState&&er.epsilonOnlyTransitions&&er.transition(0).target instanceof le.RuleStopState){$e=Xt;break}}if(!$e)throw new Error("Couldn't identify final state of the precedence rule prefix section.");Ot=$e.loopBackState.transition(0)}else $e=ie.ruleToStopState[re];for(let Xt of ie.states)for(let er=0;er<Xt.numberOfTransitions;er++){let wd=Xt.transition(er);wd!==Ot&&wd.target===$e&&(wd.target=Ke)}for(;ie.ruleToStartState[re].numberOfTransitions>0;){let Xt=ie.ruleToStartState[re].removeTransition(ie.ruleToStartState[re].numberOfTransitions-1);Ne.addTransition(Xt)}ie.ruleToStartState[re].addTransition(new m.EpsilonTransition(Ne)),Ke.addTransition(new m.EpsilonTransition($e));let zn=new c.BasicState;ie.addState(zn),zn.addTransition(new a.AtomTransition(Ke,ie.ruleToTokenType[re])),Ne.addTransition(new m.EpsilonTransition(zn))}this.deserializationOptions.isVerifyATN&&this.verifyATN(ie)}if(this.deserializationOptions.isOptimize){for(;;){let re=0;re+=Ee.inlineSetRules(ie),re+=Ee.combineChainedEpsilons(ie);let Ne=ie.grammarType===0;if(re+=Ee.optimizeSets(ie,Ne),re===0)break}this.deserializationOptions.isVerifyATN&&this.verifyATN(ie)}return Ee.identifyTailCalls(ie),ie}deserializeSets($,z,Q,se){let fe=Ee.toInt($[z++]);for(let _e=0;_e<fe;_e++){let be=Ee.toInt($[z]);z++;let ie=new g.IntervalSet;Q.push(ie),Ee.toInt($[z++])!==0&&ie.add(-1);for(let at=0;at<be;at++){let kt=se.readUnicode($,z);z+=se.size;let ct=se.readUnicode($,z);z+=se.size,ie.add(kt,ct)}}return z}markPrecedenceDecisions($){let z=new Map;for(let Q of $.states)if(Q instanceof U.StarLoopEntryState&&$.ruleToStartState[Q.ruleIndex].isPrecedenceRule){let se=Q.transition(Q.numberOfTransitions-1).target;se instanceof T.LoopEndState&&se.epsilonOnlyTransitions&&se.transition(0).target instanceof le.RuleStopState&&(z.set(Q.ruleIndex,Q),Q.precedenceRuleDecision=!0,Q.precedenceLoopbackStates=new h.BitSet($.states.length))}for(let Q of z)for(let se of $.ruleToStopState[Q[0]].getTransitions())se.serializationType!==1||se.outermostPrecedenceReturn!==-1||Q[1].precedenceLoopbackStates.set(se.target.stateNumber)}verifyATN($){for(let z of $.states)if(this.checkCondition(z!==void 0,"ATN states should not be undefined."),z.stateType!==o.ATNStateType.INVALID_TYPE){if(this.checkCondition(z.onlyHasEpsilonTransitions||z.numberOfTransitions<=1),z instanceof k.PlusBlockStartState&&this.checkCondition(z.loopBackState!==void 0),z instanceof U.StarLoopEntryState){let Q=z;if(this.checkCondition(Q.loopBackState!==void 0),this.checkCondition(Q.numberOfTransitions===2),Q.transition(0).target instanceof R.StarBlockStartState)this.checkCondition(Q.transition(1).target instanceof T.LoopEndState),this.checkCondition(!Q.nonGreedy);else if(Q.transition(0).target instanceof T.LoopEndState)this.checkCondition(Q.transition(1).target instanceof R.StarBlockStartState),this.checkCondition(Q.nonGreedy);else throw new Error("IllegalStateException")}if(z instanceof L.StarLoopbackState&&(this.checkCondition(z.numberOfTransitions===1),this.checkCondition(z.transition(0).target instanceof U.StarLoopEntryState)),z instanceof T.LoopEndState&&this.checkCondition(z.loopBackState!==void 0),z instanceof q.RuleStartState&&this.checkCondition(z.stopState!==void 0),z instanceof p.BlockStartState&&this.checkCondition(z.endState!==void 0),z instanceof u.BlockEndState&&this.checkCondition(z.startState!==void 0),z instanceof d.DecisionState){let Q=z;this.checkCondition(Q.numberOfTransitions<=1||Q.decision>=0)}else this.checkCondition(z.numberOfTransitions<=1||z instanceof le.RuleStopState)}}checkCondition($,z){if(!$)throw new Error("IllegalStateException: "+z)}static inlineSetRules($){let z=0,Q=new Array($.ruleToStartState.length);for(let se=0;se<$.ruleToStartState.length;se++){let _e=$.ruleToStartState[se];for(;_e.onlyHasEpsilonTransitions&&_e.numberOfOptimizedTransitions===1&&_e.getOptimizedTransition(0).serializationType===1;)_e=_e.getOptimizedTransition(0).target;if(_e.numberOfOptimizedTransitions!==1)continue;let be=_e.getOptimizedTransition(0),ie=be.target;if(!(be.isEpsilon||!ie.onlyHasEpsilonTransitions||ie.numberOfOptimizedTransitions!==1||!(ie.getOptimizedTransition(0).target instanceof le.RuleStopState)))switch(be.serializationType){case 5:case 2:case 7:Q[se]=be;break;case 8:case 9:continue;default:continue}}for(let se of $.states){if(se.ruleIndex<0)continue;let fe;for(let _e=0;_e<se.numberOfOptimizedTransitions;_e++){let be=se.getOptimizedTransition(_e);if(!(be instanceof X.RuleTransition)){fe!==void 0&&fe.push(be);continue}let ie=be,Me=Q[ie.target.ruleIndex];if(Me===void 0){fe!==void 0&&fe.push(be);continue}if(fe===void 0){fe=[];for(let ct=0;ct<_e;ct++)fe.push(se.getOptimizedTransition(_e))}z++;let at=ie.followState,kt=new c.BasicState;switch(kt.setRuleIndex(at.ruleIndex),$.addState(kt),fe.push(new m.EpsilonTransition(kt)),Me.serializationType){case 5:kt.addTransition(new a.AtomTransition(at,Me._label));break;case 2:kt.addTransition(new B.RangeTransition(at,Me.from,Me.to));break;case 7:kt.addTransition(new Se.SetTransition(at,Me.label));break;default:throw new Error("UnsupportedOperationException")}}if(fe!==void 0){if(se.isOptimized)for(;se.numberOfOptimizedTransitions>0;)se.removeOptimizedTransition(se.numberOfOptimizedTransitions-1);for(let _e of fe)se.addOptimizedTransition(_e)}}return M.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+z+" rule invocations by inlining sets."),z}static combineChainedEpsilons($){let z=0;for(let Q of $.states){if(!Q.onlyHasEpsilonTransitions||Q instanceof le.RuleStopState)continue;let se;e:for(let fe=0;fe<Q.numberOfOptimizedTransitions;fe++){let _e=Q.getOptimizedTransition(fe),be=_e.target;if(_e.serializationType!==1||_e.outermostPrecedenceReturn!==-1||be.stateType!==o.ATNStateType.BASIC||!be.onlyHasEpsilonTransitions){se!==void 0&&se.push(_e);continue e}for(let ie=0;ie<be.numberOfOptimizedTransitions;ie++)if(be.getOptimizedTransition(ie).serializationType!==1||be.getOptimizedTransition(ie).outermostPrecedenceReturn!==-1){se!==void 0&&se.push(_e);continue e}if(z++,se===void 0){se=[];for(let ie=0;ie<fe;ie++)se.push(Q.getOptimizedTransition(ie))}for(let ie=0;ie<be.numberOfOptimizedTransitions;ie++){let Me=be.getOptimizedTransition(ie).target;se.push(new m.EpsilonTransition(Me))}}if(se!==void 0){if(Q.isOptimized)for(;Q.numberOfOptimizedTransitions>0;)Q.removeOptimizedTransition(Q.numberOfOptimizedTransitions-1);for(let fe of se)Q.addOptimizedTransition(fe)}}return M.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+z+" transitions by combining chained epsilon transitions."),z}static optimizeSets($,z){if(z)return 0;let Q=0,se=$.decisionToState;for(let fe of se){let _e=new g.IntervalSet;for(let ct=0;ct<fe.numberOfOptimizedTransitions;ct++){let _n=fe.getOptimizedTransition(ct);if(!(_n instanceof m.EpsilonTransition)||_n.target.numberOfOptimizedTransitions!==1)continue;let zr=_n.target.getOptimizedTransition(0);zr.target instanceof u.BlockEndState&&(zr instanceof I.NotSetTransition||(zr instanceof a.AtomTransition||zr instanceof B.RangeTransition||zr instanceof Se.SetTransition)&&_e.add(ct))}if(_e.size<=1)continue;let be=[];for(let ct=0;ct<fe.numberOfOptimizedTransitions;ct++)_e.contains(ct)||be.push(fe.getOptimizedTransition(ct));let ie=fe.getOptimizedTransition(_e.minElement).target.getOptimizedTransition(0).target,Me=new g.IntervalSet;for(let ct of _e.intervals)for(let _n=ct.a;_n<=ct.b;_n++){let zr=fe.getOptimizedTransition(_n).target.getOptimizedTransition(0);if(zr instanceof I.NotSetTransition)throw new Error("Not yet implemented.");Me.addAll(zr.label)}let at;if(Me.intervals.length===1)if(Me.size===1)at=new a.AtomTransition(ie,Me.minElement);else{let ct=Me.intervals[0];at=new B.RangeTransition(ie,ct.a,ct.b)}else at=new Se.SetTransition(ie,Me);let kt=new c.BasicState;if(kt.setRuleIndex(fe.ruleIndex),$.addState(kt),kt.addTransition(at),be.push(new m.EpsilonTransition(kt)),Q+=fe.numberOfOptimizedTransitions-be.length,fe.isOptimized)for(;fe.numberOfOptimizedTransitions>0;)fe.removeOptimizedTransition(fe.numberOfOptimizedTransitions-1);for(let ct of be)fe.addOptimizedTransition(ct)}return M.ParserATNSimulator.debug&&console.log("ATN runtime optimizer removed "+Q+" paths by collapsing sets."),Q}static identifyTailCalls($){for(let z of $.states){for(let Q=0;Q<z.numberOfTransitions;Q++){let se=z.transition(Q);se instanceof X.RuleTransition&&(se.tailCall=this.testTailCall($,se,!1),se.optimizedTailCall=this.testTailCall($,se,!0))}if(z.isOptimized)for(let Q=0;Q<z.numberOfOptimizedTransitions;Q++){let se=z.getOptimizedTransition(Q);se instanceof X.RuleTransition&&(se.tailCall=this.testTailCall($,se,!1),se.optimizedTailCall=this.testTailCall($,se,!0))}}}static testTailCall($,z,Q){if(!Q&&z.tailCall||Q&&z.optimizedTailCall)return!0;let se=new h.BitSet($.states.length),fe=[];for(fe.push(z.followState);;){let _e=fe.pop();if(!_e)break;if(se.get(_e.stateNumber)||_e instanceof le.RuleStopState)continue;if(!_e.onlyHasEpsilonTransitions)return!1;let be=Q?_e.numberOfOptimizedTransitions:_e.numberOfTransitions;for(let ie=0;ie<be;ie++){let Me=Q?_e.getOptimizedTransition(ie):_e.transition(ie);if(Me.serializationType!==1)return!1;fe.push(Me.target)}}return!0}static toInt($){return $}static toInt32($,z){return($[z]|$[z+1]<<16)>>>0}static toUUID($,z){let Q=Ee.toInt32($,z),se=Ee.toInt32($,z+2),fe=Ee.toInt32($,z+4),_e=Ee.toInt32($,z+6);return new j.UUID(_e,fe,se,Q)}edgeFactory($,z,Q,se,fe,_e,be,ie){let Me=$.states[se];switch(z){case 1:return new m.EpsilonTransition(Me);case 2:return be!==0?new B.RangeTransition(Me,W.Token.EOF,_e):new B.RangeTransition(Me,fe,_e);case 3:return new X.RuleTransition($.states[fe],_e,be,Me);case 4:return new O.PredicateTransition(Me,fe,_e,be!==0);case 10:return new Y.PrecedencePredicateTransition(Me,fe);case 5:return be!==0?new a.AtomTransition(Me,W.Token.EOF):new a.AtomTransition(Me,fe);case 6:return new t.ActionTransition(Me,fe,_e,be!==0);case 7:return new Se.SetTransition(Me,ie[fe]);case 8:return new I.NotSetTransition(Me,ie[fe]);case 9:return new ee.WildcardTransition(Me)}throw new Error("The specified transition type is not valid.")}stateFactory($,z){let Q;switch($){case o.ATNStateType.INVALID_TYPE:return new _.InvalidState;case o.ATNStateType.BASIC:Q=new c.BasicState;break;case o.ATNStateType.RULE_START:Q=new q.RuleStartState;break;case o.ATNStateType.BLOCK_START:Q=new l.BasicBlockStartState;break;case o.ATNStateType.PLUS_BLOCK_START:Q=new k.PlusBlockStartState;break;case o.ATNStateType.STAR_BLOCK_START:Q=new R.StarBlockStartState;break;case o.ATNStateType.TOKEN_START:Q=new G.TokensStartState;break;case o.ATNStateType.RULE_STOP:Q=new le.RuleStopState;break;case o.ATNStateType.BLOCK_END:Q=new u.BlockEndState;break;case o.ATNStateType.STAR_LOOP_BACK:Q=new L.StarLoopbackState;break;case o.ATNStateType.STAR_LOOP_ENTRY:Q=new U.StarLoopEntryState;break;case o.ATNStateType.PLUS_LOOP_BACK:Q=new H.PlusLoopbackState;break;case o.ATNStateType.LOOP_END:Q=new T.LoopEndState;break;default:let se=`The specified state type ${$} is not valid.`;throw new Error(se)}return Q.ruleIndex=z,Q}lexerActionFactory($,z,Q){switch($){case 0:return new v.LexerChannelAction(z);case 1:return new y.LexerCustomAction(z,Q);case 2:return new x.LexerModeAction(z);case 3:return A.LexerMoreAction.INSTANCE;case 4:return w.LexerPopModeAction.INSTANCE;case 5:return new D.LexerPushModeAction(z);case 6:return b.LexerSkipAction.INSTANCE;case 7:return new S.LexerTypeAction(z);default:let se=`The specified lexer action type ${$} is not valid.`;throw new Error(se)}}};return ae.BASE_SERIALIZED_UUID=j.UUID.fromString("E4178468-DF95-44D0-AD87-F22A5D5FB6D3"),ae.ADDED_LEXER_ACTIONS=j.UUID.fromString("AB35191A-1603-487E-B75A-479B831EAF6D"),ae.ADDED_UNICODE_SMP=j.UUID.fromString("C23FEA89-0605-4f51-AFB8-058BCAB8C91B"),ae.SUPPORTED_UUIDS=[ae.BASE_SERIALIZED_UUID,ae.ADDED_LEXER_ACTIONS,ae.ADDED_UNICODE_SMP],ae.SERIALIZED_UUID=ae.ADDED_UNICODE_SMP,i([C.NotNull],ae.prototype,"deserializationOptions",void 0),i([e(0,C.NotNull)],ae.prototype,"deserialize",null),i([e(0,C.NotNull)],ae.prototype,"markPrecedenceDecisions",null),i([C.NotNull,e(0,C.NotNull)],ae.prototype,"edgeFactory",null),yu.ATNDeserializer=ae,yu}var t3=_x(),BO=xs(),FO=Fp(),UO=Object.defineProperty,KO=Object.getOwnPropertyDescriptor,fd=(i,e,t,r)=>{for(var n=KO(e,t),s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&UO(e,t,n),n},xe;const Wl=(xe=class extends BO.Lexer{get vocabulary(){return xe.VOCABULARY}constructor(e){super(e),this._interp=new FO.LexerATNSimulator(xe._ATN,this)}get grammarFileName(){return"Finscript.g4"}get ruleNames(){return xe.ruleNames}get serializedATN(){return xe._serializedATN}get modeNames(){return xe.modeNames}static get _ATN(){return xe.__ATN||(xe.__ATN=new t3.ATNDeserializer().deserialize(ex(xe._serializedATN))),xe.__ATN}},xe.T__0=1,xe.T__1=2,xe.Def=3,xe.If=4,xe.Else=5,xe.Return=6,xe.For=7,xe.While=8,xe.To=9,xe.End=10,xe.In=11,xe.And=12,xe.Or=13,xe.Excl=14,xe.Equals=15,xe.NEquals=16,xe.GTEquals=17,xe.LTEquals=18,xe.Pow=19,xe.GT=20,xe.LT=21,xe.Add=22,xe.Subtract=23,xe.Multiply=24,xe.Divide=25,xe.Modulus=26,xe.OBrace=27,xe.CBrace=28,xe.OBracket=29,xe.CBracket=30,xe.OParen=31,xe.CParen=32,xe.SColon=33,xe.Assign=34,xe.Comma=35,xe.QMark=36,xe.Colon=37,xe.BoolLiteral=38,xe.NullLiteral=39,xe.NumberLiteral=40,xe.Identifier=41,xe.IndicatorExpr=42,xe.StringLiteral=43,xe.HexColorLiteral=44,xe.Comment=45,xe.Space=46,xe.modeNames=["DEFAULT_MODE"],xe.ruleNames=["T__0","T__1","Def","If","Else","Return","For","While","To","End","In","And","Or","Excl","Equals","NEquals","GTEquals","LTEquals","Pow","GT","LT","Add","Subtract","Multiply","Divide","Modulus","OBrace","CBrace","OBracket","CBracket","OParen","CParen","SColon","Assign","Comma","QMark","Colon","BoolLiteral","NullLiteral","NumberLiteral","Identifier","IndicatorExpr","StringLiteral","HexColorLiteral","Comment","Space","Int","Digit","HexDigit"],xe._LITERAL_NAMES=[void 0,"'.'","'=>'","'def'","'if'","'else'","'return'","'for'","'while'","'to'","'end'","'in'","'and'","'or'","'not'","'=='","'!='","'>='","'<='","'^'","'>'","'<'","'+'","'-'","'*'","'/'","'%'","'{'","'}'","'['","']'","'('","')'","';'","'='","','","'?'","':'",void 0,"'null'"],xe._SYMBOLIC_NAMES=[void 0,void 0,void 0,"Def","If","Else","Return","For","While","To","End","In","And","Or","Excl","Equals","NEquals","GTEquals","LTEquals","Pow","GT","LT","Add","Subtract","Multiply","Divide","Modulus","OBrace","CBrace","OBracket","CBracket","OParen","CParen","SColon","Assign","Comma","QMark","Colon","BoolLiteral","NullLiteral","NumberLiteral","Identifier","IndicatorExpr","StringLiteral","HexColorLiteral","Comment","Space"],xe.VOCABULARY=new tx(xe._LITERAL_NAMES,xe._SYMBOLIC_NAMES,[]),xe._serializedATN=`0\b					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r													\x1B	\x1B				 	 !	!"	"#	#$	$%	%&	&'	'(	()	)*	*+	+,	,-	-.	./	/0	01	12	2\x07\x07\x07\x07\x07\x07\x07\b\b\b\b						


\v\v\v\v\f\f\f\r\r\r\r\x1B\x1B  !!""##$$%%&&''''''''''
'((((()))\x07)
)\f))\v))
)*\x07*
*\f**\v***\x07*
*\f**\v*++
+\r++,,,,,,\x07,
,\f,,\v,,,,,,,,\x07,
,\f,,\v,,,
,------------------------
-....\x07.
.\f..\v.....\x07.
.\f..\v....
...////00\x070
0\f00\v000
011223\x07	\v\x07\r\b	
\v\f\r\x1B!#%')+-/13\x1B579;= ?!A"C#E$G%I&K'M(O)Q*S+U,W-Y.[/]0_acC\\aac|2;aac|2;C\\aac|C\\$$\f\f$$))\f\f))%%\f\f\v\f""3;2;2;CHch\x07	\v\r\x1B!#%')+-/13579;=?ACEGIKMOQSUWY[]eg\x07j	n\vq\rv}\x1B!#%')+-/13579;=?ACEGIKMOQSUWY[]_acef\x070fgh\x07?hi\x07@ijk\x07fkl\x07glm\x07hm\bno\x07kop\x07hp
qr\x07grs\x07nst\x07utu\x07gu\fvw\x07twx\x07gxy\x07vyz\x07wz{\x07t{|\x07p|}~\x07h~\x07q\x07t\x07y\x07j\x07k\x07n\x07g\x07v\x07q\x07g\x07p\x07f\x07k\x07p\x07c\x07p\x07f\x07q\x07t\x07p\x07q\x07v\x07?\x07? \x07#\x07?"\x07@\x07?$\x07>\x07?&\x07\`(\x07@*\x07>,\x07-.\x07/0\x07,2\x0714\x07'6\x07}8\x07:\x07]<\x07_>\x07*@\x07+B\x07=D\x07?F\x07.H\x07AJ\x07<L\x07v\x07t\x07w\x07g\x07h\x07c\x07n\x07u\x07gN\x07p\x07w\x07n\x07nP_0\x070a1R			T	V	
\x07\x07^\x07^\x07^\x07$		\b
	\x07^\x07^\x07^\x07)	\bX	
c2c2c2	
c2c2c2c2c2c2	
c2c2c2c2c2c2c2c2Z\x071\x071
\v\x071\x07,\v\x07,\x071\b.\\	\f\b/^	\ra1\x072\`	b	d\b`,xe);fd([K,Ly],Wl.prototype,"vocabulary");fd([K],Wl.prototype,"grammarFileName");fd([K],Wl.prototype,"ruleNames");fd([K],Wl.prototype,"serializedATN");fd([K],Wl.prototype,"modeNames");let HO=Wl;var l1={},i3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(i3,"__esModule",{value:!0});var r3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(r3,"__esModule",{value:!0});var hm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var mn=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(hm,"__esModule",{value:!0});hm.ANTLRInputStream=void 0;const zO=Xi,gn=te,Hd=Ln;class Ur{constructor(e){this.p=0,this.data=e,this.n=e.length}reset(){this.p=0}consume(){if(this.p>=this.n)throw zO(this.LA(1)===Hd.IntStream.EOF),new Error("cannot consume EOF");this.p<this.n&&this.p++}LA(e){return e===0?0:e<0&&(e++,this.p+e-1<0)||this.p+e-1>=this.n?Hd.IntStream.EOF:this.data.charCodeAt(this.p+e-1)}LT(e){return this.LA(e)}get index(){return this.p}get size(){return this.n}mark(){return-1}release(e){}seek(e){if(e<=this.p){this.p=e;return}for(e=Math.min(e,this.n);this.p<e;)this.consume()}getText(e){let t=e.a,r=e.b;r>=this.n&&(r=this.n-1);let n=r-t+1;return t>=this.n?"":this.data.substr(t,n)}get sourceName(){return this.name?this.name:Hd.IntStream.UNKNOWN_SOURCE_NAME}toString(){return this.data}}mn([gn.Override],Ur.prototype,"consume",null);mn([gn.Override],Ur.prototype,"LA",null);mn([gn.Override],Ur.prototype,"index",null);mn([gn.Override],Ur.prototype,"size",null);mn([gn.Override],Ur.prototype,"mark",null);mn([gn.Override],Ur.prototype,"release",null);mn([gn.Override],Ur.prototype,"seek",null);mn([gn.Override],Ur.prototype,"getText",null);mn([gn.Override],Ur.prototype,"sourceName",null);mn([gn.Override],Ur.prototype,"toString",null);hm.ANTLRInputStream=Ur;var n3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(n3,"__esModule",{value:!0});var s3={};(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(i,"__esModule",{value:!0}),i.Dependents=void 0,function(e){e[e.SELF=0]="SELF",e[e.PARENTS=1]="PARENTS",e[e.CHILDREN=2]="CHILDREN",e[e.ANCESTORS=3]="ANCESTORS",e[e.DESCENDANTS=4]="DESCENDANTS",e[e.SIBLINGS=5]="SIBLINGS",e[e.PRECEEDING_SIBLINGS=6]="PRECEEDING_SIBLINGS",e[e.FOLLOWING_SIBLINGS=7]="FOLLOWING_SIBLINGS",e[e.PRECEEDING=8]="PRECEEDING",e[e.FOLLOWING=9]="FOLLOWING"}(i.Dependents||(i.Dependents={}))})(s3);var cm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var Gl=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},hr=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(cm,"__esModule",{value:!0});cm.DiagnosticErrorListener=void 0;const jO=Lr,Jt=te,Gg=ri;class wa{constructor(e=!0){this.exactOnly=e,this.exactOnly=e}syntaxError(e,t,r,n,s,o){}reportAmbiguity(e,t,r,n,s,o,a){if(this.exactOnly&&!s)return;let l=this.getDecisionDescription(e,t),c=this.getConflictingAlts(o,a),h=e.inputStream.getText(Gg.Interval.of(r,n)),u=`reportAmbiguity d=${l}: ambigAlts=${c}, input='${h}'`;e.notifyErrorListeners(u)}reportAttemptingFullContext(e,t,r,n,s,o){let a=this.getDecisionDescription(e,t),l=e.inputStream.getText(Gg.Interval.of(r,n)),c=`reportAttemptingFullContext d=${a}, input='${l}'`;e.notifyErrorListeners(c)}reportContextSensitivity(e,t,r,n,s,o){let a=this.getDecisionDescription(e,t),l=e.inputStream.getText(Gg.Interval.of(r,n)),c=`reportContextSensitivity d=${a}, input='${l}'`;e.notifyErrorListeners(c)}getDecisionDescription(e,t){let r=t.decision,n=t.atnStartState.ruleIndex,s=e.ruleNames;if(n<0||n>=s.length)return r.toString();let o=s[n];return o?`${r} (${o})`:r.toString()}getConflictingAlts(e,t){if(e!=null)return e;let r=new jO.BitSet;for(let n of t)r.set(n.alt);return r}}Gl([Jt.Override],wa.prototype,"syntaxError",null);Gl([Jt.Override,hr(0,Jt.NotNull),hr(1,Jt.NotNull),hr(6,Jt.NotNull)],wa.prototype,"reportAmbiguity",null);Gl([Jt.Override,hr(0,Jt.NotNull),hr(1,Jt.NotNull),hr(5,Jt.NotNull)],wa.prototype,"reportAttemptingFullContext",null);Gl([Jt.Override,hr(0,Jt.NotNull),hr(1,Jt.NotNull),hr(5,Jt.NotNull)],wa.prototype,"reportContextSensitivity",null);Gl([hr(0,Jt.NotNull),hr(1,Jt.NotNull)],wa.prototype,"getDecisionDescription",null);Gl([Jt.NotNull,hr(1,Jt.NotNull)],wa.prototype,"getConflictingAlts",null);cm.DiagnosticErrorListener=wa;var dm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var As=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$O=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(dm,"__esModule",{value:!0});dm.LexerInterpreter=void 0;const VO=xs(),WO=Fp(),o3=te,Yl=te;let rn=class extends VO.Lexer{constructor(e,t,r,n,s,o,a){if(super(a),o.grammarType!==0)throw new Error("IllegalArgumentException: The ATN must be a lexer ATN.");this._grammarFileName=e,this._atn=o,this._ruleNames=r.slice(0),this._channelNames=n.slice(0),this._modeNames=s.slice(0),this._vocabulary=t,this._interp=new WO.LexerATNSimulator(o,this)}get atn(){return this._atn}get grammarFileName(){return this._grammarFileName}get ruleNames(){return this._ruleNames}get channelNames(){return this._channelNames}get modeNames(){return this._modeNames}get vocabulary(){return this._vocabulary}};As([o3.NotNull],rn.prototype,"_vocabulary",void 0);As([Yl.Override],rn.prototype,"atn",null);As([Yl.Override],rn.prototype,"grammarFileName",null);As([Yl.Override],rn.prototype,"ruleNames",null);As([Yl.Override],rn.prototype,"channelNames",null);As([Yl.Override],rn.prototype,"modeNames",null);As([Yl.Override],rn.prototype,"vocabulary",null);rn=As([$O(1,o3.NotNull)],rn);dm.LexerInterpreter=rn;var a3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(a3,"__esModule",{value:!0});var fm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var GO=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(fm,"__esModule",{value:!0});fm.RuleContextWithAltNum=void 0;const YO=hn(),qO=te,XO=Fr();class l3 extends XO.ParserRuleContext{constructor(e,t){t!==void 0?super(e,t):super(),this._altNumber=YO.ATN.INVALID_ALT_NUMBER}get altNumber(){return this._altNumber}set altNumber(e){this._altNumber=e}}GO([qO.Override],l3.prototype,"altNumber",null);fm.RuleContextWithAltNum=l3;var pm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(pm,"__esModule",{value:!0});pm.RuleDependency=void 0;function ZO(i){return(e,t,r)=>{}}pm.RuleDependency=ZO;var mm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(mm,"__esModule",{value:!0});var ot=mm.RuleVersion=void 0;function QO(i){return(e,t,r)=>{}}ot=mm.RuleVersion=QO;var u3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(u3,"__esModule",{value:!0});var h3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(h3,"__esModule",{value:!0});var c3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(c3,"__esModule",{value:!0});var Dl={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var gm=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.RewriteOperation=Dl.TokenStreamRewriter=void 0;const Wb=ri,_m=te,d3=_t;class ni{constructor(e){this.tokens=e,this.programs=new Map,this.programs.set(ni.DEFAULT_PROGRAM_NAME,[]),this.lastRewriteTokenIndexes=new Map}getTokenStream(){return this.tokens}rollback(e,t=ni.DEFAULT_PROGRAM_NAME){let r=this.programs.get(t);r!=null&&this.programs.set(t,r.slice(ni.MIN_TOKEN_INDEX,e))}deleteProgram(e=ni.DEFAULT_PROGRAM_NAME){this.rollback(ni.MIN_TOKEN_INDEX,e)}insertAfter(e,t,r=ni.DEFAULT_PROGRAM_NAME){let n;typeof e=="number"?n=e:n=e.tokenIndex;let s=this.getProgram(r),o=new Gb(this.tokens,n,s.length,t);s.push(o)}insertBefore(e,t,r=ni.DEFAULT_PROGRAM_NAME){let n;typeof e=="number"?n=e:n=e.tokenIndex;let s=this.getProgram(r),o=new Bs(this.tokens,n,s.length,t);s.push(o)}replaceSingle(e,t){typeof e=="number"?this.replace(e,e,t):this.replace(e,e,t)}replace(e,t,r,n=ni.DEFAULT_PROGRAM_NAME){if(typeof e!="number"&&(e=e.tokenIndex),typeof t!="number"&&(t=t.tokenIndex),e>t||e<0||t<0||t>=this.tokens.size)throw new RangeError(`replace: range invalid: ${e}..${t}(size=${this.tokens.size})`);let s=this.getProgram(n),o=new ja(this.tokens,e,t,s.length,r);s.push(o)}delete(e,t,r=ni.DEFAULT_PROGRAM_NAME){t===void 0&&(t=e),typeof e=="number"?this.replace(e,t,"",r):this.replace(e,t,"",r)}getLastRewriteTokenIndex(e=ni.DEFAULT_PROGRAM_NAME){let t=this.lastRewriteTokenIndexes.get(e);return t??-1}setLastRewriteTokenIndex(e,t){this.lastRewriteTokenIndexes.set(e,t)}getProgram(e){let t=this.programs.get(e);return t==null&&(t=this.initializeProgram(e)),t}initializeProgram(e){let t=[];return this.programs.set(e,t),t}getText(e,t=ni.DEFAULT_PROGRAM_NAME){let r;e instanceof Wb.Interval?r=e:r=Wb.Interval.of(0,this.tokens.size-1),typeof e=="string"&&(t=e);let n=this.programs.get(t),s=r.a,o=r.b;if(o>this.tokens.size-1&&(o=this.tokens.size-1),s<0&&(s=0),n==null||n.length===0)return this.tokens.getText(r);let a=[],l=this.reduceToSingleOperationPerIndex(n),c=s;for(;c<=o&&c<this.tokens.size;){let h=l.get(c);l.delete(c);let u=this.tokens.get(c);h==null?(u.type!==d3.Token.EOF&&a.push(String(u.text)),c++):c=h.execute(a)}if(o===this.tokens.size-1)for(let h of l.values())h.index>=this.tokens.size-1&&a.push(h.text.toString());return a.join("")}reduceToSingleOperationPerIndex(e){for(let r=0;r<e.length;r++){let n=e[r];if(n==null||!(n instanceof ja))continue;let s=n,o=this.getKindOfOps(e,Bs,r);for(let l of o)l.index===s.index?(e[l.instructionIndex]=void 0,s.text=l.text.toString()+(s.text!=null?s.text.toString():"")):l.index>s.index&&l.index<=s.lastIndex&&(e[l.instructionIndex]=void 0);let a=this.getKindOfOps(e,ja,r);for(let l of a){if(l.index>=s.index&&l.lastIndex<=s.lastIndex){e[l.instructionIndex]=void 0;continue}let c=l.lastIndex<s.index||l.index>s.lastIndex;if(l.text==null&&s.text==null&&!c)e[l.instructionIndex]=void 0,s.index=Math.min(l.index,s.index),s.lastIndex=Math.max(l.lastIndex,s.lastIndex);else if(!c)throw new Error(`replace op boundaries of ${s} overlap with previous ${l}`)}}for(let r=0;r<e.length;r++){let n=e[r];if(n==null||!(n instanceof Bs))continue;let s=n,o=this.getKindOfOps(e,Bs,r);for(let l of o)l.index===s.index&&(l instanceof Gb?(s.text=this.catOpText(l.text,s.text),e[l.instructionIndex]=void 0):l instanceof Bs&&(s.text=this.catOpText(s.text,l.text),e[l.instructionIndex]=void 0));let a=this.getKindOfOps(e,ja,r);for(let l of a){if(s.index===l.index){l.text=this.catOpText(s.text,l.text),e[r]=void 0;continue}if(s.index>=l.index&&s.index<=l.lastIndex)throw new Error(`insert op ${s} within boundaries of previous ${l}`)}}let t=new Map;for(let r of e)if(r!=null){if(t.get(r.index)!=null)throw new Error("should only be one op per index");t.set(r.index,r)}return t}catOpText(e,t){let r="",n="";return e!=null&&(r=e.toString()),t!=null&&(n=t.toString()),r+n}getKindOfOps(e,t,r){let n=[];for(let s=0;s<r&&s<e.length;s++){let o=e[s];o!=null&&o instanceof t&&n.push(o)}return n}}Dl.TokenStreamRewriter=ni;ni.DEFAULT_PROGRAM_NAME="default";ni.PROGRAM_INIT_SIZE=100;ni.MIN_TOKEN_INDEX=0;class vm{constructor(e,t,r,n){this.tokens=e,this.instructionIndex=r,this.index=t,this.text=n===void 0?"":n}execute(e){return this.index}toString(){let e=this.constructor.name,t=e.indexOf("$");return e=e.substring(t+1,e.length),"<"+e+"@"+this.tokens.get(this.index)+':"'+this.text+'">'}}gm([_m.Override],vm.prototype,"toString",null);Dl.RewriteOperation=vm;class Bs extends vm{constructor(e,t,r,n){super(e,t,r,n)}execute(e){return e.push(this.text.toString()),this.tokens.get(this.index).type!==d3.Token.EOF&&e.push(String(this.tokens.get(this.index).text)),this.index+1}}gm([_m.Override],Bs.prototype,"execute",null);class Gb extends Bs{constructor(e,t,r,n){super(e,t+1,r,n)}}class ja extends vm{constructor(e,t,r,n,s){super(e,t,n,s),this.lastIndex=r}execute(e){return this.text!=null&&e.push(this.text.toString()),this.lastIndex+1}toString(){return this.text==null?"<DeleteOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+">":"<ReplaceOp@"+this.tokens.get(this.index)+".."+this.tokens.get(this.lastIndex)+':"'+this.text+'">'}}gm([_m.Override],ja.prototype,"execute",null);gm([_m.Override],ja.prototype,"toString",null);var f3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(f3,"__esModule",{value:!0});var p3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(p3,"__esModule",{value:!0});(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__createBinding||(Object.create?function(r,n,s,o){o===void 0&&(o=s),Object.defineProperty(r,o,{enumerable:!0,get:function(){return n[s]}})}:function(r,n,s,o){o===void 0&&(o=s),r[o]=n[s]}),t=P&&P.__exportStar||function(r,n){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,r,s)};Object.defineProperty(i,"__esModule",{value:!0}),t(i3,i),t(r3,i),t(hm,i),t(UA(),i),t(sd,i),t(n3,i),t(Zp,i),t(mx,i),t(nd,i),t(vs,i),t(Lp,i),t($l,i),t(Kc,i),t(hx(),i),t(s3,i),t(cm,i),t(jl,i),t(ya,i),t(jA(),i),t(Ln,i),t(xs(),i),t(dm,i),t(ga,i),t(od,i),t(em(),i),t(ld(),i),t(a3,i),t($A(),i),t(Fr(),i),t(Rl,i),t(id,i),t(un,i),t(gs,i),t(zA(),i),t(fm,i),t(pm,i),t(mm,i),t(_t,i),t(u3,i),t(h3,i),t(c3,i),t(Dl,i),t(f3,i),t(kn,i),t(p3,i)})(l1);var Ca=hn(),mh=em(),JO=ld(),ht=Fr(),eM=ud(),tM=Object.defineProperty,iM=Object.getOwnPropertyDescriptor,F=(i,e,t,r)=>{for(var n=iM(e,t),s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&tM(e,t,n),n};class pd extends ht.ParserRuleContext{block(){return this.getRuleContext(0,Ji)}EOF(){return this.getToken(we.EOF,0)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_script}enterRule(e){e.enterScript&&e.enterScript(this)}exitRule(e){e.exitScript&&e.exitScript(this)}accept(e){return e.visitScript?e.visitScript(this):e.visitChildren(this)}}F([K],pd.prototype,"ruleIndex");F([K],pd.prototype,"enterRule");F([K],pd.prototype,"exitRule");F([K],pd.prototype,"accept");class Ji extends ht.ParserRuleContext{statement(e){return e===void 0?this.getRuleContexts(Qo):this.getRuleContext(e,Qo)}functionDecl(e){return e===void 0?this.getRuleContexts(ea):this.getRuleContext(e,ea)}Return(){return this.tryGetToken(we.Return,0)}expression(){return this.tryGetRuleContext(0,pe)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_block}enterRule(e){e.enterBlock&&e.enterBlock(this)}exitRule(e){e.exitBlock&&e.exitBlock(this)}accept(e){return e.visitBlock?e.visitBlock(this):e.visitChildren(this)}}F([K],Ji.prototype,"ruleIndex");F([K],Ji.prototype,"enterRule");F([K],Ji.prototype,"exitRule");F([K],Ji.prototype,"accept");class Qo extends ht.ParserRuleContext{assignment(){return this.tryGetRuleContext(0,ql)}functionCall(){return this.tryGetRuleContext(0,md)}ifStatement(){return this.tryGetRuleContext(0,Xl)}forStatement(){return this.tryGetRuleContext(0,Jl)}whileStatement(){return this.tryGetRuleContext(0,eu)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_statement}enterRule(e){e.enterStatement&&e.enterStatement(this)}exitRule(e){e.exitStatement&&e.exitStatement(this)}accept(e){return e.visitStatement?e.visitStatement(this):e.visitChildren(this)}}F([K],Qo.prototype,"ruleIndex");F([K],Qo.prototype,"enterRule");F([K],Qo.prototype,"exitRule");F([K],Qo.prototype,"accept");class ql extends ht.ParserRuleContext{Identifier(){return this.getToken(we.Identifier,0)}expression(){return this.getRuleContext(0,pe)}indexes(){return this.tryGetRuleContext(0,_r)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_assignment}enterRule(e){e.enterAssignment&&e.enterAssignment(this)}exitRule(e){e.exitAssignment&&e.exitAssignment(this)}accept(e){return e.visitAssignment?e.visitAssignment(this):e.visitChildren(this)}}F([K],ql.prototype,"ruleIndex");F([K],ql.prototype,"enterRule");F([K],ql.prototype,"exitRule");F([K],ql.prototype,"accept");class md extends ht.ParserRuleContext{constructor(e,t){e!==void 0&&t!==void 0?super(e,t):super()}get ruleIndex(){return we.RULE_functionCall}copyFrom(e){super.copyFrom(e)}}F([K],md.prototype,"ruleIndex");class ym extends md{Identifier(e){return e===void 0?this.getTokens(we.Identifier):this.getToken(we.Identifier,e)}exprList(){return this.tryGetRuleContext(0,Ds)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterIdentifierFunctionCall&&e.enterIdentifierFunctionCall(this)}exitRule(e){e.exitIdentifierFunctionCall&&e.exitIdentifierFunctionCall(this)}accept(e){return e.visitIdentifierFunctionCall?e.visitIdentifierFunctionCall(this):e.visitChildren(this)}}F([K],ym.prototype,"enterRule");F([K],ym.prototype,"exitRule");F([K],ym.prototype,"accept");class Xl extends ht.ParserRuleContext{ifStat(){return this.getRuleContext(0,Zl)}End(){return this.getToken(we.End,0)}elseIfStat(e){return e===void 0?this.getRuleContexts(Jo):this.getRuleContext(e,Jo)}elseStat(){return this.tryGetRuleContext(0,Ql)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_ifStatement}enterRule(e){e.enterIfStatement&&e.enterIfStatement(this)}exitRule(e){e.exitIfStatement&&e.exitIfStatement(this)}accept(e){return e.visitIfStatement?e.visitIfStatement(this):e.visitChildren(this)}}F([K],Xl.prototype,"ruleIndex");F([K],Xl.prototype,"enterRule");F([K],Xl.prototype,"exitRule");F([K],Xl.prototype,"accept");class Zl extends ht.ParserRuleContext{If(){return this.getToken(we.If,0)}expression(){return this.getRuleContext(0,pe)}block(){return this.getRuleContext(0,Ji)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_ifStat}enterRule(e){e.enterIfStat&&e.enterIfStat(this)}exitRule(e){e.exitIfStat&&e.exitIfStat(this)}accept(e){return e.visitIfStat?e.visitIfStat(this):e.visitChildren(this)}}F([K],Zl.prototype,"ruleIndex");F([K],Zl.prototype,"enterRule");F([K],Zl.prototype,"exitRule");F([K],Zl.prototype,"accept");class Jo extends ht.ParserRuleContext{Else(){return this.getToken(we.Else,0)}If(){return this.getToken(we.If,0)}expression(){return this.getRuleContext(0,pe)}block(){return this.getRuleContext(0,Ji)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_elseIfStat}enterRule(e){e.enterElseIfStat&&e.enterElseIfStat(this)}exitRule(e){e.exitElseIfStat&&e.exitElseIfStat(this)}accept(e){return e.visitElseIfStat?e.visitElseIfStat(this):e.visitChildren(this)}}F([K],Jo.prototype,"ruleIndex");F([K],Jo.prototype,"enterRule");F([K],Jo.prototype,"exitRule");F([K],Jo.prototype,"accept");class Ql extends ht.ParserRuleContext{Else(){return this.getToken(we.Else,0)}block(){return this.getRuleContext(0,Ji)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_elseStat}enterRule(e){e.enterElseStat&&e.enterElseStat(this)}exitRule(e){e.exitElseStat&&e.exitElseStat(this)}accept(e){return e.visitElseStat?e.visitElseStat(this):e.visitChildren(this)}}F([K],Ql.prototype,"ruleIndex");F([K],Ql.prototype,"enterRule");F([K],Ql.prototype,"exitRule");F([K],Ql.prototype,"accept");class ea extends ht.ParserRuleContext{Def(){return this.getToken(we.Def,0)}Identifier(){return this.getToken(we.Identifier,0)}block(){return this.getRuleContext(0,Ji)}End(){return this.getToken(we.End,0)}idList(){return this.tryGetRuleContext(0,tu)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_functionDecl}enterRule(e){e.enterFunctionDecl&&e.enterFunctionDecl(this)}exitRule(e){e.exitFunctionDecl&&e.exitFunctionDecl(this)}accept(e){return e.visitFunctionDecl?e.visitFunctionDecl(this):e.visitChildren(this)}}F([K],ea.prototype,"ruleIndex");F([K],ea.prototype,"enterRule");F([K],ea.prototype,"exitRule");F([K],ea.prototype,"accept");class Jl extends ht.ParserRuleContext{For(){return this.getToken(we.For,0)}Identifier(e){return e===void 0?this.getTokens(we.Identifier):this.getToken(we.Identifier,e)}In(){return this.getToken(we.In,0)}block(){return this.getRuleContext(0,Ji)}End(){return this.getToken(we.End,0)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_forStatement}enterRule(e){e.enterForStatement&&e.enterForStatement(this)}exitRule(e){e.exitForStatement&&e.exitForStatement(this)}accept(e){return e.visitForStatement?e.visitForStatement(this):e.visitChildren(this)}}F([K],Jl.prototype,"ruleIndex");F([K],Jl.prototype,"enterRule");F([K],Jl.prototype,"exitRule");F([K],Jl.prototype,"accept");class eu extends ht.ParserRuleContext{While(){return this.getToken(we.While,0)}expression(){return this.getRuleContext(0,pe)}block(){return this.getRuleContext(0,Ji)}End(){return this.getToken(we.End,0)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_whileStatement}enterRule(e){e.enterWhileStatement&&e.enterWhileStatement(this)}exitRule(e){e.exitWhileStatement&&e.exitWhileStatement(this)}accept(e){return e.visitWhileStatement?e.visitWhileStatement(this):e.visitChildren(this)}}F([K],eu.prototype,"ruleIndex");F([K],eu.prototype,"enterRule");F([K],eu.prototype,"exitRule");F([K],eu.prototype,"accept");class tu extends ht.ParserRuleContext{Identifier(e){return e===void 0?this.getTokens(we.Identifier):this.getToken(we.Identifier,e)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_idList}enterRule(e){e.enterIdList&&e.enterIdList(this)}exitRule(e){e.exitIdList&&e.exitIdList(this)}accept(e){return e.visitIdList?e.visitIdList(this):e.visitChildren(this)}}F([K],tu.prototype,"ruleIndex");F([K],tu.prototype,"enterRule");F([K],tu.prototype,"exitRule");F([K],tu.prototype,"accept");class Ds extends ht.ParserRuleContext{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_exprList}enterRule(e){e.enterExprList&&e.enterExprList(this)}exitRule(e){e.exitExprList&&e.exitExprList(this)}accept(e){return e.visitExprList?e.visitExprList(this):e.visitChildren(this)}}F([K],Ds.prototype,"ruleIndex");F([K],Ds.prototype,"enterRule");F([K],Ds.prototype,"exitRule");F([K],Ds.prototype,"accept");class pe extends ht.ParserRuleContext{constructor(e,t){e!==void 0&&t!==void 0?super(e,t):super()}get ruleIndex(){return we.RULE_expression}copyFrom(e){super.copyFrom(e)}}F([K],pe.prototype,"ruleIndex");class xm extends pe{arrowFunction(){return this.getRuleContext(0,iu)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterArrowFunctionExpression&&e.enterArrowFunctionExpression(this)}exitRule(e){e.exitArrowFunctionExpression&&e.exitArrowFunctionExpression(this)}accept(e){return e.visitArrowFunctionExpression?e.visitArrowFunctionExpression(this):e.visitChildren(this)}}F([K],xm.prototype,"enterRule");F([K],xm.prototype,"exitRule");F([K],xm.prototype,"accept");class wm extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterGtExpression&&e.enterGtExpression(this)}exitRule(e){e.exitGtExpression&&e.exitGtExpression(this)}accept(e){return e.visitGtExpression?e.visitGtExpression(this):e.visitChildren(this)}}F([K],wm.prototype,"enterRule");F([K],wm.prototype,"exitRule");F([K],wm.prototype,"accept");class bm extends pe{NumberLiteral(){return this.getToken(we.NumberLiteral,0)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterNumberExpression&&e.enterNumberExpression(this)}exitRule(e){e.exitNumberExpression&&e.exitNumberExpression(this)}accept(e){return e.visitNumberExpression?e.visitNumberExpression(this):e.visitChildren(this)}}F([K],bm.prototype,"enterRule");F([K],bm.prototype,"exitRule");F([K],bm.prototype,"accept");class Sm extends pe{Identifier(){return this.getToken(we.Identifier,0)}indexes(){return this.tryGetRuleContext(0,_r)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterIdentifierExpression&&e.enterIdentifierExpression(this)}exitRule(e){e.exitIdentifierExpression&&e.exitIdentifierExpression(this)}accept(e){return e.visitIdentifierExpression?e.visitIdentifierExpression(this):e.visitChildren(this)}}F([K],Sm.prototype,"enterRule");F([K],Sm.prototype,"exitRule");F([K],Sm.prototype,"accept");class Em extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterModulusExpression&&e.enterModulusExpression(this)}exitRule(e){e.exitModulusExpression&&e.exitModulusExpression(this)}accept(e){return e.visitModulusExpression?e.visitModulusExpression(this):e.visitChildren(this)}}F([K],Em.prototype,"enterRule");F([K],Em.prototype,"exitRule");F([K],Em.prototype,"accept");class Am extends pe{Excl(){return this.getToken(we.Excl,0)}expression(){return this.getRuleContext(0,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterNotExpression&&e.enterNotExpression(this)}exitRule(e){e.exitNotExpression&&e.exitNotExpression(this)}accept(e){return e.visitNotExpression?e.visitNotExpression(this):e.visitChildren(this)}}F([K],Am.prototype,"enterRule");F([K],Am.prototype,"exitRule");F([K],Am.prototype,"accept");class Dm extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterMultiplyExpression&&e.enterMultiplyExpression(this)}exitRule(e){e.exitMultiplyExpression&&e.exitMultiplyExpression(this)}accept(e){return e.visitMultiplyExpression?e.visitMultiplyExpression(this):e.visitChildren(this)}}F([K],Dm.prototype,"enterRule");F([K],Dm.prototype,"exitRule");F([K],Dm.prototype,"accept");class Tm extends pe{IndicatorExpr(){return this.getToken(we.IndicatorExpr,0)}exprList(){return this.tryGetRuleContext(0,Ds)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterExprCallExpression&&e.enterExprCallExpression(this)}exitRule(e){e.exitExprCallExpression&&e.exitExprCallExpression(this)}accept(e){return e.visitExprCallExpression?e.visitExprCallExpression(this):e.visitChildren(this)}}F([K],Tm.prototype,"enterRule");F([K],Tm.prototype,"exitRule");F([K],Tm.prototype,"accept");class Cm extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterGtEqExpression&&e.enterGtEqExpression(this)}exitRule(e){e.exitGtEqExpression&&e.exitGtEqExpression(this)}accept(e){return e.visitGtEqExpression?e.visitGtEqExpression(this):e.visitChildren(this)}}F([K],Cm.prototype,"enterRule");F([K],Cm.prototype,"exitRule");F([K],Cm.prototype,"accept");class Pm extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}And(){return this.getToken(we.And,0)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterAndExpression&&e.enterAndExpression(this)}exitRule(e){e.exitAndExpression&&e.exitAndExpression(this)}accept(e){return e.visitAndExpression?e.visitAndExpression(this):e.visitChildren(this)}}F([K],Pm.prototype,"enterRule");F([K],Pm.prototype,"exitRule");F([K],Pm.prototype,"accept");class Im extends pe{StringLiteral(){return this.getToken(we.StringLiteral,0)}indexes(){return this.tryGetRuleContext(0,_r)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterStringExpression&&e.enterStringExpression(this)}exitRule(e){e.exitStringExpression&&e.exitStringExpression(this)}accept(e){return e.visitStringExpression?e.visitStringExpression(this):e.visitChildren(this)}}F([K],Im.prototype,"enterRule");F([K],Im.prototype,"exitRule");F([K],Im.prototype,"accept");class Om extends pe{expression(){return this.getRuleContext(0,pe)}indexes(){return this.tryGetRuleContext(0,_r)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterExpressionExpression&&e.enterExpressionExpression(this)}exitRule(e){e.exitExpressionExpression&&e.exitExpressionExpression(this)}accept(e){return e.visitExpressionExpression?e.visitExpressionExpression(this):e.visitChildren(this)}}F([K],Om.prototype,"enterRule");F([K],Om.prototype,"exitRule");F([K],Om.prototype,"accept");class Mm extends pe{NullLiteral(){return this.getToken(we.NullLiteral,0)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterNullExpression&&e.enterNullExpression(this)}exitRule(e){e.exitNullExpression&&e.exitNullExpression(this)}accept(e){return e.visitNullExpression?e.visitNullExpression(this):e.visitChildren(this)}}F([K],Mm.prototype,"enterRule");F([K],Mm.prototype,"exitRule");F([K],Mm.prototype,"accept");class Nm extends pe{functionCall(){return this.getRuleContext(0,md)}indexes(){return this.tryGetRuleContext(0,_r)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterFunctionCallExpression&&e.enterFunctionCallExpression(this)}exitRule(e){e.exitFunctionCallExpression&&e.exitFunctionCallExpression(this)}accept(e){return e.visitFunctionCallExpression?e.visitFunctionCallExpression(this):e.visitChildren(this)}}F([K],Nm.prototype,"enterRule");F([K],Nm.prototype,"exitRule");F([K],Nm.prototype,"accept");class Rm extends pe{list(){return this.getRuleContext(0,au)}indexes(){return this.tryGetRuleContext(0,_r)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterListExpression&&e.enterListExpression(this)}exitRule(e){e.exitListExpression&&e.exitListExpression(this)}accept(e){return e.visitListExpression?e.visitListExpression(this):e.visitChildren(this)}}F([K],Rm.prototype,"enterRule");F([K],Rm.prototype,"exitRule");F([K],Rm.prototype,"accept");class Lm extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterLtEqExpression&&e.enterLtEqExpression(this)}exitRule(e){e.exitLtEqExpression&&e.exitLtEqExpression(this)}accept(e){return e.visitLtEqExpression?e.visitLtEqExpression(this):e.visitChildren(this)}}F([K],Lm.prototype,"enterRule");F([K],Lm.prototype,"exitRule");F([K],Lm.prototype,"accept");class km extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterLtExpression&&e.enterLtExpression(this)}exitRule(e){e.exitLtExpression&&e.exitLtExpression(this)}accept(e){return e.visitLtExpression?e.visitLtExpression(this):e.visitChildren(this)}}F([K],km.prototype,"enterRule");F([K],km.prototype,"exitRule");F([K],km.prototype,"accept");class Bm extends pe{BoolLiteral(){return this.getToken(we.BoolLiteral,0)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterBoolExpression&&e.enterBoolExpression(this)}exitRule(e){e.exitBoolExpression&&e.exitBoolExpression(this)}accept(e){return e.visitBoolExpression?e.visitBoolExpression(this):e.visitChildren(this)}}F([K],Bm.prototype,"enterRule");F([K],Bm.prototype,"exitRule");F([K],Bm.prototype,"accept");class Fm extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterNotEqExpression&&e.enterNotEqExpression(this)}exitRule(e){e.exitNotEqExpression&&e.exitNotEqExpression(this)}accept(e){return e.visitNotEqExpression?e.visitNotEqExpression(this):e.visitChildren(this)}}F([K],Fm.prototype,"enterRule");F([K],Fm.prototype,"exitRule");F([K],Fm.prototype,"accept");class Um extends pe{objectLiteral(){return this.getRuleContext(0,lu)}indexes(){return this.tryGetRuleContext(0,_r)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterObjectLiteralExpression&&e.enterObjectLiteralExpression(this)}exitRule(e){e.exitObjectLiteralExpression&&e.exitObjectLiteralExpression(this)}accept(e){return e.visitObjectLiteralExpression?e.visitObjectLiteralExpression(this):e.visitChildren(this)}}F([K],Um.prototype,"enterRule");F([K],Um.prototype,"exitRule");F([K],Um.prototype,"accept");class Km extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterDivideExpression&&e.enterDivideExpression(this)}exitRule(e){e.exitDivideExpression&&e.exitDivideExpression(this)}accept(e){return e.visitDivideExpression?e.visitDivideExpression(this):e.visitChildren(this)}}F([K],Km.prototype,"enterRule");F([K],Km.prototype,"exitRule");F([K],Km.prototype,"accept");class Hm extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}Or(){return this.getToken(we.Or,0)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterOrExpression&&e.enterOrExpression(this)}exitRule(e){e.exitOrExpression&&e.exitOrExpression(this)}accept(e){return e.visitOrExpression?e.visitOrExpression(this):e.visitChildren(this)}}F([K],Hm.prototype,"enterRule");F([K],Hm.prototype,"exitRule");F([K],Hm.prototype,"accept");class zm extends pe{expression(){return this.getRuleContext(0,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterUnaryMinusExpression&&e.enterUnaryMinusExpression(this)}exitRule(e){e.exitUnaryMinusExpression&&e.exitUnaryMinusExpression(this)}accept(e){return e.visitUnaryMinusExpression?e.visitUnaryMinusExpression(this):e.visitChildren(this)}}F([K],zm.prototype,"enterRule");F([K],zm.prototype,"exitRule");F([K],zm.prototype,"accept");class jm extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterPowerExpression&&e.enterPowerExpression(this)}exitRule(e){e.exitPowerExpression&&e.exitPowerExpression(this)}accept(e){return e.visitPowerExpression?e.visitPowerExpression(this):e.visitChildren(this)}}F([K],jm.prototype,"enterRule");F([K],jm.prototype,"exitRule");F([K],jm.prototype,"accept");class $m extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterEqExpression&&e.enterEqExpression(this)}exitRule(e){e.exitEqExpression&&e.exitEqExpression(this)}accept(e){return e.visitEqExpression?e.visitEqExpression(this):e.visitChildren(this)}}F([K],$m.prototype,"enterRule");F([K],$m.prototype,"exitRule");F([K],$m.prototype,"accept");class Vm extends pe{HexColorLiteral(){return this.getToken(we.HexColorLiteral,0)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterHexColorExpression&&e.enterHexColorExpression(this)}exitRule(e){e.exitHexColorExpression&&e.exitHexColorExpression(this)}accept(e){return e.visitHexColorExpression?e.visitHexColorExpression(this):e.visitChildren(this)}}F([K],Vm.prototype,"enterRule");F([K],Vm.prototype,"exitRule");F([K],Vm.prototype,"accept");class Wm extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterAddExpression&&e.enterAddExpression(this)}exitRule(e){e.exitAddExpression&&e.exitAddExpression(this)}accept(e){return e.visitAddExpression?e.visitAddExpression(this):e.visitChildren(this)}}F([K],Wm.prototype,"enterRule");F([K],Wm.prototype,"exitRule");F([K],Wm.prototype,"accept");class Gm extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterSubtractExpression&&e.enterSubtractExpression(this)}exitRule(e){e.exitSubtractExpression&&e.exitSubtractExpression(this)}accept(e){return e.visitSubtractExpression?e.visitSubtractExpression(this):e.visitChildren(this)}}F([K],Gm.prototype,"enterRule");F([K],Gm.prototype,"exitRule");F([K],Gm.prototype,"accept");class Ym extends pe{expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e){super(),this.copyFrom(e)}enterRule(e){e.enterTernaryExpression&&e.enterTernaryExpression(this)}exitRule(e){e.exitTernaryExpression&&e.exitTernaryExpression(this)}accept(e){return e.visitTernaryExpression?e.visitTernaryExpression(this):e.visitChildren(this)}}F([K],Ym.prototype,"enterRule");F([K],Ym.prototype,"exitRule");F([K],Ym.prototype,"accept");class iu extends ht.ParserRuleContext{arrowParameters(){return this.getRuleContext(0,ru)}conciseBody(){return this.getRuleContext(0,ou)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_arrowFunction}enterRule(e){e.enterArrowFunction&&e.enterArrowFunction(this)}exitRule(e){e.exitArrowFunction&&e.exitArrowFunction(this)}accept(e){return e.visitArrowFunction?e.visitArrowFunction(this):e.visitChildren(this)}}F([K],iu.prototype,"ruleIndex");F([K],iu.prototype,"enterRule");F([K],iu.prototype,"exitRule");F([K],iu.prototype,"accept");class ru extends ht.ParserRuleContext{Identifier(){return this.tryGetToken(we.Identifier,0)}coverParenthesizedExpressionAndArrowParameterList(){return this.tryGetRuleContext(0,nu)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_arrowParameters}enterRule(e){e.enterArrowParameters&&e.enterArrowParameters(this)}exitRule(e){e.exitArrowParameters&&e.exitArrowParameters(this)}accept(e){return e.visitArrowParameters?e.visitArrowParameters(this):e.visitChildren(this)}}F([K],ru.prototype,"ruleIndex");F([K],ru.prototype,"enterRule");F([K],ru.prototype,"exitRule");F([K],ru.prototype,"accept");class nu extends ht.ParserRuleContext{bindingPropertyList(){return this.tryGetRuleContext(0,su)}Comma(){return this.tryGetToken(we.Comma,0)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_coverParenthesizedExpressionAndArrowParameterList}enterRule(e){e.enterCoverParenthesizedExpressionAndArrowParameterList&&e.enterCoverParenthesizedExpressionAndArrowParameterList(this)}exitRule(e){e.exitCoverParenthesizedExpressionAndArrowParameterList&&e.exitCoverParenthesizedExpressionAndArrowParameterList(this)}accept(e){return e.visitCoverParenthesizedExpressionAndArrowParameterList?e.visitCoverParenthesizedExpressionAndArrowParameterList(this):e.visitChildren(this)}}F([K],nu.prototype,"ruleIndex");F([K],nu.prototype,"enterRule");F([K],nu.prototype,"exitRule");F([K],nu.prototype,"accept");class su extends ht.ParserRuleContext{Identifier(e){return e===void 0?this.getTokens(we.Identifier):this.getToken(we.Identifier,e)}Comma(e){return e===void 0?this.getTokens(we.Comma):this.getToken(we.Comma,e)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_bindingPropertyList}enterRule(e){e.enterBindingPropertyList&&e.enterBindingPropertyList(this)}exitRule(e){e.exitBindingPropertyList&&e.exitBindingPropertyList(this)}accept(e){return e.visitBindingPropertyList?e.visitBindingPropertyList(this):e.visitChildren(this)}}F([K],su.prototype,"ruleIndex");F([K],su.prototype,"enterRule");F([K],su.prototype,"exitRule");F([K],su.prototype,"accept");class ou extends ht.ParserRuleContext{block(){return this.tryGetRuleContext(0,Ji)}expression(){return this.tryGetRuleContext(0,pe)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_conciseBody}enterRule(e){e.enterConciseBody&&e.enterConciseBody(this)}exitRule(e){e.exitConciseBody&&e.exitConciseBody(this)}accept(e){return e.visitConciseBody?e.visitConciseBody(this):e.visitChildren(this)}}F([K],ou.prototype,"ruleIndex");F([K],ou.prototype,"enterRule");F([K],ou.prototype,"exitRule");F([K],ou.prototype,"accept");class au extends ht.ParserRuleContext{exprList(){return this.tryGetRuleContext(0,Ds)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_list}enterRule(e){e.enterList&&e.enterList(this)}exitRule(e){e.exitList&&e.exitList(this)}accept(e){return e.visitList?e.visitList(this):e.visitChildren(this)}}F([K],au.prototype,"ruleIndex");F([K],au.prototype,"enterRule");F([K],au.prototype,"exitRule");F([K],au.prototype,"accept");class _r extends ht.ParserRuleContext{property(e){return e===void 0?this.getRuleContexts(ta):this.getRuleContext(e,ta)}expression(e){return e===void 0?this.getRuleContexts(pe):this.getRuleContext(e,pe)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_indexes}enterRule(e){e.enterIndexes&&e.enterIndexes(this)}exitRule(e){e.exitIndexes&&e.exitIndexes(this)}accept(e){return e.visitIndexes?e.visitIndexes(this):e.visitChildren(this)}}F([K],_r.prototype,"ruleIndex");F([K],_r.prototype,"enterRule");F([K],_r.prototype,"exitRule");F([K],_r.prototype,"accept");class ta extends ht.ParserRuleContext{Identifier(){return this.getToken(we.Identifier,0)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_property}enterRule(e){e.enterProperty&&e.enterProperty(this)}exitRule(e){e.exitProperty&&e.exitProperty(this)}accept(e){return e.visitProperty?e.visitProperty(this):e.visitChildren(this)}}F([K],ta.prototype,"ruleIndex");F([K],ta.prototype,"enterRule");F([K],ta.prototype,"exitRule");F([K],ta.prototype,"accept");class lu extends ht.ParserRuleContext{propertyDefinitionList(){return this.tryGetRuleContext(0,uu)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_objectLiteral}enterRule(e){e.enterObjectLiteral&&e.enterObjectLiteral(this)}exitRule(e){e.exitObjectLiteral&&e.exitObjectLiteral(this)}accept(e){return e.visitObjectLiteral?e.visitObjectLiteral(this):e.visitChildren(this)}}F([K],lu.prototype,"ruleIndex");F([K],lu.prototype,"enterRule");F([K],lu.prototype,"exitRule");F([K],lu.prototype,"accept");class uu extends ht.ParserRuleContext{propertyDefinition(e){return e===void 0?this.getRuleContexts(ia):this.getRuleContext(e,ia)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_propertyDefinitionList}enterRule(e){e.enterPropertyDefinitionList&&e.enterPropertyDefinitionList(this)}exitRule(e){e.exitPropertyDefinitionList&&e.exitPropertyDefinitionList(this)}accept(e){return e.visitPropertyDefinitionList?e.visitPropertyDefinitionList(this):e.visitChildren(this)}}F([K],uu.prototype,"ruleIndex");F([K],uu.prototype,"enterRule");F([K],uu.prototype,"exitRule");F([K],uu.prototype,"accept");class ia extends ht.ParserRuleContext{Identifier(){return this.getToken(we.Identifier,0)}expression(){return this.tryGetRuleContext(0,pe)}constructor(e,t){super(e,t)}get ruleIndex(){return we.RULE_propertyDefinition}enterRule(e){e.enterPropertyDefinition&&e.enterPropertyDefinition(this)}exitRule(e){e.exitPropertyDefinition&&e.exitPropertyDefinition(this)}accept(e){return e.visitPropertyDefinition?e.visitPropertyDefinition(this):e.visitChildren(this)}}F([K],ia.prototype,"ruleIndex");F([K],ia.prototype,"enterRule");F([K],ia.prototype,"exitRule");F([K],ia.prototype,"accept");var N;const et=(N=class extends JO.Parser{get vocabulary(){return N.VOCABULARY}get grammarFileName(){return"Finscript.g4"}get ruleNames(){return N.ruleNames}get serializedATN(){return N._serializedATN}constructor(e){super(e),this._interp=new eM.ParserATNSimulator(N._ATN,this)}script(){let e=new pd(this._ctx,this.state);this.enterRule(e,0,N.RULE_script);try{this.enterOuterAlt(e,1),this.state=52,this.block(),this.state=53,this.match(N.EOF)}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}block(){let e=new Ji(this._ctx,this.state);this.enterRule(e,2,N.RULE_block);let t;try{this.enterOuterAlt(e,1);{for(this.state=59,this._errHandler.sync(this),t=this._input.LA(1);!(t&-32)&&1<<t&(1<<N.Def|1<<N.If|1<<N.For|1<<N.While)||t===N.Identifier;){switch(this.state=57,this._errHandler.sync(this),this._input.LA(1)){case N.If:case N.For:case N.While:case N.Identifier:this.state=55,this.statement();break;case N.Def:this.state=56,this.functionDecl();break;default:throw new mh.NoViableAltException(this)}this.state=61,this._errHandler.sync(this),t=this._input.LA(1)}this.state=64,this._errHandler.sync(this),t=this._input.LA(1),t===N.Return&&(this.state=62,this.match(N.Return),this.state=63,this.expression(0))}}catch(r){if(r instanceof rt)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}statement(){let e=new Qo(this._ctx,this.state);this.enterRule(e,4,N.RULE_statement);try{switch(this.state=71,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,3,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=66,this.assignment();break;case 2:this.enterOuterAlt(e,2),this.state=67,this.functionCall();break;case 3:this.enterOuterAlt(e,3),this.state=68,this.ifStatement();break;case 4:this.enterOuterAlt(e,4),this.state=69,this.forStatement();break;case 5:this.enterOuterAlt(e,5),this.state=70,this.whileStatement();break}}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}assignment(){let e=new ql(this._ctx,this.state);this.enterRule(e,6,N.RULE_assignment);let t;try{this.enterOuterAlt(e,1),this.state=73,this.match(N.Identifier),this.state=75,this._errHandler.sync(this),t=this._input.LA(1),(t===N.T__0||t===N.OBracket)&&(this.state=74,this.indexes()),this.state=77,this.match(N.Assign),this.state=78,this.expression(0)}catch(r){if(r instanceof rt)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}functionCall(){let e=new md(this._ctx,this.state);this.enterRule(e,8,N.RULE_functionCall);let t;try{e=new ym(e),this.enterOuterAlt(e,1);{for(this.state=80,this.match(N.Identifier),this.state=85,this._errHandler.sync(this),t=this._input.LA(1);t===N.T__0;)this.state=81,this.match(N.T__0),this.state=82,this.match(N.Identifier),this.state=87,this._errHandler.sync(this),t=this._input.LA(1);this.state=88,this.match(N.OParen),this.state=90,this._errHandler.sync(this),t=this._input.LA(1),!(t-14&-32)&&1<<t-14&(1<<N.Excl-14|1<<N.Subtract-14|1<<N.OBrace-14|1<<N.OBracket-14|1<<N.OParen-14|1<<N.BoolLiteral-14|1<<N.NullLiteral-14|1<<N.NumberLiteral-14|1<<N.Identifier-14|1<<N.IndicatorExpr-14|1<<N.StringLiteral-14|1<<N.HexColorLiteral-14)&&(this.state=89,this.exprList()),this.state=92,this.match(N.CParen)}}catch(r){if(r instanceof rt)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}ifStatement(){let e=new Xl(this._ctx,this.state);this.enterRule(e,10,N.RULE_ifStatement);let t;try{let r;this.enterOuterAlt(e,1);{for(this.state=94,this.ifStat(),this.state=98,this._errHandler.sync(this),r=this.interpreter.adaptivePredict(this._input,7,this._ctx);r!==2&&r!==Ca.ATN.INVALID_ALT_NUMBER;)r===1&&(this.state=95,this.elseIfStat()),this.state=100,this._errHandler.sync(this),r=this.interpreter.adaptivePredict(this._input,7,this._ctx);this.state=102,this._errHandler.sync(this),t=this._input.LA(1),t===N.Else&&(this.state=101,this.elseStat()),this.state=104,this.match(N.End)}}catch(r){if(r instanceof rt)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}ifStat(){let e=new Zl(this._ctx,this.state);this.enterRule(e,12,N.RULE_ifStat);try{this.enterOuterAlt(e,1),this.state=106,this.match(N.If),this.state=107,this.expression(0),this.state=108,this.match(N.Colon),this.state=109,this.block()}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}elseIfStat(){let e=new Jo(this._ctx,this.state);this.enterRule(e,14,N.RULE_elseIfStat);try{this.enterOuterAlt(e,1),this.state=111,this.match(N.Else),this.state=112,this.match(N.If),this.state=113,this.expression(0),this.state=114,this.match(N.Colon),this.state=115,this.block()}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}elseStat(){let e=new Ql(this._ctx,this.state);this.enterRule(e,16,N.RULE_elseStat);try{this.enterOuterAlt(e,1),this.state=117,this.match(N.Else),this.state=118,this.match(N.Colon),this.state=119,this.block()}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}functionDecl(){let e=new ea(this._ctx,this.state);this.enterRule(e,18,N.RULE_functionDecl);let t;try{this.enterOuterAlt(e,1),this.state=121,this.match(N.Def),this.state=122,this.match(N.Identifier),this.state=123,this.match(N.OParen),this.state=125,this._errHandler.sync(this),t=this._input.LA(1),t===N.Identifier&&(this.state=124,this.idList()),this.state=127,this.match(N.CParen),this.state=128,this.match(N.Colon),this.state=129,this.block(),this.state=130,this.match(N.End)}catch(r){if(r instanceof rt)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}forStatement(){let e=new Jl(this._ctx,this.state);this.enterRule(e,20,N.RULE_forStatement);try{this.enterOuterAlt(e,1),this.state=132,this.match(N.For),this.state=133,this.match(N.Identifier),this.state=134,this.match(N.In),this.state=135,this.match(N.Identifier),this.state=136,this.match(N.Colon),this.state=137,this.block(),this.state=138,this.match(N.End)}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}whileStatement(){let e=new eu(this._ctx,this.state);this.enterRule(e,22,N.RULE_whileStatement);try{this.enterOuterAlt(e,1),this.state=140,this.match(N.While),this.state=141,this.expression(0),this.state=142,this.match(N.Colon),this.state=143,this.block(),this.state=144,this.match(N.End)}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}idList(){let e=new tu(this._ctx,this.state);this.enterRule(e,24,N.RULE_idList);let t;try{for(this.enterOuterAlt(e,1),this.state=146,this.match(N.Identifier),this.state=151,this._errHandler.sync(this),t=this._input.LA(1);t===N.Comma;)this.state=147,this.match(N.Comma),this.state=148,this.match(N.Identifier),this.state=153,this._errHandler.sync(this),t=this._input.LA(1)}catch(r){if(r instanceof rt)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}exprList(){let e=new Ds(this._ctx,this.state);this.enterRule(e,26,N.RULE_exprList);let t;try{for(this.enterOuterAlt(e,1),this.state=154,this.expression(0),this.state=159,this._errHandler.sync(this),t=this._input.LA(1);t===N.Comma;)this.state=155,this.match(N.Comma),this.state=156,this.expression(0),this.state=161,this._errHandler.sync(this),t=this._input.LA(1)}catch(r){if(r instanceof rt)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}expression(e){e===void 0&&(e=0);let t=this._ctx,r=this.state,n=new pe(this._ctx,r),s=n,o=28;this.enterRecursionRule(n,28,N.RULE_expression,e);let a;try{let l;this.enterOuterAlt(n,1);{switch(this.state=206,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,20,this._ctx)){case 1:n=new zm(n),this._ctx=n,s=n,this.state=163,this.match(N.Subtract),this.state=164,this.expression(29);break;case 2:n=new xm(n),this._ctx=n,s=n,this.state=165,this.arrowFunction();break;case 3:n=new Am(n),this._ctx=n,s=n,this.state=166,this.match(N.Excl),this.state=167,this.expression(27);break;case 4:n=new bm(n),this._ctx=n,s=n,this.state=168,this.match(N.NumberLiteral);break;case 5:n=new Bm(n),this._ctx=n,s=n,this.state=169,this.match(N.BoolLiteral);break;case 6:n=new Mm(n),this._ctx=n,s=n,this.state=170,this.match(N.NullLiteral);break;case 7:n=new Vm(n),this._ctx=n,s=n,this.state=171,this.match(N.HexColorLiteral);break;case 8:switch(n=new Tm(n),this._ctx=n,s=n,this.state=172,this.match(N.IndicatorExpr),this.state=178,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,13,this._ctx)){case 1:this.state=173,this.match(N.OParen),this.state=175,this._errHandler.sync(this),a=this._input.LA(1),!(a-14&-32)&&1<<a-14&(1<<N.Excl-14|1<<N.Subtract-14|1<<N.OBrace-14|1<<N.OBracket-14|1<<N.OParen-14|1<<N.BoolLiteral-14|1<<N.NullLiteral-14|1<<N.NumberLiteral-14|1<<N.Identifier-14|1<<N.IndicatorExpr-14|1<<N.StringLiteral-14|1<<N.HexColorLiteral-14)&&(this.state=174,this.exprList()),this.state=177,this.match(N.CParen);break}break;case 9:switch(n=new Nm(n),this._ctx=n,s=n,this.state=180,this.functionCall(),this.state=182,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,14,this._ctx)){case 1:this.state=181,this.indexes();break}break;case 10:switch(n=new Rm(n),this._ctx=n,s=n,this.state=184,this.list(),this.state=186,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,15,this._ctx)){case 1:this.state=185,this.indexes();break}break;case 11:switch(n=new Sm(n),this._ctx=n,s=n,this.state=188,this.match(N.Identifier),this.state=190,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,16,this._ctx)){case 1:this.state=189,this.indexes();break}break;case 12:switch(n=new Im(n),this._ctx=n,s=n,this.state=192,this.match(N.StringLiteral),this.state=194,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,17,this._ctx)){case 1:this.state=193,this.indexes();break}break;case 13:switch(n=new Um(n),this._ctx=n,s=n,this.state=196,this.objectLiteral(),this.state=198,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,18,this._ctx)){case 1:this.state=197,this.indexes();break}break;case 14:switch(n=new Om(n),this._ctx=n,s=n,this.state=200,this.match(N.OParen),this.state=201,this.expression(0),this.state=202,this.match(N.CParen),this.state=204,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,19,this._ctx)){case 1:this.state=203,this.indexes();break}break}for(this._ctx._stop=this._input.tryLT(-1),this.state=258,this._errHandler.sync(this),l=this.interpreter.adaptivePredict(this._input,22,this._ctx);l!==2&&l!==Ca.ATN.INVALID_ALT_NUMBER;){if(l===1)switch(this._parseListeners!=null&&this.triggerExitRuleEvent(),s=n,this.state=256,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,21,this._ctx)){case 1:{if(n=new jm(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=208,!this.precpred(this._ctx,26))throw new Zt(this,"this.precpred(this._ctx, 26)");this.state=209,this.match(N.Pow),this.state=210,this.expression(27)}break;case 2:{if(n=new Dm(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=211,!this.precpred(this._ctx,25))throw new Zt(this,"this.precpred(this._ctx, 25)");this.state=212,this.match(N.Multiply),this.state=213,this.expression(26)}break;case 3:{if(n=new Km(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=214,!this.precpred(this._ctx,24))throw new Zt(this,"this.precpred(this._ctx, 24)");this.state=215,this.match(N.Divide),this.state=216,this.expression(25)}break;case 4:{if(n=new Em(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=217,!this.precpred(this._ctx,23))throw new Zt(this,"this.precpred(this._ctx, 23)");this.state=218,this.match(N.Modulus),this.state=219,this.expression(24)}break;case 5:{if(n=new Wm(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=220,!this.precpred(this._ctx,22))throw new Zt(this,"this.precpred(this._ctx, 22)");this.state=221,this.match(N.Add),this.state=222,this.expression(23)}break;case 6:{if(n=new Gm(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=223,!this.precpred(this._ctx,21))throw new Zt(this,"this.precpred(this._ctx, 21)");this.state=224,this.match(N.Subtract),this.state=225,this.expression(22)}break;case 7:{if(n=new Cm(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=226,!this.precpred(this._ctx,20))throw new Zt(this,"this.precpred(this._ctx, 20)");this.state=227,this.match(N.GTEquals),this.state=228,this.expression(21)}break;case 8:{if(n=new Lm(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=229,!this.precpred(this._ctx,19))throw new Zt(this,"this.precpred(this._ctx, 19)");this.state=230,this.match(N.LTEquals),this.state=231,this.expression(20)}break;case 9:{if(n=new wm(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=232,!this.precpred(this._ctx,18))throw new Zt(this,"this.precpred(this._ctx, 18)");this.state=233,this.match(N.GT),this.state=234,this.expression(19)}break;case 10:{if(n=new km(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=235,!this.precpred(this._ctx,17))throw new Zt(this,"this.precpred(this._ctx, 17)");this.state=236,this.match(N.LT),this.state=237,this.expression(18)}break;case 11:{if(n=new $m(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=238,!this.precpred(this._ctx,16))throw new Zt(this,"this.precpred(this._ctx, 16)");this.state=239,this.match(N.Equals),this.state=240,this.expression(17)}break;case 12:{if(n=new Fm(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=241,!this.precpred(this._ctx,15))throw new Zt(this,"this.precpred(this._ctx, 15)");this.state=242,this.match(N.NEquals),this.state=243,this.expression(16)}break;case 13:{if(n=new Pm(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=244,!this.precpred(this._ctx,14))throw new Zt(this,"this.precpred(this._ctx, 14)");this.state=245,this.match(N.And),this.state=246,this.expression(15)}break;case 14:{if(n=new Hm(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=247,!this.precpred(this._ctx,13))throw new Zt(this,"this.precpred(this._ctx, 13)");this.state=248,this.match(N.Or),this.state=249,this.expression(14)}break;case 15:{if(n=new Ym(new pe(t,r)),this.pushNewRecursionContext(n,o,N.RULE_expression),this.state=250,!this.precpred(this._ctx,12))throw new Zt(this,"this.precpred(this._ctx, 12)");this.state=251,this.match(N.QMark),this.state=252,this.expression(0),this.state=253,this.match(N.Colon),this.state=254,this.expression(13)}break}this.state=260,this._errHandler.sync(this),l=this.interpreter.adaptivePredict(this._input,22,this._ctx)}}}catch(l){if(l instanceof rt)n.exception=l,this._errHandler.reportError(this,l),this._errHandler.recover(this,l);else throw l}finally{this.unrollRecursionContexts(t)}return n}arrowFunction(){let e=new iu(this._ctx,this.state);this.enterRule(e,30,N.RULE_arrowFunction);try{this.enterOuterAlt(e,1),this.state=261,this.arrowParameters(),this.state=262,this.match(N.T__1),this.state=263,this.conciseBody()}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}arrowParameters(){let e=new ru(this._ctx,this.state);this.enterRule(e,32,N.RULE_arrowParameters);try{switch(this.state=267,this._errHandler.sync(this),this._input.LA(1)){case N.Identifier:this.enterOuterAlt(e,1),this.state=265,this.match(N.Identifier);break;case N.OParen:this.enterOuterAlt(e,2),this.state=266,this.coverParenthesizedExpressionAndArrowParameterList();break;default:throw new mh.NoViableAltException(this)}}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}coverParenthesizedExpressionAndArrowParameterList(){let e=new nu(this._ctx,this.state);this.enterRule(e,34,N.RULE_coverParenthesizedExpressionAndArrowParameterList);try{switch(this.state=280,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,24,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=269,this.match(N.OParen),this.state=270,this.match(N.CParen);break;case 2:this.enterOuterAlt(e,2),this.state=271,this.match(N.OParen),this.state=272,this.bindingPropertyList(),this.state=273,this.match(N.CParen);break;case 3:this.enterOuterAlt(e,3),this.state=275,this.match(N.OParen),this.state=276,this.bindingPropertyList(),this.state=277,this.match(N.Comma),this.state=278,this.match(N.CParen);break}}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}bindingPropertyList(){let e=new su(this._ctx,this.state);this.enterRule(e,36,N.RULE_bindingPropertyList);try{let t;for(this.enterOuterAlt(e,1),this.state=282,this.match(N.Identifier),this.state=287,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,25,this._ctx);t!==2&&t!==Ca.ATN.INVALID_ALT_NUMBER;)t===1&&(this.state=283,this.match(N.Comma),this.state=284,this.match(N.Identifier)),this.state=289,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,25,this._ctx)}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}conciseBody(){let e=new ou(this._ctx,this.state);this.enterRule(e,38,N.RULE_conciseBody);try{switch(this.state=296,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,26,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=290,this.match(N.OBrace),this.state=291,this.block(),this.state=292,this.match(N.CBrace);break;case 2:this.enterOuterAlt(e,2);{if(this.state=294,this._input.LT(1).text=="{")throw new Zt(this," this._input.LT(1).text != '{' ");this.state=295,this.expression(0)}break}}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}list(){let e=new au(this._ctx,this.state);this.enterRule(e,40,N.RULE_list);let t;try{this.enterOuterAlt(e,1),this.state=298,this.match(N.OBracket),this.state=300,this._errHandler.sync(this),t=this._input.LA(1),!(t-14&-32)&&1<<t-14&(1<<N.Excl-14|1<<N.Subtract-14|1<<N.OBrace-14|1<<N.OBracket-14|1<<N.OParen-14|1<<N.BoolLiteral-14|1<<N.NullLiteral-14|1<<N.NumberLiteral-14|1<<N.Identifier-14|1<<N.IndicatorExpr-14|1<<N.StringLiteral-14|1<<N.HexColorLiteral-14)&&(this.state=299,this.exprList()),this.state=302,this.match(N.CBracket)}catch(r){if(r instanceof rt)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}indexes(){let e=new _r(this._ctx,this.state);this.enterRule(e,42,N.RULE_indexes);try{let t;switch(this.state=318,this._errHandler.sync(this),this._input.LA(1)){case N.T__0:this.enterOuterAlt(e,1);{this.state=306,this._errHandler.sync(this),t=1;do{switch(t){case 1:this.state=304,this.match(N.T__0),this.state=305,this.property();break;default:throw new mh.NoViableAltException(this)}this.state=308,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,28,this._ctx)}while(t!==2&&t!==Ca.ATN.INVALID_ALT_NUMBER)}break;case N.OBracket:this.enterOuterAlt(e,2);{this.state=314,this._errHandler.sync(this),t=1;do{switch(t){case 1:this.state=310,this.match(N.OBracket),this.state=311,this.expression(0),this.state=312,this.match(N.CBracket);break;default:throw new mh.NoViableAltException(this)}this.state=316,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,29,this._ctx)}while(t!==2&&t!==Ca.ATN.INVALID_ALT_NUMBER)}break;default:throw new mh.NoViableAltException(this)}}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}property(){let e=new ta(this._ctx,this.state);this.enterRule(e,44,N.RULE_property);try{this.enterOuterAlt(e,1),this.state=320,this.match(N.Identifier)}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}objectLiteral(){let e=new lu(this._ctx,this.state);this.enterRule(e,46,N.RULE_objectLiteral);try{switch(this.state=333,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,31,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=322,this.match(N.OBrace),this.state=323,this.match(N.CBrace);break;case 2:this.enterOuterAlt(e,2),this.state=324,this.match(N.OBrace),this.state=325,this.propertyDefinitionList(),this.state=326,this.match(N.CBrace);break;case 3:this.enterOuterAlt(e,3),this.state=328,this.match(N.OBrace),this.state=329,this.propertyDefinitionList(),this.state=330,this.match(N.Comma),this.state=331,this.match(N.CBrace);break}}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}propertyDefinitionList(){let e=new uu(this._ctx,this.state);this.enterRule(e,48,N.RULE_propertyDefinitionList);try{let t;for(this.enterOuterAlt(e,1),this.state=335,this.propertyDefinition(),this.state=340,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,32,this._ctx);t!==2&&t!==Ca.ATN.INVALID_ALT_NUMBER;)t===1&&(this.state=336,this.match(N.Comma),this.state=337,this.propertyDefinition()),this.state=342,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,32,this._ctx)}catch(t){if(t instanceof rt)e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t);else throw t}finally{this.exitRule()}return e}propertyDefinition(){let e=new ia(this._ctx,this.state);this.enterRule(e,50,N.RULE_propertyDefinition);let t;try{this.enterOuterAlt(e,1),this.state=343,this.match(N.Identifier),this.state=346,this._errHandler.sync(this),t=this._input.LA(1),t===N.Colon&&(this.state=344,this.match(N.Colon),this.state=345,this.expression(0))}catch(r){if(r instanceof rt)e.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return e}sempred(e,t,r){switch(t){case 14:return this.expression_sempred(e,r);case 19:return this.conciseBody_sempred(e,r)}return!0}expression_sempred(e,t){switch(t){case 0:return this.precpred(this._ctx,26);case 1:return this.precpred(this._ctx,25);case 2:return this.precpred(this._ctx,24);case 3:return this.precpred(this._ctx,23);case 4:return this.precpred(this._ctx,22);case 5:return this.precpred(this._ctx,21);case 6:return this.precpred(this._ctx,20);case 7:return this.precpred(this._ctx,19);case 8:return this.precpred(this._ctx,18);case 9:return this.precpred(this._ctx,17);case 10:return this.precpred(this._ctx,16);case 11:return this.precpred(this._ctx,15);case 12:return this.precpred(this._ctx,14);case 13:return this.precpred(this._ctx,13);case 14:return this.precpred(this._ctx,12)}return!0}conciseBody_sempred(e,t){switch(t){case 15:return this._input.LT(1).text!="{"}return!0}static get _ATN(){return N.__ATN||(N.__ATN=new t3.ATNDeserializer().deserialize(ex(N._serializedATN))),N.__ATN}},N.T__0=1,N.T__1=2,N.Def=3,N.If=4,N.Else=5,N.Return=6,N.For=7,N.While=8,N.To=9,N.End=10,N.In=11,N.And=12,N.Or=13,N.Excl=14,N.Equals=15,N.NEquals=16,N.GTEquals=17,N.LTEquals=18,N.Pow=19,N.GT=20,N.LT=21,N.Add=22,N.Subtract=23,N.Multiply=24,N.Divide=25,N.Modulus=26,N.OBrace=27,N.CBrace=28,N.OBracket=29,N.CBracket=30,N.OParen=31,N.CParen=32,N.SColon=33,N.Assign=34,N.Comma=35,N.QMark=36,N.Colon=37,N.BoolLiteral=38,N.NullLiteral=39,N.NumberLiteral=40,N.Identifier=41,N.IndicatorExpr=42,N.StringLiteral=43,N.HexColorLiteral=44,N.Comment=45,N.Space=46,N.RULE_script=0,N.RULE_block=1,N.RULE_statement=2,N.RULE_assignment=3,N.RULE_functionCall=4,N.RULE_ifStatement=5,N.RULE_ifStat=6,N.RULE_elseIfStat=7,N.RULE_elseStat=8,N.RULE_functionDecl=9,N.RULE_forStatement=10,N.RULE_whileStatement=11,N.RULE_idList=12,N.RULE_exprList=13,N.RULE_expression=14,N.RULE_arrowFunction=15,N.RULE_arrowParameters=16,N.RULE_coverParenthesizedExpressionAndArrowParameterList=17,N.RULE_bindingPropertyList=18,N.RULE_conciseBody=19,N.RULE_list=20,N.RULE_indexes=21,N.RULE_property=22,N.RULE_objectLiteral=23,N.RULE_propertyDefinitionList=24,N.RULE_propertyDefinition=25,N.ruleNames=["script","block","statement","assignment","functionCall","ifStatement","ifStat","elseIfStat","elseStat","functionDecl","forStatement","whileStatement","idList","exprList","expression","arrowFunction","arrowParameters","coverParenthesizedExpressionAndArrowParameterList","bindingPropertyList","conciseBody","list","indexes","property","objectLiteral","propertyDefinitionList","propertyDefinition"],N._LITERAL_NAMES=[void 0,"'.'","'=>'","'def'","'if'","'else'","'return'","'for'","'while'","'to'","'end'","'in'","'and'","'or'","'not'","'=='","'!='","'>='","'<='","'^'","'>'","'<'","'+'","'-'","'*'","'/'","'%'","'{'","'}'","'['","']'","'('","')'","';'","'='","','","'?'","':'",void 0,"'null'"],N._SYMBOLIC_NAMES=[void 0,void 0,void 0,"Def","If","Else","Return","For","While","To","End","In","And","Or","Excl","Equals","NEquals","GTEquals","LTEquals","Pow","GT","LT","Add","Subtract","Multiply","Divide","Modulus","OBrace","CBrace","OBracket","CBracket","OParen","CParen","SColon","Assign","Comma","QMark","Colon","BoolLiteral","NullLiteral","NumberLiteral","Identifier","IndicatorExpr","StringLiteral","HexColorLiteral","Comment","Space"],N.VOCABULARY=new tx(N._LITERAL_NAMES,N._SYMBOLIC_NAMES,[]),N._serializedATN=`0					\x07	\x07\b	\b			
	
\v	\v\f	\f\r	\r													\x1B	\x1B\x07<
\f?\vC
J
N
\x07V
\fY\v]
\x07\x07\x07\x07c
\x07\f\x07\x07f\v\x07\x07\x07i
\x07\x07\x07\b\b\b\b\b						



\v\v\v\v\v
\v\v\v\v\v\v\f\f\f\f\f\f\f\f\r\r\r\r\r\r\x07
\f\v\x07
\f\v








\x07
\f\v

\x07
\f\v


\r
\r

\x07
\f\v\x1B\x1B\x1B\x1B
\x1B\x1B\b
\f "$&(*,.0246=I\bK
R\f\`lqw{ "$&(*,.0246778\x0789<:<\v;9;:<?=;=>>B?=@A\x07\bACB@BCCDJ\bEJ
FJ\f\x07GJ\fHJ\rIDIEIFIGIHJ\x07KM\x07+LN,MLMNNOOP\x07$PQQ	RW\x07+ST\x07TV\x07+USVYWUWXXZYWZ\\\x07![]\\[\\]]^^_\x07"_\v\`d\bac	bacfdbdeehfdgi
hghiijjk\x07\fk\rlm\x07mnno\x07'oppqr\x07\x07rs\x07sttu\x07'uvvwx\x07\x07xy\x07'yzz{|\x07|}\x07+}\x07!~~\x07"\x07'\x07\f\x07	\x07+\x07\r\x07+\x07'\x07\f\x07
\x07'\x07\f\x07+\x07%\x07+\x1B\x07%\b\x07 \x07\x07*\x07(\x07)\x07.\x07,\x07!\x07"
,*,\x07+,\x07-,0,\x07!\x07",\f\x07\f\x1B\x07\f\x07\x1B\x1B\f\x07\f\x07\f\x07\f\x07\f\x07\f\x07\f\x07\f\x07\f\x07\f\x07\f\x07\f\x07&\x07'"\x07(!\x07+$#\x07!\x07"\x07!&\x07"\x07!&\x07%\x07"%\x07+\x07%\x07+'\x07\x07)\x07\x07 +\x07.\x07\x07 -\x07+/\x07\x07\x072\x07\x072\x07%\x0714\x1B\x07%4\x1B3\x07+\x07'5$;=BIMW\\dh`,N);F([K,Ly],et.prototype,"vocabulary");F([K],et.prototype,"grammarFileName");F([K],et.prototype,"ruleNames");F([K],et.prototype,"serializedATN");F([ot(0)],et.prototype,"script");F([ot(0)],et.prototype,"block");F([ot(0)],et.prototype,"statement");F([ot(0)],et.prototype,"assignment");F([ot(0)],et.prototype,"functionCall");F([ot(0)],et.prototype,"ifStatement");F([ot(0)],et.prototype,"ifStat");F([ot(0)],et.prototype,"elseIfStat");F([ot(0)],et.prototype,"elseStat");F([ot(0)],et.prototype,"functionDecl");F([ot(0)],et.prototype,"forStatement");F([ot(0)],et.prototype,"whileStatement");F([ot(0)],et.prototype,"idList");F([ot(0)],et.prototype,"exprList");F([ot(0)],et.prototype,"expression");F([ot(0)],et.prototype,"arrowFunction");F([ot(0)],et.prototype,"arrowParameters");F([ot(0)],et.prototype,"coverParenthesizedExpressionAndArrowParameterList");F([ot(0)],et.prototype,"bindingPropertyList");F([ot(0)],et.prototype,"conciseBody");F([ot(0)],et.prototype,"list");F([ot(0)],et.prototype,"indexes");F([ot(0)],et.prototype,"property");F([ot(0)],et.prototype,"objectLiteral");F([ot(0)],et.prototype,"propertyDefinitionList");F([ot(0)],et.prototype,"propertyDefinition");let we=et;class ze{constructor(e){e===void 0?(this.value=null,this.type="null"):(this.value=e,this.type=typeof e)}equals(e){return this==e?!0:this.type!=e.type?!1:this.value===e.value}toString(){return this.type==="null"?"Null":String(this.value)}}const hi=new ze;let gd=class u1{constructor(e=null){this._parent=e,this.variables=new Map,this.stack=new Map}assignParam(e,t){this.variables.set(e,t)}assign(e,t){this.resolve(e)?this.reAssign(e,t):this.variables.set(e,t)}copy(){let e=new u1;return e.variables=new Map(this.variables),e.parent=this.parent,e}createChild(){return new u1(this)}isGlobalScope(){return!this._parent}parent(){return this._parent}reAssign(e,t){this.variables.has(e)?this.variables.set(e,t):this.parent!=null&&this._parent.reAssign(e,t)}resolve(e){let t=this.variables.get(e);return t??(this.isGlobalScope()?null:this._parent.resolve(e))}push(e,t){this.stack.has(e)||this.stack.set(e,[]),this.stack.get(e).push(t)}pop(e){return this.stack.has(e)?this.stack.get(e).pop():hi}peek(e){if(!this.stack.has(e))return hi;let t=this.stack.get(e);return t[t.length-1]}clear(e){this.stack.has(e)&&this.stack.set(e,[])}};var m3={},qm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var _d=P&&P.__decorate||function(i,e,t,r){var n=arguments.length,s=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,e,t,r);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},vd=P&&P.__param||function(i,e){return function(t,r){e(t,r,i)}};Object.defineProperty(qm,"__esModule",{value:!0});qm.AbstractParseTreeVisitor=void 0;const Mn=te;class hu{visit(e){return e.accept(this)}visitChildren(e){let t=this.defaultResult(),r=e.childCount;for(let n=0;n<r&&this.shouldVisitNextChild(e,t);n++){let o=e.getChild(n).accept(this);t=this.aggregateResult(t,o)}return t}visitTerminal(e){return this.defaultResult()}visitErrorNode(e){return this.defaultResult()}aggregateResult(e,t){return t}shouldVisitNextChild(e,t){return!0}}_d([Mn.Override,vd(0,Mn.NotNull)],hu.prototype,"visit",null);_d([Mn.Override,vd(0,Mn.NotNull)],hu.prototype,"visitChildren",null);_d([Mn.Override,vd(0,Mn.NotNull)],hu.prototype,"visitTerminal",null);_d([Mn.Override,vd(0,Mn.NotNull)],hu.prototype,"visitErrorNode",null);_d([vd(0,Mn.NotNull)],hu.prototype,"shouldVisitNextChild",null);qm.AbstractParseTreeVisitor=hu;var g3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(g3,"__esModule",{value:!0});var _3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(_3,"__esModule",{value:!0});var Xm={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(Xm,"__esModule",{value:!0});Xm.ParseTreeProperty=void 0;class rM{constructor(e="ParseTreeProperty"){this._symbol=Symbol(e)}get(e){return e[this._symbol]}set(e,t){e[this._symbol]=t}removeFrom(e){let t=e[this._symbol];return delete e[this._symbol],t}}Xm.ParseTreeProperty=rM;var v3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(v3,"__esModule",{value:!0});var y3={};(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(i,"__esModule",{value:!0}),i.ParseTreeWalker=void 0;const e=bs,t=kr,r=Ss;class n{walk(o,a){let l=[],c=[],h=a,u=0;for(;h;){if(h instanceof e.ErrorNode?o.visitErrorNode&&o.visitErrorNode(h):h instanceof t.TerminalNode?o.visitTerminal&&o.visitTerminal(h):this.enterRule(o,h),h.childCount>0){l.push(h),c.push(u),u=0,h=h.getChild(0);continue}do{if(h instanceof r.RuleNode&&this.exitRule(o,h),l.length===0){h=void 0,u=0;break}let p=l[l.length-1];if(u++,h=u<p.childCount?p.getChild(u):void 0,h)break;h=l.pop(),u=c.pop()}while(h)}}enterRule(o,a){let l=a.ruleContext;o.enterEveryRule&&o.enterEveryRule(l),l.enterRule(o)}exitRule(o,a){let l=a.ruleContext;l.exitRule(o),o.exitEveryRule&&o.exitEveryRule(l)}}i.ParseTreeWalker=n,function(s){s.DEFAULT=new s}(n=i.ParseTreeWalker||(i.ParseTreeWalker={}))})(y3);var x3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(x3,"__esModule",{value:!0});var w3={};/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */Object.defineProperty(w3,"__esModule",{value:!0});(function(i){/*!
 * Copyright 2016 The ANTLR Project. All rights reserved.
 * Licensed under the BSD-3-Clause license. See LICENSE file in the project root for license information.
 */var e=P&&P.__createBinding||(Object.create?function(r,n,s,o){o===void 0&&(o=s),Object.defineProperty(r,o,{enumerable:!0,get:function(){return n[s]}})}:function(r,n,s,o){o===void 0&&(o=s),r[o]=n[s]}),t=P&&P.__exportStar||function(r,n){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,r,s)};Object.defineProperty(i,"__esModule",{value:!0}),t(qm,i),t(bs,i),t(g3,i),t(_3,i),t(Xm,i),t(v3,i),t(y3,i),t(Ss,i),t(x3,i),t(kr,i),t(w3,i),t(Es(),i)})(m3);const nM=new gd;class cu extends Error{}class Zr extends ze{constructor(e){super({}),this.scope=new gd(e)}static createInstance(e){return new Zr(nM)}resolve(e){return this.scope.resolve(e)}assign(e,t){this.scope.assign(e,t)}toString(){let e={},t=this.scope.variables.keys(),r;for(;r=t.next().value;){let n=this.resolve(r);e[r]=typeof n=="function"?n:n.value}return JSON.stringify(e)}}class b3 extends ze{constructor(e){super(),this.id=e,this.type="function"}}class Yb extends b3{constructor(e,t,r,n){super(e),this.id=e,this.params=t,this.block=r,this.scope=n.createChild()}invoke(e,t,r){if(Cr(e)!==Cr(this.params))throw new Error("Illegal UserFunction call");r=new gd(r);const n=new nn(r,t);return this.params.forEach((s,o)=>{const a=n.visit(e[o]);r.assignParam(this.params[o].text,a)}),n.visit(this.block)}toString(){return`() => ${this.block.text}`}}class Zm extends b3{toString(){return"def func() { [builtin code] }"}}class vx extends Zm{bind(e){this.context=e}}class vt extends Error{constructor(e,t){super(t||"Illegal expression: "+e.text+`
lineNumber:`+e.start.line)}}class Kr extends ze{constructor(){super({}),this.type="expr",this.value="",this._rid=0}reserve(e,t){}clear(){}toString(){return"[ Expr expr ]"}}class Ce extends Kr{constructor(e){super(),this._value=e}execute(e){return this._value}}class Ni extends Kr{constructor(e,t){super(),this._exprA=e,this._exprB=t}reserve(e,t){this._rid<e&&(this._rid=e,this._exprA.reserve(e,t),this._exprB.reserve(e,t))}clear(){this._exprA.clear(),this._exprB.clear()}}class Ah extends Ni{execute(e){return this._exprA.execute(e)+this._exprB.execute(e)}}class Dh extends Ni{execute(e){return this._exprA.execute(e)-this._exprB.execute(e)}}class Th extends Ni{execute(e){return this._exprA.execute(e)>=this._exprB.execute(e)?1:0}}class Ch extends Ni{execute(e){return this._exprA.execute(e)<=this._exprB.execute(e)?1:0}}class Ph extends Ni{execute(e){return this._exprA.execute(e)>this._exprB.execute(e)?1:0}}class Ih extends Ni{execute(e){return this._exprA.execute(e)<this._exprB.execute(e)?1:0}}class Oh extends Ni{execute(e){return this._exprA.execute(e)==this._exprB.execute(e)?1:0}}class Mh extends Ni{execute(e){return this._exprA.execute(e)!=0&&this._exprB.execute(e)!=0?1:0}}class Nh extends Ni{execute(e){return this._exprA.execute(e)!=0||this._exprB.execute(e)!=0?1:0}}class Rh extends Ni{execute(e){return this._exprA.execute(e)*this._exprB.execute(e)}}class Lh extends Ni{execute(e){var t=this._exprA.execute(e),r=this._exprB.execute(e);return t==0?t:r==0?t>0?1e7:-1e7:t/r}}class sM extends Kr{constructor(e,t,r){super(),this._exprA=e,this._exprB=t,this._exprC=r}reserve(e,t){this._rid<e&&(this._rid=e,this._exprA.reserve(e,t),this._exprB.reserve(e,t),this._exprC.reserve(e,t))}clear(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear()}}class S3 extends sM{execute(e){return this._exprA.execute(e)!=0?this._exprB.execute(e):this._exprC.execute(e)}}class Ri extends Kr{constructor(e){super(),this._exprA=e}reserve(e,t){this._rid<e&&(this._rid=e,this._exprA.reserve(e,t))}clear(){this._exprA.clear()}}class It{constructor(){}static get(){return It.inst}static set(e){It.inst=e}getDataSource(){return this._ds}setDataSource(e){this._ds=e}getFirstIndex(){return this._firstIndex}setFirstIndex(e){this._firstIndex=e}}class jh extends Ri{constructor(e,t){super(t),this._name=e,this._buf=[]}execute(e){return(!this._buf[e]||isNaN(this._buf[e]))&&this.assign(e),this._buf[e]}getName(){return this._name}assign(e){if(this._buf[e]=this._exprA.execute(e),It.get().getFirstIndex()>=0&&isNaN(this._buf[e])&&!isNaN(this._buf[e-1]))throw this._name+".assign("+e+"): NaN"}reserve(e,t){if(this._rid<e)for(var r=t;r>0;r--)this._buf.push(NaN);super.reserve(e,t)}clear(){super.clear(),this._buf=[]}}const oM=new Zr;class yx extends ze{constructor(e){super(e),this.type="array"}static createInstance(e){let t=new yx(e);return t.prototype=oM,t}toString(){return`[${this.value.map(e=>e.toString()).join(", ")}]`}}const g0=class g0 extends Zm{constructor(){super(g0.ID)}invoke(e,t,r){if(!Cr(e))return new cu;const n=new nn(r,t),s=n.visit(e[0]).value,o=Cr(e)>1?n.visit(e[1]).value:10;return new ze(Number.parseInt(s,o))}};g0.ID="parseInt";let zf=g0;const _0=class _0 extends Zm{constructor(){super(_0.ID)}invoke(e,t,r){if(!Cr(e))return new cu;const s=new nn(r,t).visit(e[0]).value;return new ze(Number.parseFloat(s))}};_0.ID="parseFloat";let jf=_0;const v0=class v0 extends vx{constructor(){super(v0.ID)}invoke(e,t,r){if(!Cr(e))return new cu;const n=new nn(r,t),s=Cr(e)?n.visit(e[0]).value:void 0;return new ze(this.context.value.toExponential(s))}};v0.ID="toExponential";let $f=v0;const y0=class y0 extends vx{constructor(){super(y0.ID)}invoke(e,t,r){if(!Cr(e))return new cu;const n=new nn(r,t),s=Cr(e)?n.visit(e[0]).value:void 0;return new ze(this.context.value.toExponential(s))}};y0.ID="toFixed";let Vf=y0;const x0=class x0 extends vx{constructor(){super(x0.ID)}invoke(e,t,r){if(!Cr(e))return new cu;const n=new nn(r,t),s=Cr(e)?n.visit(e[0]).value:void 0;return new ze(this.context.value.toExponential(s))}};x0.ID="toPrecision";let Wf=x0;const E3=new Zr,Qm=new Zr;E3.assign(zf.ID,new zf);E3.assign(jf.ID,new jf);Qm.assign($f.ID,new $f);Qm.assign(Vf.ID,new Vf);Qm.assign(Wf.ID,new Wf);class xx extends ze{equals(e){return this==e?!0:this.type!=e.type?!1:Math.abs(this.value-e.value)<1e-11}static createInstance(e){let t=new xx(e);return t.prototype=Qm,t}}class h1 extends Ri{execute(e){return-this._exprA.execute(e)}}const w0=class w0 extends m3.AbstractParseTreeVisitor{defaultResult(){return hi}constructor(e,t,r=0){super(),this.scope=e,this.functions=t,this.mode=r}visitScript(e){return e.block&&e.block()?this.visit(e.block()):hi}visitFunctionDecl(e){let t=e.Identifier().text,r=e.idList()?e.idList().Identifier():[],n=new Yb(t,r,e.block(),this.scope);return this.functions.set(t,n),hi}visitList(e){let t=[];return e.exprList()!=null&&e.exprList().expression().forEach(r=>{t.push(this.visit(r))}),new yx(t)}visitUnaryMinusExpression(e){const t=this.visit(e.expression());if(t.type==="number"&&this.mode===0)return new ze(-1*t.value);if(t.type==="number"&&this.mode===1)return new h1(new Ce(-1*t.value));if(t.type==="expr")return new h1(t);throw new vt(e)}visitNotExpression(e){let t=this.visit(e.expression());if(t.type!=="boolean")throw new vt(e);return new ze(!t)}visitPowerExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(t.type==="number"&&r)return new ze(Math.pow(t.value,r.value));throw new vt(e)}visitMultiplyExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(this.mode===0&&t.type==="number"&&r.type==="number")return new ze(t.value*r.value);if(this.mode===1&&t.type==="number"&&r.type==="number")return new Rh(new Ce(t.value),new Ce(r.value));if(t.type==="expr"&&r.type==="expr")return new Rh(t,r);if(t.type==="expr"&&r.type==="number")return new Rh(t,new Ce(r.value));if(t.type==="number"&&r.type==="expr")return new Rh(new Ce(t.value),r);throw new vt(e)}visitDivideExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(this.mode===0&&t.type==="number"&&r.type==="number")return new ze(t.value/r.value);if(this.mode===1&&t.type==="number"&&r.type==="number")return new Lh(new Ce(t.value),new Ce(r.value));if(t.type==="expr"&&r.type==="expr")return new Lh(t,r);if(t.type==="expr"&&r.type==="number")return new Lh(t,new Ce(r.value));if(t.type==="number"&&r.type==="expr")return new Lh(new Ce(t.value),r);throw new vt(e)}visitModulusExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(t.type==="number"&&r.type==="number")return new ze(t.value%r.value);throw new vt(e)}visitAddExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(this.mode==0){if(t.type==="number"&&r.type==="number")return new ze(t.value+r.value);if(t.type==="array"&&r.type==="array")return new ze(t.value.concat(r.value));if(t.type==="string"&&r.type==="string")return new ze(t.value+r.value)}if(this.mode===1&&t.type==="number"&&r.type==="number")return new Ah(new Ce(t.value),new Ce(r.value));if(t.type==="expr"&&r.type==="expr")return new Ah(t,r);if(t.type==="expr"&&r.type==="number")return new Ah(t,new Ce(r.value));if(t.type==="number"&&r.type==="expr")return new Ah(new Ce(t.value),r);throw new vt(e)}visitSubtractExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(this.mode===0&&t.type==="number"&&r.type==="number")return new ze(t.value-r.value);if(this.mode===1&&t.type==="number"&&r.type==="number")return new Dh(new Ce(t.value),new Ce(r.value));if(t.type==="expr"&&r.type==="expr")return new Dh(t,r);if(t.type==="expr"&&r.type==="number")return new Dh(t,new Ce(r.value));if(t.type==="number"&&r.type==="expr")return new Dh(new Ce(t.value),r);throw new vt(e)}visitGtEqExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(this.mode===0&&t.type==="number"&&r.type==="number")return new ze(t.value>=r.value);if(this.mode===1&&t.type==="number"&&r.type==="number")return new Th(new Ce(t.value),new Ce(r.value));if(t.type==="expr"&&r.type==="expr")return new Th(t,r);if(t.type==="expr"&&r.type==="number")return new Th(t,new Ce(r.value));if(t.type==="number"&&r.type==="expr")return new Th(new Ce(t.value),r);throw new vt(e)}visitLtEqExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(this.mode===0&&t.type==="number"&&r.type==="number")return new ze(t.value<=r.value);if(this.mode===1&&t.type==="number"&&r.type==="number")return new Ch(new Ce(t.value),new Ce(r.value));if(t.type==="expr"&&r.type==="expr")return new Ch(t,r);if(t.type==="expr"&&r.type==="number")return new Ch(t,new Ce(r.value));if(t.type==="number"&&r.type==="expr")return new Ch(new Ce(t.value),r);throw new vt(e)}visitGtExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(this.mode===0&&t.type==="number"&&r.type==="number")return new ze(t.value>r.value);if(this.mode===1&&t.type==="number"&&r.type==="number")return new Ph(new Ce(t.value),new Ce(r.value));if(t.type==="expr"&&r.type==="expr")return new Ph(t,r);if(t.type==="expr"&&r.type==="number")return new Ph(t,new Ce(r.value));if(t.type==="number"&&r.type==="expr")return new Ph(new Ce(t.value),r);throw new vt(e)}visitLtExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(this.mode===0&&t.type==="number"&&r.type==="number")return new ze(t.value<r.value);if(this.mode===1&&t.type==="number"&&r.type==="number")return new Ih(new Ce(t.value),new Ce(r.value));if(t.type==="expr"&&r.type==="expr")return new Ih(t,r);if(t.type==="expr"&&r.type==="number")return new Ih(t,new Ce(r.value));if(t.type==="number"&&r.type==="expr")return new Ih(new Ce(t.value),r);throw new vt(e)}visitEqExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(this.mode===0)return new ze(t.equals(r));if(this.mode===1&&t.type==="number"&&r.type==="number")return new Oh(new Ce(t.value),new Ce(r.value));if(t.type==="expr"&&r.type==="expr")return new Oh(t,r);if(t.type==="expr"&&r.type==="number")return new Oh(t,new Ce(r.value));if(t.type==="number"&&r.type==="expr")return new Oh(new Ce(t.value),r);throw new vt(e)}visitNotEqExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));return new ze(!t.equals(r))}visitAndExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(this.mode===0){if(t.type!=="boolean"||r.type!=="boolean")throw new vt(e);return new ze(t.value&&r.value)}if(this.mode===1&&t.type==="number"&&r.type==="number")return new Mh(new Ce(t.value),new Ce(r.value));if(t.type==="expr"&&r.type==="expr")return new Mh(t,r);if(t.type==="expr"&&r.type==="number")return new Mh(t,new Ce(r.value));if(t.type==="number"&&r.type==="expr")return new Mh(new Ce(t.value),r);throw new vt(e)}visitOrExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1));if(this.mode===0){if(t.type!=="boolean"||r.type!=="boolean")throw new vt(e);return new ze(t.value||r.value)}if(this.mode===1&&t.type==="number"&&r.type==="number")return new Nh(new Ce(t.value),new Ce(r.value));if(t.type==="expr"&&r.type==="expr")return new Nh(t,r);if(t.type==="expr"&&r.type==="number")return new Nh(t,new Ce(r.value));if(t.type==="number"&&r.type==="expr")return new Nh(new Ce(t.value),r);throw new vt(e)}visitTernaryExpression(e){let t=this.visit(e.expression(0)),r=this.visit(e.expression(1)),n=this.visit(e.expression(2));if(this.mode===1&&(t.type==="boolean"&&(t=new Ce(1)),r.type==="number"&&(r=new Ce(r.value)),n.type==="number"&&(n=new Ce(n.value))),(t.type==="expr"||r.type==="expr"||n.type==="expr")&&(t.type==="boolean"&&(t=new Ce(1)),r.type==="number"&&(r=new Ce(r.value)),n.type==="number"&&(n=new Ce(n.value)),t.type==="expr"&&r.type==="expr"&&n.type==="expr"))return new S3(t,r,n);if(this.mode===0)return t.value?new ze(r):new ze(n);throw new vt(e)}visitNumberExpression(e){return this.mode===0?xx.createInstance(Number(e.text)):new Ce(Number(e.text))}visitBoolExpression(e){return new ze(!!e.text)}visitNullExpression(e){return hi}resolveIndexes(e,t,r){return r.forEach(n=>{let s=this.visit(n);if(s.type==="string"&&t instanceof Zr&&(t=t.resolve(s)),s.type==="number"&&(t.type==="array"||t.type==="string")){let o=s.value;t.type==="string"?t=new ze(t.value.substring(o,o+1)):t=t.value[o]}throw new vt(n)}),t}setAtIndex(e,t,r,n){let s,o;if(r.type==="array"){for(let a=0;a<t.length-1;a++){if(o=t[a],s=this.visit(o),s.type!=="number")throw new vt(o);r=r.value[s.value]}if(s=this.visit(di(t)),s.type==="number")return r.value[s.value]=n,hi}if(r instanceof Zr){for(let a=0;a<t.length-1;a++){if(o=t[a],s=this.visit(o),s.type!=="string")throw new vt(o);r=r.resolve(s.value)}if(s=this.visit(di(t)),s.type==="string")return r.assign(s.value,n),hi}throw new vt(e)}visitFunctionCallExpression(e){let t=this.visit(e.functionCall());if(e.indexes()){let r=e.indexes().expression();t=this.resolveIndexes(e,t,r)}return t}visitListExpression(e){let t=this.visit(e.list());if(e.indexes()!=null){let r=e.indexes().expression();t=this.resolveIndexes(e,t,r)}return t}visitIdentifierExpression(e){let t=e.Identifier().text,r=this.scope.resolve(t);if(e.indexes()!=null){let n=e.indexes().expression();r=this.resolveIndexes(e,r,n)}return r}visitStringExpression(e){let t=e.text;t=t.substring(1,t.length-1);let r=new ze(t);if(e.indexes()!=null){let n=e.indexes().expression();r=this.resolveIndexes(e,r,n)}return r}visitObjectLiteralExpression(e){let t=this.visitObjectLiteral(e.objectLiteral());if(e.indexes()!=null){let r=e.indexes().expression();return this.resolveIndexes(e,t,r)}return t}visitExpressionExpression(e){let t=this.visit(e.expression());if(e.indexes()!=null){let r=e.indexes().expression();t=this.resolveIndexes(e,t,r)}return t}visitAssignment(e){let t=this.visit(e.expression());if(e.indexes()){let r=this.scope.resolve(e.Identifier().text);r.type==="array"&&this.setAtIndex(e,e.indexes().expression(),r,t),r.type==="object"&&this.setAtIndex(e,e.indexes().property(),r,t)}else{let r=e.Identifier().text;t.type==="expr"&&!(t instanceof Ce)&&(t=new jh(r,t)),this.scope.assign(r,t)}return hi}visitIdentifierFunctionCall(e){let t=e.exprList()?e.exprList().expression():[],r;if(e.Identifier().length===1){let n=e.Identifier()[0].text;r=this.functions.get(n)||this.scope.resolve(n)}else{let n=e.Identifier()[0].text,s=this.scope.resolve(n);if(s instanceof Zr){let o;for(let a=1;a<e.Identifier().length;a++)o=s.resolve(e.Identifier()[a].text),o.type==="object"&&(s=o);r=o}else s.prototype&&(r=s.prototype.resolve(e.Identifier()[1].text),r.bind(s))}if(r)return r.invoke(t,this.functions,this.scope);throw new vt(e)}visitIfStatement(e){if(this.visit(e.ifStat().expression()).value)return this.visit(e.ifStat().block());for(let t=0;t<e.elseIfStat().length;t++)if(this.visit(e.elseIfStat(t).expression()).value)return this.visit(e.elseIfStat(t).block());return e.elseStat()!=null?this.visit(e.elseStat().block()):hi}visitBlock(e){if(this.scope=new gd(this.scope),e.functionDecl().forEach(t=>{this.visitFunctionDecl(t)}),e.statement().forEach(t=>{this.visit(t)}),e.expression&&e.expression()){let t=this.visit(e.expression());return this.scope=this.scope.parent(),t}else return this.scope=this.scope.parent(),hi}visitForStatement(e){let t=e.Identifier(0).text,r=this.scope.resolve(e.Identifier(1).text);for(let n=0;n<=r.value.length;n++)this.scope.assign(t,new ze),this.visit(e.block());return hi}visitWhileStatement(e){for(;this.visit(e.expression()).value;)this.visit(e.block());return null}visitObjectLiteral(e){let t=new Zr;return this.scope.push("object",t),this.visit(e.propertyDefinitionList()),t}visitPropertyDefinitionList(e){return e.propertyDefinition().forEach(t=>{this.visit(t)}),hi}visitPropertyDefinition(e){let t=this.scope.peek("object");if(e.expression&&e.expression())t.assign(e.Identifier(),this.visit(e.expression()));else{let r=this.scope.resolve(e.Identifier().text);if(!r)throw new vt(e);t.assign(e.Identifier(),r)}return hi}visitExprCallExpression(e){let t=e.IndicatorExpr().text,r=this.scope.resolve(t);if(!e.exprList())return new r;let n=e.exprList().expression();if(t==="CONST"){let s=this.invokeExprCall(n,0);return new r(s.value[0].value)}else{let s=this.invokeExprCall(n,1);return new r(...s.value)}}invokeExprCall(e,t=1){const r=new w0(this.scope,this.functions,t);let n=e.map(s=>r.visit(s));return new ze(n)}visitProperty(e){return new ze(e.Identifier().text)}visitArrowFunctionExpression(e){return this.visit(e.arrowFunction())}visitArrowFunction(e){let t;if(e.arrowParameters().coverParenthesizedExpressionAndArrowParameterList&&e.arrowParameters().coverParenthesizedExpressionAndArrowParameterList()){let n=e.arrowParameters().coverParenthesizedExpressionAndArrowParameterList();if(n.bindingPropertyList&&n.bindingPropertyList()){let s=n.bindingPropertyList();t=s.Identifier?s.Identifier()||[]:[]}else t=[]}else t=[e.arrowParameters().Identifier()];let r;return e.conciseBody().block&&e.conciseBody().block()?r=e.conciseBody().block():r=e.conciseBody().getChild(0),new Yb("",t,r,this.scope)}};w0.returnValue=new cu;let nn=w0;const b0=class b0 extends Zm{constructor(){super(b0.ID)}invoke(e,t,r){let n=[];const s=new nn(r,t);return e.forEach((o,a)=>{const l=s.visit(e[a]);n.push(l)}),console.log(n),console.log(...n.map(o=>o.toString())),hi}};b0.ID="log";let Gf=b0;class qb extends Kr{execute(e){return It.get().getDataSource().getDataAt(e).close}}class Xb extends Kr{execute(e){return It.get().getDataSource().getDataAt(e).open}}class Zb extends Kr{execute(e){return It.get().getDataSource().getDataAt(e).high}}class Qb extends Kr{execute(e){return It.get().getDataSource().getDataAt(e).low}}class Yg extends Kr{execute(e){return It.get().getDataSource().getDataAt(e).volume}}class aM extends Ri{execute(e){return Math.abs(this._exprA.execute(e))}}class Ts extends Ni{constructor(e,t){super(e,t),this._range=-1,this._buf=[]}execute(e){this._range<0&&this.initRange();var t=this._buf[e].resultA=this._exprA.execute(e),r=this._buf[e].result=this.calcResult(e,t);return r}getRange(){return this._range}initRange(){this._range=this._exprB.execute(0)}reserve(e,t){if(this._rid<e)for(let r=t;r>0;r--)this._buf.push({resultA:NaN,result:NaN});super.reserve(e,t)}clear(){super.clear(),this._range=-1,this._buf=[]}}class lM extends Ts{calcResult(e,t){if(this._range==0)return NaN;var r=It.get().getFirstIndex();if(r<0)return 0;if(e>=r){var n=this._range-1;n>e-r&&(n=e-r);for(var s=0;n>=0;n--)this._buf[e-n].resultA!=0&&s++;return s}else return 0}}class A3 extends Ts{initRange(){super.initRange(),this._alpha=2/(this._range+1)}calcResult(e,t){if(this._range==0)return NaN;var r=It.get().getFirstIndex();if(r<0)return t;if(e>r){var n=this._buf[e-1];return this._alpha*(t-n.result)+n.result}return t}}class uM extends A3{calcResult(e,t){var r=It.get().getFirstIndex();if(r<0)return t;if(e>r){var n=this._range,s=this._buf[e-1];return n>=e+1-r?(n=e+1-r,s.result*(1-1/n)+t/n):this._alpha*(t-s.result)+s.result}return t}}class hM extends Ts{calcResult(e,t){if(this._range==0)return NaN;var r=It.get().getFirstIndex();if(r<0)return t;if(e>r){for(var n=this._range,s=t,o=e-n+1,a=Math.max(r,o);a<e;a++){var l=this._buf[a];s<l.resultA&&(s=l.resultA)}return s}else return t}}class cM extends Ts{calcResult(e,t){if(this._range==0)return NaN;var r=It.get().getFirstIndex();if(r<0)return t;if(e>r){for(var n=this._range,s=t,o=e-n+1,a=Math.max(r,o);a<e;a++){var l=this._buf[a];s>l.resultA&&(s=l.resultA)}return s}else return t}}class dM extends Ts{calcResult(e,t){if(this._range==0)return NaN;var r=It.get().getFirstIndex();if(r<0)return t;if(e>r){var n=this._range;return n>=e+1-r?(n=e+1-r,this._buf[e-1].result*(1-1/n)+t/n):this._buf[e-1].result+(t-this._buf[e-n].resultA)/n}else return t}}class D3 extends Kr{constructor(...e){super(),this._exprs=e}reserve(e,t){this._rid<e&&(this._rid=e,this._exprs.forEach(r=>r.reserve(e,t)))}clear(){this._exprs.forEach(e=>e.clear())}}class fM extends D3{execute(e){let t=this._exprs.map(r=>r.execute(e));return Math.max.apply(null,t)}}class cf extends jh{}class pM extends Ni{constructor(){super(...arguments),this._offset=-1}execute(e){if(this._offset<0&&(this._offset=this._exprB.execute(e),this._offset<0))throw"offset < 0";if(e-=this._offset,e<0)throw"index < 0";var t=this._exprA.execute(e);if(isNaN(t))throw"NaN";return t}}class mM extends Kr{constructor(e,t,r,n){super(),this._exprA=e,this._exprB=t,this._exprC=r,this._exprD=n}reserve(e,t){this._rid<e&&(this._rid=e,this._exprA.reserve(e,t),this._exprB.reserve(e,t),this._exprC.reserve(e,t),this._exprD.reserve(e,t))}clear(){this._exprA.clear(),this._exprB.clear(),this._exprC.clear(),this._exprD.clear()}}class gM extends mM{constructor(){super(...arguments),this._buf=[],this._range=-1}execute(e){this._range<0&&(this._range=this._exprA.execute(0),this._step=this._exprC.execute(0)/100,this._max=this._exprD.execute(0)/100);let t=this._buf[e]||{},r=It.get(),n=r.getFirstIndex();if(n<0)t.longPos=!0,t.sar=r.getDataSource().getDataAt(e).low,t.ep=r.getDataSource().getDataAt(e).high,t.af=.02;else{let s=r.getDataSource().getDataAt(e).high,o=r.getDataSource().getDataAt(e).low,a=this._buf[e-1];if(t.sar=a.sar+a.af*(a.ep-a.sar),a.longPos){if(t.longPos=!0,s>a.ep?(t.ep=s,t.af=Math.min(a.af+this._step,this._max)):(t.ep=a.ep,t.af=a.af),t.sar>o){t.longPos=!1;let l=e-this._range+1;for(l=Math.max(l,n);l<e;l++){let c=r.getDataSource().getDataAt(l).high;s<c&&(s=c)}t.sar=s,t.ep=o,t.af=.02}}else if(t.longPos=!1,o<a.ep?(t.ep=o,t.af=Math.min(a.af+this._step,this._max)):(t.ep=a.ep,t.af=a.af),t.sar<s){t.longPos=!0;let l=e-this._range+1;for(l=Math.max(l,n);l<e;l++){let c=r.getDataSource().getDataAt(l).low;o>c&&(o=c)}t.sar=o,t.ep=s,t.af=.02}}return t.sar}reserve(e,t){if(this._rid<e)for(let r=t;r>0;r--)this._buf.push({longPos:!0,sar:NaN,ep:NaN,af:NaN});super.reserve(e,t)}clear(){super.clear(),this._range=-1}}class _M extends Ts{constructor(e,t,r){super(e,t),this._exprC=r}initRange(){super.initRange(),this._mul=this._exprC.execute(0)}calcResult(e,t){if(this._range==0)return NaN;var r=It.get().getFirstIndex();if(r<0)return t;if(e>r){var n=this._range;return n>e+1-r&&(n=e+1-r),((n-1)*this._buf[e-1].result+t*this._mul)/n}return t}}class vM extends Ts{constructor(){super(...arguments),this._stdBuf=[]}calcResult(e,t){if(this._range==0)return NaN;var r=this._stdBuf[e],n=It.get().getFirstIndex();if(n<0)return r.resultMA=t,0;if(e>n){var s=this._range;s>=e+1-n?(s=e+1-n,r.resultMA=this._stdBuf[e-1].resultMA*(1-1/s)+t/s):r.resultMA=this._stdBuf[e-1].resultMA+(t-this._buf[e-s].resultA)/s;for(var o=0,a=e-s+1;a<=e;a++)o+=Math.pow(this._buf[a].resultA-r.resultMA,2);return Math.sqrt(o/s)}return r.resultMA=t,0}reserve(e,t){if(this._rid<e)for(var r=t;r>0;r--)this._stdBuf.push({resultMA:NaN});super.reserve(e,t)}clear(){super.clear(),this._stdBuf=[]}}class yM extends Ts{calcResult(e,t){var r=It.get().getFirstIndex();if(r<0)return t;if(e>r){var n=this._range;return n==0||n>=e+1-r?this._buf[e-1].result+t:this._buf[e-1].result+t-this._buf[e-n].resultA}else return t}}class xM{constructor(){this._exprEnv=new It,this._rid=0,this._params=[],this._assigns=[],this._outputs=[]}get outputs(){return this._outputs}getName(){return""}addParameter(e){this._params.push(e)}addAssign(e){this._assigns.push(e)}addOutput(e){this._outputs.push(e)}getParameterCount(){return this._params.length}getParameterAt(e){return this._params[e]}getOutputCount(){return this._outputs.length}getOutputAt(e){return this._outputs[e]}clear(){this._exprEnv.setFirstIndex(-1);var e,t;for(t=this._assigns.length,e=0;e<t;e++)this._assigns[e].clear();for(t=this._outputs.length,e=0;e<t;e++)this._outputs[e].clear()}reserve(e){this._rid++;var t,r;for(r=this._assigns.length,t=0;t<r;t++)this._assigns[t].reserve(this._rid,e);for(r=this._outputs.length,t=0;t<r;t++)this._outputs[t].reserve(this._rid,e)}execute(e,t){if(!(t<0)){this._exprEnv.setDataSource(e),It.set(this._exprEnv);try{var r,n;for(n=this._assigns.length,r=0;r<n;r++)this._assigns[r].assign(t);for(n=this._outputs.length,r=0;r<n;r++)this._outputs[r].assign(t);this._exprEnv.getFirstIndex()<0&&this._exprEnv.setFirstIndex(t)}catch(s){if(this._exprEnv.getFirstIndex()>=0)throw s}}}getParameters(){var e=[],t,r=this._params.length;for(t=0;t<r;t++)e.push(this._params[t].getValue());return e}setParameters(e){if(e instanceof Array&&e.length===this._params.length)for(var t in this._params)this._params[t].setValue(e[t])}}class zd extends cf{getName(){return this._name+this._exprA.getRange()}}class wM extends Ri{execute(e){return Math.atan(this._exprA.execute(e))}}class bM extends Ri{execute(e){return Math.ceil(this._exprA.execute(e))}}class SM extends Ri{execute(e){return Math.cos(this._exprA.execute(e))}}class EM extends Ri{execute(e){return Math.exp(this._exprA.execute(e))}}class AM extends Ri{execute(e){return Math.floor(this._exprA.execute(e))}}class DM extends Ri{execute(e){return Math.log(this._exprA.execute(e))}}class TM extends Ri{execute(e){return Math.log10(this._exprA.execute(e))}}class CM extends D3{execute(e){let t=this._exprs.map(r=>r.execute(e));return Math.min.apply(null,t)}}class PM extends Ni{execute(e){return Math.pow(this._exprA.execute(e),this._exprB.execute(e))}}class IM extends Ri{execute(e){return Math.round(this._exprA.execute(e))}}class OM extends Ri{execute(e){return Math.sin(this._exprA.execute(e))}}class MM extends Ri{execute(e){return Math.sqrt(this._exprA.execute(e))}}class NM extends Ri{execute(e){return Math.tan(this._exprA.execute(e))}}class Jb{constructor(){this._isValid=!0}get isValid(){return this._isValid}get errorMessage(){return this._errorMessage}syntaxError(e,t,r,n,s,o){this._isValid=!1,this._errorMessage=`line ${r}:${n} ${s}`}reportAmbiguity(e,t,r,n,s,o,a){}reportAttemptingFullContext(e,t,r,n,s,o){}reportContextSensitivity(e,t,r,n,s,o){}}class RM{init(){this._initGlobalScope(),this._initGlobalFunctions()}_initGlobalScope(){this.scope=new gd(null),this._assignExprs(),this._assignConsole()}_assignExprs(){this.scope.assign("ABS",aM),this.scope.assign("ADD",Ah),this.scope.assign("AND",Mh),this.scope.assign("ASSIGN",jh),this.scope.assign("ATAN",wM),this.scope.assign("C",qb),this.scope.assign("CEIL",bM),this.scope.assign("CLOSE",qb),this.scope.assign("CONST",Ce),this.scope.assign("COS",SM),this.scope.assign("COUNT",lM),this.scope.assign("DIV",Lh),this.scope.assign("EMA",A3),this.scope.assign("EQ",Oh),this.scope.assign("EXPMEMA",uM),this.scope.assign("EXP",EM),this.scope.assign("FLOOR",AM),this.scope.assign("GE",Th),this.scope.assign("GT",Ph),this.scope.assign("HHV",hM),this.scope.assign("H",Zb),this.scope.assign("HIGH",Zb),this.scope.assign("IF",S3),this.scope.assign("LE",Ch),this.scope.assign("LLV",cM),this.scope.assign("LN",DM),this.scope.assign("L",Qb),this.scope.assign("LOG",TM),this.scope.assign("LOW",Qb),this.scope.assign("LT",Ih),this.scope.assign("MA",dM),this.scope.assign("MAX",fM),this.scope.assign("MIN",CM),this.scope.assign("MUL",Rh),this.scope.assign("NEG",h1),this.scope.assign("O",Xb),this.scope.assign("OPEN",Xb),this.scope.assign("OR",Nh),this.scope.assign("OUTPUT",cf),this.scope.assign("POW",PM),this.scope.assign("REF",pM),this.scope.assign("ROUND",IM),this.scope.assign("SAR",gM),this.scope.assign("SIN",OM),this.scope.assign("SMA",_M),this.scope.assign("SQRT",MM),this.scope.assign("STD",vM),this.scope.assign("SUB",Dh),this.scope.assign("SUM",yM),this.scope.assign("TAN",NM),this.scope.assign("V",Yg),this.scope.assign("VOL",Yg),this.scope.assign("VOLUME",Yg)}_assignConsole(){let e=new Zr;e.assign("log",new Gf),this.scope.assign("Console",e)}_initGlobalFunctions(){this.functions=new Map,this.functions.set("output",new Gf)}eval(e){this.init();const t=new l1.ANTLRInputStream(e),r=new HO(t),n=new Jb;r.addErrorListener(n);const s=new l1.CommonTokenStream(r),o=new we(s),a=new Jb;o.addErrorListener(a);const l=o.script(),c=new nn(this.scope,this.functions);try{let h=c.visit(l);return n.isValid?a.isValid?h:new Error(a.errorMessage):new Error(n.errorMessage)}catch(h){return console.error(h),n.isValid?a.isValid?h:new Error(a.errorMessage):new Error(n.errorMessage)}}calculateIndicator(e,t){let r=new xM;if(e.type==="object"){let a=e.scope.variables.keys(),l;for(;l=a.next().value;){let c=e.resolve(l);c.type==="expr"&&(c instanceof jh&&r.addAssign(c),c instanceof zd?r.addOutput(new zd(l,c)):r.addOutput(new cf(l,c)))}}e.type==="expr"&&(e instanceof jh&&r.addAssign(e),e instanceof zd?r.addOutput(new zd("default",e)):r.addOutput(new cf("default",e)));let n=t.getDataCount();r.clear(),r.reserve(n);for(let a=0;a<n;a++)r.execute(t,a);let s=r.getOutputCount(),o={};for(let a=0;a<s;a++){let l=r.getOutputAt(a);o[l.getName()]=l._buf}return o}}class LM{constructor(e){this._dataItems=e}getDataCount(){return this._dataItems.length}getDataAt(e){return this._dataItems[e]}toString(){return JSON.stringify(this._dataItems)}}const eS=new RM;function Ht(i,e){return function(t){let r=eS.eval(i),n=eS.calculateIndicator(r,new LM(t)),s=t.length,o=[];for(let a=0;a<s;a++){let l={time:t[a].time,i:t[a].i};e.forEach(c=>{let h=n[c][a];isFinite(h)&&(l[c]=n[c][a])}),o.push(l)}return o}}function pi(i,e){let t=new Date;e&&(t=new Date(e));let r;switch(i){case ce.M:return t.setSeconds(0,0),t;case ce.M5:return r=t.getMinutes(),t.setMinutes(r-r%5,0,0),t;case ce.M15:return r=t.getMinutes(),t.setMinutes(r-r%15,0,0),t;case ce.M30:return r=t.getMinutes(),t.setMinutes(r-r%30,0,0),t;case ce.Hour:return t.setMinutes(0,0,0),t;case ce.Day:return t.setHours(0,0,0,0),t;default:throw new Error("pending implement")}}function Qr(i){switch(i){case ce.M:return 1e3*60;case ce.M5:return 1e3*60*5;case ce.M15:return 1e3*60*15;case ce.M30:return 1e3*60*30;case ce.Hour:return 1e3*60*60;case ce.Day:return 24*1e3*60*60;default:return console.warn("[nila-adapter]unexpected resolution",i),0}}class T3{constructor(){this.snippet=`
n1 = CONST(6)
n2 = CONST(12)
n3 = CONST(24)
bias = n => 100 * (C - MA(C, n)) / MA(C, n)
bias1 = bias(n1)
bias2 = bias(n2)
bias3 = bias(n3)
return { bias1, bias2, bias3 }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("bias")>-1)return;let t=`bias_${xt()}`,r=[{name:"bias1",label:"6",color:J(`chart.series.${t}.rsi1Stroke`,{light:"#d5b477",dark:"#d5b477"})},{name:"bias2",label:"12",color:J(`chart.series.${t}.rsi2Stroke`,{light:"#5fbae2",dark:"#5fbae2"})},{name:"bias3",label:"24",color:J(`chart.series.${t}.rsi3Stroke`,{light:"#cd8dd1",dark:"#cd8dd1"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addNewPart({name:t,series:[{name:"main",fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"BIAS",visualMap:"multiline"}]})}}class C3{constructor(){this.snippet=`n = CONST(20)
std_close_n = STD(C, n)
boll = MA(C, n)
ub = boll + std_close_n * 2
lb = boll - std_close_n * 2
return { boll, ub, lb }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("boll")>-1)return;let t=`boll_${xt()}`,r=[{name:"ub",label:"UB",hideLabel:!0,color:J(`chart.series.${t}.basisStroke`,{light:"#138484",dark:"#138484"})},{name:"boll",label:"Basis",hideLabel:!0,color:J(`chart.series.${t}.upperStroke`,{light:"#872323",dark:"#872323"})},{name:"lb",label:"LB",hideLabel:!0,color:J(`chart.series.${t}.lowerStroke`,{light:"#138484",dark:"#138484"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addSeries("main",{name:t,fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"BOLL",visualMap:"boll"})}}class P3{constructor(){this.snippet=`n = CONST(26)
ref_close_1 = REF(CLOSE, 1)
br = 100 * SUM(MAX(H - ref_close_1, 0), n) / SUM(MAX(ref_close_1 - L, 0), n)
ar = 100 * SUM(H - O, n) / SUM(O - L, n)
return { br, ar }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("brar")>-1)return;let t=`brar_${xt()}`,r=[{name:"br",label:"BR",color:J(`chart.series.${t}.brStroke`,{light:"#ff6a00",dark:"#ff6a00"})},{name:"ar",label:"AR",color:J(`chart.series.${t}.arStroke`,{light:"#0094ff",dark:"#0094ff"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addNewPart({name:t,series:[{name:"main",fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"BRAR",visualMap:"multiline"}]})}}class I3{constructor(){this.snippet=`n1 = CONST(10)
n2 = CONST(50)
m = CONST(10)
dif = MA(C, n1) - MA(C, n2)
difma = MA(dif, m)
return { dif, difma }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("dma")>-1)return;let t=`dma_${xt()}`,r=[{name:"dif",label:"DIF",color:J(`chart.series.${t}.difStroke`,{light:"#ff6a00",dark:"#ff6a00"})},{name:"difma",label:"DIFMA",color:J(`chart.series.${t}.difmaStroke`,{light:"#0094ff",dark:"#0094ff"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addNewPart({name:t,series:[{name:"main",fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"DMA",visualMap:"multiline"}]})}}class O3{constructor(){this.snippet=`n = CONST(14)
m = CONST(6)
mtr = EXPMEMA(MAX(H - L, ABS(H - REF(C, 1)), ABS(REF(C, 1) - L)), n)
hd = H - REF(H, 1)
ld = REF(L, 1) - L
dmp = EXPMEMA(hd > 0 and hd > ld ? hd : 0, n)
dmm = EXPMEMA(ld > 0 and ld > hd ? ld : 0, n)
pdi = 100 * dmp / mtr
mdi = 100 * dmm / mtr
adx = EXPMEMA(100 * ABS(mdi - pdi) / (mdi + pdi), m)
adxr = EMA(adx, m)
return { pdi, mdi, adx, adxr }`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("dmi")>-1)return;let t=`dmi_${xt()}`,r=[{name:"pdi",label:"+DI",color:J(`chart.series.${t}.pdiStroke`,{light:"#0094ff",dark:"#0094ff"})},{name:"mdi",label:"-DI",color:J(`chart.series.${t}.mdiStroke`,{light:"#ff6a00",dark:"#ff6a00"})},{name:"adx",label:"ADX",color:J(`chart.series.${t}.adxStroke`,{light:"#ff006e",dark:"#ff006e"})},{name:"adxr",label:"ADXR",color:J(`chart.series.${t}.adxrStroke`,{light:"#48d8c5",dark:"#48d8c5"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addNewPart({name:t,series:[{name:"main",fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"DMI",visualMap:"multiline"}]})}}class M3{constructor(){this.snippet=`ema = EMA(C, 5)
return { ema }`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("ema")>-1)return;let t=`ema_${xt()}`,r=[{name:"ema",label:"EMA",hideLabel:!0,color:J(`chart.series.${t}.emaStroke`,{light:"#3a78aa",dark:"#3a78aa"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addSeries("main",{name:t,fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"EMA(9,close)",visualMap:"multiline"})}}class N3{constructor(){this.snippet=`n = CONST(9)
hhv = HHV(H, n)
llv = LLV(L, n)
rsv = 100 * (C - llv) / (hhv - llv)
k = EMA(rsv, 3)
d = EMA(k, 3)
j = k * 3 - d * 2
return { k, d, j }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("kdj")>-1)return;let t=`kdj_${xt()}`,r=[{name:"k",label:"K",color:J(`chart.series.${t}.kStroke`,{light:"#ff7f00",dark:"#ff7f00"})},{name:"d",label:"D",color:J(`chart.series.${t}.dStroke`,{light:"#00ff00",dark:"#00ff00"})},{name:"j",label:"J",color:J(`chart.series.${t}.jStroke`,{light:"#ff00ff",dark:"#ff00ff"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addNewPart({name:t,series:[{name:"main",fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"KDJ",visualMap:"range",additional:{upper:80,lower:20}}]})}}class R3{constructor(){this.snippet=`ma5 = MA(C, 5)
ma10 = MA(C, 10)
ma20 = MA(C, 20)
ma30 = MA(C, 30)
return { ma5, ma10, ma20, ma30 }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("ma")>-1)return;let t=`ma_${xt()}`,r=[{name:"ma5",label:"MA5",color:J(`chart.series.${t}.ma5Stroke`,{light:"#fa9db8",dark:"#fa9db8"})},{name:"ma10",label:"MA10",color:J(`chart.series.${t}.ma10Stroke`,{light:"#26bdd7",dark:"#26bdd7"})},{name:"ma20",label:"MA20",color:J(`chart.series.${t}.ma20Stroke`,{light:"#eb3473",dark:"#eb3473"})},{name:"ma30",label:"MA30",color:J(`chart.series.${t}.ma30Stroke`,{light:"#8db927",dark:"#8db927"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addSeries("main",{name:t,fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"MA",visualMap:"multiline"})}}class L3{constructor(){this.snippet=`short = CONST(12)
long = CONST(26)
mid = CONST(9)
dif = EMA(C, short) - EMA(C, long)
dea = EMA(dif, mid)
macd = (dif - dea) * 2
return { dif, dea, macd }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("macd")>-1)return;let t=`macd_${xt()}`,r=[{name:"dif",label:"Histogram",hideLabel:!0,color:J(`chart.series.${t}.histogramStroke`,{light:"#ff006e",dark:"#ff006e"})},{name:"dea",label:"MACD",hideLabel:!0,color:J(`chart.series.${t}.macdStroke`,{light:"#0094ff",dark:"#0094ff"})},{name:"macd",label:"Signal",hideLabel:!0,color:J(`chart.series.${t}.signalStroke`,{light:"#ff6a00",dark:"#ff6a00"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addNewPart({name:t,series:[{name:"main",fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"MACD(12,26,close,9)",visualMap:"macd"}]})}}class k3{constructor(){this.snippet=`n = CONST(12)
mtm = C - REF(C, n)
return { mtm }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("mtm")>-1)return;let t=`mtm_${xt()}`,r=[{name:"mtm",label:""}];const n=Ht(this.snippet,r.map(s=>s.name));e.addNewPart({name:t,series:[{name:"main",fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"MTM",visualMap:"multiline"}]})}}class B3{constructor(){this.snippet=`
ref_close_1 = REF(C, 1)
va = C > ref_close_1 ? V : -V
delta = C == ref_close_1 ? va : 0
obv = SUM(delta, 0)
return { obv }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("obv")>-1)return;let t=[{name:"obv",label:""}];const r=Ht(this.snippet,t.map(n=>n.name));e.addNewPart({name:`obv_${xt()}`,series:[{name:"main",fields:t,transformer(n){let s=n[0];return r(s.points)},alias:"OBV",visualMap:"multiline"}]})}}class F3{constructor(){this.snippet=`
osc = C - MA(C, 20)
ma10 = MA(osc, 10)
return { osc, ma10 }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("osc")>-1)return;let t=`osc_${xt()}`,r=[{name:"osc",label:"OSC",color:J(`chart.series.${t}.oscStroke`,{light:"#ff6a00",dark:"#ff6a00"})},{name:"ma10",label:"OSCMA",color:J(`chart.series.${t}.maStroke`,{light:"#0094ff",dark:"#0094ff"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addNewPart({name:t,series:[{name:"main",fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"OSC(14,close)",visualMap:"multiline"}]})}}class U3{constructor(){this.snippet=`n = CONST(12)
psy = 100 * COUNT(C > REF(C, 1), n) / n
return { psy }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("psy")>-1)return;const t=Ht(this.snippet,["psy"]);e.addNewPart({name:`psy_${xt()}`,series:[{name:"main",fields:[{name:"psy",label:""}],transformer(r){let n=r[0];return t(n.points)},alias:"PSY",visualMap:"range",additional:{upper:75,lower:25}}]})}}class K3{constructor(){this.snippet=`n = CONST(12)
ref_close_n = REF(C, n)
roc = 100 * (C - ref_close_n) / ref_close_n
return { roc }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("roc")>-1)return;const t=Ht(this.snippet,["roc"]);e.addNewPart({name:`roc_${xt()}`,series:[{name:"main",fields:[{name:"roc",label:""}],transformer(r){let n=r[0];return t(n.points)},alias:"ROC",visualMap:"multiline"}]})}}class H3{constructor(){this.snippet=`n1 = CONST(6)
n2 = CONST(12)
n3 = CONST(24)
lc = REF(C, 1)
close_lc = C - lc
rsiExpr = n => 100 * SMA(MAX(close_lc, 0), n, 1) / SMA(ABS(close_lc), n, 1)
rsi1 = rsiExpr(n1)
rsi2 = rsiExpr(n2)
rsi3 = rsiExpr(n3)
return { rsi1, rsi2, rsi3 }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("rsi")>-1)return;let t=`rsi_${xt()}`,r=[{name:"rsi1",label:"6",color:J(`chart.series.${t}.rsi1Stroke`,{light:"#f4df80",dark:"#f4df80"})},{name:"rsi2",label:"12",color:J(`chart.series.${t}.rsi2Stroke`,{light:"#4fb2d2",dark:"#4fb2d2"})},{name:"rsi3",label:"24",color:J(`chart.series.${t}.rsi3Stroke`,{light:"#da96de",dark:"#da96de"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addNewPart({name:t,series:[{name:"main",fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"RSI",visualMap:"range",additional:{upper:80,lower:20}}]})}}class z3{constructor(){this.snippet=`n = CONST(4)
min = CONST(2)
step = CONST(2)
max = CONST(20)
sar = SAR(n, min, step, max)
return { sar }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("sar")>-1)return;let t=`sar_${xt()}`,r=[{name:"sar",label:"",color:J(`chart.series.${t}.stroke`,{light:"#3a6ca8",dark:"#3a6ca8"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addSeries("main",{name:t,fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"SAR",visualMap:"sar"})}}class j3{constructor(){this.snippet=`n = CONST(14)
m = CONST(14)
p1 = CONST(3)
lc = REF(C, 1)
close_lc = C - lc
rsi = SMA(MAX(close_lc, 0), n, 1) / SMA(ABS(close_lc), n, 1)
stochrsi = 100 * MA(rsi - LLV(rsi, m), p1) / MA(HHV(rsi, m) - LLV(rsi, m), p1)
return { stochrsi }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("stochrsi")>-1)return;const t=Ht(this.snippet,["stochrsi"]);e.addNewPart({name:`stochrsi_${xt()}`,series:[{name:"main",fields:[{name:"stochrsi",label:""}],transformer(r){let n=r[0];return t(n.points)},alias:"Stoch RSI",visualMap:"multiline"}]})}}class $3{constructor(){this.snippet=`n = CONST(12)
mtr = EMA(EMA(EMA(C, n), n), n)
last_mtr = REF(mtr, 1)
trix = 100 * (mtr - last_mtr) / last_mtr
return { trix }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("trix")>-1)return;const t=Ht(this.snippet,["trix"]);e.addNewPart({name:`trix_${xt()}`,series:[{name:"main",fields:[{name:"trix",label:""}],transformer(r){let n=r[0];return t(n.points)},alias:"TRIX",visualMap:"multiline"}]})}}class V3{addTo(e){if(e.getAppliedIndicators().indexOf("vwap")>-1)return;let t=`vwap_${xt()}`,r=[{name:"vwap",label:"",color:J(`chart.series.${t}.vwapStroke`,{light:"#d5b477",dark:"#f4df80"})}];e.addSeries("main",{name:t,fields:r,transformer(n){let s=n[0],o=0,a=0,l=[];for(let c=0,h=s.points.length;c<h;c++){let u=s.points[c];o+=u.amount,a+=u.volume,l.push({vwap:a?o/a:u.close})}return l},alias:"",visualMap:"multiline"})}}class W3{constructor(){this.snippet=`
def wr(x):
  hhv = HHV(H, x)
  llv = LLV(L, x)
  w = 100 * (hhv - C) / (hhv - llv)
  return w
end

i = CONST(6)
j = CONST(12)
k = CONST(34)

wr1 = wr(i)
wr2 = wr(j)
wr3 = wr(k)

return { wr1, wr2, wr3 }
`}addTo(e){if(Dt||e.getAppliedIndicators().indexOf("wr")>-1)return;let t=`wr_${xt()}`,r=[{name:"wr1",label:"6",color:J(`chart.series.${t}.wr1Stroke`,{light:"#d5ad7e",dark:"#d5ad7e"})},{name:"wr2",label:"13",color:J(`chart.series.${t}.wr2Stroke`,{light:"#499cbb",dark:"#499cbb"})},{name:"wr3",label:"34",color:J(`chart.series.${t}.wr3Stroke`,{light:"#cf82d4",dark:"#cf82d4"})}];const n=Ht(this.snippet,r.map(s=>s.name));e.addNewPart({name:t,series:[{name:"main",fields:r,transformer(s){let o=s[0];return n(o.points)},alias:"%R",visualMap:"range",additional:{upper:80,lower:20}}]})}}class kM{addTo(e){e.getAppliedIndicators().indexOf("order")>-1||e.addSeries("main",{name:`order_${xt()}`,dataSource:["main","order"],fields:[],transformer(t){let[r,n]=t,s=[],o=this.dataResolution;Qr(o)*2+1;let a=[];for(let l=0,c=n.points.length;l<c;l++){let h=n.points[l];a.push({...h,adjustTime:pi(o,h.time).getTime()})}a=a.sort((l,c)=>l.adjustTime-c.adjustTime);for(let l=0,c=r.points.length;l<c;l++){let h=r.points[l],u=null,p=[],d=h.time,f=pi(o,d).getTime();if(!a.length)break;for(;a.length;){let m=a[0];if(m.adjustTime===f){p.push(m),a.shift();continue}if(m.adjustTime<f){a.shift();continue}let g=r.points[l+1];if(!g){p.push(m),a.shift();continue}let _=pi(o,g.time).getTime();if(m.adjustTime<_)p.push(m),a.shift();else break}if(p.length){let m=Object.create(null);p.forEach(_=>{m[_.type]||(m[_.type]=[]),m[_.type].push(_)}),Object.keys(m).forEach(_=>{let v=m[_],y;switch(+_){case xr.OpenLong:case xr.CloseShort:y=h.low;break;case xr.CloseLong:case xr.OpenShort:y=h.high;break}u={close:y,type:+_,count:v.length,id:JSON.stringify({k:_,ids:p.map(x=>x.id)}),index:h.i},s.push(u)})}}return s},alias:"",visualMap:"order"})}}var BM=Object.defineProperty,FM=Object.getOwnPropertyDescriptor,UM=(i,e,t,r)=>{for(var n=r>1?void 0:r?FM(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&BM(e,t,n),n},KM=(i,e)=>(t,r)=>e(t,r,i),to;let c1=(to=class extends Re{constructor(e,t,r){super(e,t,"add-macd-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new L3().addTo(this._chartGroupService.currentChart))}},to.ID="workbench.action.addMACDIndicator",to.LABEL="MACD",to);c1=UM([KM(2,Ue)],c1);var HM=Object.defineProperty,zM=Object.getOwnPropertyDescriptor,jM=(i,e,t,r)=>{for(var n=r>1?void 0:r?zM(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&HM(e,t,n),n},$M=(i,e)=>(t,r)=>e(t,r,i),io;let d1=(io=class extends Re{constructor(e,t,r){super(e,t,"add-ema-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new M3().addTo(this._chartGroupService.currentChart))}},io.ID="workbench.action.addEMAIndicator",io.LABEL="EMA",io);d1=jM([$M(2,Ue)],d1);var VM=Object.defineProperty,WM=Object.getOwnPropertyDescriptor,GM=(i,e,t,r)=>{for(var n=r>1?void 0:r?WM(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&VM(e,t,n),n},YM=(i,e)=>(t,r)=>e(t,r,i),ro;let f1=(ro=class extends Re{constructor(e,t,r){super(e,t,"add-stochrsi-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new j3().addTo(this._chartGroupService.currentChart))}},ro.ID="workbench.action.addStochRSIIndicator",ro.LABEL="Stoch RSI",ro);f1=GM([YM(2,Ue)],f1);var qM=Object.defineProperty,XM=Object.getOwnPropertyDescriptor,ZM=(i,e,t,r)=>{for(var n=r>1?void 0:r?XM(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&qM(e,t,n),n},QM=(i,e)=>(t,r)=>e(t,r,i),no;let p1=(no=class extends Re{constructor(e,t,r){super(e,t,"add-brar-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new P3().addTo(this._chartGroupService.currentChart))}},no.ID="workbench.action.addBRARIndicator",no.LABEL="BRAR",no);p1=ZM([QM(2,Ue)],p1);var JM=Object.defineProperty,eN=Object.getOwnPropertyDescriptor,tN=(i,e,t,r)=>{for(var n=r>1?void 0:r?eN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&JM(e,t,n),n},iN=(i,e)=>(t,r)=>e(t,r,i),so;let m1=(so=class extends Re{constructor(e,t,r){super(e,t,"add-dma-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new I3().addTo(this._chartGroupService.currentChart))}},so.ID="workbench.action.addDMAIndicator",so.LABEL="DMA",so);m1=tN([iN(2,Ue)],m1);var rN=Object.defineProperty,nN=Object.getOwnPropertyDescriptor,sN=(i,e,t,r)=>{for(var n=r>1?void 0:r?nN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&rN(e,t,n),n},oN=(i,e)=>(t,r)=>e(t,r,i),oo;let g1=(oo=class extends Re{constructor(e,t,r){super(e,t,"add-dmi-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new O3().addTo(this._chartGroupService.currentChart))}},oo.ID="workbench.action.addDMIIndicator",oo.LABEL="DMI",oo);g1=sN([oN(2,Ue)],g1);var aN=Object.defineProperty,lN=Object.getOwnPropertyDescriptor,uN=(i,e,t,r)=>{for(var n=r>1?void 0:r?lN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&aN(e,t,n),n},hN=(i,e)=>(t,r)=>e(t,r,i),ao;let _1=(ao=class extends Re{constructor(e,t,r){super(e,t,"add-kdj-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new N3().addTo(this._chartGroupService.currentChart))}},ao.ID="workbench.action.addKDJIndicator",ao.LABEL="KDJ",ao);_1=uN([hN(2,Ue)],_1);var cN=Object.defineProperty,dN=Object.getOwnPropertyDescriptor,fN=(i,e,t,r)=>{for(var n=r>1?void 0:r?dN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&cN(e,t,n),n},pN=(i,e)=>(t,r)=>e(t,r,i),lo;let v1=(lo=class extends Re{constructor(e,t,r){super(e,t,"add-ma-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new R3().addTo(this._chartGroupService.currentChart))}},lo.ID="workbench.action.addMAIndicator",lo.LABEL="MA",lo);v1=fN([pN(2,Ue)],v1);var mN=Object.defineProperty,gN=Object.getOwnPropertyDescriptor,_N=(i,e,t,r)=>{for(var n=r>1?void 0:r?gN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&mN(e,t,n),n},vN=(i,e)=>(t,r)=>e(t,r,i),uo;let y1=(uo=class extends Re{constructor(e,t,r){super(e,t,"add-psy-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new U3().addTo(this._chartGroupService.currentChart))}},uo.ID="workbench.action.addPSYIndicator",uo.LABEL="PSY",uo);y1=_N([vN(2,Ue)],y1);var yN=Object.defineProperty,xN=Object.getOwnPropertyDescriptor,wN=(i,e,t,r)=>{for(var n=r>1?void 0:r?xN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&yN(e,t,n),n},bN=(i,e)=>(t,r)=>e(t,r,i),ho;let x1=(ho=class extends Re{constructor(e,t,r){super(e,t,"add-obv-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new B3().addTo(this._chartGroupService.currentChart))}},ho.ID="workbench.action.addOBVIndicator",ho.LABEL="OBV",ho);x1=wN([bN(2,Ue)],x1);var SN=Object.defineProperty,EN=Object.getOwnPropertyDescriptor,AN=(i,e,t,r)=>{for(var n=r>1?void 0:r?EN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&SN(e,t,n),n},DN=(i,e)=>(t,r)=>e(t,r,i),co;let w1=(co=class extends Re{constructor(e,t,r){super(e,t,"add-roc-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new K3().addTo(this._chartGroupService.currentChart))}},co.ID="workbench.action.addROCIndicator",co.LABEL="ROC",co);w1=AN([DN(2,Ue)],w1);var TN=Object.defineProperty,CN=Object.getOwnPropertyDescriptor,PN=(i,e,t,r)=>{for(var n=r>1?void 0:r?CN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&TN(e,t,n),n},IN=(i,e)=>(t,r)=>e(t,r,i),fo;let b1=(fo=class extends Re{constructor(e,t,r){super(e,t,"add-rsi-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new H3().addTo(this._chartGroupService.currentChart))}},fo.ID="workbench.action.addRSIIndicator",fo.LABEL="RSI",fo);b1=PN([IN(2,Ue)],b1);var ON=Object.defineProperty,MN=Object.getOwnPropertyDescriptor,NN=(i,e,t,r)=>{for(var n=r>1?void 0:r?MN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&ON(e,t,n),n},RN=(i,e)=>(t,r)=>e(t,r,i),po;let S1=(po=class extends Re{constructor(e,t,r){super(e,t,"add-sar-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new z3().addTo(this._chartGroupService.currentChart))}},po.ID="workbench.action.addSARIndicator",po.LABEL="SAR",po);S1=NN([RN(2,Ue)],S1);var LN=Object.defineProperty,kN=Object.getOwnPropertyDescriptor,BN=(i,e,t,r)=>{for(var n=r>1?void 0:r?kN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&LN(e,t,n),n},FN=(i,e)=>(t,r)=>e(t,r,i),mo;let E1=(mo=class extends Re{constructor(e,t,r){super(e,t,"add-trix-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new $3().addTo(this._chartGroupService.currentChart))}},mo.ID="workbench.action.addTRIXIndicator",mo.LABEL="TRIX",mo);E1=BN([FN(2,Ue)],E1);var UN=Object.defineProperty,KN=Object.getOwnPropertyDescriptor,HN=(i,e,t,r)=>{for(var n=r>1?void 0:r?KN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&UN(e,t,n),n},zN=(i,e)=>(t,r)=>e(t,r,i),go;let A1=(go=class extends Re{constructor(e,t,r){super(e,t,"add-wr-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new W3().addTo(this._chartGroupService.currentChart))}},go.ID="workbench.action.addWRIndicator",go.LABEL="Williams %R",go);A1=HN([zN(2,Ue)],A1);class G3 extends cy{constructor(e,t){super(),this._toDispose=[],this.$el=Le(".nila-dropdown").appendTo(e),this.$label=Le(".dropdown-label");let r=t.labelRenderer;r||(r=s=>(Le(s).text(t.label||""),null)),this.$label.on([ue.CLICK,ue.MOUSE_DOWN,$i.Tap],s=>{mi.stop(s,!0)}).on([ue.MOUSE_DOWN,$i.Tap],s=>{s instanceof MouseEvent&&s.detail>1||(this.visible?this.hide():this.show())}).appendTo(this.$el);const n=r(this.$label.getHTMLElement());n&&this._toDispose.push(n),Q0.addTarget(this.$label.getHTMLElement())}get toDispose(){return this._toDispose}get element(){return this.$el.getHTMLElement()}get label(){return this.$label.getHTMLElement()}set tooltip(e){this.$label.title(e)}show(){this.visible=!0}hide(){this.visible=!1}onEvent(e,t){this.hide()}dispose(){super.dispose(),this.hide(),this._toDispose=ye(this.toDispose),this.$boxContainer&&(this.$boxContainer.destroy(),this.$boxContainer=null),this.$contents&&(this.$contents.destroy(),this.$contents=null),this.$label&&(this.$label.destroy(),this.$label=null)}}class jN extends G3{constructor(e,t){super(e,t),this.contextViewProvider=t.contextViewProvider}show(){super.show(),Pe(this.element,"active"),this.contextViewProvider.showContextView({getAnchor:()=>this.getAnchor(),render:e=>this.renderContents(e),onDOMEvent:(e,t)=>{this.onEvent(e,t)},onHide:()=>this.onHide()})}getAnchor(){return this.element}onHide(){ut(this.element,"active")}hide(){super.hide(),this.contextViewProvider&&this.contextViewProvider.hideContextView()}renderContents(e){return null}}class wx extends G3{constructor(e,t){super(e,t),this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||""}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),Pe(this.element,"active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>Promise.resolve(this.actions),getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionItem:e=>this.menuOptions&&this.menuOptions.actionItemProvider?this.menuOptions.actionItemProvider(e):null,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):null,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:null,anchorPosition:this.menuOptions?this.menuOptions.anchorPosition:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:void 0})}hide(){super.hide()}onHide(){this.hide(),ut(this.element,"active")}}var $N=Object.defineProperty,VN=Object.getOwnPropertyDescriptor,WN=(i,e,t,r)=>{for(var n=r>1?void 0:r?VN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&$N(e,t,n),n},GN=(i,e)=>(t,r)=>e(t,r,i),_o;let D1=(_o=class extends Re{constructor(e,t,r){super(e,t,"add-mtm-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new k3().addTo(this._chartGroupService.currentChart))}},_o.ID="workbench.action.addMTMIndicator",_o.LABEL="MTM",_o);D1=WN([GN(2,Ue)],D1);var YN=Object.defineProperty,qN=Object.getOwnPropertyDescriptor,XN=(i,e,t,r)=>{for(var n=r>1?void 0:r?qN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&YN(e,t,n),n},ZN=(i,e)=>(t,r)=>e(t,r,i),vo;let T1=(vo=class extends Re{constructor(e,t,r){super(e,t,"add-boll-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new C3().addTo(this._chartGroupService.currentChart))}},vo.ID="workbench.action.addBOLLIndicator",vo.LABEL="Bollinger Bands",vo);T1=XN([ZN(2,Ue)],T1);var QN=Object.defineProperty,JN=Object.getOwnPropertyDescriptor,eR=(i,e,t,r)=>{for(var n=r>1?void 0:r?JN(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&QN(e,t,n),n},tR=(i,e)=>(t,r)=>e(t,r,i),yo;let C1=(yo=class extends Re{constructor(e,t,r){super(e,t,"add-osc-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new F3().addTo(this._chartGroupService.currentChart))}},yo.ID="workbench.action.addOSCIndicator",yo.LABEL="OSC",yo);C1=eR([tR(2,Ue)],C1);var iR=Object.defineProperty,rR=Object.getOwnPropertyDescriptor,nR=(i,e,t,r)=>{for(var n=r>1?void 0:r?rR(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&iR(e,t,n),n},sR=(i,e)=>(t,r)=>e(t,r,i),xo;let P1=(xo=class extends Re{constructor(e,t,r){super(e,t,"add-bias-indicator-action"),this._chartGroupService=r}run(e){return Promise.resolve(new T3().addTo(this._chartGroupService.currentChart))}},xo.ID="workbench.action.addBiasIndicator",xo.LABEL="Bias",xo);P1=nR([sR(2,Ue)],P1);var oR=Object.defineProperty,aR=Object.getOwnPropertyDescriptor,lR=(i,e,t,r)=>{for(var n=r>1?void 0:r?aR(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&oR(e,t,n),n},uR=(i,e)=>(t,r)=>e(t,r,i),wo;let I1=(wo=class extends Re{constructor(e,t,r){super(e,t,"add-vwap-indicator-action"),this._chartsService=r}run(e){let t=this._chartsService.currentChart;return t.dataRange!==Te.Intraday?Promise.resolve(null):Promise.resolve(new V3().addTo(t))}},wo.ID="workbench.action.addVwapIndicator",wo.LABEL="",wo);I1=lR([uR(2,Ue)],I1);const hR=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M5.5 18.207l4.65-4.65a1.906 1.906 0 0 1 2.7 0l2.593 2.593a2.906 2.906 0 0 0 4.114 0l4.65-4.65-.707-.707-4.65 4.65a1.906 1.906 0 0 1-2.7 0l-2.593-2.593a2.906 2.906 0 0 0-4.114 0l-4.65 4.65.707.707z"></path></svg>
`;var cR=Object.defineProperty,dR=Object.getOwnPropertyDescriptor,fR=(i,e,t,r)=>{for(var n=r>1?void 0:r?dR(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&cR(e,t,n),n},qg=(i,e)=>(t,r)=>e(t,r,i);let O1=class extends Je{constructor(i,e,t){super(),this.instantiationService=i,this.contextMenuService=e,this.contextViewService=t}render(i){let e=document.createElement("div");return i.appendChild(e),pr(e,"add-indicator-toggle","action-item"),this._dropdown=new wx(e,{contextMenuProvider:this.contextMenuService,actions:[P1,T1,p1,m1,g1,d1,_1,v1,c1,D1,x1,C1,y1,w1,b1,S1,f1,E1,I1,A1].map(t=>this.instantiationService.createInstance(t,t.ID,t.LABEL)),labelRenderer:t=>(Le("span.icon").innerHtml(hR).appendTo(t),Le("span.label").safeInnerHtml("").appendTo(t),null)}),this._dropdown.menuOptions={...this._dropdown.menuOptions,anchorPosition:G0.BELOW,anchorAlignment:W0.LEFT},this._dropdown}};O1=fR([qg(0,Nt),qg(1,wc),qg(2,Z0)],O1);Dt||Qe.as(pt.Toolbar).registerItem(new dy(O1,cl.LEFT,1));const pR={bias:T3,boll:C3,brar:P3,dma:I3,dmi:O3,ema:M3,kdj:N3,ma:R3,macd:L3,mtm:k3,obv:B3,osc:F3,psy:U3,roc:K3,rsi:H3,sar:z3,stochrsi:j3,trix:$3,vwap:V3,wr:W3,order:kM};Rt.registerCommand("workbench.action.applyIndicator",(i,e)=>{let r=i.get(Ue).currentChart;if(!r)return;let n=Array.from(new Set(e));for(let s=0,o=n.length;s<o;s++){let a=pR[n[s]];a&&new a().addTo(r)}});const mR=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 14" width="18" height="14"><path d="M6 11.17l-4.17-4.17-1.42 1.41 5.59 5.59 12-12-1.41-1.41-10.59 10.58z"></path></svg>
`,gR=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill="currentColor" fill-rule="evenodd"><path fill-rule="nonzero" d="M14 17a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-1a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"></path><path d="M5.005 16A1.003 1.003 0 0 1 4 14.992v-1.984A.998.998 0 0 1 5 12h1.252a7.87 7.87 0 0 1 .853-2.06l-.919-.925c-.356-.397-.348-1 .03-1.379l1.42-1.42a1 1 0 0 1 1.416.007l.889.882A7.96 7.96 0 0 1 12 6.253V5c0-.514.46-1 1-1h2c.557 0 1 .44 1 1v1.253a7.96 7.96 0 0 1 2.06.852l.888-.882a1 1 0 0 1 1.416-.006l1.42 1.42a.999.999 0 0 1 .029 1.377s-.4.406-.918.926a7.87 7.87 0 0 1 .853 2.06H23c.557 0 1 .447 1 1.008v1.984A.998.998 0 0 1 23 16h-1.252a7.87 7.87 0 0 1-.853 2.06l.882.888a1 1 0 0 1 .006 1.416l-1.42 1.42a1 1 0 0 1-1.415-.007l-.889-.882a7.96 7.96 0 0 1-2.059.852v1.248c0 .56-.45 1.005-1.008 1.005h-1.984A1.004 1.004 0 0 1 12 22.995v-1.248a7.96 7.96 0 0 1-2.06-.852l-.888.882a1 1 0 0 1-1.416.006l-1.42-1.42a1 1 0 0 1 .007-1.415l.882-.888A7.87 7.87 0 0 1 6.252 16H5.005zm3.378-6.193l-.227.34A6.884 6.884 0 0 0 7.14 12.6l-.082.4H5.005C5.002 13 5 13.664 5 14.992c0 .005.686.008 2.058.008l.082.4c.18.883.52 1.71 1.016 2.453l.227.34-1.45 1.46c-.004.003.466.477 1.41 1.422l1.464-1.458.34.227a6.959 6.959 0 0 0 2.454 1.016l.399.083v2.052c0 .003.664.005 1.992.005.005 0 .008-.686.008-2.057l.399-.083a6.959 6.959 0 0 0 2.454-1.016l.34-.227 1.46 1.45c.003.004.477-.466 1.422-1.41l-1.458-1.464.227-.34A6.884 6.884 0 0 0 20.86 15.4l.082-.4h2.053c.003 0 .005-.664.005-1.992 0-.005-.686-.008-2.058-.008l-.082-.4a6.884 6.884 0 0 0-1.016-2.453l-.227-.34 1.376-1.384.081-.082-1.416-1.416-1.465 1.458-.34-.227a6.959 6.959 0 0 0-2.454-1.016L15 7.057V5c0-.003-.664-.003-1.992 0-.005 0-.008.686-.008 2.057l-.399.083a6.959 6.959 0 0 0-2.454 1.016l-.34.227-1.46-1.45c-.003-.004-.477.466-1.421 1.408l1.457 1.466z"></path></g></svg>
`,_R=`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none" fill-rule="evenodd" stroke="currentColor"><path d="M6.5 15A8.5 8.5 0 1 0 15 6.5H8.5"></path><path d="M12 10L8.5 6.5 12 3"></path></g></svg>
`;var vR=Object.defineProperty,yR=Object.getOwnPropertyDescriptor,xR=(i,e,t,r)=>{for(var n=r>1?void 0:r?yR(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&vR(e,t,n),n},Xg=(i,e)=>(t,r)=>e(t,r,i);const S0=class S0 extends ls{render(e){super.render(e),Pe(this.container,"toggle-action-item")}updateChecked(){this.getAction().checked?Pe(this.container,"checked"):ut(this.container,"checked")}updateIcon(){this.icon.innerHTML=S0.icon}};S0.icon=mR;let M1=S0,N1=class extends Je{constructor(i,e,t){super(),this.commandService=i,this.configurationService=e,this.contextMenuService=t,this.dropdownActions=[{id:"chart.action.resetScale",label:"Reset Scale",icon:_R},{id:"seperator",label:""},{id:"chart.action.toggleLeftAxis",label:"Left Axis",key:"chart.axis.leftAxis"},{id:"seperator",label:""},{id:"chart.action.toggleAutoScale",label:"Auto Scale"},{id:"seperator",label:""},{id:"chart.action.toggleSymbolLabels",label:"Symbol Labels",checked:!1},{id:"chart.action.toggleSymbolLastValue",label:"Symbol Last Value",checked:!1},{id:"chart.action.toggleIndicatorLabels",label:"Indicator Labels",checked:!1},{id:"chart.action.toggleIndicatorLastValues",label:"Indicator Last Value",checked:!1},{id:"chart.label.noOverlapping",label:"No Overlapping Labels",checked:!0}],this.actionsMap=Object.create(null),this.configurationService.getValue("data.adjust.hasPriceAdjust")&&this.dropdownActions.push({id:"seperator",label:""},{id:"chart.action.priceAdjustNone",label:""},{id:"chart.action.priceAdjustPrev",label:"",checked:!0},{id:"chart.action.priceAdjustPost",label:""}),this.initActions(),this.registerListeners()}initActions(){this.actions=this.dropdownActions.map(i=>{if(i.id==="seperator")return new Tn;let e=new Re(i.id,i.label,"",!0,t=>this.commandService.executeCommand(i.id),i.icon,i.key?this.configurationService.getValue(i.key):i.checked);return this.actionsMap[i.id]=e,e})}render(i){let e=document.createElement("div");return i.appendChild(e),pr(e,"setting-toggle","action-item"),this._dropdown=new wx(e,{contextMenuProvider:this.contextMenuService,actions:this.actions,labelRenderer:t=>(Le("span.icon").innerHtml(gR).appendTo(t),null)}),this._dropdown.menuOptions={...this._dropdown.menuOptions,anchorPosition:G0.BELOW,anchorAlignment:W0.LEFT,actionItemProvider:t=>t instanceof Tn?new af(t,t,{icon:!0}):t.id==="chart.action.resetScale"?new ls(t,t,{icon:!0}):new M1(t,t,{icon:!0})},this._dropdown}getAction(i){return this.actionsMap[i]}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(this.handleConfigurationUpdate.bind(this)))}handleConfigurationUpdate(i){if(i.affectedKeys.includes("chart.priceScaleMode")&&(this.getAction("chart.action.toggleAutoScale").checked=this.configurationService.getValue("chart.priceScaleMode")===bt.AutoFit),i.affectedKeys.includes("chart.axis.leftAxis")&&(this.getAction("chart.action.toggleLeftAxis").checked=this.configurationService.getValue("chart.axis.leftAxis")),i.affectedKeys.includes("chart.label.symbol")&&(this.getAction("chart.action.toggleSymbolLabels").checked=this.configurationService.getValue("chart.label.symbol")),i.affectedKeys.includes("chart.label.symbolLastValue")&&(this.getAction("chart.action.toggleSymbolLastValue").checked=this.configurationService.getValue("chart.label.symbolLastValue")),i.affectedKeys.includes("chart.label.indicator")&&(this.getAction("chart.action.toggleIndicatorLabels").checked=this.configurationService.getValue("chart.label.indicator")),i.affectedKeys.includes("chart.label.indicatorLastValue")&&(this.getAction("chart.action.toggleIndicatorLastValues").checked=this.configurationService.getValue("chart.label.indicatorLastValue")),i.affectedKeys.includes("chart.label.noOverlapping")&&(this.getAction("chart.label.noOverlapping").checked=this.configurationService.getValue("chart.label.noOverlapping")),i.affectedKeys.includes("data.adjust.effect")){let e=this.configurationService.getValue("data.adjust.effect");this.getAction("chart.action.priceAdjustNone").checked=e===vi.None,this.getAction("chart.action.priceAdjustPrev").checked=e===vi.Prev,this.getAction("chart.action.priceAdjustPost").checked=e===vi.Post}}};N1=xR([Xg(0,ms),Xg(1,it),Xg(2,wc)],N1);Qe.as(pt.Toolbar).registerItem(new dy(N1,cl.LEFT,10));Rt.registerCommand("chart.action.toggleLeftAxis",i=>{let e=i.get(Ue),t=i.get(it),r=e.currentChart,n=t.getValue("chart.axis.leftAxis");t.updateValue("chart.axis.leftAxis",!n,Be.MEMORY),r.needFullRedraw=!0,r.redraw()});Rt.registerCommand("chart.action.resetScale",i=>{let t=i.get(Ue).currentChart;t.parts.main.viewModel.update(),t.needFullRedraw=!0,t.redraw()});Rt.registerCommand("chart.action.toggleAutoScale",i=>{let e=i.get(Ue),t=i.get(it),r=e.currentChart;r.priceScaleMode===bt.AutoFit?(r.priceScaleMode=bt.Normal,t.updateValue("chart.priceScaleMode",bt.Normal,Be.MEMORY)):r.priceScaleMode===bt.Normal&&(r.priceScaleMode=bt.AutoFit,t.updateValue("chart.priceScaleMode",bt.AutoFit,Be.MEMORY),r.parts.main.viewModel.update()),r.needFullRedraw=!0,r.redraw()});Rt.registerCommand("chart.action.toggleSymbolLabels",i=>{let e=i.get(it),t="chart.label.symbol",r=e.getValue(t);e.updateValue(t,!r,Be.MEMORY);let s=i.get(Ue).currentChart;s.needFullRedraw=!0,s.redraw()});Rt.registerCommand("chart.action.toggleSymbolLastValue",i=>{let e=i.get(it),t="chart.label.symbolLastValue",r=e.getValue(t);e.updateValue(t,!r,Be.MEMORY);let s=i.get(Ue).currentChart;s.needFullRedraw=!0,s.redraw()});Rt.registerCommand("chart.action.toggleIndicatorLabels",i=>{let e=i.get(it),t="chart.label.indicator",r=e.getValue(t);e.updateValue(t,!r,Be.MEMORY);let s=i.get(Ue).currentChart;s.needFullRedraw=!0,s.redraw()});Rt.registerCommand("chart.action.toggleIndicatorLastValues",i=>{let e=i.get(it),t="chart.label.indicatorLastValue",r=e.getValue(t);e.updateValue(t,!r,Be.MEMORY);let s=i.get(Ue).currentChart;s.needFullRedraw=!0,s.redraw()});Rt.registerCommand("chart.action.toggleIndicatorLastValues",i=>{let e=i.get(it),t="chart.label.indicatorLastValue",r=e.getValue(t);e.updateValue(t,!r,Be.MEMORY);let s=i.get(Ue).currentChart;s.needFullRedraw=!0,s.redraw()});Rt.registerCommand("chart.label.noOverlapping",i=>{let e=i.get(it),t="chart.label.noOverlapping",r=e.getValue(t);e.updateValue(t,!r,Be.MEMORY);let s=i.get(Ue).currentChart;s.needFullRedraw=!0,s.redraw()});Rt.registerCommand("chart.action.priceAdjustNone",i=>{let e=i.get(it),t=i.get(Ue);if(e.getValue("data.adjust.effect")===vi.None)return;let n=t.currentChart;n.dataRange===Te.Continuous&&(e.updateValue("data.adjust.effect",vi.None,Be.MEMORY),t.loadChart({dsName:n.dsName,alias:n.alias,resolution:n.dataResolution,range:n.dataRange,adjust:vi.None,forceReload:!0}))});Rt.registerCommand("chart.action.priceAdjustPrev",i=>{let e=i.get(it),t=i.get(Ue);if(e.getValue("data.adjust.effect")===vi.Prev)return;let n=t.currentChart;n.dataRange===Te.Continuous&&(e.updateValue("data.adjust.effect",vi.Prev,Be.MEMORY),t.loadChart({dsName:n.dsName,alias:n.alias,resolution:n.dataResolution,range:n.dataRange,adjust:vi.Prev,forceReload:!0}))});Rt.registerCommand("chart.action.priceAdjustPost",i=>{let e=i.get(it),t=i.get(Ue);if(e.getValue("data.adjust.effect")===vi.Post)return;let n=t.currentChart;n.dataRange===Te.Continuous&&(e.updateValue("data.adjust.effect",vi.Post,Be.MEMORY),t.loadChart({dsName:n.dsName,alias:n.alias,resolution:n.dataResolution,range:n.dataRange,adjust:vi.Post,forceReload:!0}))});const wR=Qe.as(pt.Configuration);wR.registerConfiguration({id:"workbench",order:7,title:"Workbench",type:"object",properties:{"workbench.sidebar.showExpaned":{type:"boolean",description:"",default:!0},"workbench.headerbar.show":{type:"boolean",description:"",default:!0}}});var df=(i=>(i[i.Default=1]="Default",i[i.User=2]="User",i))(df||{});const bR=Et("keybindingService");class Gs{constructor(e,t){this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let r=0,n=e.length;r<n;r++){const s=e[r].command;this._defaultBoundCommands.set(s,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Gs.combine(e,t);for(let r=0,n=this._keybindings.length;r<n;r++){let s=this._keybindings[r];s.keypressFirstPart!==null&&this._addKeyPress(s.keypressFirstPart,s)}}static _isTargetedForRemoval(e,t,r,n,s){return!(e.command!==n||t&&e.keypressFirstPart!==t||r&&e.keypressChordPart!==r||s&&(!e.when||!s.equals(e.when)))}static combine(e,t){e=e.slice(0);let r=[];for(let n=0,s=t.length;n<s;n++){const o=t[n];if(!o.command||o.command.length===0||o.command.charAt(0)!=="-"){r.push(o);continue}const a=o.command.substr(1),l=o.keypressFirstPart,c=o.keypressChordPart,h=o.when;for(let u=e.length-1;u>=0;u--)this._isTargetedForRemoval(e[u],l,c,a,h)&&e.splice(u,1)}return e.concat(r)}_addKeyPress(e,t){const r=this._map.get(e);if(typeof r>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let n=r.length-1;n>=0;n--){let s=r[n];if(s.command===t.command)continue;const o=s.keypressChordPart!==null,a=t.keypressChordPart!==null;o&&a&&s.keypressChordPart!==t.keypressChordPart||Gs.whenIsEntirelyIncluded(s.when,t.when)&&this._removeFromLookupMap(s)}r.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){let t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let r=0,n=t.length;r<n;r++)if(t[r]===e){t.splice(r,1);return}}}static whenIsEntirelyIncluded(e,t){if(!t)return!0;if(!e)return!1;const r=e instanceof ns?e.expr:[e],n=t instanceof ns?t.expr:[t];let s=0;for(let o=0;o<n.length;o++){let a=n[o],l=!1;for(;!l&&s<r.length;)r[s].equals(a)&&(l=!0),s++;if(!l)return!1}return!0}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(e){let t=this._lookupMap.get(e);if(typeof t>"u"||t.length===0)return[];let r=[],n=0;for(let s=t.length-1;s>=0;s--)r[n++]=t[s];return r}lookupPrimaryKeybinding(e){let t=this._lookupMap.get(e);return typeof t>"u"||t.length===0?null:t[t.length-1]}resolve(e,t,r){let n=null;if(t!==null){const o=this._map.get(t);if(typeof o>"u")return null;n=[];for(let a=0,l=o.length;a<l;a++){let c=o[a];c.keypressChordPart===r&&n.push(c)}}else{const o=this._map.get(r);if(typeof o>"u")return null;n=o}let s=this._findCommand(e,n);return s?t===null&&s.keypressChordPart!==null?{enterChord:!0,commandId:null,commandArgs:null,bubble:!1}:{enterChord:!1,commandId:s.command,commandArgs:s.commandArgs,bubble:s.bubble}:null}_findCommand(e,t){for(let r=t.length-1;r>=0;r--){let n=t[r];if(Gs.contextMatchesRules(e,n.when))return n}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}static getAllUnboundCommands(e){const t=Rt.getCommands(),r=[];for(let n in t)n[0]==="_"||n.indexOf("vscode.")===0||typeof t[n].description=="object"&&!m2(t[n].description.args)||e.get(n)!==!0&&r.push(n);return r}}var SR=Object.defineProperty,ER=Object.getOwnPropertyDescriptor,AR=(i,e,t,r)=>{for(var n=r>1?void 0:r?ER(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&SR(e,t,n),n},DR=(i,e)=>(t,r)=>e(t,r,i);const Yf="data-keybinding-context";class Y3{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}collectAllValues(){let e=this._parent?this._parent.collectAllValues():Object.create(null);return e={...e,...this._value},delete e._contextId,e}}class TR extends Y3{constructor(e,t,r){super(e,null),this._emitter=r,this._configurationService=t,this._initFromConfiguration()}dispose(){this._subscription.dispose()}_initFromConfiguration(){const e="config.",t=this._configurationService.getValue(),r=Object.create(null),n=[],s=(o,a)=>{for(let l in o)if(Object.prototype.hasOwnProperty.call(o,l)){a.push(l);let c=o[l];if(typeof c=="boolean"){const h=a.join("."),u=this._value[h];this._value[h]=c,u!==c?(n.push(h),r[h]=!0):r[h]=!1}else typeof c=="object"&&s(c,a);a.pop()}};s(t,["config"]);for(let o in this._value)o.indexOf(e)===0&&r[o]===void 0&&(delete this._value[o],r[o]=!0,n.push(o));this._emitter.fire(n)}}class CR{constructor(e,t,r){this._parent=e,this._key=t,this._defaultValue=r,this.reset()}set(e){this._parent.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._parent.removeContext(this._key):this._parent.setContext(this._key,this._defaultValue)}get(){return this._parent.getContextKeyValue(this._key)}}class PR{constructor(){this._keys=[]}collect(e){this._keys=this._keys.concat(e)}affectsSome(e){for(const t of this._keys)if(e.has(t))return!0;return!1}}class q3{constructor(e){this._myContextId=e,this._onDidChangeContextKey=new ve}createKey(e,t){return new CR(this,e,t)}get onDidChangeContext(){return this._onDidChangeContext||(this._onDidChangeContext=Ve.debounce(this._onDidChangeContextKey.event,(e,t)=>(e||(e=new PR),e.collect(t),e),25)),this._onDidChangeContext}createScoped(e){return new IR(this,this._onDidChangeContextKey,e)}contextMatchesRules(e){const t=this.getContextValuesContainer(this._myContextId);return Gs.contextMatchesRules(t,e)}getContextKeyValue(e){return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){const r=this.getContextValuesContainer(this._myContextId);r&&r.setValue(e,t)&&this._onDidChangeContextKey.fire(e)}removeContext(e){this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContextKey.fire(e)}getContext(e){return this.getContextValuesContainer(OR(e))}}let R1=class extends q3{constructor(i){super(0),this._toDispose=[],this._lastContextId=0,this._contexts=Object.create(null);const e=new TR(this._myContextId,i,this._onDidChangeContextKey);this._contexts[String(this._myContextId)]=e,this._toDispose.push(e)}dispose(){this._toDispose=ye(this._toDispose)}getContextValuesContainer(i){return this._contexts[String(i)]}createChildContext(i=this._myContextId){let e=++this._lastContextId;return this._contexts[String(e)]=new Y3(e,this.getContextValuesContainer(i)),e}disposeContext(i){delete this._contexts[String(i)]}};R1=AR([DR(0,it)],R1);class IR extends q3{constructor(e,t,r){super(e.createChildContext()),this._parent=e,this._onDidChangeContextKey=t,r&&(this._domNode=r,this._domNode.setAttribute(Yf,String(this._myContextId)))}dispose(){this._parent.disposeContext(this._myContextId),this._domNode&&this._domNode.removeAttribute(Yf)}get onDidChangeContext(){return this._parent.onDidChangeContext}getContextValuesContainer(e){return this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){return this._parent.createChildContext(e)}disposeContext(e){this._parent.disposeContext(e)}}function OR(i){for(;i;){if(i.hasAttribute(Yf))return parseInt(i.getAttribute(Yf),10);i=i.parentElement}return 0}Rt.registerCommand(b6,function(i,e,t){i.get(mr).createKey(String(e),t)});class MR{constructor(e){this._actual=e,this._cache=new Map}dumpDebugInfo(){return this._actual.dumpDebugInfo()}resolveKeybinding(e){let t=e.getHashCode();if(!this._cache.has(t)){let r=this._actual.resolveKeybinding(e);return this._cache.set(t,r),r}return this._cache.get(t)}resolveKeyboardEvent(e){return this._actual.resolveKeyboardEvent(e)}resolveUserBinding(e,t){return this._actual.resolveUserBinding(e,t)}}class NR extends Je{constructor(e,t){super(),this._contextKeyService=e,this._commandService=t,this._currentChord=null,this._currentChordChecker=new h2,this._currentChordStatusMessage=null,this._onDidUpdateKeybindings=this._register(new ve)}dispose(){super.dispose()}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Ve.None}getDefaultKeybindingsContent(){return""}getDefaultKeybindings(){return this._getResolver().getDefaultKeybindings()}getKeybindings(){return this._getResolver().getKeybindings()}customKeybindingsCount(){return 0}lookupKeybindings(e){return this._getResolver().lookupKeybindings(e).map(t=>t.resolvedKeybinding)}lookupKeybinding(e){let t=this._getResolver().lookupPrimaryKeybinding(e);return t?t.resolvedKeybinding:null}softDispatch(e,t){const r=this.resolveKeyboardEvent(e);if(r.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[n]=r.getDispatchParts();if(n===null)return null;const s=this._contextKeyService.getContext(t),o=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(s,o,n)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t};const r=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-r>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){let r=!1;const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[s]=n.getDispatchParts();if(s===null)return r;const o=this._contextKeyService.getContext(t),a=this._currentChord?this._currentChord.keypress:null,l=n.getLabel(),c=this._getResolver().resolve(o,a,s);return c&&c.enterChord?(r=!0,this._enterChordMode(s,l),r):(this._leaveChordMode(),c&&c.commandId&&(c.bubble||(r=!0),this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,h=>{console.error(h)})),r)}}class jd{constructor(e,t,r,n,s){if(this.resolvedKeybinding=e,e){let[o,a]=e.getDispatchParts();this.keypressFirstPart=o,this.keypressChordPart=a}else this.keypressFirstPart=null,this.keypressChordPart=null;this.bubble=t?t.charCodeAt(0)===V.Caret:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=r,this.when=n,this.isDefault=s}}class Jm{constructor(e,t,r=t){this.modifierLabels=[null],this.modifierLabels[yt.Macintosh]=e,this.modifierLabels[yt.Windows]=t,this.modifierLabels[yt.Linux]=r}toLabel(e,t,r,n,s){return t===null&&n===null?null:RR(e,t,r,n,this.modifierLabels[s])}}const qf=new Jm({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:de.localize({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:de.localize({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:de.localize({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:de.localize({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"}),bx=new Jm({ctrlKey:de.localize({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:de.localize({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:de.localize({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:de.localize({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:de.localize({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:de.localize({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:de.localize({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:de.localize({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"}),Sx=new Jm({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),Ex=new Jm({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function tS(i,e,t){if(e===null)return"";let r=[];return i.ctrlKey&&r.push(t.ctrlKey),i.shiftKey&&r.push(t.shiftKey),i.altKey&&r.push(t.altKey),i.metaKey&&r.push(t.metaKey),r.push(e),r.join(t.separator)}function RR(i,e,t,r,n){let s=tS(i,e,n);return r!==null&&(s+=" ",s+=tS(t,r,n)),s}class zs extends sy{constructor(e,t){if(super(),this._os=t,e===null)throw new Error("Invalid USLayoutResolvedKeybinding");e.type===yc.Chord?(this._firstPart=e.firstPart,this._chordPart=e.chordPart):(this._firstPart=e,this._chordPart=null)}_keyCodeToUILabel(e){if(this._os===yt.Macintosh)switch(e){case E.LeftArrow:return"";case E.UpArrow:return"";case E.RightArrow:return"";case E.DownArrow:return""}return lt.toString(e)}_getUILabelForKeybinding(e){return e?e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode):null}getLabel(){let e=this._getUILabelForKeybinding(this._firstPart),t=this._getUILabelForKeybinding(this._chordPart);return qf.toLabel(this._firstPart,e,this._chordPart,t,this._os)}_getAriaLabelForKeybinding(e){return e?e.isDuplicateModifierCase()?"":lt.toString(e.keyCode):null}getAriaLabel(){let e=this._getAriaLabelForKeybinding(this._firstPart),t=this._getAriaLabelForKeybinding(this._chordPart);return bx.toLabel(this._firstPart,e,this._chordPart,t,this._os)}_keyCodeToElectronAccelerator(e){if(e>=E.NUMPAD_0&&e<=E.NUMPAD_DIVIDE)return null;switch(e){case E.UpArrow:return"Up";case E.DownArrow:return"Down";case E.LeftArrow:return"Left";case E.RightArrow:return"Right"}return lt.toString(e)}_getElectronAcceleratorLabelForKeybinding(e){return!e||e.isDuplicateModifierCase()?null:this._keyCodeToElectronAccelerator(e.keyCode)}getElectronAccelerator(){if(this._chordPart!==null)return null;let e=this._getElectronAcceleratorLabelForKeybinding(this._firstPart);return Sx.toLabel(this._firstPart,e,null,null,this._os)}_getUserSettingsLabelForKeybinding(e){return e?e.isDuplicateModifierCase()?"":lt.toUserSettingsUS(e.keyCode):null}getUserSettingsLabel(){let e=this._getUserSettingsLabelForKeybinding(this._firstPart),t=this._getUserSettingsLabelForKeybinding(this._chordPart),r=Ex.toLabel(this._firstPart,e,this._chordPart,t,this._os);return r&&r.toLowerCase()}isWYSIWYG(){return!0}isChord(){return!!this._chordPart}getParts(){return[this._toResolvedKeybindingPart(this._firstPart),this._toResolvedKeybindingPart(this._chordPart)]}_toResolvedKeybindingPart(e){return e?new ny(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getUILabelForKeybinding(e),this._getAriaLabelForKeybinding(e)):null}getDispatchParts(){let e=this._firstPart?zs.getDispatchStr(this._firstPart):null,t=this._chordPart?zs.getDispatchStr(this._chordPart):null;return[e,t]}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=lt.toString(e.keyCode),t}}var Z=(i=>(i[i.None=0]="None",i[i.Hyper=1]="Hyper",i[i.Super=2]="Super",i[i.Fn=3]="Fn",i[i.FnLock=4]="FnLock",i[i.Suspend=5]="Suspend",i[i.Resume=6]="Resume",i[i.Turbo=7]="Turbo",i[i.Sleep=8]="Sleep",i[i.WakeUp=9]="WakeUp",i[i.KeyA=10]="KeyA",i[i.KeyB=11]="KeyB",i[i.KeyC=12]="KeyC",i[i.KeyD=13]="KeyD",i[i.KeyE=14]="KeyE",i[i.KeyF=15]="KeyF",i[i.KeyG=16]="KeyG",i[i.KeyH=17]="KeyH",i[i.KeyI=18]="KeyI",i[i.KeyJ=19]="KeyJ",i[i.KeyK=20]="KeyK",i[i.KeyL=21]="KeyL",i[i.KeyM=22]="KeyM",i[i.KeyN=23]="KeyN",i[i.KeyO=24]="KeyO",i[i.KeyP=25]="KeyP",i[i.KeyQ=26]="KeyQ",i[i.KeyR=27]="KeyR",i[i.KeyS=28]="KeyS",i[i.KeyT=29]="KeyT",i[i.KeyU=30]="KeyU",i[i.KeyV=31]="KeyV",i[i.KeyW=32]="KeyW",i[i.KeyX=33]="KeyX",i[i.KeyY=34]="KeyY",i[i.KeyZ=35]="KeyZ",i[i.Digit1=36]="Digit1",i[i.Digit2=37]="Digit2",i[i.Digit3=38]="Digit3",i[i.Digit4=39]="Digit4",i[i.Digit5=40]="Digit5",i[i.Digit6=41]="Digit6",i[i.Digit7=42]="Digit7",i[i.Digit8=43]="Digit8",i[i.Digit9=44]="Digit9",i[i.Digit0=45]="Digit0",i[i.Enter=46]="Enter",i[i.Escape=47]="Escape",i[i.Backspace=48]="Backspace",i[i.Tab=49]="Tab",i[i.Space=50]="Space",i[i.Minus=51]="Minus",i[i.Equal=52]="Equal",i[i.BracketLeft=53]="BracketLeft",i[i.BracketRight=54]="BracketRight",i[i.Backslash=55]="Backslash",i[i.IntlHash=56]="IntlHash",i[i.Semicolon=57]="Semicolon",i[i.Quote=58]="Quote",i[i.Backquote=59]="Backquote",i[i.Comma=60]="Comma",i[i.Period=61]="Period",i[i.Slash=62]="Slash",i[i.CapsLock=63]="CapsLock",i[i.F1=64]="F1",i[i.F2=65]="F2",i[i.F3=66]="F3",i[i.F4=67]="F4",i[i.F5=68]="F5",i[i.F6=69]="F6",i[i.F7=70]="F7",i[i.F8=71]="F8",i[i.F9=72]="F9",i[i.F10=73]="F10",i[i.F11=74]="F11",i[i.F12=75]="F12",i[i.PrintScreen=76]="PrintScreen",i[i.ScrollLock=77]="ScrollLock",i[i.Pause=78]="Pause",i[i.Insert=79]="Insert",i[i.Home=80]="Home",i[i.PageUp=81]="PageUp",i[i.Delete=82]="Delete",i[i.End=83]="End",i[i.PageDown=84]="PageDown",i[i.ArrowRight=85]="ArrowRight",i[i.ArrowLeft=86]="ArrowLeft",i[i.ArrowDown=87]="ArrowDown",i[i.ArrowUp=88]="ArrowUp",i[i.NumLock=89]="NumLock",i[i.NumpadDivide=90]="NumpadDivide",i[i.NumpadMultiply=91]="NumpadMultiply",i[i.NumpadSubtract=92]="NumpadSubtract",i[i.NumpadAdd=93]="NumpadAdd",i[i.NumpadEnter=94]="NumpadEnter",i[i.Numpad1=95]="Numpad1",i[i.Numpad2=96]="Numpad2",i[i.Numpad3=97]="Numpad3",i[i.Numpad4=98]="Numpad4",i[i.Numpad5=99]="Numpad5",i[i.Numpad6=100]="Numpad6",i[i.Numpad7=101]="Numpad7",i[i.Numpad8=102]="Numpad8",i[i.Numpad9=103]="Numpad9",i[i.Numpad0=104]="Numpad0",i[i.NumpadDecimal=105]="NumpadDecimal",i[i.IntlBackslash=106]="IntlBackslash",i[i.ContextMenu=107]="ContextMenu",i[i.Power=108]="Power",i[i.NumpadEqual=109]="NumpadEqual",i[i.F13=110]="F13",i[i.F14=111]="F14",i[i.F15=112]="F15",i[i.F16=113]="F16",i[i.F17=114]="F17",i[i.F18=115]="F18",i[i.F19=116]="F19",i[i.F20=117]="F20",i[i.F21=118]="F21",i[i.F22=119]="F22",i[i.F23=120]="F23",i[i.F24=121]="F24",i[i.Open=122]="Open",i[i.Help=123]="Help",i[i.Select=124]="Select",i[i.Again=125]="Again",i[i.Undo=126]="Undo",i[i.Cut=127]="Cut",i[i.Copy=128]="Copy",i[i.Paste=129]="Paste",i[i.Find=130]="Find",i[i.AudioVolumeMute=131]="AudioVolumeMute",i[i.AudioVolumeUp=132]="AudioVolumeUp",i[i.AudioVolumeDown=133]="AudioVolumeDown",i[i.NumpadComma=134]="NumpadComma",i[i.IntlRo=135]="IntlRo",i[i.KanaMode=136]="KanaMode",i[i.IntlYen=137]="IntlYen",i[i.Convert=138]="Convert",i[i.NonConvert=139]="NonConvert",i[i.Lang1=140]="Lang1",i[i.Lang2=141]="Lang2",i[i.Lang3=142]="Lang3",i[i.Lang4=143]="Lang4",i[i.Lang5=144]="Lang5",i[i.Abort=145]="Abort",i[i.Props=146]="Props",i[i.NumpadParenLeft=147]="NumpadParenLeft",i[i.NumpadParenRight=148]="NumpadParenRight",i[i.NumpadBackspace=149]="NumpadBackspace",i[i.NumpadMemoryStore=150]="NumpadMemoryStore",i[i.NumpadMemoryRecall=151]="NumpadMemoryRecall",i[i.NumpadMemoryClear=152]="NumpadMemoryClear",i[i.NumpadMemoryAdd=153]="NumpadMemoryAdd",i[i.NumpadMemorySubtract=154]="NumpadMemorySubtract",i[i.NumpadClear=155]="NumpadClear",i[i.NumpadClearEntry=156]="NumpadClearEntry",i[i.ControlLeft=157]="ControlLeft",i[i.ShiftLeft=158]="ShiftLeft",i[i.AltLeft=159]="AltLeft",i[i.MetaLeft=160]="MetaLeft",i[i.ControlRight=161]="ControlRight",i[i.ShiftRight=162]="ShiftRight",i[i.AltRight=163]="AltRight",i[i.MetaRight=164]="MetaRight",i[i.BrightnessUp=165]="BrightnessUp",i[i.BrightnessDown=166]="BrightnessDown",i[i.MediaPlay=167]="MediaPlay",i[i.MediaRecord=168]="MediaRecord",i[i.MediaFastForward=169]="MediaFastForward",i[i.MediaRewind=170]="MediaRewind",i[i.MediaTrackNext=171]="MediaTrackNext",i[i.MediaTrackPrevious=172]="MediaTrackPrevious",i[i.MediaStop=173]="MediaStop",i[i.Eject=174]="Eject",i[i.MediaPlayPause=175]="MediaPlayPause",i[i.MediaSelect=176]="MediaSelect",i[i.LaunchMail=177]="LaunchMail",i[i.LaunchApp2=178]="LaunchApp2",i[i.LaunchApp1=179]="LaunchApp1",i[i.SelectTask=180]="SelectTask",i[i.LaunchScreenSaver=181]="LaunchScreenSaver",i[i.BrowserSearch=182]="BrowserSearch",i[i.BrowserHome=183]="BrowserHome",i[i.BrowserBack=184]="BrowserBack",i[i.BrowserForward=185]="BrowserForward",i[i.BrowserStop=186]="BrowserStop",i[i.BrowserRefresh=187]="BrowserRefresh",i[i.BrowserFavorites=188]="BrowserFavorites",i[i.ZoomToggle=189]="ZoomToggle",i[i.MailReply=190]="MailReply",i[i.MailForward=191]="MailForward",i[i.MailSend=192]="MailSend",i[i.MAX_VALUE=193]="MAX_VALUE",i))(Z||{});const X3=[],Z3=Object.create(null),Q3=Object.create(null),ji={lowerCaseToEnum:i=>Q3[i]||0,toEnum:i=>Z3[i]||0,toString:i=>X3[i]||"None"},Vi=[],$h=[];class $a{constructor(e,t,r,n,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=r,this.metaKey=n,this.scanCode=s}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.scanCode===e.scanCode}isDuplicateModifierCase(){return this.ctrlKey&&(this.scanCode===157||this.scanCode===161)||this.shiftKey&&(this.scanCode===158||this.scanCode===162)||this.altKey&&(this.scanCode===159||this.scanCode===163)||this.metaKey&&(this.scanCode===160||this.scanCode===164)}}(function(){function i(e,t){X3[e]=t,Z3[t]=e,Q3[t.toLowerCase()]=e}i(0,"None"),i(1,"Hyper"),i(2,"Super"),i(3,"Fn"),i(4,"FnLock"),i(5,"Suspend"),i(6,"Resume"),i(7,"Turbo"),i(8,"Sleep"),i(9,"WakeUp"),i(10,"KeyA"),i(11,"KeyB"),i(12,"KeyC"),i(13,"KeyD"),i(14,"KeyE"),i(15,"KeyF"),i(16,"KeyG"),i(17,"KeyH"),i(18,"KeyI"),i(19,"KeyJ"),i(20,"KeyK"),i(21,"KeyL"),i(22,"KeyM"),i(23,"KeyN"),i(24,"KeyO"),i(25,"KeyP"),i(26,"KeyQ"),i(27,"KeyR"),i(28,"KeyS"),i(29,"KeyT"),i(30,"KeyU"),i(31,"KeyV"),i(32,"KeyW"),i(33,"KeyX"),i(34,"KeyY"),i(35,"KeyZ"),i(36,"Digit1"),i(37,"Digit2"),i(38,"Digit3"),i(39,"Digit4"),i(40,"Digit5"),i(41,"Digit6"),i(42,"Digit7"),i(43,"Digit8"),i(44,"Digit9"),i(45,"Digit0"),i(46,"Enter"),i(47,"Escape"),i(48,"Backspace"),i(49,"Tab"),i(50,"Space"),i(51,"Minus"),i(52,"Equal"),i(53,"BracketLeft"),i(54,"BracketRight"),i(55,"Backslash"),i(56,"IntlHash"),i(57,"Semicolon"),i(58,"Quote"),i(59,"Backquote"),i(60,"Comma"),i(61,"Period"),i(62,"Slash"),i(63,"CapsLock"),i(64,"F1"),i(65,"F2"),i(66,"F3"),i(67,"F4"),i(68,"F5"),i(69,"F6"),i(70,"F7"),i(71,"F8"),i(72,"F9"),i(73,"F10"),i(74,"F11"),i(75,"F12"),i(76,"PrintScreen"),i(77,"ScrollLock"),i(78,"Pause"),i(79,"Insert"),i(80,"Home"),i(81,"PageUp"),i(82,"Delete"),i(83,"End"),i(84,"PageDown"),i(85,"ArrowRight"),i(86,"ArrowLeft"),i(87,"ArrowDown"),i(88,"ArrowUp"),i(89,"NumLock"),i(90,"NumpadDivide"),i(91,"NumpadMultiply"),i(92,"NumpadSubtract"),i(93,"NumpadAdd"),i(94,"NumpadEnter"),i(95,"Numpad1"),i(96,"Numpad2"),i(97,"Numpad3"),i(98,"Numpad4"),i(99,"Numpad5"),i(100,"Numpad6"),i(101,"Numpad7"),i(102,"Numpad8"),i(103,"Numpad9"),i(104,"Numpad0"),i(105,"NumpadDecimal"),i(106,"IntlBackslash"),i(107,"ContextMenu"),i(108,"Power"),i(109,"NumpadEqual"),i(110,"F13"),i(111,"F14"),i(112,"F15"),i(113,"F16"),i(114,"F17"),i(115,"F18"),i(116,"F19"),i(117,"F20"),i(118,"F21"),i(119,"F22"),i(120,"F23"),i(121,"F24"),i(122,"Open"),i(123,"Help"),i(124,"Select"),i(125,"Again"),i(126,"Undo"),i(127,"Cut"),i(128,"Copy"),i(129,"Paste"),i(130,"Find"),i(131,"AudioVolumeMute"),i(132,"AudioVolumeUp"),i(133,"AudioVolumeDown"),i(134,"NumpadComma"),i(135,"IntlRo"),i(136,"KanaMode"),i(137,"IntlYen"),i(138,"Convert"),i(139,"NonConvert"),i(140,"Lang1"),i(141,"Lang2"),i(142,"Lang3"),i(143,"Lang4"),i(144,"Lang5"),i(145,"Abort"),i(146,"Props"),i(147,"NumpadParenLeft"),i(148,"NumpadParenRight"),i(149,"NumpadBackspace"),i(150,"NumpadMemoryStore"),i(151,"NumpadMemoryRecall"),i(152,"NumpadMemoryClear"),i(153,"NumpadMemoryAdd"),i(154,"NumpadMemorySubtract"),i(155,"NumpadClear"),i(156,"NumpadClearEntry"),i(157,"ControlLeft"),i(158,"ShiftLeft"),i(159,"AltLeft"),i(160,"MetaLeft"),i(161,"ControlRight"),i(162,"ShiftRight"),i(163,"AltRight"),i(164,"MetaRight"),i(165,"BrightnessUp"),i(166,"BrightnessDown"),i(167,"MediaPlay"),i(168,"MediaRecord"),i(169,"MediaFastForward"),i(170,"MediaRewind"),i(171,"MediaTrackNext"),i(172,"MediaTrackPrevious"),i(173,"MediaStop"),i(174,"Eject"),i(175,"MediaPlayPause"),i(176,"MediaSelect"),i(177,"LaunchMail"),i(178,"LaunchApp2"),i(179,"LaunchApp1"),i(180,"SelectTask"),i(181,"LaunchScreenSaver"),i(182,"BrowserSearch"),i(183,"BrowserHome"),i(184,"BrowserBack"),i(185,"BrowserForward"),i(186,"BrowserStop"),i(187,"BrowserRefresh"),i(188,"BrowserFavorites"),i(189,"ZoomToggle"),i(190,"MailReply"),i(191,"MailForward"),i(192,"MailSend")})();(function(){for(let e=0;e<=193;e++)Vi[e]=-1;for(let e=0;e<=E.MAX_VALUE;e++)$h[e]=-1;function i(e,t){Vi[e]=t,t!==E.Unknown&&t!==E.Enter&&t!==E.Ctrl&&t!==E.Shift&&t!==E.Alt&&t!==E.Meta&&($h[t]=e)}$h[E.Enter]=46,i(0,E.Unknown),i(1,E.Unknown),i(2,E.Unknown),i(3,E.Unknown),i(4,E.Unknown),i(5,E.Unknown),i(6,E.Unknown),i(7,E.Unknown),i(8,E.Unknown),i(9,E.Unknown),i(46,E.Enter),i(47,E.Escape),i(48,E.Backspace),i(49,E.Tab),i(50,E.Space),i(63,E.CapsLock),i(64,E.F1),i(65,E.F2),i(66,E.F3),i(67,E.F4),i(68,E.F5),i(69,E.F6),i(70,E.F7),i(71,E.F8),i(72,E.F9),i(73,E.F10),i(74,E.F11),i(75,E.F12),i(76,E.Unknown),i(77,E.ScrollLock),i(78,E.PauseBreak),i(79,E.Insert),i(80,E.Home),i(81,E.PageUp),i(82,E.Delete),i(83,E.End),i(84,E.PageDown),i(85,E.RightArrow),i(86,E.LeftArrow),i(87,E.DownArrow),i(88,E.UpArrow),i(89,E.NumLock),i(90,E.NUMPAD_DIVIDE),i(91,E.NUMPAD_MULTIPLY),i(92,E.NUMPAD_SUBTRACT),i(93,E.NUMPAD_ADD),i(94,E.Enter),i(95,E.NUMPAD_1),i(96,E.NUMPAD_2),i(97,E.NUMPAD_3),i(98,E.NUMPAD_4),i(99,E.NUMPAD_5),i(100,E.NUMPAD_6),i(101,E.NUMPAD_7),i(102,E.NUMPAD_8),i(103,E.NUMPAD_9),i(104,E.NUMPAD_0),i(105,E.NUMPAD_DECIMAL),i(107,E.ContextMenu),i(108,E.Unknown),i(109,E.Unknown),i(110,E.F13),i(111,E.F14),i(112,E.F15),i(113,E.F16),i(114,E.F17),i(115,E.F18),i(116,E.F19),i(117,E.Unknown),i(118,E.Unknown),i(119,E.Unknown),i(120,E.Unknown),i(121,E.Unknown),i(122,E.Unknown),i(123,E.Unknown),i(124,E.Unknown),i(125,E.Unknown),i(126,E.Unknown),i(127,E.Unknown),i(128,E.Unknown),i(129,E.Unknown),i(130,E.Unknown),i(131,E.Unknown),i(132,E.Unknown),i(133,E.Unknown),i(134,E.NUMPAD_SEPARATOR),i(136,E.Unknown),i(138,E.Unknown),i(139,E.Unknown),i(140,E.Unknown),i(141,E.Unknown),i(142,E.Unknown),i(143,E.Unknown),i(144,E.Unknown),i(145,E.Unknown),i(146,E.Unknown),i(147,E.Unknown),i(148,E.Unknown),i(149,E.Unknown),i(150,E.Unknown),i(151,E.Unknown),i(152,E.Unknown),i(153,E.Unknown),i(154,E.Unknown),i(155,E.Unknown),i(156,E.Unknown),i(157,E.Ctrl),i(158,E.Shift),i(159,E.Alt),i(160,E.Meta),i(161,E.Ctrl),i(162,E.Shift),i(163,E.Alt),i(164,E.Meta),i(165,E.Unknown),i(166,E.Unknown),i(167,E.Unknown),i(168,E.Unknown),i(169,E.Unknown),i(170,E.Unknown),i(171,E.Unknown),i(172,E.Unknown),i(173,E.Unknown),i(174,E.Unknown),i(175,E.Unknown),i(176,E.Unknown),i(177,E.Unknown),i(178,E.Unknown),i(179,E.Unknown),i(180,E.Unknown),i(181,E.Unknown),i(182,E.Unknown),i(183,E.Unknown),i(184,E.Unknown),i(185,E.Unknown),i(186,E.Unknown),i(187,E.Unknown),i(188,E.Unknown),i(189,E.Unknown),i(190,E.Unknown),i(191,E.Unknown),i(192,E.Unknown)})();class Zg{constructor(e){this._OS=e}dumpDebugInfo(){return"FallbackKeyboardMapper dispatching on keyCode"}resolveKeybinding(e){return[new zs(e,this._OS)]}resolveKeyboardEvent(e){let t=new Ar(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new zs(t,this._OS)}_scanCodeToKeyCode(e){const t=Vi[e];if(t!==-1)return t;switch(e){case Z.KeyA:return E.KEY_A;case Z.KeyB:return E.KEY_B;case Z.KeyC:return E.KEY_C;case Z.KeyD:return E.KEY_D;case Z.KeyE:return E.KEY_E;case Z.KeyF:return E.KEY_F;case Z.KeyG:return E.KEY_G;case Z.KeyH:return E.KEY_H;case Z.KeyI:return E.KEY_I;case Z.KeyJ:return E.KEY_J;case Z.KeyK:return E.KEY_K;case Z.KeyL:return E.KEY_L;case Z.KeyM:return E.KEY_M;case Z.KeyN:return E.KEY_N;case Z.KeyO:return E.KEY_O;case Z.KeyP:return E.KEY_P;case Z.KeyQ:return E.KEY_Q;case Z.KeyR:return E.KEY_R;case Z.KeyS:return E.KEY_S;case Z.KeyT:return E.KEY_T;case Z.KeyU:return E.KEY_U;case Z.KeyV:return E.KEY_V;case Z.KeyW:return E.KEY_W;case Z.KeyX:return E.KEY_X;case Z.KeyY:return E.KEY_Y;case Z.KeyZ:return E.KEY_Z;case Z.Digit1:return E.KEY_1;case Z.Digit2:return E.KEY_2;case Z.Digit3:return E.KEY_3;case Z.Digit4:return E.KEY_4;case Z.Digit5:return E.KEY_5;case Z.Digit6:return E.KEY_6;case Z.Digit7:return E.KEY_7;case Z.Digit8:return E.KEY_8;case Z.Digit9:return E.KEY_9;case Z.Digit0:return E.KEY_0;case Z.Minus:return E.US_MINUS;case Z.Equal:return E.US_EQUAL;case Z.BracketLeft:return E.US_OPEN_SQUARE_BRACKET;case Z.BracketRight:return E.US_CLOSE_SQUARE_BRACKET;case Z.Backslash:return E.US_BACKSLASH;case Z.IntlHash:return E.Unknown;case Z.Semicolon:return E.US_SEMICOLON;case Z.Quote:return E.US_QUOTE;case Z.Backquote:return E.US_BACKTICK;case Z.Comma:return E.US_COMMA;case Z.Period:return E.US_DOT;case Z.Slash:return E.US_SLASH;case Z.IntlBackslash:return E.OEM_102}return E.Unknown}_resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof Ar)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===E.Unknown?null:new Ar(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}resolveUserBinding(e,t){const r=this._resolveSimpleUserBinding(e),n=this._resolveSimpleUserBinding(t);return r&&n?[new zs(new ry(r,n),this._OS)]:r?[new zs(r,this._OS)]:[]}}function LR(i,e){return!i&&!e?!0:!i||!e?!1:i.vkey===e.vkey&&i.value===e.value&&i.withShift===e.withShift&&i.withAltGr===e.withAltGr&&i.withShiftAltGr===e.withShiftAltGr}function kR(i,e){if(!i&&!e)return!0;if(!i||!e)return!1;for(let t=0;t<Z.MAX_VALUE;t++){const r=ji.toString(t),n=i[r],s=e[r];if(!LR(n,s))return!1}return!0}const iS=FR();class Ps extends sy{constructor(e,t,r){if(super(),!t)throw new Error("Invalid WindowsNativeResolvedKeybinding firstPart");this._mapper=e,this._firstPart=t,this._chordPart=r}_getUILabelForKeybinding(e){return e?e.isDuplicateModifierCase()?"":this._mapper.getUILabelForKeyCode(e.keyCode):null}getLabel(){let e=this._getUILabelForKeybinding(this._firstPart),t=this._getUILabelForKeybinding(this._chordPart);return qf.toLabel(this._firstPart,e,this._chordPart,t,yt.Windows)}_getUSLabelForKeybinding(e){return e?e.isDuplicateModifierCase()?"":lt.toString(e.keyCode):null}getUSLabel(){let e=this._getUSLabelForKeybinding(this._firstPart),t=this._getUSLabelForKeybinding(this._chordPart);return qf.toLabel(this._firstPart,e,this._chordPart,t,yt.Windows)}_getAriaLabelForKeybinding(e){return e?e.isDuplicateModifierCase()?"":this._mapper.getAriaLabelForKeyCode(e.keyCode):null}getAriaLabel(){let e=this._getAriaLabelForKeybinding(this._firstPart),t=this._getAriaLabelForKeybinding(this._chordPart);return bx.toLabel(this._firstPart,e,this._chordPart,t,yt.Windows)}_keyCodeToElectronAccelerator(e){if(e>=E.NUMPAD_0&&e<=E.NUMPAD_DIVIDE)return null;switch(e){case E.UpArrow:return"Up";case E.DownArrow:return"Down";case E.LeftArrow:return"Left";case E.RightArrow:return"Right"}return lt.toString(e)}_getElectronAcceleratorLabelForKeybinding(e){return!e||e.isDuplicateModifierCase()?null:this._keyCodeToElectronAccelerator(e.keyCode)}getElectronAccelerator(){if(this._chordPart!==null)return null;let e=this._getElectronAcceleratorLabelForKeybinding(this._firstPart);return Sx.toLabel(this._firstPart,e,null,null,yt.Windows)}_getUserSettingsLabelForKeybinding(e){return e?e.isDuplicateModifierCase()?"":this._mapper.getUserSettingsLabelForKeyCode(e.keyCode):null}getUserSettingsLabel(){let e=this._getUserSettingsLabelForKeybinding(this._firstPart),t=this._getUserSettingsLabelForKeybinding(this._chordPart),r=Ex.toLabel(this._firstPart,e,this._chordPart,t,yt.Windows);return r&&r.toLowerCase()}isWYSIWYG(){return!(this._firstPart&&!this._isWYSIWYG(this._firstPart.keyCode)||this._chordPart&&!this._isWYSIWYG(this._chordPart.keyCode))}_isWYSIWYG(e){if(e===E.LeftArrow||e===E.UpArrow||e===E.RightArrow||e===E.DownArrow)return!0;const t=this._mapper.getAriaLabelForKeyCode(e),r=this._mapper.getUserSettingsLabelForKeyCode(e);return t===r}isChord(){return!!this._chordPart}getParts(){return[this._toResolvedKeybindingPart(this._firstPart),this._toResolvedKeybindingPart(this._chordPart)]}_toResolvedKeybindingPart(e){return e?new ny(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getUILabelForKeybinding(e),this._getAriaLabelForKeybinding(e)):null}getDispatchParts(){let e=this._firstPart?this._getDispatchStr(this._firstPart):null,t=this._chordPart?this._getDispatchStr(this._chordPart):null;return[e,t]}_getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=lt.toString(e.keyCode),t}static getProducedCharCode(e,t){return t?e.ctrlKey&&e.shiftKey&&e.altKey?t.withShiftAltGr:e.ctrlKey&&e.altKey?t.withAltGr:e.shiftKey?t.withShift:t.value:null}static getProducedChar(e,t){const r=this.getProducedCharCode(e,t);return r===null||r.length===0?" --- ":"  "+r+"  "}}class BR{constructor(e,t){this._keyCodeToLabel=[],this.isUSStandard=e,this._scanCodeToKeyCode=[],this._keyCodeToLabel=[],this._keyCodeExists=[],this._keyCodeToLabel[E.Unknown]=lt.toString(E.Unknown);for(let s=Z.None;s<Z.MAX_VALUE;s++){const o=Vi[s];o!==-1&&(this._scanCodeToKeyCode[s]=o,this._keyCodeToLabel[o]=lt.toString(o),this._keyCodeExists[o]=!0)}let r=[];this._codeInfo=[];for(let s in t)if(t.hasOwnProperty(s)){const o=ji.toEnum(s);if(o===Z.None)continue;const a=t[s],l=Vi[o];if(l!==-1){const m=iS[a.vkey]||E.Unknown;if(m===E.Unknown||l===m||o!==Z.NumpadComma)continue}const c=a.value,h=a.withShift,u=a.withAltGr,p=a.withShiftAltGr,d=iS[a.vkey]||E.Unknown,f={scanCode:o,keyCode:d,value:c,withShift:h,withAltGr:u,withShiftAltGr:p};if(this._codeInfo[o]=f,this._scanCodeToKeyCode[o]=d,d===E.Unknown)continue;if(this._keyCodeExists[d]=!0,c.length===0)this._keyCodeToLabel[d]=null;else if(c.length>1)this._keyCodeToLabel[d]=c;else{const m=c.charCodeAt(0);if(m>=V.a&&m<=V.z){const g=V.A+(m-V.a);r[g]=!0,this._keyCodeToLabel[d]=String.fromCharCode(V.A+(m-V.a))}else m>=V.A&&m<=V.Z?(r[m]=!0,this._keyCodeToLabel[d]=c):this._keyCodeToLabel[d]=c}}const n=(s,o)=>{r[s]||(this._keyCodeToLabel[o]=String.fromCharCode(s))};n(V.A,E.KEY_A),n(V.B,E.KEY_B),n(V.C,E.KEY_C),n(V.D,E.KEY_D),n(V.E,E.KEY_E),n(V.F,E.KEY_F),n(V.G,E.KEY_G),n(V.H,E.KEY_H),n(V.I,E.KEY_I),n(V.J,E.KEY_J),n(V.K,E.KEY_K),n(V.L,E.KEY_L),n(V.M,E.KEY_M),n(V.N,E.KEY_N),n(V.O,E.KEY_O),n(V.P,E.KEY_P),n(V.Q,E.KEY_Q),n(V.R,E.KEY_R),n(V.S,E.KEY_S),n(V.T,E.KEY_T),n(V.U,E.KEY_U),n(V.V,E.KEY_V),n(V.W,E.KEY_W),n(V.X,E.KEY_X),n(V.Y,E.KEY_Y),n(V.Z,E.KEY_Z)}dumpDebugInfo(){let e=[],t=[Z.ArrowUp,Z.Numpad0],r=0;e.push("-----------------------------------------------------------------------------------------------------------------------------------------");for(let n=Z.None;n<Z.MAX_VALUE;n++){if(Vi[n]!==-1&&t.indexOf(n)===-1)continue;r%6===0&&(e.push("|       HW Code combination      |  Key  |    KeyCode combination    |          UI label         |        User settings       | WYSIWYG |"),e.push("-----------------------------------------------------------------------------------------------------------------------------------------")),r++;const s=this._codeInfo[n],o=ji.toString(n);let a=[0,2,5,7];for(let l=0;l<a.length;l++){const c=a[l],h=!!(c&1),u=!!(c&2),p=!!(c&4),d=new $a(h,u,p,!1,n),f=this._resolveSimpleUserBinding(d),m=f?lt.toString(f.keyCode):null,g=f?new Ps(this,f,null):null,_=`${h?"Ctrl+":""}${u?"Shift+":""}${p?"Alt+":""}${o}`,v=g?g.getAriaLabel():null,y=v?v.replace(/Control\+/,"Ctrl+"):null,x=g?g.getUserSettingsLabel():null,A=Ps.getProducedChar(d,s),w=m?`${h?"Ctrl+":""}${u?"Shift+":""}${p?"Alt+":""}${m}`:null,b=(g?g.isWYSIWYG():!1)?"       ":"   NO  ";e.push(`| ${this._leftPad(_,30)} | ${A} | ${this._leftPad(w,25)} | ${this._leftPad(y,25)} |  ${this._leftPad(x,25)} | ${b} |`)}e.push("-----------------------------------------------------------------------------------------------------------------------------------------")}return e.join(`
`)}_leftPad(e,t){for(e===null&&(e="null");e.length<t;)e=" "+e;return e}getUILabelForKeyCode(e){return this._getLabelForKeyCode(e)}getAriaLabelForKeyCode(e){return this._getLabelForKeyCode(e)}getUserSettingsLabelForKeyCode(e){return this.isUSStandard?lt.toUserSettingsUS(e):lt.toUserSettingsGeneral(e)}_getLabelForKeyCode(e){return this._keyCodeToLabel[e]||lt.toString(E.Unknown)}resolveKeybinding(e){if(e.type===yc.Chord){const t=e.firstPart.keyCode,r=e.chordPart.keyCode;return!this._keyCodeExists[t]||!this._keyCodeExists[r]?[]:[new Ps(this,e.firstPart,e.chordPart)]}else return this._keyCodeExists[e.keyCode]?[new Ps(this,e,null)]:[]}resolveKeyboardEvent(e){const t=new Ar(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new Ps(this,t,null)}_resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof Ar)return this._keyCodeExists[e.keyCode]?e:null;const t=this._scanCodeToKeyCode[e.scanCode]||E.Unknown;return t===E.Unknown||!this._keyCodeExists[t]?null:new Ar(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}resolveUserBinding(e,t){const r=this._resolveSimpleUserBinding(e),n=this._resolveSimpleUserBinding(t);return r&&n?[new Ps(this,r,n)]:r?[new Ps(this,r,null)]:[]}}function FR(){return{VK_BACK:E.Backspace,VK_TAB:E.Tab,VK_CLEAR:E.Unknown,VK_RETURN:E.Enter,VK_SHIFT:E.Shift,VK_CONTROL:E.Ctrl,VK_MENU:E.Alt,VK_PAUSE:E.PauseBreak,VK_CAPITAL:E.CapsLock,VK_KANA:E.Unknown,VK_HANGUL:E.Unknown,VK_JUNJA:E.Unknown,VK_FINAL:E.Unknown,VK_HANJA:E.Unknown,VK_KANJI:E.Unknown,VK_ESCAPE:E.Escape,VK_CONVERT:E.Unknown,VK_NONCONVERT:E.Unknown,VK_ACCEPT:E.Unknown,VK_MODECHANGE:E.Unknown,VK_SPACE:E.Space,VK_PRIOR:E.PageUp,VK_NEXT:E.PageDown,VK_END:E.End,VK_HOME:E.Home,VK_LEFT:E.LeftArrow,VK_UP:E.UpArrow,VK_RIGHT:E.RightArrow,VK_DOWN:E.DownArrow,VK_SELECT:E.Unknown,VK_PRINT:E.Unknown,VK_EXECUTE:E.Unknown,VK_SNAPSHOT:E.Unknown,VK_INSERT:E.Insert,VK_DELETE:E.Delete,VK_HELP:E.Unknown,VK_0:E.KEY_0,VK_1:E.KEY_1,VK_2:E.KEY_2,VK_3:E.KEY_3,VK_4:E.KEY_4,VK_5:E.KEY_5,VK_6:E.KEY_6,VK_7:E.KEY_7,VK_8:E.KEY_8,VK_9:E.KEY_9,VK_A:E.KEY_A,VK_B:E.KEY_B,VK_C:E.KEY_C,VK_D:E.KEY_D,VK_E:E.KEY_E,VK_F:E.KEY_F,VK_G:E.KEY_G,VK_H:E.KEY_H,VK_I:E.KEY_I,VK_J:E.KEY_J,VK_K:E.KEY_K,VK_L:E.KEY_L,VK_M:E.KEY_M,VK_N:E.KEY_N,VK_O:E.KEY_O,VK_P:E.KEY_P,VK_Q:E.KEY_Q,VK_R:E.KEY_R,VK_S:E.KEY_S,VK_T:E.KEY_T,VK_U:E.KEY_U,VK_V:E.KEY_V,VK_W:E.KEY_W,VK_X:E.KEY_X,VK_Y:E.KEY_Y,VK_Z:E.KEY_Z,VK_LWIN:E.Meta,VK_COMMAND:E.Meta,VK_RWIN:E.Meta,VK_APPS:E.Unknown,VK_SLEEP:E.Unknown,VK_NUMPAD0:E.NUMPAD_0,VK_NUMPAD1:E.NUMPAD_1,VK_NUMPAD2:E.NUMPAD_2,VK_NUMPAD3:E.NUMPAD_3,VK_NUMPAD4:E.NUMPAD_4,VK_NUMPAD5:E.NUMPAD_5,VK_NUMPAD6:E.NUMPAD_6,VK_NUMPAD7:E.NUMPAD_7,VK_NUMPAD8:E.NUMPAD_8,VK_NUMPAD9:E.NUMPAD_9,VK_MULTIPLY:E.NUMPAD_MULTIPLY,VK_ADD:E.NUMPAD_ADD,VK_SEPARATOR:E.NUMPAD_SEPARATOR,VK_SUBTRACT:E.NUMPAD_SUBTRACT,VK_DECIMAL:E.NUMPAD_DECIMAL,VK_DIVIDE:E.NUMPAD_DIVIDE,VK_F1:E.F1,VK_F2:E.F2,VK_F3:E.F3,VK_F4:E.F4,VK_F5:E.F5,VK_F6:E.F6,VK_F7:E.F7,VK_F8:E.F8,VK_F9:E.F9,VK_F10:E.F10,VK_F11:E.F11,VK_F12:E.F12,VK_F13:E.F13,VK_F14:E.F14,VK_F15:E.F15,VK_F16:E.F16,VK_F17:E.F17,VK_F18:E.F18,VK_F19:E.F19,VK_F20:E.Unknown,VK_F21:E.Unknown,VK_F22:E.Unknown,VK_F23:E.Unknown,VK_F24:E.Unknown,VK_NUMLOCK:E.NumLock,VK_SCROLL:E.ScrollLock,VK_LSHIFT:E.Shift,VK_RSHIFT:E.Shift,VK_LCONTROL:E.Ctrl,VK_RCONTROL:E.Ctrl,VK_LMENU:E.Unknown,VK_RMENU:E.Unknown,VK_BROWSER_BACK:E.Unknown,VK_BROWSER_FORWARD:E.Unknown,VK_BROWSER_REFRESH:E.Unknown,VK_BROWSER_STOP:E.Unknown,VK_BROWSER_SEARCH:E.Unknown,VK_BROWSER_FAVORITES:E.Unknown,VK_BROWSER_HOME:E.Unknown,VK_VOLUME_MUTE:E.Unknown,VK_VOLUME_DOWN:E.Unknown,VK_VOLUME_UP:E.Unknown,VK_MEDIA_NEXT_TRACK:E.Unknown,VK_MEDIA_PREV_TRACK:E.Unknown,VK_MEDIA_STOP:E.Unknown,VK_MEDIA_PLAY_PAUSE:E.Unknown,VK_MEDIA_LAUNCH_MAIL:E.Unknown,VK_MEDIA_LAUNCH_MEDIA_SELECT:E.Unknown,VK_MEDIA_LAUNCH_APP1:E.Unknown,VK_MEDIA_LAUNCH_APP2:E.Unknown,VK_OEM_1:E.US_SEMICOLON,VK_OEM_PLUS:E.US_EQUAL,VK_OEM_COMMA:E.US_COMMA,VK_OEM_MINUS:E.US_MINUS,VK_OEM_PERIOD:E.US_DOT,VK_OEM_2:E.US_SLASH,VK_OEM_3:E.US_BACKTICK,VK_ABNT_C1:E.ABNT_C1,VK_ABNT_C2:E.ABNT_C2,VK_OEM_4:E.US_OPEN_SQUARE_BRACKET,VK_OEM_5:E.US_BACKSLASH,VK_OEM_6:E.US_CLOSE_SQUARE_BRACKET,VK_OEM_7:E.US_QUOTE,VK_OEM_8:E.OEM_8,VK_OEM_102:E.OEM_102,VK_PROCESSKEY:E.Unknown,VK_PACKET:E.Unknown,VK_DBE_SBCSCHAR:E.Unknown,VK_DBE_DBCSCHAR:E.Unknown,VK_ATTN:E.Unknown,VK_CRSEL:E.Unknown,VK_EXSEL:E.Unknown,VK_EREOF:E.Unknown,VK_PLAY:E.Unknown,VK_ZOOM:E.Unknown,VK_NONAME:E.Unknown,VK_PA1:E.Unknown,VK_OEM_CLEAR:E.Unknown,VK_UNKNOWN:E.Unknown}}function UR(i,e){return!i&&!e?!0:!i||!e?!1:i.value===e.value&&i.withShift===e.withShift&&i.withAltGr===e.withAltGr&&i.withShiftAltGr===e.withShiftAltGr}function KR(i,e){if(!i&&!e)return!0;if(!i||!e)return!1;for(let t=0;t<Z.MAX_VALUE;t++){const r=ji.toString(t),n=i[r],s=e[r];if(!UR(n,s))return!1}return!0}const Vh=[];class gh extends sy{constructor(e,t,r,n){if(super(),!r)throw new Error("Invalid USLayoutResolvedKeybinding");this._mapper=e,this._OS=t,this._firstPart=r,this._chordPart=n}getLabel(){let e=this._mapper.getUILabelForScanCodeBinding(this._firstPart),t=this._mapper.getUILabelForScanCodeBinding(this._chordPart);return qf.toLabel(this._firstPart,e,this._chordPart,t,this._OS)}getAriaLabel(){let e=this._mapper.getAriaLabelForScanCodeBinding(this._firstPart),t=this._mapper.getAriaLabelForScanCodeBinding(this._chordPart);return bx.toLabel(this._firstPart,e,this._chordPart,t,this._OS)}getElectronAccelerator(){if(this._chordPart!==null)return null;let e=this._mapper.getElectronAcceleratorLabelForScanCodeBinding(this._firstPart);return Sx.toLabel(this._firstPart,e,null,null,this._OS)}getUserSettingsLabel(){let e=this._mapper.getUserSettingsLabelForScanCodeBinding(this._firstPart),t=this._mapper.getUserSettingsLabelForScanCodeBinding(this._chordPart);return Ex.toLabel(this._firstPart,e,this._chordPart,t,this._OS)}_isWYSIWYG(e){if(!e||Vi[e.scanCode]!==-1)return!0;let t=this._mapper.getAriaLabelForScanCodeBinding(e),r=this._mapper.getUserSettingsLabelForScanCodeBinding(e);return!t&&!r?!0:!t||!r?!1:t.toLowerCase()===r.toLowerCase()}isWYSIWYG(){return this._isWYSIWYG(this._firstPart)&&this._isWYSIWYG(this._chordPart)}isChord(){return!!this._chordPart}getParts(){return[this._toResolvedKeybindingPart(this._firstPart),this._toResolvedKeybindingPart(this._chordPart)]}_toResolvedKeybindingPart(e){return e?new ny(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._mapper.getUILabelForScanCodeBinding(e),this._mapper.getAriaLabelForScanCodeBinding(e)):null}getDispatchParts(){let e=this._firstPart?this._mapper.getDispatchStrForScanCodeBinding(this._firstPart):null,t=this._chordPart?this._mapper.getDispatchStrForScanCodeBinding(this._chordPart):null;return[e,t]}}class Wh{constructor(e,t,r,n){this.ctrlKey=e,this.shiftKey=t,this.altKey=r,this.scanCode=n}toString(){return`${this.ctrlKey?"Ctrl+":""}${this.shiftKey?"Shift+":""}${this.altKey?"Alt+":""}${ji.toString(this.scanCode)}`}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.scanCode===e.scanCode}getProducedCharCode(e){return e?this.ctrlKey&&this.shiftKey&&this.altKey?e.withShiftAltGr:this.ctrlKey&&this.altKey?e.withAltGr:this.shiftKey?e.withShift:e.value:""}getProducedChar(e){const t=nr.getCharCode(this.getProducedCharCode(e));return t===0?" --- ":t>=V.U_Combining_Grave_Accent&&t<=V.U_Combining_Latin_Small_Letter_X?"U+"+t.toString(16):"  "+String.fromCharCode(t)+"  "}}class L1{constructor(e,t,r,n){this.ctrlKey=e,this.shiftKey=t,this.altKey=r,this.keyCode=n}toString(){return`${this.ctrlKey?"Ctrl+":""}${this.shiftKey?"Shift+":""}${this.altKey?"Alt+":""}${lt.toString(this.keyCode)}`}}class HR{constructor(){this._scanCodeToKeyCode=[],this._keyCodeToScanCode=[],this._scanCodeToKeyCode=[],this._keyCodeToScanCode=[]}registrationComplete(){this._moveToEnd(Z.IntlHash),this._moveToEnd(Z.IntlBackslash)}_moveToEnd(e){for(let t=0;t<8;t++){const r=this._scanCodeToKeyCode[(e<<3)+t];if(r)for(let n=0,s=r.length;n<s;n++){const o=this._keyCodeToScanCode[r[n]];if(o.length!==1)for(let a=0,l=o.length;a<l;a++){const c=o[a];if(c>>>3===e){for(let u=a+1;u<l;u++)o[u-1]=o[u];o[l-1]=c}}}}}registerIfUnknown(e,t){if(t.keyCode===E.Unknown)return;const r=this._encodeScanCodeCombo(e),n=this._encodeKeyCodeCombo(t),s=t.keyCode>=E.KEY_0&&t.keyCode<=E.KEY_9,o=t.keyCode>=E.KEY_A&&t.keyCode<=E.KEY_Z,a=this._scanCodeToKeyCode[r];if(s||o){if(a){for(let l=0,c=a.length;l<c;l++)if(a[l]===n)return}}else if(a&&a.length!==0)return;this._scanCodeToKeyCode[r]=this._scanCodeToKeyCode[r]||[],this._scanCodeToKeyCode[r].unshift(n),this._keyCodeToScanCode[n]=this._keyCodeToScanCode[n]||[],this._keyCodeToScanCode[n].unshift(r)}lookupKeyCodeCombo(e){const t=this._encodeKeyCodeCombo(e),r=this._keyCodeToScanCode[t];if(!r||r.length===0)return[];let n=[];for(let s=0,o=r.length;s<o;s++){const a=r[s],l=!!(a&1),c=!!(a&2),h=!!(a&4),u=a>>>3;n[s]=new Wh(l,c,h,u)}return n}lookupScanCodeCombo(e){const t=this._encodeScanCodeCombo(e),r=this._scanCodeToKeyCode[t];if(!r||r.length===0)return[];let n=[];for(let s=0,o=r.length;s<o;s++){const a=r[s],l=!!(a&1),c=!!(a&2),h=!!(a&4),u=a>>>3;n[s]=new L1(l,c,h,u)}return n}guessStableKeyCode(e){if(e>=Z.Digit1&&e<=Z.Digit0)switch(e){case Z.Digit1:return E.KEY_1;case Z.Digit2:return E.KEY_2;case Z.Digit3:return E.KEY_3;case Z.Digit4:return E.KEY_4;case Z.Digit5:return E.KEY_5;case Z.Digit6:return E.KEY_6;case Z.Digit7:return E.KEY_7;case Z.Digit8:return E.KEY_8;case Z.Digit9:return E.KEY_9;case Z.Digit0:return E.KEY_0}const t=this.lookupScanCodeCombo(new Wh(!1,!1,!1,e)),r=this.lookupScanCodeCombo(new Wh(!1,!0,!1,e));if(t.length===1&&r.length===1){const n=t[0].shiftKey,s=t[0].keyCode,o=r[0].shiftKey,a=r[0].keyCode;if(s===a&&n!==o)return s}return-1}_encodeScanCodeCombo(e){return this._encode(e.ctrlKey,e.shiftKey,e.altKey,e.scanCode)}_encodeKeyCodeCombo(e){return this._encode(e.ctrlKey,e.shiftKey,e.altKey,e.keyCode)}_encode(e,t,r,n){return((e?1:0)<<0|(t?1:0)<<1|(r?1:0)<<2|n<<3)>>>0}}class nr{constructor(e,t,r){this._scanCodeToLabel=[],this._scanCodeToDispatch=[],this._isUSStandard=e,this._OS=r,this._codeInfo=[],this._scanCodeKeyCodeMapper=new HR,this._scanCodeToLabel=[],this._scanCodeToDispatch=[];const n=(c,h,u,p,d,f,m,g)=>{this._scanCodeKeyCodeMapper.registerIfUnknown(new Wh(!!c,!!h,!!u,p),new L1(!!d,!!f,!!m,g))},s=(c,h,u,p,d)=>{for(let f=c;f<=1;f++)for(let m=h;m<=1;m++)for(let g=u;g<=1;g++)n(f,m,g,p,f,m,g,d)};for(let c=Z.None;c<Z.MAX_VALUE;c++)this._scanCodeToLabel[c]=null;for(let c=Z.None;c<Z.MAX_VALUE;c++)this._scanCodeToDispatch[c]=null;for(let c=Z.None;c<Z.MAX_VALUE;c++){const h=Vi[c];h!==-1&&(s(0,0,0,c,h),this._scanCodeToLabel[c]=lt.toString(h),h===E.Unknown||h===E.Ctrl||h===E.Meta||h===E.Alt||h===E.Shift?this._scanCodeToDispatch[c]=null:this._scanCodeToDispatch[c]=`[${ji.toString(c)}]`)}const o={};{let c=[];for(let u in t)if(t.hasOwnProperty(u)){const p=ji.toEnum(u);if(p===Z.None||Vi[p]!==-1)continue;const d=t[u],f=nr.getCharCode(d.value);if(f>=V.a&&f<=V.z){const m=V.A+(f-V.a);c[m]=!0}}const h=(u,p,d,f)=>{c[u]||(o[ji.toString(p)]={value:d,withShift:f,withAltGr:"",withShiftAltGr:""})};h(V.A,Z.KeyA,"a","A"),h(V.B,Z.KeyB,"b","B"),h(V.C,Z.KeyC,"c","C"),h(V.D,Z.KeyD,"d","D"),h(V.E,Z.KeyE,"e","E"),h(V.F,Z.KeyF,"f","F"),h(V.G,Z.KeyG,"g","G"),h(V.H,Z.KeyH,"h","H"),h(V.I,Z.KeyI,"i","I"),h(V.J,Z.KeyJ,"j","J"),h(V.K,Z.KeyK,"k","K"),h(V.L,Z.KeyL,"l","L"),h(V.M,Z.KeyM,"m","M"),h(V.N,Z.KeyN,"n","N"),h(V.O,Z.KeyO,"o","O"),h(V.P,Z.KeyP,"p","P"),h(V.Q,Z.KeyQ,"q","Q"),h(V.R,Z.KeyR,"r","R"),h(V.S,Z.KeyS,"s","S"),h(V.T,Z.KeyT,"t","T"),h(V.U,Z.KeyU,"u","U"),h(V.V,Z.KeyV,"v","V"),h(V.W,Z.KeyW,"w","W"),h(V.X,Z.KeyX,"x","X"),h(V.Y,Z.KeyY,"y","Y"),h(V.Z,Z.KeyZ,"z","Z")}let a=[],l=0;for(let c in t)if(t.hasOwnProperty(c)){const h=ji.toEnum(c);if(h===Z.None||Vi[h]!==-1)continue;this._codeInfo[h]=t[c];const u=o[c]||t[c],p=nr.getCharCode(u.value),d=nr.getCharCode(u.withShift),f=nr.getCharCode(u.withAltGr),m=nr.getCharCode(u.withShiftAltGr),g={scanCode:h,value:p,withShift:d,withAltGr:f,withShiftAltGr:m};if(a[l++]=g,this._scanCodeToDispatch[h]=`[${ji.toString(h)}]`,p>=V.a&&p<=V.z){const _=V.A+(p-V.a);this._scanCodeToLabel[h]=String.fromCharCode(_)}else p>=V.A&&p<=V.Z?this._scanCodeToLabel[h]=String.fromCharCode(p):p?this._scanCodeToLabel[h]=String.fromCharCode(p):this._scanCodeToLabel[h]=null}for(let c=a.length-1;c>=0;c--){const h=a[c],u=h.scanCode,p=h.withShiftAltGr;if(p===h.withAltGr||p===h.withShift||p===h.value)continue;const d=nr._charCodeToKb(p);if(!d)continue;const f=d.shiftKey,m=d.keyCode;f?n(1,1,1,u,0,1,0,m):n(1,1,1,u,0,0,0,m)}for(let c=a.length-1;c>=0;c--){const h=a[c],u=h.scanCode,p=h.withAltGr;if(p===h.withShift||p===h.value)continue;const d=nr._charCodeToKb(p);if(!d)continue;const f=d.shiftKey,m=d.keyCode;f?n(1,0,1,u,0,1,0,m):n(1,0,1,u,0,0,0,m)}for(let c=a.length-1;c>=0;c--){const h=a[c],u=h.scanCode,p=h.withShift;if(p===h.value)continue;const d=nr._charCodeToKb(p);if(!d)continue;const f=d.shiftKey,m=d.keyCode;f?(n(0,1,0,u,0,1,0,m),n(0,1,1,u,0,1,1,m),n(1,1,0,u,1,1,0,m),n(1,1,1,u,1,1,1,m)):(n(0,1,0,u,0,0,0,m),n(0,1,0,u,0,1,0,m),n(0,1,1,u,0,0,1,m),n(0,1,1,u,0,1,1,m),n(1,1,0,u,1,0,0,m),n(1,1,0,u,1,1,0,m),n(1,1,1,u,1,0,1,m),n(1,1,1,u,1,1,1,m))}for(let c=a.length-1;c>=0;c--){const h=a[c],u=h.scanCode,p=nr._charCodeToKb(h.value);if(!p)continue;const d=p.shiftKey,f=p.keyCode;d?(n(0,0,0,u,0,1,0,f),n(0,0,1,u,0,1,1,f),n(1,0,0,u,1,1,0,f),n(1,0,1,u,1,1,1,f)):(n(0,0,0,u,0,0,0,f),n(0,0,1,u,0,0,1,f),n(0,1,0,u,0,1,0,f),n(0,1,1,u,0,1,1,f),n(1,0,0,u,1,0,0,f),n(1,0,1,u,1,0,1,f),n(1,1,0,u,1,1,0,f),n(1,1,1,u,1,1,1,f))}s(0,0,0,Z.Digit1,E.KEY_1),s(0,0,0,Z.Digit2,E.KEY_2),s(0,0,0,Z.Digit3,E.KEY_3),s(0,0,0,Z.Digit4,E.KEY_4),s(0,0,0,Z.Digit5,E.KEY_5),s(0,0,0,Z.Digit6,E.KEY_6),s(0,0,0,Z.Digit7,E.KEY_7),s(0,0,0,Z.Digit8,E.KEY_8),s(0,0,0,Z.Digit9,E.KEY_9),s(0,0,0,Z.Digit0,E.KEY_0),this._scanCodeKeyCodeMapper.registrationComplete()}dumpDebugInfo(){let e=[],t=[Z.ArrowUp,Z.Numpad0],r=0;e.push(`isUSStandard: ${this._isUSStandard}`),e.push("----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------");for(let n=Z.None;n<Z.MAX_VALUE;n++){if(Vi[n]!==-1&&t.indexOf(n)===-1)continue;r%4===0&&(e.push("|       HW Code combination      |  Key  |    KeyCode combination    | Pri |          UI label         |         User settings          |    Electron accelerator   |       Dispatching string       | WYSIWYG |"),e.push("----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------")),r++;const s=this._codeInfo[n];for(let o=0;o<8;o++){const a=!!(o&1),l=!!(o&2),c=!!(o&4),h=new Wh(a,l,c,n),u=this.resolveKeyboardEvent({ctrlKey:h.ctrlKey,shiftKey:h.shiftKey,altKey:h.altKey,metaKey:!1,keyCode:-1,code:ji.toString(n)}),p=h.toString(),d=h.getProducedChar(s),f=u.getAriaLabel(),m=f?f.replace(/Control\+/,"Ctrl+"):null,g=u.getUserSettingsLabel(),_=u.getElectronAccelerator(),v=u.getDispatchParts()[0],x=(u?u.isWYSIWYG():!1)?"       ":"   NO  ",A=this._scanCodeKeyCodeMapper.lookupScanCodeCombo(h);if(A.length===0)e.push(`| ${this._leftPad(p,30)} | ${d} | ${this._leftPad("",25)} | ${this._leftPad("",3)} | ${this._leftPad(m,25)} | ${this._leftPad(g,30)} | ${this._leftPad(_,25)} | ${this._leftPad(v,30)} | ${x} |`);else for(let w=0,D=A.length;w<D;w++){const b=A[w];let S="-";const T=this._scanCodeKeyCodeMapper.lookupKeyCodeCombo(b);if(T.length===1)S="";else{let I=-1;for(let M=0;M<T.length;M++)if(T[M].equals(h)){I=M+1;break}S=String(I)}const C=b.toString();w===0?e.push(`| ${this._leftPad(p,30)} | ${d} | ${this._leftPad(C,25)} | ${this._leftPad(S,3)} | ${this._leftPad(m,25)} | ${this._leftPad(g,30)} | ${this._leftPad(_,25)} | ${this._leftPad(v,30)} | ${x} |`):e.push(`| ${this._leftPad("",30)} |       | ${this._leftPad(C,25)} | ${this._leftPad(S,3)} | ${this._leftPad("",25)} | ${this._leftPad("",30)} | ${this._leftPad("",25)} | ${this._leftPad("",30)} |         |`)}}e.push("----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------")}return e.join(`
`)}_leftPad(e,t){for(e===null&&(e="null");e.length<t;)e=" "+e;return e}simpleKeybindingToScanCodeBinding(e){if(e.keyCode===E.Enter)return[new $a(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,Z.Enter)];const t=this._scanCodeKeyCodeMapper.lookupKeyCodeCombo(new L1(e.ctrlKey,e.shiftKey,e.altKey,e.keyCode));let r=[];for(let n=0,s=t.length;n<s;n++){const o=t[n];r[n]=new $a(o.ctrlKey,o.shiftKey,o.altKey,e.metaKey,o.scanCode)}return r}getUILabelForScanCodeBinding(e){if(!e)return null;if(e.isDuplicateModifierCase())return"";if(this._OS===yt.Macintosh)switch(e.scanCode){case Z.ArrowLeft:return"";case Z.ArrowUp:return"";case Z.ArrowRight:return"";case Z.ArrowDown:return""}return this._scanCodeToLabel[e.scanCode]}getAriaLabelForScanCodeBinding(e){return e?e.isDuplicateModifierCase()?"":this._scanCodeToLabel[e.scanCode]:null}getDispatchStrForScanCodeBinding(e){const t=this._scanCodeToDispatch[e.scanCode];if(!t)return null;let r="";return e.ctrlKey&&(r+="ctrl+"),e.shiftKey&&(r+="shift+"),e.altKey&&(r+="alt+"),e.metaKey&&(r+="meta+"),r+=t,r}getUserSettingsLabelForScanCodeBinding(e){if(!e)return null;if(e.isDuplicateModifierCase())return"";const t=Vi[e.scanCode];if(t!==-1)return lt.toUserSettingsUS(t).toLowerCase();let r=this._scanCodeKeyCodeMapper.guessStableKeyCode(e.scanCode);if(r!==-1){let n=this.simpleKeybindingToScanCodeBinding(new Ar(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,r));for(let s=0,o=n.length;s<o;s++)if(n[s].scanCode===e.scanCode)return lt.toUserSettingsUS(r).toLowerCase()}return this._scanCodeToDispatch[e.scanCode]}_getElectronLabelForKeyCode(e){if(e>=E.NUMPAD_0&&e<=E.NUMPAD_DIVIDE)return null;switch(e){case E.UpArrow:return"Up";case E.DownArrow:return"Down";case E.LeftArrow:return"Left";case E.RightArrow:return"Right"}return lt.toString(e)}getElectronAcceleratorLabelForScanCodeBinding(e){if(!e||e.isDuplicateModifierCase())return null;const t=Vi[e.scanCode];if(t!==-1)return this._getElectronLabelForKeyCode(t);const r=this._scanCodeKeyCodeMapper.guessStableKeyCode(e.scanCode);return!this._isUSStandard&&(r===E.US_SEMICOLON||r===E.US_EQUAL||r===E.US_COMMA||r===E.US_MINUS||r===E.US_DOT||r===E.US_SLASH||r===E.US_BACKTICK||r===E.US_OPEN_SQUARE_BRACKET||r===E.US_BACKSLASH||r===E.US_CLOSE_SQUARE_BRACKET)?null:r!==-1?this._getElectronLabelForKeyCode(r):null}resolveKeybinding(e){let t=[],r=0;if(e.type===yc.Chord){const n=this.simpleKeybindingToScanCodeBinding(e.firstPart),s=this.simpleKeybindingToScanCodeBinding(e.chordPart);for(let o=0,a=n.length;o<a;o++){const l=n[o];for(let c=0,h=s.length;c<h;c++){const u=s[c];t[r++]=new gh(this,this._OS,l,u)}}}else{const n=this.simpleKeybindingToScanCodeBinding(e);for(let s=0,o=n.length;s<o;s++){const a=n[s];t[r++]=new gh(this,this._OS,a,null)}}return t}resolveKeyboardEvent(e){let t=ji.toEnum(e.code);t===Z.NumpadEnter&&(t=Z.Enter);const r=e.keyCode;if(r===E.LeftArrow||r===E.UpArrow||r===E.RightArrow||r===E.DownArrow||r===E.Delete||r===E.Insert||r===E.Home||r===E.End||r===E.PageDown||r===E.PageUp){const s=$h[r];s!==-1&&(t=s)}else if((t===Z.Numpad1||t===Z.Numpad2||t===Z.Numpad3||t===Z.Numpad4||t===Z.Numpad5||t===Z.Numpad6||t===Z.Numpad7||t===Z.Numpad8||t===Z.Numpad9||t===Z.Numpad0||t===Z.NumpadDecimal)&&r>=0){const s=$h[r];s!==-1&&(t=s)}const n=new $a(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t);return new gh(this,this._OS,n,null)}_resolveSimpleUserBinding(e){return e?e instanceof $a?[e]:this.simpleKeybindingToScanCodeBinding(e):[]}resolveUserBinding(e,t){const r=this._resolveSimpleUserBinding(e),n=this._resolveSimpleUserBinding(t);let s=[],o=0;for(let a=0,l=r.length;a<l;a++){const c=r[a];if(t)for(let h=0,u=n.length;h<u;h++){const p=n[h];s[o++]=new gh(this,this._OS,c,p)}else s[o++]=new gh(this,this._OS,c,null)}return s}static _charCodeToKb(e){return e<Vh.length?Vh[e]:null}static getCharCode(e){if(e.length===0)return 0;const t=e.charCodeAt(0);switch(t){case V.U_Combining_Grave_Accent:return V.U_GRAVE_ACCENT;case V.U_Combining_Acute_Accent:return V.U_ACUTE_ACCENT;case V.U_Combining_Circumflex_Accent:return V.U_CIRCUMFLEX;case V.U_Combining_Tilde:return V.U_SMALL_TILDE;case V.U_Combining_Macron:return V.U_MACRON;case V.U_Combining_Overline:return V.U_OVERLINE;case V.U_Combining_Breve:return V.U_BREVE;case V.U_Combining_Dot_Above:return V.U_DOT_ABOVE;case V.U_Combining_Diaeresis:return V.U_DIAERESIS;case V.U_Combining_Ring_Above:return V.U_RING_ABOVE;case V.U_Combining_Double_Acute_Accent:return V.U_DOUBLE_ACUTE_ACCENT}return t}}(function(){function i(e,t,r){for(let n=Vh.length;n<e;n++)Vh[n]=null;Vh[e]={keyCode:t,shiftKey:r}}for(let e=V.A;e<=V.Z;e++)i(e,E.KEY_A+(e-V.A),!0);for(let e=V.a;e<=V.z;e++)i(e,E.KEY_A+(e-V.a),!1);i(V.Semicolon,E.US_SEMICOLON,!1),i(V.Colon,E.US_SEMICOLON,!0),i(V.Equals,E.US_EQUAL,!1),i(V.Plus,E.US_EQUAL,!0),i(V.Comma,E.US_COMMA,!1),i(V.LessThan,E.US_COMMA,!0),i(V.Dash,E.US_MINUS,!1),i(V.Underline,E.US_MINUS,!0),i(V.Period,E.US_DOT,!1),i(V.GreaterThan,E.US_DOT,!0),i(V.Slash,E.US_SLASH,!1),i(V.QuestionMark,E.US_SLASH,!0),i(V.BackTick,E.US_BACKTICK,!1),i(V.Tilde,E.US_BACKTICK,!0),i(V.OpenSquareBracket,E.US_OPEN_SQUARE_BRACKET,!1),i(V.OpenCurlyBrace,E.US_OPEN_SQUARE_BRACKET,!0),i(V.Backslash,E.US_BACKSLASH,!1),i(V.Pipe,E.US_BACKSLASH,!0),i(V.CloseSquareBracket,E.US_CLOSE_SQUARE_BRACKET,!1),i(V.CloseCurlyBrace,E.US_CLOSE_SQUARE_BRACKET,!0),i(V.SingleQuote,E.US_QUOTE,!1),i(V.DoubleQuote,E.US_QUOTE,!0)})();function $d(){return{KeyA:{value:"a",valueIsDeadKey:!1,withShift:"A",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyB:{value:"b",valueIsDeadKey:!1,withShift:"B",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyC:{value:"c",valueIsDeadKey:!1,withShift:"C",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyD:{value:"d",valueIsDeadKey:!1,withShift:"D",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyE:{value:"e",valueIsDeadKey:!1,withShift:"E",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!0,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyF:{value:"f",valueIsDeadKey:!1,withShift:"F",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyG:{value:"g",valueIsDeadKey:!1,withShift:"G",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyH:{value:"h",valueIsDeadKey:!1,withShift:"H",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyI:{value:"i",valueIsDeadKey:!1,withShift:"I",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!0,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyJ:{value:"j",valueIsDeadKey:!1,withShift:"J",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyK:{value:"k",valueIsDeadKey:!1,withShift:"K",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyL:{value:"l",valueIsDeadKey:!1,withShift:"L",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyM:{value:"m",valueIsDeadKey:!1,withShift:"M",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyN:{value:"n",valueIsDeadKey:!1,withShift:"N",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!0,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyO:{value:"o",valueIsDeadKey:!1,withShift:"O",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyP:{value:"p",valueIsDeadKey:!1,withShift:"P",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyQ:{value:"q",valueIsDeadKey:!1,withShift:"Q",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyR:{value:"r",valueIsDeadKey:!1,withShift:"R",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyS:{value:"s",valueIsDeadKey:!1,withShift:"S",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyT:{value:"t",valueIsDeadKey:!1,withShift:"T",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyU:{value:"u",valueIsDeadKey:!1,withShift:"U",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!0,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyV:{value:"v",valueIsDeadKey:!1,withShift:"V",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyW:{value:"w",valueIsDeadKey:!1,withShift:"W",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyX:{value:"x",valueIsDeadKey:!1,withShift:"X",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyY:{value:"y",valueIsDeadKey:!1,withShift:"Y",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KeyZ:{value:"z",valueIsDeadKey:!1,withShift:"Z",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Digit1:{value:"1",valueIsDeadKey:!1,withShift:"!",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Digit2:{value:"2",valueIsDeadKey:!1,withShift:"@",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Digit3:{value:"3",valueIsDeadKey:!1,withShift:"#",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Digit4:{value:"4",valueIsDeadKey:!1,withShift:"$",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Digit5:{value:"5",valueIsDeadKey:!1,withShift:"%",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Digit6:{value:"6",valueIsDeadKey:!1,withShift:"^",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Digit7:{value:"7",valueIsDeadKey:!1,withShift:"&",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Digit8:{value:"8",valueIsDeadKey:!1,withShift:"*",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Digit9:{value:"9",valueIsDeadKey:!1,withShift:"(",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Digit0:{value:"0",valueIsDeadKey:!1,withShift:")",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Enter:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Escape:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Backspace:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Tab:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Space:{value:" ",valueIsDeadKey:!1,withShift:" ",withShiftIsDeadKey:!1,withAltGr:" ",withAltGrIsDeadKey:!1,withShiftAltGr:" ",withShiftAltGrIsDeadKey:!1},Minus:{value:"-",valueIsDeadKey:!1,withShift:"_",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Equal:{value:"=",valueIsDeadKey:!1,withShift:"+",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},BracketLeft:{value:"[",valueIsDeadKey:!1,withShift:"{",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},BracketRight:{value:"]",valueIsDeadKey:!1,withShift:"}",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Backslash:{value:"\\",valueIsDeadKey:!1,withShift:"|",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Semicolon:{value:";",valueIsDeadKey:!1,withShift:":",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Quote:{value:"'",valueIsDeadKey:!1,withShift:'"',withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Backquote:{value:"`",valueIsDeadKey:!1,withShift:"~",withShiftIsDeadKey:!1,withAltGr:"`",withAltGrIsDeadKey:!0,withShiftAltGr:"`",withShiftAltGrIsDeadKey:!1},Comma:{value:",",valueIsDeadKey:!1,withShift:"<",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Period:{value:".",valueIsDeadKey:!1,withShift:">",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Slash:{value:"/",valueIsDeadKey:!1,withShift:"?",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},CapsLock:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F1:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F2:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F3:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F4:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F5:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F6:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F7:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F8:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F9:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F10:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F11:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F12:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Insert:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Home:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},PageUp:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Delete:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},End:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},PageDown:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},ArrowRight:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},ArrowLeft:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},ArrowDown:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},ArrowUp:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},NumLock:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},NumpadDivide:{value:"/",valueIsDeadKey:!1,withShift:"/",withShiftIsDeadKey:!1,withAltGr:"/",withAltGrIsDeadKey:!1,withShiftAltGr:"/",withShiftAltGrIsDeadKey:!1},NumpadMultiply:{value:"*",valueIsDeadKey:!1,withShift:"*",withShiftIsDeadKey:!1,withAltGr:"*",withAltGrIsDeadKey:!1,withShiftAltGr:"*",withShiftAltGrIsDeadKey:!1},NumpadSubtract:{value:"-",valueIsDeadKey:!1,withShift:"-",withShiftIsDeadKey:!1,withAltGr:"-",withAltGrIsDeadKey:!1,withShiftAltGr:"-",withShiftAltGrIsDeadKey:!1},NumpadAdd:{value:"+",valueIsDeadKey:!1,withShift:"+",withShiftIsDeadKey:!1,withAltGr:"+",withAltGrIsDeadKey:!1,withShiftAltGr:"+",withShiftAltGrIsDeadKey:!1},NumpadEnter:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},Numpad1:{value:"1",valueIsDeadKey:!1,withShift:"1",withShiftIsDeadKey:!1,withAltGr:"1",withAltGrIsDeadKey:!1,withShiftAltGr:"1",withShiftAltGrIsDeadKey:!1},Numpad2:{value:"2",valueIsDeadKey:!1,withShift:"2",withShiftIsDeadKey:!1,withAltGr:"2",withAltGrIsDeadKey:!1,withShiftAltGr:"2",withShiftAltGrIsDeadKey:!1},Numpad3:{value:"3",valueIsDeadKey:!1,withShift:"3",withShiftIsDeadKey:!1,withAltGr:"3",withAltGrIsDeadKey:!1,withShiftAltGr:"3",withShiftAltGrIsDeadKey:!1},Numpad4:{value:"4",valueIsDeadKey:!1,withShift:"4",withShiftIsDeadKey:!1,withAltGr:"4",withAltGrIsDeadKey:!1,withShiftAltGr:"4",withShiftAltGrIsDeadKey:!1},Numpad5:{value:"5",valueIsDeadKey:!1,withShift:"5",withShiftIsDeadKey:!1,withAltGr:"5",withAltGrIsDeadKey:!1,withShiftAltGr:"5",withShiftAltGrIsDeadKey:!1},Numpad6:{value:"6",valueIsDeadKey:!1,withShift:"6",withShiftIsDeadKey:!1,withAltGr:"6",withAltGrIsDeadKey:!1,withShiftAltGr:"6",withShiftAltGrIsDeadKey:!1},Numpad7:{value:"7",valueIsDeadKey:!1,withShift:"7",withShiftIsDeadKey:!1,withAltGr:"7",withAltGrIsDeadKey:!1,withShiftAltGr:"7",withShiftAltGrIsDeadKey:!1},Numpad8:{value:"8",valueIsDeadKey:!1,withShift:"8",withShiftIsDeadKey:!1,withAltGr:"8",withAltGrIsDeadKey:!1,withShiftAltGr:"8",withShiftAltGrIsDeadKey:!1},Numpad9:{value:"9",valueIsDeadKey:!1,withShift:"9",withShiftIsDeadKey:!1,withAltGr:"9",withAltGrIsDeadKey:!1,withShiftAltGr:"9",withShiftAltGrIsDeadKey:!1},Numpad0:{value:"0",valueIsDeadKey:!1,withShift:"0",withShiftIsDeadKey:!1,withAltGr:"0",withAltGrIsDeadKey:!1,withShiftAltGr:"0",withShiftAltGrIsDeadKey:!1},NumpadDecimal:{value:".",valueIsDeadKey:!1,withShift:".",withShiftIsDeadKey:!1,withAltGr:".",withAltGrIsDeadKey:!1,withShiftAltGr:".",withShiftAltGrIsDeadKey:!1},IntlBackslash:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},ContextMenu:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},NumpadEqual:{value:"=",valueIsDeadKey:!1,withShift:"=",withShiftIsDeadKey:!1,withAltGr:"=",withAltGrIsDeadKey:!1,withShiftAltGr:"=",withShiftAltGrIsDeadKey:!1},F13:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F14:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F15:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F16:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F17:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F18:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F19:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},F20:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},AudioVolumeMute:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},AudioVolumeUp:{value:"",valueIsDeadKey:!1,withShift:"=",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"=",withShiftAltGrIsDeadKey:!1},AudioVolumeDown:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},NumpadComma:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},IntlRo:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},KanaMode:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},IntlYen:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},ControlLeft:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},ShiftLeft:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},AltLeft:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},MetaLeft:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},ControlRight:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},ShiftRight:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},AltRight:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1},MetaRight:{value:"",valueIsDeadKey:!1,withShift:"",withShiftIsDeadKey:!1,withAltGr:"",withAltGrIsDeadKey:!1,withShiftAltGr:"",withShiftAltGrIsDeadKey:!1}}}function Vd(){return{id:"com.apple.keylayout.ABC",lang:"en"}}class Qg{static writeKeybindingItem(e,t,r){let n=JSON.stringify(t.resolvedKeybinding.getUserSettingsLabel());e.write(`{ "key": ${zR(n+",",25)} "command": `);let s=t.when?t.when.serialize():"",o=JSON.stringify(t.command);s.length>0?(e.write(`${o},`),e.writeLine(),e.write(`                                     "when": "${s}" `)):e.write(`${o} `),e.write("}")}static readUserKeybindingItem(e,t){const[r,n]=typeof e.key=="string"?this._readUserBinding(e.key):[null,null],s=typeof e.when=="string"?Kh.deserialize(e.when):null,o=typeof e.command=="string"?e.command:null,a=typeof e.args<"u"?e.args:void 0;return{firstPart:r,chordPart:n,command:o,commandArgs:a,when:s}}static _readModifiers(e){e=e.toLowerCase().trim();let t=!1,r=!1,n=!1,s=!1,o;do o=!1,/^ctrl(\+|\-)/.test(e)&&(t=!0,e=e.substr(5),o=!0),/^shift(\+|\-)/.test(e)&&(r=!0,e=e.substr(6),o=!0),/^alt(\+|\-)/.test(e)&&(n=!0,e=e.substr(4),o=!0),/^meta(\+|\-)/.test(e)&&(s=!0,e=e.substr(5),o=!0),/^win(\+|\-)/.test(e)&&(s=!0,e=e.substr(4),o=!0),/^cmd(\+|\-)/.test(e)&&(s=!0,e=e.substr(4),o=!0);while(o);let a;const l=e.indexOf(" ");return l>0?(a=e.substring(0,l),e=e.substring(l)):(a=e,e=""),{remains:e,ctrl:t,shift:r,alt:n,meta:s,key:a}}static _readSimpleKeybinding(e){const t=this._readModifiers(e),r=lt.fromUserSettings(t.key);return[new Ar(t.ctrl,t.shift,t.alt,t.meta,r),t.remains]}static readKeybinding(e,t){if(!e)return null;let[r,n]=this._readSimpleKeybinding(e),s=null;return n.length>0&&([s]=this._readSimpleKeybinding(n)),s?new ry(r,s):r}static _readSimpleUserBinding(e){const t=this._readModifiers(e),r=t.key.match(/^\[([^\]]+)\]$/);if(r){const s=r[1],o=ji.lowerCaseToEnum(s);return[new $a(t.ctrl,t.shift,t.alt,t.meta,o),t.remains]}const n=lt.fromUserSettings(t.key);return[new Ar(t.ctrl,t.shift,t.alt,t.meta,n),t.remains]}static _readUserBinding(e){if(!e)return[null,null];let[t,r]=this._readSimpleUserBinding(e),n=null;return r.length>0&&([n]=this._readSimpleUserBinding(r)),[t,n]}}function zR(i,e){return i.length<e?i+new Array(e-i.length).join(" "):i}class jR{constructor(){this._lines=[],this._currentLine=""}write(e){this._currentLine+=e}writeLine(e=""){this._lines.push(this._currentLine+e),this._currentLine=""}toString(){return this.writeLine(),this._lines.join(`
`)}}function $R(i,e=!1){let t=0,r=i.length,n="",s=0,o=0,a=0;function l(m,g){let _=0,v=0;for(;_<m||!g;){let y=i.charCodeAt(t);if(y>=48&&y<=57)v=v*16+y-48;else if(y>=65&&y<=70)v=v*16+y-65+10;else if(y>=97&&y<=102)v=v*16+y-97+10;else break;t++,_++}return _<m&&(v=-1),v}function c(m){t=m,n="",s=0,o=0,a=0}function h(){let m=t;if(i.charCodeAt(t)===48)t++;else for(t++;t<i.length&&Pa(i.charCodeAt(t));)t++;if(t<i.length&&i.charCodeAt(t)===46)if(t++,t<i.length&&Pa(i.charCodeAt(t)))for(t++;t<i.length&&Pa(i.charCodeAt(t));)t++;else return a=3,i.substring(m,t);let g=t;if(t<i.length&&(i.charCodeAt(t)===69||i.charCodeAt(t)===101))if(t++,(t<i.length&&i.charCodeAt(t)===43||i.charCodeAt(t)===45)&&t++,t<i.length&&Pa(i.charCodeAt(t))){for(t++;t<i.length&&Pa(i.charCodeAt(t));)t++;g=t}else a=3;return i.substring(m,g)}function u(){let m="",g=t;for(;;){if(t>=r){m+=i.substring(g,t),a=2;break}let _=i.charCodeAt(t);if(_===34){m+=i.substring(g,t),t++;break}if(_===92){if(m+=i.substring(g,t),t++,t>=r){a=2;break}switch(_=i.charCodeAt(t++),_){case 34:m+='"';break;case 92:m+="\\";break;case 47:m+="/";break;case 98:m+="\b";break;case 102:m+="\f";break;case 110:m+=`
`;break;case 114:m+="\r";break;case 116:m+="	";break;case 117:let v=l(4,!0);v>=0?m+=String.fromCharCode(v):a=4;break;default:a=5}g=t;continue}if(Wd(_)){m+=i.substring(g,t),a=2;break}t++}return m}function p(){if(n="",a=0,s=t,t>=r)return s=r,o=16;let m=i.charCodeAt(t);if(Jg(m)){do t++,n+=String.fromCharCode(m),m=i.charCodeAt(t);while(Jg(m));return o=15}if(Wd(m))return t++,n+=String.fromCharCode(m),m===13&&i.charCodeAt(t)===10&&(t++,n+=`
`),o=14;switch(m){case 123:return t++,o=1;case 125:return t++,o=2;case 91:return t++,o=3;case 93:return t++,o=4;case 58:return t++,o=6;case 44:return t++,o=5;case 34:return t++,n=u(),o=10;case 47:let g=t-1;if(i.charCodeAt(t+1)===47){for(t+=2;t<r&&!Wd(i.charCodeAt(t));)t++;return n=i.substring(g,t),o=12}if(i.charCodeAt(t+1)===42){t+=2;let _=r-1,v=!1;for(;t<_;){if(i.charCodeAt(t)===42&&i.charCodeAt(t+1)===47){t+=2,v=!0;break}t++}return v||(t++,a=1),n=i.substring(g,t),o=13}return n+=String.fromCharCode(m),t++,o=0;case 45:if(n+=String.fromCharCode(m),t++,t===r||!Pa(i.charCodeAt(t)))return o=0;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return n+=h(),o=11;default:for(;t<r&&d(m);)t++,m=i.charCodeAt(t);if(s!==t){switch(n=i.substring(s,t),n){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=0}return n+=String.fromCharCode(m),t++,o=0}}function d(m){if(Jg(m)||Wd(m))return!1;switch(m){case 125:case 93:case 123:case 91:case 34:case 58:case 44:return!1}return!0}function f(){let m;do m=p();while(m>=12&&m<=15);return m}return{setPosition:c,getPosition:()=>t,scan:e?f:p,getToken:()=>o,getTokenValue:()=>n,getTokenOffset:()=>s,getTokenLength:()=>t-s,getTokenError:()=>a}}function Jg(i){return i===32||i===9||i===11||i===12||i===160||i===5760||i>=8192&&i<=8203||i===8239||i===8287||i===12288||i===65279}function Wd(i){return i===10||i===13||i===8232||i===8233}function Pa(i){return i>=48&&i<=57}function VR(i,e=[],t){let r=null,n=[],s=[];function o(l){Array.isArray(n)?n.push(l):r&&(n[r]=l)}return J3(i,{onObjectBegin:()=>{let l={};o(l),s.push(n),n=l,r=null},onObjectProperty:l=>{r=l},onObjectEnd:()=>{n=s.pop()},onArrayBegin:()=>{let l=[];o(l),s.push(n),n=l,r=null},onArrayEnd:()=>{n=s.pop()},onLiteralValue:o,onError:l=>{e.push({error:l})}},t),n[0]}function J3(i,e,t){let r=$R(i,!1);function n(D){return D?()=>D(r.getTokenOffset(),r.getTokenLength()):()=>!0}function s(D){return D?b=>D(b,r.getTokenOffset(),r.getTokenLength()):()=>!0}let o=n(e.onObjectBegin),a=s(e.onObjectProperty),l=n(e.onObjectEnd),c=n(e.onArrayBegin),h=n(e.onArrayEnd),u=s(e.onLiteralValue),p=s(e.onSeparator),d=s(e.onError),f=t;function m(){for(;;){let D=r.scan();switch(D){case 12:case 13:break;case 0:g(0);break;case 15:case 14:break;default:return D}}}function g(D,b=[],S=[]){if(d(D),b.length+S.length>0){let T=r.getToken();for(;T!==16;){if(b.indexOf(T)!==-1){m();break}else if(S.indexOf(T)!==-1)break;T=m()}}}function _(D){let b=r.getTokenValue();return D?u(b):a(b),m(),!0}function v(){switch(r.getToken()){case 11:let D=0;try{D=JSON.parse(r.getTokenValue()),typeof D!="number"&&(g(1),D=0)}catch{g(1)}u(D);break;case 7:u(null);break;case 8:u(!0);break;case 9:u(!1);break;default:return!1}return m(),!0}function y(){return r.getToken()!==10?(g(2,[],[2,5]),!1):(_(!1),r.getToken()===6?(p(":"),m(),w()||g(3,[],[2,5])):g(4,[],[2,5]),!0)}function x(){o(),m();let D=!1;for(;r.getToken()!==2&&r.getToken()!==16;){if(r.getToken()===5){if(D||g(3,[],[]),p(","),m(),r.getToken()===2&&f)break}else D&&g(5,[],[]);y()||g(3,[],[2,5]),D=!0}return l(),r.getToken()!==2?g(6,[2],[]):m(),!0}function A(){c(),m();let D=!1;for(;r.getToken()!==4&&r.getToken()!==16;)r.getToken()===5?(D||g(3,[],[]),p(","),m()):D&&g(5,[],[]),w()||g(3,[],[4,5]),D=!0;return h(),r.getToken()!==4?g(7,[4],[]):m(),!0}function w(){switch(r.getToken()){case 3:return A();case 1:return x();case 10:return _(!0);default:return v()}}return m(),r.getToken()===16?!0:w()?(r.getToken()!==16&&g(8,[],[]),!0):(g(3,[],[]),!1)}class eD{constructor(e,t={changeBufferDelay:0,defaultConfig:Object.create(null),onError:r=>console.error(r)}){this._path=e,this.options=t,this.disposables=[],this._onDidUpdateConfiguration=new ve,this.disposables.push(this._onDidUpdateConfiguration),this.registerWatcher(),this.initAsync()}get path(){return this._path}get hasParseErrors(){return this.parseErrors&&this.parseErrors.length>0}get onDidUpdateConfiguration(){return this._onDidUpdateConfiguration.event}initAsync(){this.loadAsync(e=>{this.loaded||this.updateCache(e),this.options.initCallback&&this.options.initCallback(this.getConfig())})}updateCache(e){this.cache=e,this.loaded=!0}loadSync(){try{return this.parse("{}")}catch{return this.options.defaultConfig}}loadAsync(e){return e(this.parse("{}"))}parse(e){let t;try{this.parseErrors=[],t=this.options.parse?this.options.parse(e,this.parseErrors):VR(e,this.parseErrors)}catch{}return t||this.options.defaultConfig}registerWatcher(){this.watch(this._path)}watch(e){this.disposed}reload(e){this.loadAsync(t=>{if(Sn(t,this.cache)||(this.updateCache(t),this._onDidUpdateConfiguration.fire({config:this.cache})),e)return e(t)})}getConfig(){return this.ensureLoaded(),this.cache}getValue(e,t){if(this.ensureLoaded(),!e)return t;const r=this.cache?this.cache[e]:void 0;return typeof r<"u"?r:t}ensureLoaded(){this.loaded||this.updateCache(this.loadSync())}dispose(){this.disposed=!0,this.disposables=ye(this.disposables)}}var WR=Object.defineProperty,GR=Object.getOwnPropertyDescriptor,YR=(i,e,t,r)=>{for(var n=r>1?void 0:r?GR(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&WR(e,t,n),n},Gd=(i,e)=>(t,r)=>e(t,r,i);const Us=class Us{constructor(){this._onDidChangeKeyboardMapper=new ve,this.onDidChangeKeyboardMapper=this._onDidChangeKeyboardMapper.event,this._layoutInfo=null,this._rawMapping=null,this._keyboardMapper=null,this._initialized=!1}_onKeyboardLayoutChanged(){this._initialized&&this._setKeyboardData(Vd(),$d())}getKeyboardMapper(e){return this._initialized||this._setKeyboardData(Vd(),$d()),e===1?new Zg(Ft):this._keyboardMapper}getCurrentKeyboardLayout(){return this._initialized||this._setKeyboardData(Vd(),$d()),this._layoutInfo}static _isUSStandard(e){if(Ft===yt.Linux){const t=e;return t&&t.layout==="us"}if(Ft===yt.Macintosh){const t=e;return t&&t.id==="com.apple.keylayout.US"}if(Ft===yt.Windows){const t=e;return t&&t.name==="00000409"}return!1}getRawKeyboardMapping(){return this._initialized||this._setKeyboardData(Vd(),$d()),this._rawMapping}_setKeyboardData(e,t){this._layoutInfo=e,!(this._initialized&&Us._equals(this._rawMapping,t))&&(this._initialized=!0,this._rawMapping=t,this._keyboardMapper=new MR(Us._createKeyboardMapper(this._layoutInfo,this._rawMapping)),this._onDidChangeKeyboardMapper.fire())}static _createKeyboardMapper(e,t){const r=Us._isUSStandard(e);return Ft===yt.Windows?new BR(r,t):Object.keys(t).length===0?new Zg(Ft):Ft===yt.Macintosh&&e.id==="com.apple.keylayout.DVORAK-QWERTYCMD"?new Zg(Ft):new nr(r,t,Ft)}static _equals(e,t){return Ft===yt.Windows?kR(e,t):KR(e,t)}};Us.INSTANCE=new Us;let Qn=Us;function rS(i){const e=i.getValue("keyboard");return(e?e.dispatch:null)==="keyCode"?1:0}let gc=class extends NR{constructor(i,e,t,r,n){super(e,t);let s=rS(n);n.onDidChangeConfiguration(o=>{let a=rS(n);s!==a&&(s=a,this._keyboardMapper=Qn.INSTANCE.getKeyboardMapper(s),this.updateResolver({source:df.Default}))}),this._keyboardMapper=Qn.INSTANCE.getKeyboardMapper(s),this._register(Qn.INSTANCE.onDidChangeKeyboardMapper(()=>{this._keyboardMapper=Qn.INSTANCE.getKeyboardMapper(s),this.updateResolver({source:df.Default})})),this._cachedResolver=null,this._firstTimeComputingResolver=!0,this.userKeybindings=this._register(new eD("",{defaultConfig:[],onError:o=>Pl(o)})),this._register(this.userKeybindings.onDidUpdateConfiguration(o=>this.updateResolver({source:df.User,keybindings:o.config}))),this._register(me(i,ue.KEY_DOWN,o=>{let a=new _i(o);this._dispatch(a,a.target)&&a.preventDefault()}))}dumpDebugInfo(){const i=JSON.stringify(Qn.INSTANCE.getCurrentKeyboardLayout(),null,"	"),e=this._keyboardMapper.dumpDebugInfo(),t=JSON.stringify(Qn.INSTANCE.getRawKeyboardMapping(),null,"	");return`Layout info:
${i}
${e}

Raw mapping:
${t}`}_safeGetConfig(){let i=this.userKeybindings.getConfig();return Array.isArray(i)?i:[]}customKeybindingsCount(){return this._safeGetConfig().length}updateResolver(i){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(i)}_getResolver(){if(!this._cachedResolver){const i=this._resolveKeybindingItems(Er.getDefaultKeybindings(),!0),e=this._resolveUserKeybindingItems(this._getExtraKeybindings(this._firstTimeComputingResolver),!1);this._cachedResolver=new Gs(i,e),this._firstTimeComputingResolver=!1}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_resolveKeybindingItems(i,e){let t=[],r=0;for(let n=0,s=i.length;n<s;n++){const o=i[n],a=o.when?o.when.normalize():null,l=o.keybinding;if(!l)t[r++]=new jd(null,o.command,o.commandArgs,a,e);else{const c=this.resolveKeybinding(l);for(let h=0;h<c.length;h++)t[r++]=new jd(c[h],o.command,o.commandArgs,a,e)}}return t}_resolveUserKeybindingItems(i,e){let t=[],r=0;for(let n=0,s=i.length;n<s;n++){const o=i[n],a=o.when?o.when.normalize():null,l=o.firstPart,c=o.chordPart;if(!l)t[r++]=new jd(null,o.command,o.commandArgs,a,e);else{const h=this._keyboardMapper.resolveUserBinding(l,c);for(let u=0;u<h.length;u++)t[r++]=new jd(h[u],o.command,o.commandArgs,a,e)}}return t}_getExtraKeybindings(i){return this._safeGetConfig().map(t=>Qg.readUserKeybindingItem(t,Ft))}resolveKeybinding(i){return this._keyboardMapper.resolveKeybinding(i)}resolveKeyboardEvent(i){return this._keyboardMapper.resolveKeyboardEvent(i)}resolveUserBinding(i){const[e,t]=Qg._readUserBinding(i);return this._keyboardMapper.resolveUserBinding(e,t)}getDefaultKeybindingsContent(){const i=this._getResolver(),e=i.getDefaultKeybindings(),t=i.getDefaultBoundCommands();return gc._getDefaultKeybindings(e)+`

`+gc._getAllCommandsAsComment(t)}static _getDefaultKeybindings(i){let e=new jR;e.writeLine("[");let t=i.length-1;return i.forEach((r,n)=>{Qg.writeKeybindingItem(e,r,Ft),n!==t?e.writeLine(","):e.writeLine()}),e.writeLine("]"),e.toString()}static _getAllCommandsAsComment(i){let t=Gs.getAllUnboundCommands(i).sort().join(`
// - `);return"// "+de.localize("unboundCommands","Here are other available commands: ")+`
// - `+t}};gc=YR([Gd(1,mr),Gd(2,ms),Gd(3,xc),Gd(4,it)],gc);var tD=(i=>(i[i.GLOBAL=0]="GLOBAL",i[i.WORKSPACE=1]="WORKSPACE",i[i.INSTANCE=2]="INSTANCE",i))(tD||{});class qR extends Je{constructor(e){super(),this.themeService=e,this.theme=e.getTheme(),this._register(this.themeService.onThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}getColor(e,t){let r=this.theme.getColor(e);return r&&t&&(r=t(r,this.theme)),r?r.toString():null}}class XR extends qR{constructor(e,t){super(t),this._toUnbind=[],this.id=e}get toUnbind(){return this._toUnbind}getId(){return this.id}getMemento(e,t=tD.GLOBAL){return null}saveMemento(){}shutdown(){this.saveMemento()}dispose(){this._toUnbind=ye(this._toUnbind),super.dispose()}}class eg extends XR{constructor(e,t,r){super(e,r),this.options=t}create(e){this.parent=e,this.contentArea=this.createContentArea(e),this.partLayout=new ZR(this.parent,this.options,this.contentArea)}getContainer(){return this.parent}show(){rs(this.contentArea)}hide(){Gr(this.contentArea)}createContentArea(e){return null}getContentArea(){return this.contentArea}layout(e){return this.partLayout.layout(e)}getLayout(){return this.partLayout}dispose(){this.partLayout=null,super.dispose()}}class ZR{constructor(e,t,r){this.contentArea=r}layout(e){const{width:t,height:r}=e,n=new Ci(t,r);return this.contentArea&&Ls(this.contentArea,n.width,n.height),n}}var QR=Object.defineProperty,JR=Object.getOwnPropertyDescriptor,eL=(i,e,t,r)=>{for(var n=r>1?void 0:r?JR(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&QR(e,t,n),n},nS=(i,e)=>(t,r)=>e(t,r,i);class iD extends na{constructor(e,t,r={}){super(null,t),this.cssClass=t.class}}let ra=class extends na{constructor(i,e,t,r){super(null,e),this.instantiationService=t,this.contextMenuService=r,this.actions=[],this.cssClass=e.class}render(i){this.element=i,pr(this.element,`${this.cssClass}-container`," tool","extendable"),this.iconBlock=Le("div.icon"),this.iconBlock.appendTo(this.element);let e=this.getDropdownActions();e.length||(e=this._getDropdownActions().map(t=>{let r=()=>(this._executeCommand(t.id,t.context),Promise.resolve(null));return new Re(t.id,t.label,"",!0,r,t.icon)})),this.actions=e,this.currentAction=e[0],this.iconBlock.innerHtml(this.currentAction.icon),this._dropdown=this.instantiationService.createInstance(Dx,i,{contextMenuProvider:this.contextMenuService,actions:e}),this._dropdown.menuOptions={anchorPosition:G0.BELOW,anchorAlignment:W0.RIGHT,margin:5,actionItemProvider:t=>new ls(t,t)},this.iconBlock.on(ue.CLICK,()=>{this.currentAction.run()})}getDropdownActions(){return[]}_executeCommand(i,e){}};ra=eL([nS(2,Nt),nS(3,wc)],ra);class Ax extends ra{_executeCommand(e,t){this.currentAction=fs(this.actions,r=>r.id===e),this.iconBlock.innerHtml(this.currentAction.icon),this.instantiationService.invokeFunction(r=>{let n=t;const s=r.get(Ue),o=r.get(ms);let a=[];const l=()=>{ye(a),tt.Signal.disconnectReceiver(this)},c=(h,u)=>{const{oldValue:p,newValue:d}=u;!p&&d&&setTimeout(()=>{o.executeCommand("chart.action.insertDrawing",{name:e,Ctor:n}),l()},0),d||l()};s.activeChanged.connect(c,this),a.push(me(window,ue.BLUR,()=>{l()}))})}}class Dx extends wx{static labelRenderer(e){let t=document.createElement("span");return t.className="arrow-icon",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 16" width="10" height="16"><path d="M.6 1.4l1.4-1.4 8 8-8 8-1.4-1.4 6.389-6.532-6.389-6.668z"></path></svg>',e.appendChild(t),null}constructor(e,t){super(e,{...t,labelRenderer:Dx.labelRenderer}),this.$el.addClass("toggle")}}class Hn extends iD{render(e){super.render(e),this.element=e,pr(this.element,`${this.cssClass}-container`,"tool"),this.icon&&Le("div.icon").innerHtml(this.icon).appendTo(this.element)}}const Ox=class Ox extends Re{constructor(e,t){super(Tn.ID,e,"separator hr"),this.checked=!1,this.radio=!1,this.enabled=!1,this.order=t}};Ox.ID="nila.actions.groupSeparator";let Xf=Ox;class tL extends na{render(e){this.element=e,pr(this.element,"group-separator-container","disabled")}}const iL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" enable-background="new 0 0 32 32" width="30" height="30"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.95 9.95h-1v3h-3v1h3v3h1v-3h3v-1h-3v-3zm5.8 7.5c.7-1.2 1.2-2.5 1.2-4 0-4.1-3.4-7.5-7.5-7.5s-7.5 3.4-7.5 7.5 3.4 7.5 7.5 7.5c1.5 0 2.9-.5 4.1-1.2l4.3 4.3 2.2-2.2-4.3-4.4zm-6.3 1.5c-3 0-5.5-2.5-5.5-5.5s2.5-5.5 5.5-5.5 5.5 2.5 5.5 5.5-2.5 5.5-5.5 5.5z"></path></svg>
`,E0=class E0 extends Re{constructor(e,t){super(e,t,"zoom-in-action")}run(e){return Promise.resolve(null)}};E0.ID="workbench.action.zoomIn",E0.LABEL="ZoomIn";let k1=E0;class rL extends Hn{constructor(){super(...arguments),this.icon=iL}render(e){super.render(e)}}const nL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" width="30" height="30"><path d="M10 10v2h38v-2H10zm19 2l-6 6h5v14H10v2h18v6h-5l6 6 6-6h-5v-6h18v-2H30V18h5l-6-6zm0 34H10v2h38v-2H29z"></path></svg>
`,sL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" width="30" height="30"><path d="M10 48v-2h38v2H10zm19-2l-6-6h5V26H10v-2h18v-6h-5l6-6 6 6h-5v6h18v2H30v14h5l-6 6zm0-34H10v-2h38v2H29z"></path></svg>
`,oL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M18 2v4h-2l3.44 4L23 6h-2V2h-3zm-6 7v2h-1v9h1v4h1v-4h1v-9h-1V9h-1zm-4 2v4H7v10h1v2h1v-2h1V15H9v-4H8zm4 1h1v7h-1v-7zm7.5 0a1.5 1.5 0 0 0-1.5 1.5 1.5 1.5 0 0 0 1.5 1.5 1.5 1.5 0 0 0 1.5-1.5 1.5 1.5 0 0 0-1.5-1.5zm-.006.996a.498.498 0 0 1 .498.498.498.498 0 0 1-.498.498.498.498 0 0 1-.498-.498.498.498 0 0 1 .498-.498zM8 15.72h1.19V24H8v-8.28z"></path></svg>
`,aL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M4 10v11h1v-5h15v3l5-3.5-5-3.5v3H5v-5H4zm21 5.5V21h1V10h-1v5.5z"></path></svg>
`,lL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M9 4v1h11V4H9zm5.5 1l-3.387 5H14v15H9v1h11v-1h-5V10h3.113L14.5 5z"></path></svg>
`,uL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M10 4v1h9V4zm4.5 1l-3.387 5H14v5H5v-4H4v9h1v-4h9v9h-4v1h9v-1h-4v-9h4.5v3l5.5-3.5-5.5-3.5v3H15v-5h3.113zM25 15.5V20h1v-9h-1z"></path></svg>
`,hL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17 4v2h-1v11h1v6h1v-6h1V6h-1V4zm8 0v2h-1v11h1v6h1v-6h1V6h-1V4zM4 5v2H3v11h1v6h1v-6h1V7H5V5zm9 0v2h-1v11h1v6h1v-6h1V7h-1V5zM8 7v6H7v11h1v2h1v-2h1V13H9V7zm9 0h1v9h-1zm8 0h1v9h-1zM4 8h1v9H4zm9 0h1v9h-1zm8 0v3h-1v11h1v2h1v-2h1V11h-1V8zm0 4h1v9h-1zM8 14h1v9H8z"></path></svg>
`,cL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M17 5v2h-1v11h1v4h1v-4h1V7h-1V5zm8 3v2h-1v11h1v4h1v-4h1V10h-1V8zM4 11v2H3v11h1v2h1v-2h1V13H5v-2zm9-7v2h-1v11h1v3h1v-3h1V6h-1V4zM8 4v2H7v11h1v6h1v-6h1V6H9V4zm9 4h1v9h-1zm8 3h1v9h-1zm-4-3v3h-1v11h1v2h1v-2h1V11h-1V8zM8 7h1v9H8z"></path></svg>
`,dL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M3 3v4h1v16H3v4h4v-1h16v1h4v-4h-2l.5-.008c-.155-9.757-4.81-14.485-9.402-16.646C11.553 4.206 7.095 4.496 7 4.502V3zm1 1h2v2H4zm3 1l.033.498s4.31-.285 8.64 1.752C20 9.286 24.346 13.556 24.5 23H23v2H7v-2H5V7h2zM4 24h2v2H4zm20 0h2v2h-2z"></path></svg>
`,A0=class A0 extends Re{constructor(e,t){super(e,t,"select-range-tool-action")}run(e){return Promise.resolve(null)}};A0.ID="workbench.action.selectRangeTool",A0.LABEL="SelectRangeTool";let B1=A0;class fL extends ra{_getDropdownActions(){return[{id:"workbench.action.selectRangeTool.longPosition",label:"Long Position",icon:nL},{id:"workbench.action.selectRangeTool.shortPosition",label:"Short Position",icon:sL},{id:"workbench.action.selectRangeTool.forecast",label:"Forecast",icon:oL},{id:"workbench.action.selectRangeTool.dateRange",label:"Date Range",icon:aL},{id:"workbench.action.selectRangeTool.priceRange",label:"Price Range",icon:lL},{id:"workbench.action.selectRangeTool.dateAndPriceRange",label:"Date and Price Range",icon:uL},{id:"workbench.action.selectRangeTool.barsPattern",label:"Bars Pattern",icon:hL},{id:"workbench.action.selectRangeTool.ghostFeed",label:"Ghost Feed",icon:cL},{id:"workbench.action.selectRangeTool.projection",label:"Projection",icon:dL}]}}const pL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" enable-background="new 0 0 32 32" width="30" height="30"><path fill-rule="evenodd" clip-rule="evenodd" d="M20 13h-1v-1.5C19 9 17 7 14.5 7S10 9 10 11.5V13H9c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h11c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zm-8-.9c0-1.7 1.1-3.1 2.5-3.1s2.5 1.4 2.5 3.1v.9h-5v-.9z"></path></svg>
`,D0=class D0 extends Re{constructor(e,t){super(e,t,"toggle-drawing-lock-action")}run(e){return Promise.resolve(null)}};D0.ID="workbench.action.toggleDrawingLock",D0.LABEL="ToggleDrawingLock";let F1=D0;class mL extends Hn{constructor(){super(...arguments),this.icon=pL}render(e){super.render(e)}}var gL=Object.defineProperty,_L=Object.getOwnPropertyDescriptor,vL=(i,e,t,r)=>{for(var n=r>1?void 0:r?_L(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&gL(e,t,n),n},e_=(i,e)=>(t,r)=>e(t,r,i),al;let U1=(al=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n,this.type="TrendLine",this.line=new wt({x1:e[0][0],y1:e[0][1],x2:e[1][0],y2:e[1][1]})}compute(e,t,r){e===0?(this.line.x1=t,this.line.y1=r):(this.line.x2=t,this.line.y2=r)}_handleMouseLeave(e){return(e.target===this||!this.line.hitTest({x:e.x,y:e.y}))&&(this.isHovered=!1),!0}hitTest(e){let t=super.hitTest(e);return t||(this.line.contains(e)?this:null)}_render(e){let r=this.themeService.getTheme().getColor(Pi).toString();if(e.fillStyle=r,e.strokeStyle=r,this.line.render(e),!this.isDrawing&&(this._isHovered||this._isSelected))for(let n=0,s=this.controlPoints.length;n<s;n++)this.controlPoints[n].render(e)}},al.controlPoints=2,al);U1=vL([e_(1,Ie),e_(2,gt),e_(3,je)],U1);var cr=(i=>(i.Left="left",i.Right="right",i.Center="center",i))(cr||{}),is=(i=>(i.Top="top",i.Middle="middle",i.Alphabetic="alphabetic",i.Bottom="bottom",i))(is||{});class yL{constructor(e){if(typeof e=="string")this._font=e,this._disassembleFont();else{let t=e;this._family=t.family||"sans-serif",this._size=t.size,this._style=t.style,this._variant=t.variant,this._weight=t.weight,this._height=t.height,this._assembleFont()}}get font(){return this._font}set font(e){this._font=e,this._disassembleFont(),this.merics=oS(this._font,this._height)}get family(){return this._family}set family(e){this._family=e,this._assembleFont()}get size(){return this._size}set size(e){this._size=e,this._assembleFont()}get variant(){return this._variant}set variant(e){this._variant=e,this._assembleFont()}get weight(){return this._weight}set weight(e){this._weight=e,this._assembleFont()}get height(){return this._height}set height(e){this._height=e,this._assembleFont()}_assembleFont(){this._font=`${this._style||""} ${this._variant||""} ${this._weight||""} ${this._size||""} ${this._height?"/":""} ${this._height||""} ${this._family}`,this.merics=oS(this._font,this._height)}_disassembleFont(){let e=xL(this._font);this._family=e["font-family"].join(", ")||"",this._size=e["font-size"]||"100%",this._style=e["font-style"]||"normal",this._variant=e["font-variant"]||"normal",this._weight=e["font-weight"]||"normal",this._height=e["line-height"]||"normal"}}var Bi={VARIATION:1,LINE_HEIGHT:2,FONT_FAMILY:3,BEFORE_FONT_FAMILY:4};function sS(i){for(var e=i.replace(/^\s+|\s+$/,"").replace(/\s+/g," ").split(" "),t=0;t<e.length;t+=1)if(/^(-?\d|--)/.test(e[t])||!/^([_a-zA-Z0-9-]|[^\0-\237]|(\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?|\\[^\n\r\f0-9a-f]))+$/.test(e[t]))return null;return e.join(" ")}function xL(i){let e=Bi.VARIATION,t="",r={"font-family":[]};for(let s,o=0;s=i.charAt(o);o+=1)if(e===Bi.BEFORE_FONT_FAMILY&&(s==='"'||s==="'")){let a=o+1;do if(a=i.indexOf(s,a)+1,!a)return null;while(i.charAt(a-2)==="\\");r["font-family"].push(i.slice(o,a)),o=a-1,e=Bi.FONT_FAMILY,t=""}else if(e===Bi.FONT_FAMILY&&s===",")e=Bi.BEFORE_FONT_FAMILY,t="";else if(e===Bi.BEFORE_FONT_FAMILY&&s===","){var n=sS(t);n&&r["font-family"].push(n),t=""}else e===Bi.VARIATION&&(s===" "||s==="/")?(/^((xx|x)-large|(xx|s)-small|small|large|medium)$/.test(t)||/^(larg|small)er$/.test(t)||/^(\+|-)?([0-9]*\.)?[0-9]+(em|ex|ch|rem|vh|vw|vmin|vmax|px|mm|cm|in|pt|pc|%)$/.test(t)?(e=s==="/"?Bi.LINE_HEIGHT:Bi.BEFORE_FONT_FAMILY,r["font-size"]=t):/^(italic|oblique)$/.test(t)?r["font-style"]=t:/^small-caps$/.test(t)?r["font-variant"]=t:/^(bold(er)?|lighter|[1-9]00)$/.test(t)?r["font-weight"]=t:/^((ultra|extra|semi)-)?(condensed|expanded)$/.test(t)&&(r["font-stretch"]=t),t=""):e===Bi.LINE_HEIGHT&&s===" "?(/^(\+|-)?([0-9]*\.)?[0-9]+(em|ex|ch|rem|vh|vw|vmin|vmax|px|mm|cm|in|pt|pc|%)?$/.test(t)&&(r["line-height"]=t),e=Bi.BEFORE_FONT_FAMILY,t=""):t+=s;if(e===Bi.FONT_FAMILY&&!/^\s*$/.test(t))return null;if(e===Bi.BEFORE_FONT_FAMILY){let s=sS(t);s&&r["font-family"].push(s)}return r["font-size"]&&r["font-family"].length?r:null}function oS(i,e){let t=document.createElement("span");t.innerText="Hg",t.style.fontFamily=i,t.style.fontSize=parseInt(i)+"px",t.style.lineHeight=e+"";let r=document.createElement("div");r.style.display="inline-block",r.style.width="1px",r.style.height="1px";let n=document.createElement("div");n.appendChild(t),n.appendChild(r),document.body.appendChild(n);let s=Object.create(null);try{r.style.verticalAlign="baseline",s.ascent=r.offsetTop-t.offsetTop,r.style.verticalAlign="bottom",s.height=r.offsetTop-t.offsetTop,s.descent=s.height-s.ascent}finally{document.body.removeChild(n)}return s}class wL extends Nl{constructor(e){super(null),this.type="Text",this.value=e.value,this.x=e.x,this.y=e.y,this.font=new yL({family:e.fontFamily,size:e.fontSize,style:e.fontStyle,variant:e.fontVariant,weight:e.fontWeight,height:e.lineHeight}),this.textAlign=e.textAlign||cr.Left,this.textBaseline=e.textBaseline||is.Top}get bounds(){if(this._bounds)return this._bounds;let e=this.calculateBoundingBox();if(fi.isIdentity(this.matrix))this._bounds=e;else{let t=oe.transform(Ae.topLeft(e),this.matrix),r=oe.transform(Ae.bottomRight(e),this.matrix);this._bounds=Ae.boundingOf(t,r)}return this._bounds}calculateBoundingBox(){let{height:e,descent:t,ascent:r}=this.font.merics,n={x:this.x,y:this.y,width:this._width,height:e};switch(this.textBaseline){case is.Middle:n.y+=r-e/2;case is.Alphabetic:n.y+=t;case is.Bottom:n.y-=e}switch(this.textAlign){case cr.Center:n.x+=this._width/2;case cr.Right:n.x-=this._width}return n}contains(e){return Ae.contains(this.bounds,e)}render(e){if(!this.isVisible||this.opacity===0)return;if(!this.value){this._width=0;return}e.save();let t=this.matrix;e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),e.font=this.font.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,this._width=e.measureText(this.value).width,e.fillText(this.value,this.x,this.y),e.restore()}}var bL=Object.defineProperty,SL=Object.getOwnPropertyDescriptor,EL=(i,e,t,r)=>{for(var n=r>1?void 0:r?SL(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&bL(e,t,n),n},t_=(i,e)=>(t,r)=>e(t,r,i),bo;let js=(bo=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n,this.line=new wt({x1:e[0][0],y1:e[0][1],x2:e[1][0],y2:e[1][1]}),this.type="TrendAngle";const[[s,o],[a,l]]=e;this.horizontalLine=new wt({x1:s,y1:o,x2:s+js.ArcSize,y2:o});let c=oe.angle(oe.subtract({x:a,y:l},{x:s,y:o}));this.arc=new f5({cx:s,cy:o,radius:js.ArcSize,startAngle:0,endAngle:c,anticlockwise:c<0}),this.label=new wL({x:this.horizontalLine.x2,y:this.horizontalLine.y2,value:`${-c}`,font:"bold 13px Arial",textAlign:cr.Left,textBaseline:is.Middle})}_handleMouseLeave(e){return(e.target===this||!this.line.contains({x:e.x,y:e.y}))&&(this.isHovered=!1),!0}compute(e,t,r){e===0?this._setPoint0(t,r):this._setPoint1(t,r)}_setPoint0(e,t){let r=this.controlPoints[1];const{cx:n,cy:s}=r;this.controlPoints[1].cx+=e-this.line.x1,this.points[1][0]=this.chartService.timeScale.toValue(this.controlPoints[1].cx),this.line.x1=e,this.horizontalLine.x1=e,this.horizontalLine.x2=e+js.ArcSize,this.arc.cx=e,this.controlPoints[1].cy+=t-this.line.y1,this.points[1][1]=this.chart.viewModel.priceScale.toValue(this.controlPoints[1].cy),this.line.y1=t,this.horizontalLine.y1=t,this.horizontalLine.y2=t,this.arc.cy=t;let o=oe.angle(oe.subtract({x:n,y:s},{x:e,y:t}));this.arc.endAngle=o,this.arc.anticlockwise=o<0,this.label.value=`${-o}`,this.label.x=e+js.ArcSize,this.label.y=t}_setPoint1(e,t){let r=this.controlPoints[0];const{cx:n,cy:s}=r;this.line.x2=e,this.line.y2=t;let o=oe.angle(oe.subtract({x:e,y:t},{x:n,y:s}));this.arc.endAngle=o,this.arc.anticlockwise=o<0,this.label.value=`${-o}`}hitTest(e){if(!this.isVisible)return null;for(let t=0;t<2;t++){let r=this.controlPoints[t];if(r.contains(e))return r}return this.line.contains(e)?this:null}_render(e){if(!this.isVisible||this.opacity===0)return;let r=this.themeService.getTheme().getColor(Pi).toString();if(e.fillStyle=r,e.strokeStyle=r,this.line.render(e),e.setLineDash([1,2]),this.horizontalLine.render(e),e.setLineDash([1,1]),this.arc.render(e),e.setLineDash([]),this.label.render(e),!this.isDrawing&&(this._isHovered||this._isSelected))for(let n=0;n<2;n++)this.controlPoints[n].render(e)}},bo.controlPoints=2,bo.ArcSize=50,bo);js=EL([t_(1,Ie),t_(2,gt),t_(3,je)],js);var AL=Object.defineProperty,DL=Object.getOwnPropertyDescriptor,TL=(i,e,t,r)=>{for(var n=r>1?void 0:r?DL(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&AL(e,t,n),n},i_=(i,e)=>(t,r)=>e(t,r,i),So;let K1=(So=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n}hitTest(e){if(!this.isVisible)return null;if(this.controlPoints[0].contains(e))return this.controlPoints[0];const t=this.controlPoints[0].cy;return Math.abs(e.y-t)<=this.strokeWidth+this.hitRange?this:null}_render(e){if(!this.isVisible||this.opacity===0)return;e.save();let r=this.themeService.getTheme().getColor(Pi).toString();e.fillStyle=r,e.strokeStyle=r,e.lineWidth=this.strokeWidth,e.strokeStyle=this.strokeColor.toString();let n=this.matrix;e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),e.beginPath();let s=this.root;const o=this.controlPoints[0].cy;e.moveTo(0,o),e.lineTo(s.bounds.width,o),e.closePath(),e.stroke(),e.restore(),!this.isDrawing&&(this._isHovered||this._isSelected)&&this.controlPoints[0].render(e)}},So.type="HorizontalLine",So.controlPoints=1,So);K1=TL([i_(1,Ie),i_(2,gt),i_(3,je)],K1);var CL=Object.defineProperty,PL=Object.getOwnPropertyDescriptor,IL=(i,e,t,r)=>{for(var n=r>1?void 0:r?PL(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&CL(e,t,n),n},r_=(i,e)=>(t,r)=>e(t,r,i),Eo;let H1=(Eo=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n}hitTest(e){if(!this.isVisible)return null;if(this.controlPoints[0].contains(e))return this.controlPoints[0];const{cx:t,cy:r}=this.controlPoints[0];if(e.x-t>this.strokeWidth+this.hitRange)return null;let n=this.root;return Fe.contains(t,r,n.bounds.width,r,this.strokeWidth+this.hitRange,e.x,e.y)?this:null}_render(e){if(!this.isVisible||this.opacity===0)return;e.save();let r=this.themeService.getTheme().getColor(Pi).toString();e.fillStyle=r,e.strokeStyle=r,e.lineWidth=this.strokeWidth,e.strokeStyle=this.strokeColor.toString();let n=this.matrix;e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),e.beginPath();let s=this.root;const{cx:o,cy:a}=this.controlPoints[0];e.moveTo(o,a),e.lineTo(s.bounds.width,a),e.closePath(),e.stroke(),e.restore(),!this.isDrawing&&(this._isHovered||this._isSelected)&&this.controlPoints[0].render(e)}},Eo.type="HorizontalRay",Eo.controlPoints=1,Eo);H1=IL([r_(1,Ie),r_(2,gt),r_(3,je)],H1);var OL=Object.defineProperty,ML=Object.getOwnPropertyDescriptor,NL=(i,e,t,r)=>{for(var n=r>1?void 0:r?ML(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&OL(e,t,n),n},n_=(i,e)=>(t,r)=>e(t,r,i),Ao;let z1=(Ao=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n}hitTest(e){if(!this.isVisible)return null;if(this.controlPoints[0].contains(e))return this.controlPoints[0];const t=this.controlPoints[0].cx;return Math.abs(e.x-t)<=this.strokeWidth+this.hitRange?this:null}_render(e){if(!this.isVisible||this.opacity===0)return;e.save();let r=this.themeService.getTheme().getColor(Pi).toString();e.fillStyle=r,e.strokeStyle=r,e.lineWidth=this.strokeWidth,e.strokeStyle=this.strokeColor.toString();let n=this.matrix;e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),e.beginPath();let s=this.root;const o=this.controlPoints[0].cx;e.moveTo(o,0),e.lineTo(o,s.bounds.height),e.closePath(),e.stroke(),e.restore(),!this.isDrawing&&(this._isHovered||this._isSelected)&&this.controlPoints[0].render(e)}},Ao.type="VerticalLine",Ao.controlPoints=1,Ao);z1=NL([n_(1,Ie),n_(2,gt),n_(3,je)],z1);var RL=Object.defineProperty,LL=Object.getOwnPropertyDescriptor,kL=(i,e,t,r)=>{for(var n=r>1?void 0:r?LL(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&RL(e,t,n),n},s_=(i,e)=>(t,r)=>e(t,r,i),Do;let j1=(Do=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n,this.line=new wt({x1:e[0][0],y1:e[0][1],x2:e[1][0],y2:e[1][1]})}compute(e,t,r){e===0?(this.line.x1=t,this.line.y1=r):(this.line.x2=t,this.line.y2=r)}_handleMouseLeave(e){return(e.target===this||!this.line.hitTest({x:e.x,y:e.y}))&&(this.isHovered=!1),!0}hitTest(e){return this.isVisible,null}render(e){let r=this.themeService.getTheme().getColor(Pi).toString();if(e.fillStyle=r,e.strokeStyle=r,!this.isVisible||this.opacity===0)return;this.line.render(e);const[n,s]=this.controlPoints,{cx:o,cy:a}=n,{cx:l,cy:c}=s;let h=oe.subtract({x:l,y:c},{x:o,y:a});if(oe.euclideanMetric(h)>10){let u=Math.PI-oe.radian(h),p=xh.toRadian(30),d=u+p,f=u-p;e.moveTo(l,c),e.lineTo(l+Math.cos(d)*10,c-Math.sin(d)*10),e.moveTo(l,c),e.lineTo(l+Math.cos(f)*10,c-Math.sin(f)*10),e.stroke()}if(!this.isDrawing&&(this._isHovered||this._isSelected))for(let u=0;u<2;u++)this.controlPoints[u].render(e)}},Do.controlPoints=2,Do.type="Arrow",Do);j1=kL([s_(1,Ie),s_(2,gt),s_(3,je)],j1);var BL=Object.defineProperty,FL=Object.getOwnPropertyDescriptor,UL=(i,e,t,r)=>{for(var n=r>1?void 0:r?FL(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&BL(e,t,n),n},o_=(i,e)=>(t,r)=>e(t,r,i),To;let Zf=(To=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n,this.type=Zf.type}_handleMouseLeave(e){return(e.target===this||!this.hitTest({x:e.x,y:e.y}))&&(this.isHovered=!1),!0}hitTest(e){if(!this.isVisible)return null;for(let h=0;h<2;h++){let u=this.controlPoints[h];if(u.contains(e))return u}let t=this.root;const[r,n]=this.controlPoints,{cx:s,cy:o}=r,{cx:a,cy:l}=n;let c=Fe.remotePointOfRay(s,o,a,l,t.bounds.width,t.bounds.height);return Fe.contains(s,o,c.x,c.y,this.hitRange,e.x,e.y)?this:null}_render(e){if(!this.isVisible||this.opacity===0)return;const[t,r]=this.controlPoints,{cx:n,cy:s}=t,{cx:o,cy:a}=r;e.lineWidth=this.strokeWidth;let c=this.themeService.getTheme().getColor(Pi).toString();e.fillStyle=c,e.strokeStyle=c,e.beginPath(),e.moveTo(n,s);let h=this.root,u=Fe.remotePointOfRay(n,s,o,a,h.bounds.width,h.bounds.height);if(e.lineTo(u.x,u.y),e.closePath(),e.stroke(),!this.isDrawing&&(this._isHovered||this._isSelected))for(let p=0;p<2;p++)this.controlPoints[p].render(e)}},To.controlPoints=2,To.type="Ray",To);Zf=UL([o_(1,Ie),o_(2,gt),o_(3,je)],Zf);var KL=Object.defineProperty,HL=Object.getOwnPropertyDescriptor,zL=(i,e,t,r)=>{for(var n=r>1?void 0:r?HL(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&KL(e,t,n),n},a_=(i,e)=>(t,r)=>e(t,r,i),Co;let $1=(Co=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n}_handleMouseLeave(e){return(e.target===this||!this.hitTest({x:e.x,y:e.y}))&&(this.isHovered=!1),!0}hitTest(e){if(!this.isVisible)return null;for(let u=0;u<2;u++){let p=this.controlPoints[u];if(p.contains(e))return p}let t=this.root;const[r,n]=this.controlPoints,{cx:s,cy:o}=r,{cx:a,cy:l}=n;let c=Fe.remotePointOfRay(s,o,a,l,t.bounds.width,t.bounds.height),h=Fe.remotePointOfRay(a,l,s,o,t.bounds.width,t.bounds.height);return Fe.contains(c.x,c.y,h.x,h.y,this.hitRange,e.x,e.y)?this:null}_render(e){if(!this.isVisible||this.opacity===0)return;let r=this.themeService.getTheme().getColor(Pi).toString();e.fillStyle=r,e.strokeStyle=r,e.lineWidth=this.strokeWidth,e.strokeStyle=this.strokeColor.toString(),e.beginPath();let n=this.root;const[s,o]=this.controlPoints,{cx:a,cy:l}=s,{cx:c,cy:h}=o;let u=Fe.remotePointOfRay(a,l,c,h,n.bounds.width,n.bounds.height),p=Fe.remotePointOfRay(c,h,a,l,n.bounds.width,n.bounds.height);if(e.moveTo(u.x,u.y),e.lineTo(p.x,p.y),e.closePath(),e.stroke(),!this.isDrawing&&(this._isHovered||this._isSelected))for(let d=0;d<2;d++)this.controlPoints[d].render(e)}},Co.controlPoints=2,Co.type="ExtendedLine",Co);$1=zL([a_(1,Ie),a_(2,gt),a_(3,je)],$1);var jL=Object.defineProperty,$L=Object.getOwnPropertyDescriptor,VL=(i,e,t,r)=>{for(var n=r>1?void 0:r?$L(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&jL(e,t,n),n},l_=(i,e)=>(t,r)=>e(t,r,i),Po;let V1=(Po=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n;const[[s,o],[a,l]]=e;this.line=new wt({x1:s,x2:a,y1:o,y2:l})}get offset(){const[e,t,r]=this.controlPoints,{cx:n,cy:s}=e,{cx:o,cy:a}=t,{cx:l,cy:c}=r;return n-o===0?c-(a-s)/2:o===l&&a===c?0:a===s?c-a:c-(l-n)*(a-s)/(o-n)-s}compute(e,t,r){const[n,s,o]=this.controlPoints,{cx:a}=n,{cx:l}=s,{cx:c}=o;let h=Math.max(a,l),u=Math.min(a,l);c>h?(this.controlPoints[3].cx=h,this.points[3][0]=this.chartService.timeScale.toValue(h)):c<u&&(this.controlPoints[3].cx=u,this.points[3][0]=this.chartService.timeScale.toValue(u))}hitTest(e){if(!this.isVisible)return null;for(let c=0;c<3;c++){let h=this.controlPoints[c];if(h.contains(e))return h}const[t,r]=this.controlPoints,{cx:n,cy:s}=t,{cx:o,cy:a}=r;if(Fe.contains(n,s,o,a,this.strokeWidth+this.hitRange,e.x,e.y))return this;const{offset:l}=this;return Fe.contains(n,s+l,o,a+l,this.strokeWidth+this.hitRange,e.x,e.y)?this:null}_render(e){if(!this.isVisible||this.opacity===0)return;e.save();let r=this.themeService.getTheme().getColor(Pi).toString();e.fillStyle=r,e.strokeStyle=r,e.lineWidth=this.strokeWidth,e.strokeStyle=this.strokeColor.toString();let n=this.matrix;e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),e.beginPath();const[s,o]=this.controlPoints,{cx:a,cy:l}=s,{cx:c,cy:h}=o;e.moveTo(a,l),e.lineTo(c,h);const{offset:u}=this;if(e.moveTo(a,l+u),e.lineTo(c,h+u),e.closePath(),e.stroke(),!this.isDrawing&&(this._isHovered||this._isSelected))for(let p=0;p<3;p++)this.controlPoints[p].render(e)}},Po.type="ParallelChannel",Po.controlPoints=3,Po);V1=VL([l_(1,Ie),l_(2,gt),l_(3,je)],V1);const WL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.354 21.354l14-14-.707-.707-14 14z"></path><path d="M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,GL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M15.5 22.5c0-2.697-1.073-5.225-2.947-7.089l-.705.709c1.687 1.679 2.652 3.952 2.652 6.38h1z"></path><path d="M7.354 21.354l14-14-.707-.707-14 14z"></path><path d="M7.5 23h16.5v-1h-16.5z"></path><path d="M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,YL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4 15h8.5v-1h-8.5zM16.5 15h8.5v-1h-8.5z"></path><path d="M14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,qL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.5 15h16.5v-1h-16.5z"></path><path d="M6.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,XL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M15 12.5v-8.5h-1v8.5zM14 16.5v8.5h1v-8.5z"></path><path d="M14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,ZL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M7.354 21.354l14-14-.707-.707-14 14z"></path><path d="M21 7l-8 3 5 5z"></path><path fill-rule="nonzero" d="M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,QL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.354 20.354l5-5-.707-.707-5 5z"></path><path d="M16.354 12.354l8-8-.707-.707-8 8z"></path><path d="M14.5 15c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 23c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,JL=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M4.354 25.354l5-5-.707-.707-5 5z"></path><path d="M12.354 17.354l5-5-.707-.707-5 5z"></path><path d="M20.354 9.354l5-5-.707-.707-5 5z"></path><path d="M18.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,e7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.354 18.354l10-10-.707-.707-10 10zM12.354 25.354l5-5-.707-.707-5 5z"></path><path d="M20.354 17.354l5-5-.707-.707-5 5z"></path><path d="M19.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,T0=class T0 extends Re{constructor(e,t){super(e,t,"select-simple-line-tool-action")}run(e){return Promise.resolve(null)}};T0.ID="workbench.action.selectSimpleLineTool",T0.LABEL="selectSimpleLineTool";let Va=T0;class t7 extends Ax{_getDropdownActions(){return[{id:"workbench.action.selectSimpleLineTool.trendLine",label:"Trend Line",icon:WL,context:U1},{id:"workbench.action.selectSimpleLineTool.trendAngle",label:"Trend Angle",icon:GL,context:js},{id:"workbench.action.selectSimpleLineTool.horizontalLine",label:"Horizontal Line",icon:YL,context:K1},{id:"workbench.action.selectSimpleLineTool.horizontalRay",label:"Horizontal Ray",icon:qL,context:H1},{id:"workbench.action.selectSimpleLineTool.verticaclLine",label:"Vertical Line",icon:XL,context:z1},{id:"workbench.action.selectSimpleLineTool.arrow",label:"Arrow",icon:ZL,context:j1},{id:"workbench.action.selectSimpleLineTool.ray",label:"Ray",icon:QL,context:Zf},{id:"workbench.action.selectSimpleLineTool.extended",label:"Extended",icon:JL,context:$1},{id:"workbench.action.selectSimpleLineTool.parallelChannel",label:"Parallel Channel",icon:e7,context:V1}]}}var i7=Object.defineProperty,r7=Object.getOwnPropertyDescriptor,n7=(i,e,t,r)=>{for(var n=r>1?void 0:r?r7(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&i7(e,t,n),n},u_=(i,e)=>(t,r)=>e(t,r,i),Io;let Qf=(Io=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n,this.type=Qf.type;const[[s,o],[a,l]]=e;let c={x1:s,y1:o,x2:a,y2:l};this.line0=new wt(c),this.line1=new wt(c),this.line2=new wt(c),this.line3=new wt(c),this.line4=new wt(c),this.line5=new wt(c),this._recalculateLines()}compute(e,t,r){this._recalculateLines()}_recalculateLines(){const[e,t,r]=this.controlPoints,{cx:n,cy:s}=e,{cx:o,cy:a}=t,{cx:l,cy:c}=r;this.line0.x1=o,this.line0.y1=a,this.line0.x2=l,this.line0.y2=c;let h=oe.midPoint({x:o,y:a},{x:l,y:c}),u=oe.midPoint({x:o,y:a},h),p=oe.midPoint({x:l,y:c},h),d={x:o,y:a},f={x:l,y:c},m=Fe.verticalOffsetOfParallelLine(n,s,h.x,h.y,d.x,d.y),g=Fe.verticalOffsetOfParallelLine(n,s,h.x,h.y,u.x,u.y),_=Fe.verticalOffsetOfParallelLine(n,s,h.x,h.y,p.x,p.y),v=Fe.verticalOffsetOfParallelLine(n,s,h.x,h.y,f.x,f.y),y=this.root;if(!y)return;const{width:x,height:A}=y.bounds;let w=Fe.remotePointOfRay(n,s+m,h.x,h.y+m,x,A),D=Fe.remotePointOfRay(n,s+g,h.x,h.y+g,x,A),b=Fe.remotePointOfRay(n,s,h.x,h.y,x,A),S=Fe.remotePointOfRay(n,s+_,h.x,h.y+_,x,A),T=Fe.remotePointOfRay(n,s+v,h.x,h.y+v,x,A);this.line1.x1=d.x,this.line1.y1=d.y,this.line1.x2=w.x,this.line1.y2=w.y,this.line2.x1=u.x,this.line2.y1=u.y,this.line2.x2=D.x,this.line2.y2=D.y,this.line3.x1=n,this.line3.y1=s,this.line3.x2=b.x,this.line3.y2=b.y,this.line4.x1=p.x,this.line4.y1=p.y,this.line4.x2=S.x,this.line4.y2=S.y,this.line5.x1=f.x,this.line5.y1=f.y,this.line5.x2=T.x,this.line5.y2=T.y}hitTest(e){if(!this.isVisible)return null;for(let t=0;t<3;t++){let r=this.controlPoints[t];if(r.contains(e))return r}return this.line0.contains(e)?this:this.line1.contains(e)?this:this.line2.contains(e)?this:this.line3.contains(e)?this:this.line4.contains(e)?this:this.line5.contains(e)?this:null}_render(e){if(!this.isVisible||this.opacity===0)return;let r=this.themeService.getTheme().getColor(Pi).toString();if(e.fillStyle=r,e.strokeStyle=r,this.line1.render(e),this.line2.render(e),this.line4.render(e),this.line5.render(e),this.line0.render(e),this.line3.render(e),!this.isDrawing&&(this._isHovered||this._isSelected))for(let n=0;n<3;n++)this.controlPoints[n].render(e)}},Io.type="PitchFork",Io.controlPoints=3,Io);Qf=n7([u_(1,Ie),u_(2,gt),u_(3,je)],Qf);var s7=Object.defineProperty,o7=Object.getOwnPropertyDescriptor,a7=(i,e,t,r)=>{for(var n=r>1?void 0:r?o7(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&s7(e,t,n),n},h_=(i,e)=>(t,r)=>e(t,r,i),Oo;let Jf=(Oo=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n,this.type=Jf.type;const[[s,o],[a,l]]=e;let c={x1:s,y1:o,x2:a,y2:l};this.line0=new wt(c),this.line1=new wt(c),this.line2=new wt(c),this.line3=new wt(c),this.line4=new wt(c),this.line5=new wt(c),this.line6=new wt(c),this._recalculateLines()}compute(e,t,r){this._recalculateLines()}_recalculateLines(){const[e,t,r]=this.controlPoints,{cx:n,cy:s}=e,{cx:o,cy:a}=t,{cx:l,cy:c}=r;this.line0.x1=n,this.line0.y1=s,this.line0.x2=o,this.line0.y2=a,this.line6.x1=o,this.line6.y1=a,this.line6.x2=l,this.line6.y2=c;let h={x:n,y:(s+a)/2},u=oe.midPoint({x:o,y:a},{x:l,y:c}),p=oe.midPoint({x:o,y:a},u),d=oe.midPoint({x:l,y:c},u),f={x:o,y:a},m={x:l,y:c},g=Fe.verticalOffsetOfParallelLine(h.x,h.y,u.x,u.y,f.x,f.y),_=Fe.verticalOffsetOfParallelLine(h.x,h.y,u.x,u.y,p.x,p.y),v=Fe.verticalOffsetOfParallelLine(h.x,h.y,u.x,u.y,d.x,d.y),y=Fe.verticalOffsetOfParallelLine(h.x,h.y,u.x,u.y,m.x,m.y),x=this.root;if(!x)return;const{width:A,height:w}=x.bounds;let D=Fe.remotePointOfRay(h.x,h.y+g,u.x,u.y+g,A,w),b=Fe.remotePointOfRay(h.x,h.y+_,u.x,u.y+_,A,w),S=Fe.remotePointOfRay(h.x,h.y,u.x,u.y,A,w),T=Fe.remotePointOfRay(h.x,h.y+v,u.x,u.y+v,A,w),C=Fe.remotePointOfRay(h.x,h.y+y,u.x,u.y+y,A,w);this.line1.x1=f.x,this.line1.y1=f.y,this.line1.x2=D.x,this.line1.y2=D.y,this.line2.x1=p.x,this.line2.y1=p.y,this.line2.x2=b.x,this.line2.y2=b.y,this.line3.x1=h.x,this.line3.y1=h.y,this.line3.x2=S.x,this.line3.y2=S.y,this.line4.x1=d.x,this.line4.y1=d.y,this.line4.x2=T.x,this.line4.y2=T.y,this.line5.x1=m.x,this.line5.y1=m.y,this.line5.x2=C.x,this.line5.y2=C.y}hitTest(e){if(!this.isVisible)return null;for(let t=0;t<3;t++){let r=this.controlPoints[t];if(r.contains(e))return r}return this.line0.contains(e)?this:this.line1.contains(e)?this:this.line2.contains(e)?this:this.line3.contains(e)?this:this.line4.contains(e)?this:this.line5.contains(e)?this:this.line6.contains(e)?this:null}_render(e){if(!this.isVisible||this.opacity===0)return;let r=this.themeService.getTheme().getColor(Pi).toString();if(e.fillStyle=r,e.strokeStyle=r,this.line1.render(e),this.line2.render(e),this.line4.render(e),this.line5.render(e),this.line6.render(e),this.line0.render(e),this.line3.render(e),!this.isDrawing&&(this._isHovered||this._isSelected))for(let n=0;n<3;n++)this.controlPoints[n].render(e)}},Oo.type="SchiffPitchFork",Oo.controlPoints=3,Oo);Jf=a7([h_(1,Ie),h_(2,gt),h_(3,je)],Jf);const l7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.275 21.432l12.579-12.579-.707-.707-12.579 12.579z"></path><path d="M6.69 13.397l7.913 7.913.707-.707-7.913-7.913zM7.149 10.558l7.058-7.058-.707-.707-7.058 7.058z"></path><path d="M18.149 21.558l7.058-7.058-.707-.707-7.058 7.058z"></path><path d="M5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM16.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,u7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M10.275 20.432l11.579-11.579-.707-.707-11.579 11.579z"></path><path d="M8.336 13.043l8.621 8.621.707-.707-8.621-8.621zM9.149 10.558l7.058-7.058-.707-.707-7.058 7.058z" id="Line"></path><path d="M20.149 21.558l7.058-7.058-.707-.707-7.058 7.058z"></path><path d="M6.5 23h10v-1h-10z"></path><path d="M4.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM7.5 13c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,C0=class C0 extends Re{constructor(e,t){super(e,t,"select-composite-line-tool-action")}run(e){return Promise.resolve(null)}};C0.ID="workbench.action.selectCompositeLineTool",C0.LABEL="SelectCompositeLineTool";let Wa=C0;class h7 extends Ax{_getDropdownActions(){return[{id:"workbench.action.selectCompositeLineTool.pitchfork",label:"Pitchfork",icon:l7,context:Qf},{id:"workbench.action.selectCompositeLineTool.schiffPitchfork",label:"Schiff Pitchfork",icon:u7,context:Jf}]}}const P0=class P0 extends Re{constructor(e,t){super(e,t,"show-user-menu-action")}run(e){return Promise.resolve(null)}};P0.ID="workbench.action.showUserMenu",P0.LABEL="Show User Menu";let W1=P0;class c7 extends iD{render(e){this.element=e,Pe(this.element,"user-profile-entry-container")}}var d7=Object.defineProperty,f7=Object.getOwnPropertyDescriptor,p7=(i,e,t,r)=>{for(var n=r>1?void 0:r?f7(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&d7(e,t,n),n},aS=(i,e)=>(t,r)=>e(t,r,i);const I0=class I0 extends Re{constructor(e,t){super(e,t,"select-icon-tool-action")}run(e){return Promise.resolve(null)}};I0.ID="workbench.action.selectIconTool",I0.LABEL="SelectIconTool";let G1=I0,Y1=class extends na{constructor(i,e,t,r){super(null,e),this.instantiationService=t,this.contextViewService=r,this.cssClass=e.class}render(i){this.element=i,Pe(this.element,`${this.cssClass}-container tool extendable`),this.iconBlock=Le("div.icon"),this.iconBlock.appendTo(this.element),this._dropdown=new m7(i,{contextViewProvider:this.contextViewService})}};Y1=p7([aS(2,Nt),aS(3,Z0)],Y1);class m7 extends jN{constructor(e,t){super(e,{contextViewProvider:t.contextViewProvider}),this.$el.addClass("toggle")}renderContents(e){const t=Le("div").append(Le("div").text("Select Icons"));return t.style("background","white"),t.appendTo(e),{dispose:()=>{}}}}const g7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" enable-background="new 0 0 32 32" width="30" height="30"><path fill-rule="evenodd" clip-rule="evenodd" d="M22 14c-.3-3.9-3.5-7-7.5-7S7.3 10.1 7 14v9h5v-9h.1c.2-1.1 1.2-2 2.4-2s2.2.9 2.4 2h.1v9h5v-9zm-11 8H8v-4h3v4zm10 0h-3v-4h3v4z"></path></svg>
`,O0=class O0 extends Re{constructor(e,t){super(e,t,"toggle-magnet-mode-action")}run(e){return Promise.resolve(null)}};O0.ID="workbench.action.toggleMagnetMode",O0.LABEL="ToggleMagnetMode";let q1=O0;class _7 extends Hn{constructor(){super(...arguments),this.icon=g7}render(e){super.render(e)}}const M0=class M0 extends Re{constructor(e,t){super(e,t,"zoom-out-action")}run(e){return Promise.resolve(null)}};M0.ID="workbench.action.zoomOut",M0.LABEL="ZoomOut";let X1=M0;class v7 extends Hn{render(e){super.render(e)}}const y7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" width="30" height="30"><path d="M129.8 244.3L5 609.7h54.8l42.6-121.8h121.8l39.6 121.8h57.8L190.7 244.3h-60.9zm-18.2 213.1l51.8-155.3 51.8 155.3H111.6zm456.6 115.7c-3 0-9.1 0-9.1-3-3-6.1-3-9.1-3-18.3v-134c0-82.2-91.3-82.2-103.5-82.2-30.4 0-109.6 3-109.6 91.3h39.6c3-39.6 42.6-60.9 70-60.9 30.4 0 54.8 15.2 54.8 45.7 0 18.3-18.3 30.4-36.5 33.5 0 0-67 9.1-82.2 18.3-15.2 3-45.7 21.3-45.7 70 0 42.6 27.4 76.1 76.1 76.1 33.5 0 67-18.3 91.3-42.6 0 12.2 3 24.4 12.2 30.4 6.1 6.1 18.3 9.1 33.5 9.1 6.1 0 21.3-3 33.5-6.1V567c-9.2 3.1-18.3 6.1-21.4 6.1zm-60.9-63.9c0 42.6-36.5 70-76.1 70-30.4 0-48.7-9.1-48.7-51.8 0-21.3 33.5-39.6 42.6-39.6 24.4-3 54.8-6.1 85.2-15.2v36.5h-3z"></path></svg>
`,x7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" width="30" height="30"><path fill-rule="evenodd" clip-rule="evenodd" d="M567.7 358.1h20c-7.2 47.7-55.1 84.7-113.9 84.7s-106.7-37-113.9-84.7h18.9c8.6 32.1 42.6 56.5 84.5 59.9V295.6h-60.8v-20.7h60.8v-21.6c-12.5-4.2-21.7-15.6-21.7-29.4 0-17.3 14.3-31.4 31.9-31.4 17.6 0 31.9 14.1 31.9 31.4 0 14-9.5 25.5-22.4 29.5v21.5h60.1v20.7H483V418c42-3.4 76.1-27.8 84.7-59.9zm-82.1-134.2c0-6.6-5.4-12-12.1-12-6.7 0-12.1 5.3-12.1 12s5.4 12 12.1 12c6.6 0 12.1-5.4 12.1-12zm-85.5 295.4v92.6c0 5.5 4.2 13.1 6 15.2 1.8 2 4.3 3.1 7.6 3.1 2.4 0 2.2-.5 6.8-1.4v20.9c-7 1.6-10.9 2.4-16 2.4-10.8 0-18-3.4-23-7.7-4.9-4.2-9.2-5.9-10.1-15.5-19.1 20.2-37.9 22.5-65.6 22.5-36.5 0-59.5-22.7-59.5-54.8 0-60.9 75.4-59.9 56.1-57.7 0 0 68.5-5.2 68.5-22.8 0-20.7-11.9-32.3-42.5-32.3-14.3 0-24.9 3-31.8 8.9-6.9 5.9-11 6.7-12.1 18.8h-30c3.6-55.3 70.9-52.6 75.3-52 3.2-.2 23 .1 41.2 9.3 17 8.7 29.1 26.4 29.1 50.5zm-31.5 29.3c-21.8 11.8-38.4 11.5-61.2 17.4-6 1.5-30.9 5.3-30.9 28.2 0 30.4 14.7 37.1 37 37.1 30.5 0 55.1-18.3 55.1-50.5v-32.2zm-204.2 19.2H67.6l-29.1 84.3H1.7l96.4-272.2h41.2l92.9 272.2h-38.8l-29-84.3zM115.9 421L80.5 526.6h71L115.9 421z"></path></svg>
`,w7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text" width="30" height="30"><path fill-opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M297.7 127.9c-127.1 0-230.1 101.6-230.1 227 0 118.4 104.2 240.4 173.8 314.7 26 27.8 56.3 44.2 56.3 44.2s32.5-16.7 60.4-45.3c69.5-71.3 169.6-183.5 169.6-313.7 0-125.2-103-226.9-230-226.9zm0 335c-57.8 0-104.6-46.8-104.6-104.6S240 253.7 297.7 253.7s104.6 46.8 104.6 104.6-46.8 104.6-104.6 104.6z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M297.7 232.8c-69.3 0-125.5 56.2-125.5 125.5s56.2 125.5 125.5 125.5 125.5-56.2 125.5-125.5-56.1-125.5-125.5-125.5zm0 230.1c-57.8 0-104.6-46.8-104.6-104.6S240 253.7 297.7 253.7s104.6 46.8 104.6 104.6-46.8 104.6-104.6 104.6zm0-335c-127.1 0-230.1 101.6-230.1 227 0 118.4 104.2 240.4 173.8 314.7 26 27.8 56.3 44.2 56.3 44.2s32.5-16.7 60.4-45.3c69.5-71.3 169.6-183.5 169.6-313.7 0-125.2-103-226.9-230-226.9zM352.6 651c-25.4 26.5-54.9 42-54.9 42s-27.5-15.3-51.2-41.1c-63.3-69.1-158-182.3-158-292.3 0-116.4 93.6-210.8 209.1-210.8s209.1 94.4 209.1 210.8c.1 121-90.9 225.2-154.1 291.4z"></path></svg>
`,b7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text" width="30" height="30"><path fill-opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M184.1 270C86.7 270 7.7 349.2 7.7 447c0 92.3 79.9 187.4 133.2 245.4 19.9 21.6 43.1 34.5 43.1 34.5s24.9-13 46.3-35.3C283.7 636 360.5 548.5 360.5 447c0-97.8-79-177-176.4-177zm.1 277.5c-53.2 0-96.3-43.8-96.3-97.9 0-54.1 43.1-97.9 96.3-97.9s96.3 43.8 96.3 97.9c-.1 54-43.1 97.9-96.3 97.9z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M184.2 351.7c-53.2 0-96.3 43.8-96.3 97.9 0 54.1 43.1 97.9 96.3 97.9s96.3-43.8 96.3-97.9c-.1-54.1-43.1-97.9-96.3-97.9zm0 167.6c-40.1 0-72.7-32.5-72.7-72.7s32.5-72.7 72.7-72.7 72.7 32.5 72.7 72.7-32.6 72.7-72.7 72.7zm-.1-249.3C86.7 270 7.7 349.2 7.7 447c0 92.3 79.9 187.4 133.2 245.4 19.9 21.6 43.1 34.5 43.1 34.5s24.9-13 46.3-35.3C283.7 636 360.5 548.5 360.5 447c0-97.8-79-177-176.4-177zM225 674c-18.9 20.3-40.9 32.1-40.9 32.1s-20.5-11.7-38.1-31.4C99 622 28.5 535.6 28.5 451.7c0-88.9 69.7-160.9 155.7-160.9 85.9 0 155.6 72 155.6 160.9 0 92.2-67.8 171.8-114.8 222.3zm343.4-363.4h19.8c-7.1 47.4-54.7 84.1-113.1 84.1s-105.8-36.7-113-84.1h18.7c8.5 31.8 42.3 56.1 83.9 59.5V248.5h-60.4V228h60.4v-21.5c-12.4-4.2-21.5-15.5-21.5-29.2 0-17.2 14.2-31.2 31.7-31.2s31.7 14 31.7 31.2c0 13.9-9.4 25.3-22.2 29.3V228h59.7v20.5h-59.7v121.6c41.7-3.4 75.5-27.6 84-59.5zm-81.5-133.2c0-6.6-5.4-11.9-12.1-11.9s-12.1 5.3-12.1 11.9 5.4 11.9 12.1 11.9 12.1-5.4 12.1-11.9z"></path></svg>
`,S7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text" width="30" height="30"><path fill-opacity=".2" d="M179.9 462.6h-42.1c-25.9 0-48.6-22.7-48.6-48.6V284.6c0-25.9 22.7-48.6 48.6-48.6h388.5c25.9 0 48.6 22.7 48.6 48.6v129.5c0 25.9-22.7 48.6-48.6 48.6H264L56.9 605.1l123-142.5z"></path><path d="M526.3 252.2c19.4 0 32.4 12.9 32.4 32.4v129.5c0 19.4-12.9 32.4-32.4 32.4H257.6l-9.7 6.5-97.1 64.7 16.2-16.2 45.3-55h-74.5c-19.4 0-32.4-12.9-32.4-32.4V284.6c0-19.4 12.9-32.4 32.4-32.4h388.5m0-32.4H137.8c-35.6 0-64.7 29.1-64.7 64.7V414c0 35.6 29.1 64.7 64.7 64.7h6.5L1.8 640.7H31l233-161.9h259c35.6 0 64.7-29.1 64.7-64.7V284.6c3.3-35.6-25.8-64.8-61.4-64.8z"></path></svg>
`,E7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text" width="30" height="30"><path fill-opacity=".2" d="M139.9 488.7H134c-64.3-2.9-113.9-55.5-113.9-116.9 0-64.3 55.5-116.9 122.7-116.9h309.7c67.2 0 122.7 52.6 122.7 116.9s-55.5 116.9-122.7 116.9H224.6v93.5l-84.7-93.5z"></path><path d="M452.5 269.5c58.4 0 108.1 46.7 108.1 102.3s-49.7 102.3-108.1 102.3H210v70.1l-55.5-61.4-8.8-8.8H134c-55.5-2.9-99.3-49.7-99.3-102.3 0-55.5 49.7-102.3 108.1-102.3h309.7m0-29.1H142.8c-76 0-137.3 58.4-137.3 131.5 0 70.1 58.4 125.6 128.6 131.5l105.2 116.9V503.3h213.3c76 0 137.3-58.4 137.3-131.5s-61.4-131.5-137.4-131.5z"></path></svg>
`,A7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M10.17 6.45c-1.145 0-2.077.928-2.077 2.078v6.225c0 .9.575 1.668 1.373 1.953L6.596 20H3v4h4l.057-2.825 6.635-4.35h12.23c1.146 0 2.078-.927 2.078-2.077v-6.22c0-1.15-.927-2.077-2.077-2.077zm.715 1.037h14.163c1.056 0 1.916.87 1.916 1.942v4.39c0 1.07-.86 1.94-1.916 1.94H13.66l-4.013 2.71-.383.02 1.238-2.775c-.83-.18-1.337-.964-1.337-1.9V9.43c0-1.073.663-1.943 1.72-1.943zM4 21h2v2H4z"></path><path fill-opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M25.06 7.523H10.894c-1.056 0-1.72.87-1.72 1.943v4.397c0 .937.51 1.72 1.337 1.9L9.28 18.54l.384-.026 4.014-2.71H25.06c1.055 0 1.915-.87 1.915-1.94v-4.4c0-1.072-.86-1.942-1.916-1.942z"></path></svg>
`,D7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M5 16l13 10v-6h8v-8h-8V6L5 16zm1.5 0L17 8v5h8v6h-8v5L6.5 16z"></path><path d="M6.5 16L17 8v5h8v6h-8v5z" opacity=".3"></path></svg>
`,T7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M26 16L13 6v6H5v8h8v6l13-10zm-1.5 0L14 24v-5H6v-6h8V8l10.5 8z"></path><path d="M24.5 16L14 24v-5H6v-6h8V8z" opacity=".3"></path></svg>
`,C7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M15 5L5 18h6v8h8v-8h6L15 5zm0 1.5L23 17h-5v8h-6v-8H7l8-10.5z"></path><path d="M15 6.5L23 17h-5v8h-6v-8H7z" opacity=".3"></path></svg>
`,P7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9" class="text"><path d="M16 27l10-13h-6V6h-8v8H6l10 13zm0-1.5L8 15h5V7h6v8h5l-8 10.5z"></path><path d="M16 25.5L8 15h5V7h6v8h5z" opacity=".3"></path></svg>
`,I7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 595.3 841.9" enable-background="new 0 0 595.3 841.9" class="text" width="30" height="30"><path d="M303.306 426.633v-241.3h189.7l-93.1 120.7 96.5 120.6zM276.9 399.2c-3.4-3.4-6.9-3.4-13.8-3.4H111.4V154.4h148.3c3.4 0 13.8 10.3 17.2 17.2zm-17.2-262.1H94.2V413h169c13.8 0 31 31 31 31V164.7s-13.8-27.6-34.5-27.6zm-172.4 0H52.8v586.2h34.5zm443.606 30.933h-241.4v275.9h241.4l-110.4-138z"></path><path d="M107.02 155.182v244.363h172.126V155.182H107.02zm194.423 26.754v251.5h206.91l-108.81-127.534L508.35 181.936H301.44z" opacity=".2"></path></svg>
`,N0=class N0 extends Re{constructor(e,t){super(e,t,"select-text-tool-action")}run(e){return Promise.resolve(null)}};N0.ID="workbench.action.selectTextTool",N0.LABEL="SelectTextTool";let Z1=N0;class O7 extends ra{_getDropdownActions(){return[{id:"workbench.action.selectTextTool.text",label:"Text",icon:y7},{id:"workbench.action.selectTextTool.anchoredText",label:"Anchored Text",icon:x7},{id:"workbench.action.selectTextTool.note",label:"Note",icon:w7},{id:"workbench.action.selectTextTool.anchoredNote",label:"Anchored Note",icon:b7},{id:"workbench.action.selectTextTool.callout",label:"Callout",icon:S7},{id:"workbench.action.selectTextTool.balloon",label:"balloon",icon:E7},{id:"workbench.action.selectTextTool.priceLabel",label:"Price Label",icon:A7},{id:"workbench.action.selectTextTool.arrowMarkLeft",label:"Arrow Mark Left",icon:D7},{id:"workbench.action.selectTextTool.arrowMarkRight",label:"Arrow Mark Right",icon:T7},{id:"workbench.action.selectTextTool.arrowMarkUp",label:"Arrow Mark Up",icon:C7},{id:"workbench.action.selectTextTool.arrowMarkDown",label:"Arrow Mark Down",icon:P7},{id:"workbench.action.selectTextTool.flagMark",label:"flagMark",icon:I7}]}}var M7=Object.defineProperty,N7=Object.getOwnPropertyDescriptor,R7=(i,e,t,r)=>{for(var n=r>1?void 0:r?N7(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&M7(e,t,n),n},c_=(i,e)=>(t,r)=>e(t,r,i),hs;let es=(hs=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n,this.type=es.type,this.horizontalLines=[],this.verticalLines=[];const[[s,o],[a,l]]=e;let c={x1:s,y1:o,x2:a,y2:l};for(let h=0,u=es.ratios.length;h<u;h++)this.horizontalLines.push(new wt(c)),this.verticalLines.push(new wt(c))}compute(e,t,r){this._recalculateLines()}_recalculateLines(){const[e,t]=this.controlPoints,{cx:r,cy:n}=e,{cx:s,cy:o}=t;for(let a=0,l=es.ratios.length;a<l;a++){let c=s-r,h=o-n,u=es.ratios[a],p=r+c*u,d=n+h*u,f=this.horizontalLines[a];f.x1=r,f.y1=d,f.x2=s,f.y2=d;let m=this.verticalLines[a];m.x1=p,m.y1=n,m.x2=p,m.y2=o}}hitTest(e){if(!this.isVisible)return null;for(let t=0;t<2;t++){let r=this.controlPoints[t];if(r.contains(e))return r}for(let t=0,r=es.ratios.length;t<r;t++){if(this.horizontalLines[t].contains(e))return this;if(this.verticalLines[t].contains(e))return this}return null}_render(e){if(!this.isVisible||this.opacity===0)return;let r=this.themeService.getTheme().getColor(Pi).toString();e.fillStyle=r,e.strokeStyle=r;for(let n=0,s=this.horizontalLines.length;n<s;n++)this.horizontalLines[n].render(e);for(let n=0,s=this.verticalLines.length;n<s;n++)this.verticalLines[n].render(e);if(!this.isDrawing&&(this._isHovered||this._isSelected))for(let n=0;n<2;n++)this.controlPoints[n].render(e)}},hs.type="Rectangle",hs.ratios=[0,1],hs.controlPoints=2,hs);es=R7([c_(1,Ie),c_(2,gt),c_(3,je)],es);var L7=Object.defineProperty,k7=Object.getOwnPropertyDescriptor,B7=(i,e,t,r)=>{for(var n=r>1?void 0:r?k7(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&L7(e,t,n),n},d_=(i,e)=>(t,r)=>e(t,r,i),Mo;let e0=(Mo=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n,this.type=e0.type;const[[s,o],[a,l],[c,h]]=e;let u=oe.midPoint({x:s,y:o},{x:a,y:l}),p=Fe.distanceBetween(Fe.fromTwoPoint({x:s,y:o},{x:a,y:l}),{x:c,y:h}),d=oe.distanceBetween(u,{x:s,y:o});this.ellipse=new m5({cx:u.x,cy:u.y,r1:d,r2:p})}compute(e,t,r){this._recalculateLines()}_recalculateLines(){const[e,t,r]=this.controlPoints,{cx:n,cy:s}=e,{cx:o,cy:a}=t,{cx:l,cy:c}=r;let h=oe.midPoint({x:n,y:s},{x:o,y:a}),u=Fe.distanceBetween(Fe.fromTwoPoint({x:n,y:s},{x:o,y:a}),{x:l,y:c}),p=oe.radian({x:o-n,y:a-s}),d=oe.distanceBetween(h,{x:n,y:s});this.ellipse.cx=h.x,this.ellipse.cy=h.y,this.ellipse.r1=d,this.ellipse.r2=u,this.ellipse.matrix=fi.rotate(fi.initial,p)}hitTest(e){if(!this.isVisible)return null;for(let t=0;t<3;t++){let r=this.controlPoints[t];if(r.contains(e))return r}return this.ellipse.contains(e)?this:null}_render(e){if(!this.isVisible||this.opacity===0)return;let r=this.themeService.getTheme().getColor(Pi).toString();if(e.fillStyle=r,e.strokeStyle=r,this.ellipse.render(e),!this.isDrawing&&(this._isHovered||this._isSelected))for(let n=0;n<3;n++)this.controlPoints[n].render(e)}},Mo.type="Ellipse",Mo.controlPoints=3,Mo);e0=B7([d_(1,Ie),d_(2,gt),d_(3,je)],e0);var F7=Object.defineProperty,U7=Object.getOwnPropertyDescriptor,K7=(i,e,t,r)=>{for(var n=r>1?void 0:r?U7(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&F7(e,t,n),n},f_=(i,e)=>(t,r)=>e(t,r,i),No;let t0=(No=class extends Vt{constructor(e,t,r,n){super(e,t,r),this.themeService=n,this.type=t0.type;const[[s,o],[a,l]]=e;let c={x1:s,y1:o,x2:a,y2:l};this.line0=new wt(c),this.line1=new wt(c),this.line2=new wt(c),this._recalculateLines()}compute(e,t,r){this._recalculateLines()}_recalculateLines(){let[e,t,r]=this.controlPoints;this.line0.x1=e.cx,this.line0.y1=e.cy,this.line0.x2=t.cx,this.line0.y2=t.cy,this.line1.x1=t.cx,this.line1.y1=t.cy,this.line1.x2=r.cx,this.line1.y2=r.cy,this.line2.x1=e.cx,this.line2.y1=e.cy,this.line2.x2=r.cx,this.line2.y2=r.cy}hitTest(e){if(!this.isVisible)return null;for(let t=0;t<3;t++){let r=this.controlPoints[t];if(r.contains(e))return r}return this.line0.contains(e)?this:this.line1.contains(e)?this:this.line2.contains(e)?this:null}_render(e){if(!this.isVisible||this.opacity===0)return;let r=this.themeService.getTheme().getColor(Pi).toString();if(e.fillStyle=r,e.strokeStyle=r,this.line1.render(e),this.line2.render(e),this.line0.render(e),!this.isDrawing&&(this._isHovered||this._isSelected))for(let n=0;n<3;n++)this.controlPoints[n].render(e)}},No.type="Triangle",No.controlPoints=3,No);t0=K7([f_(1,Ie),f_(2,gt),f_(3,je)],t0);const H7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M7.5 6h13v-1h-13z" id="Line"></path><path d="M7.5 23h13v-1h-13z"></path><path d="M5 7.5v13h1v-13z"></path><path d="M22 7.5v13h1v-13z"></path><path d="M5.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,z7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M12.435 6.136c-4.411.589-7.983 3.039-9.085 6.27l.946.323c.967-2.836 4.209-5.059 8.271-5.602l-.132-.991zM3.347 16.584c1.101 3.243 4.689 5.701 9.117 6.283l.13-.991c-4.079-.537-7.335-2.767-8.301-5.613l-.947.321zM16.554 22.865c4.381-.582 7.94-3 9.071-6.2l-.943-.333c-.994 2.811-4.224 5.006-8.26 5.542l.132.991zM25.646 12.394c-1.107-3.225-4.675-5.668-9.078-6.257l-.133.991c4.056.542 7.293 2.76 8.265 5.591l.946-.325z"></path><path d="M14.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM25.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,j7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill-rule="nonzero"><path d="M8.5 23h11v-1h-11zM6 8.5v12h1v-12zM7.483 8.28l12.293 13.112.73-.684-12.293-13.112z"></path><path d="M6.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM21.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>
`,R0=class R0 extends Re{constructor(e,t){super(e,t,"select-shape-tool-action")}run(e){return Promise.resolve(null)}};R0.ID="workbench.action.selectShapeTool",R0.LABEL="SelectShapeTool";let Ga=R0;class $7 extends Ax{_getDropdownActions(){return[{id:"workbench.action.selectShapeTool.rectangle",label:"Rectangle",icon:H7,context:es},{id:"workbench.action.selectShapeTool.ellipse",label:"Ellipse",icon:z7,context:e0},{id:"workbench.action.selectShapeTool.triangle",label:"Triangle",icon:j7,context:t0}]}}const V7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M18.827 8.17c-1.227.817-.993 1.49-.993 2.318 0 .703-.29 1.49-.62 1.778-.33.29-.8.965-.8.965l1.168 1.25s.823-.52 1.038-.72c.414-.37 1.407-.66 2.193-.66 1.737 0 2.387-.54 2.454-2.49.017-.5-.07-1.63-.07-1.63l-.795.02c-.458 2.406-1.457 2.53-2.28 1.79-.823-.74-1.13-1.193.386-2.774l-.48-.626-1.2.79zM6.46 7.716c-.29.455 1.2 3.847 1.984 4.468.91.785 1.903.496 2.896-.828.827-1.117.827-1.158.083-1.985-.414-.45-1.158-.82-1.696-.82s-1.034-.17-1.157-.38c-.332-.49-1.863-.86-2.11-.45zm3.983 5.846c0 .372 4.95 4.826 8.467 7.68 2.192 1.78 3.268 2.027 2.77.62-.454-1.24-7.983-10.328-8.81-10.576-.618 1.114-1.67 1.914-2.427 2.276zm-.468 5.778C7.74 21.367 7.74 21.367 8.57 22.194c.826.827.826.827 3.018-1.406 1.383-1.414 2.168-2.514 2.168-2.514l-1.272-1.21s-1.268 1.118-2.51 2.276z"></path></svg>
`,L0=class L0 extends Re{constructor(e,t){super(e,t,"show-object-tree-action")}run(e){return Promise.resolve(null)}};L0.ID="workbench.action.showObjectTree",L0.LABEL="ShowObjectTree";let Q1=L0;class W7 extends Hn{constructor(){super(...arguments),this.icon=V7}render(e){super.render(e)}}const G7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30.000001 29.999999" width="30" height="30" enable-background="new 0 0 595.3 841.9"><path d="M25.3 19L22.5 8H24V4h-4v4h1.3l-4 4h-2.4L12 7.6V4H8v4h1.5L5.7 23H4v4h4v-3.4l6.8-7.6h2.798L23 19.9V23h4v-4zM9 7V5h2v2zM7.003 26H5v-2h2v2zM14 15.4L7.2 23h-.397L10.5 8.102l-.498-.098h1.1l2.898 4.4zm3-.4h-2v-2h2zm4-8V5h2v2zm-3.002 8.102v-2.4l3.698-3.697L24.2 19h-.8zM26 22h-2v-2h2z"></path></svg>
`,k0=class k0 extends Re{constructor(e,t){super(e,t,"select-pattern-tool-action")}run(e){return Promise.resolve(null)}};k0.ID="workbench.action.selectPatternTool",k0.LABEL="SelectPatternTool";let J1=k0;class Y7 extends ra{_getDropdownActions(){return[{id:"workbench.action.selectPatternTool.xabcdPattern",label:"XABCD Pattern",icon:G7}]}}const q7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M15 6v2h-1v6h1v2h1v-2h1V8h-1V6zm5 1v2h-1v6h1v2h1v-2h1V9h-1V7zM4 8v16h23v-5H9V8zm1 1h3v2H6v1h2v2H6v1h2v2H6v1h2v1.293l-3 3zm3.707 11H11v2h1v-2h2v2h1v-2h2v2h1v-2h2v2h1v-2h2v2h1v-2h2v3H5.707z"></path></svg>
`,B0=class B0 extends Re{constructor(e,t){super(e,t,"measure-action")}run(e){return Promise.resolve(null)}};B0.ID="workbench.action.measure",B0.LABEL="Measure";let ev=B0;class X7 extends Hn{constructor(){super(...arguments),this.icon=q7}render(e){super.render(e)}}const Z7=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30"><path d="M11.527 5.975c-1.345 0-2.692.508-3.713 1.53l-.283.282c-2.04 2.04-2.04 5.385 0 7.426l2.18 2.178c-.3-1.1-.26-2.29.17-3.36l-.58-.58c-1.09-1.09-1.09-2.8 0-3.89l.29-.28c1.1-1.09 2.8-1.09 3.89 0l2.76 2.76c1.09 1.1 1.09 2.8 0 3.89l-.28.28c-.313.32-.69.54-1.08.67l1.86 1.86c.353-.21.69-.45.994-.75l.28-.285c2.04-2.042 2.04-5.383 0-7.424l-2.76-2.76c-1.02-1.02-2.367-1.53-3.71-1.53zm1.733 5.285c-.337.208-.655.453-.946.744l-.283.283c-2.04 2.04-2.04 5.385 0 7.426l2.76 2.758c2.04 2.05 5.39 2.05 7.43 0l.29-.28c2.04-2.04 2.04-5.38 0-7.42l-2.18-2.18c.31 1.11.26 2.29-.17 3.37l.58.58c1.09 1.1 1.09 2.8 0 3.89l-.28.29c-1.09 1.093-2.793 1.093-3.89 0l-2.76-2.76c-1.09-1.092-1.09-2.796 0-3.89l.28-.284c.31-.304.67-.513 1.04-.65l-1.86-1.86zM18 13.492v.31l.03.028c-.007-.113-.01-.226-.03-.338z"></path></svg>
`,F0=class F0 extends Re{constructor(e,t){super(e,t,"toggle-drawing-sync-action")}run(e){return Promise.resolve(null)}};F0.ID="workbench.action.toggleDrawingSync",F0.LABEL="ToggleDrawingSync";let tv=F0;class Q7 extends Hn{constructor(){super(...arguments),this.icon=Z7}render(e){super.render(e)}}const J7=`<span class="icon-1Y-3MM9F-"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill-rule="nonzero" d="M17.537 7.635l-.789.789c-.886-.275-1.812-.424-2.748-.424-3.841 0-7.521 2.503-8.962 6 .562 1.364 1.465 2.577 2.585 3.549l-.709.709c-1.265-1.112-2.274-2.506-2.881-4.077l-.07-.18.07-.18c1.535-3.975 5.645-6.82 9.966-6.82 1.213 0 2.409.224 3.537.635zm3.549 2.108c1.265 1.112 2.274 2.506 2.881 4.077l.07.18-.07.18c-1.535 3.975-5.646 6.82-9.966 6.82-1.213 0-2.409-.224-3.537-.635l.789-.789c.886.275 1.812.424 2.748.424 3.84 0 7.521-2.503 8.962-6-.562-1.364-1.465-2.577-2.585-3.549l.709-.709zm-6.049.392l-4.902 4.902c-.088-.33-.135-.677-.135-1.036 0-2.213 1.788-4.001 4.001-4.001.358 0 .705.047 1.036.135zm2.828 2.829c.088.331.135.679.135 1.038 0 2.213-1.786 3.999-3.999 3.999-.359 0-.707-.047-1.038-.135l4.901-4.901zm-12.365 10.243l-.707-.707 17.707-17.707.707.707-17.707 17.707z"></path></svg></span>
`,U0=class U0 extends Re{constructor(e,t){super(e,t,"toggle-drawing-visibility-action")}run(e){return Promise.resolve(null)}};U0.ID="workbench.action.toggleDrawingVisibility",U0.LABEL="ToggleDrawingVisibility";let iv=U0;class ek extends Hn{constructor(){super(...arguments),this.icon=J7}render(e){super.render(e)}}const tk=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path d="M18 15h8v-1h-8z"></path><path d="M14 18v8h1v-8zM14 3v8h1v-8zM3 15h8v-1h-8z"></path></g></svg>
`,ik=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><circle cx="14" cy="14" r="3"></circle></svg>
`,rk=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path d="M11.682 16.09l3.504 6.068 1.732-1-3.497-6.057 3.595-2.1L8 7.74v10.512l3.682-2.163zm-.362 1.372L7 20V6l12 7-4.216 2.462 3.5 6.062-3.464 2-3.5-6.062z"></path></svg>
`,K0=class K0 extends Re{constructor(e,t){super(e,t,"set-cursor-action")}run(e){return Promise.resolve(null)}};K0.ID="workbench.action.setCursorStyle",K0.LABEL="Set Cursor Style";let Ya=K0;class nk extends ra{_getDropdownActions(){return[{id:"workbench.action.setCursorStyle.setCross",label:"Cross",icon:tk},{id:"workbench.action.setCursorStyle.setDot",label:"Dot",icon:ik},{id:"workbench.action.setCursorStyle.setArrow",label:"Arrow",icon:rk}]}_executeCommand(e,t){this.currentAction=fs(this.actions,r=>r.id===e),this.iconBlock.innerHtml(this.currentAction.icon),this.instantiationService.invokeFunction(r=>{const n=r.get(ms);let s=e.substr(35,e.length);n.executeCommand("chart.action.setCursorStyle",{style:s})})}}const sk=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g><path fill-rule="nonzero" d="M8 21c0 1.1.825 2 1.833 2h7.333c1.008 0 1.833-.9 1.833-2v-12h-11v12zm-1 0v-13h13v13c0 1.634-1.252 3-2.833 3h-7.333c-1.581 0-2.833-1.366-2.833-3z"></path><path d="M17 6l-1-1h-5l-1 1h-3v1h13v-1z"></path><path fill-rule="nonzero" d="M10 11v9.062h1v-9.062z"></path><path fill-rule="nonzero" d="M13 11v9.062h1v-9.062z"></path><path fill-rule="nonzero" d="M16 11v9.062h1v-9.062z"></path></g></svg>
`;var ok=Object.defineProperty,ak=Object.getOwnPropertyDescriptor,lk=(i,e,t,r)=>{for(var n=r>1?void 0:r?ak(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&ok(e,t,n),n},uk=(i,e)=>(t,r)=>e(t,r,i),Ro;let qa=(Ro=class extends Re{constructor(e,t,r){super(e,t,"remove-all-drawing-action"),this.drawingService=r}run(e){return this.drawingService.removeAll(),Promise.resolve(null)}},Ro.ID="workbench.action.removeAllDrawing",Ro.LABEL="RemoveAllDrawing",Ro);qa=lk([uk(2,sn)],qa);class hk extends Hn{constructor(){super(...arguments),this.icon=sk}render(e){super.render(e)}}const ck=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3 13" width="3" height="13">
  <path
    d="M2.919 11.662l-1.463-5.432v.676l1.5-5.568-1.456-.342-.037 11 1.456-.334zm-1.412.676c.284 1.053 1.452.785 1.456-.334l.037-11c.004-1.124-1.171-1.4-1.456-.342l-1.5 5.568c-.059.219-.059.458 0 .676l1.463 5.432z"></path>
</svg>
`;var dk=Object.defineProperty,fk=Object.getOwnPropertyDescriptor,pk=(i,e,t,r)=>{for(var n=r>1?void 0:r?fk(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&dk(e,t,n),n},Yd=(i,e)=>(t,r)=>e(t,r,i);let rv=class extends eg{constructor(i,e,t,r,n){super(i,{hasTitle:!1},r),this.contextMenuService=e,this.instantiationService=t,this.partService=n}createContentArea(i){let e=document.createElement("div");Pe(e,"content");let t=document.createElement("div");return Pe(t,"container"),e.appendChild(t),i.appendChild(e),this.createToolSelector(t),Le(i).on("contextmenu",r=>{mi.stop(r,!0),this.showContextMenu(r)},this.toUnbind),this.toggleButton=document.createElement("div"),Pe(this.toggleButton,"toggle"),this.toggleButton.innerHTML=ck,this.partService.isVisible(zi.SIDEBAR_PART)?(this.toggleButton.setAttribute("title",""),this.toggleButton.classList.remove("will-open")):(this.toggleButton.setAttribute("title",""),this.toggleButton.classList.add("will-open")),this.toDispose.push(me(this.toggleButton,ue.CLICK,this.handleToggleStyle.bind(this))),i.appendChild(this.toggleButton),e}handleToggleStyle(){let i=this.partService.isVisible(zi.SIDEBAR_PART);this.partService.setSideBarHidden(i),i?(this.toggleButton.setAttribute("title",""),this.toggleButton.classList.add("will-open")):(this.toggleButton.setAttribute("title",""),this.toggleButton.classList.remove("will-open"))}showContextMenu(i){const e=new br(i),t=[];t.push(new Tn),this.contextMenuService.showContextMenu({getAnchor:()=>({x:e.posx+1,y:e.posy}),getActions:()=>Promise.resolve(t),onHide:()=>ye(t)})}createToolSelector(i){this.toolSelectorBar=new ep(i,{actionItemProvider:e=>this.actionItemProvider(e),orientation:bc.VERTICAL,ariaLabel:"Action Selector",animated:!1}),this._register(this.toolSelectorBar),this.toolSelectorBar.push([this.instantiationService.createInstance(Ya,Ya.ID,Ya.LABEL),this.instantiationService.createInstance(Va,Va.ID,Va.LABEL),this.instantiationService.createInstance(Wa,Wa.ID,Wa.LABEL),this.instantiationService.createInstance(Ga,Ga.ID,Ga.LABEL),new Xf,this.instantiationService.createInstance(qa,qa.ID,qa.LABEL)])}actionItemProvider(i){return i instanceof W1?this.instantiationService.createInstance(c7,null,i,{}):i instanceof Ya?this.instantiationService.createInstance(nk,null,i):i instanceof Va?this.instantiationService.createInstance(t7,null,i):i instanceof Wa?this.instantiationService.createInstance(h7,null,i):i instanceof Ga?this.instantiationService.createInstance($7,null,i):i instanceof Z1?this.instantiationService.createInstance(O7,null,i):i instanceof J1?this.instantiationService.createInstance(Y7,null,i):i instanceof B1?this.instantiationService.createInstance(fL,null,i):i instanceof G1?this.instantiationService.createInstance(Y1,null,i):i instanceof k1?this.instantiationService.createInstance(rL,null,i,{}):i instanceof X1?this.instantiationService.createInstance(v7,null,i,{}):i instanceof ev?this.instantiationService.createInstance(X7,null,i,{}):i instanceof q1?this.instantiationService.createInstance(_7,null,i,{}):i instanceof F1?this.instantiationService.createInstance(mL,null,i,{}):i instanceof iv?this.instantiationService.createInstance(ek,null,i,{}):i instanceof tv?this.instantiationService.createInstance(Q7,null,i,{}):i instanceof Q1?this.instantiationService.createInstance(W7,null,i,{}):i instanceof qa?this.instantiationService.createInstance(hk,null,i,{}):i instanceof Xf?this.instantiationService.createInstance(tL,null,i,{}):new J0(null,i,{icon:!0,label:!1})}layout(i){return super.layout(i)}};rv=pk([Yd(1,wc),Yd(2,Nt),Yd(3,je),Yd(4,la)],rv);const mk=Et("sideBarService");var gk=Object.defineProperty,_k=Object.getOwnPropertyDescriptor,vk=(i,e,t,r)=>{for(var n=r>1?void 0:r?_k(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&gk(e,t,n),n},lS=(i,e)=>(t,r)=>e(t,r,i);let nv=class extends eg{constructor(i,e,t){super(i,{hasTitle:!1},t),this.instantiationService=e,this.items=[]}createContentArea(i){const e=document.createElement("div");Pe(e,"content"),i.appendChild(e);const t=document.createElement("div");Pe(t,"container");const r=document.createElement("div");pr(r,"container","left"),t.appendChild(r);const n=document.createElement("div");pr(n,"container","right"),t.appendChild(n);let s=Qe.as(pt.Toolbar).items;return s.filter(o=>o.alignment===cl.LEFT).sort((o,a)=>o.priority-a.priority).forEach(o=>{let a=this.instantiationService.createInstance(o.syncDescriptor);this.items.push(a),a.render(r)}),s.filter(o=>o.alignment===cl.RIGHT).sort((o,a)=>o.priority-a.priority).forEach(o=>{let a=this.instantiationService.createInstance(o.syncDescriptor);this.items.push(a),a.render(n)}),e.appendChild(t),e}layout(i){return super.layout(i)}dispose(){super.dispose(),ye(this.items),this.items.length=0}};nv=vk([lS(1,Nt),lS(2,je)],nv);const yk=Et("headerBarService");function Is(i){let e=i.getFullYear(),t=i.getMonth()+1,r=i.getDate();return`${e}-${t>9?"":"0"}${t}-${r>9?"":"0"}${r}`}function xk(i){let e=i.getFullYear(),t=i.getMonth()+1,r=i.getDate();return`${e}-${t>9?"":"0"}${t}-${r>9?"":"0"}${r}(${i.getDay().toLocaleString("zh-Hans-CN-u-nu-hanidec")})`}class wk{constructor(e,t){this.exchange=t,this.domain=e.domain,this.ticks=e.ticks,this._tradingDates=e.tradingDates,this._prevTradingDate=this._getPrevDate(),this._currentTradingDate=this._getCurrentDate(),this._nextTradingDate=this._getNextDate(),this._nightTrading=e.nightTrading,this._rawTradingPeriods=e.tradingPeriods,this._rawCallAuction=e.callAuction,this.generatePeriods()}generatePeriods(){let e=new Date,t=Is(new Date(this._currentTradingDate));if(this._nightTrading){let r,n,s;if(e.getHours()<20||e.getHours()===20&&e.getMinutes()<30){n=Is(new Date(this._currentTradingDate));let o=new Date(this._prevTradingDate);r=Is(o),o.setDate(o.getDate()+1),s=Is(o)}else{n=Is(new Date(this._nextTradingDate));let o=new Date(this._currentTradingDate);r=Is(o),o.setDate(o.getDate()+1),s=Is(o)}this._tradingPeriods=[],this._rawTradingPeriods.forEach(o=>{let a=o.map(l=>new Date(`${r}T${l}+08:00`));if(a[1]<a[0]&&(a[1]=new Date(`${s}T${o[1]}+08:00`)),this._tradingPeriods.length){let l=di(this._tradingPeriods)[0];a[0]<l&&(a=o.map(c=>new Date(`${n}T${c}+08:00`)))}this._tradingPeriods.push(a)})}else{this._tradingPeriods=this._rawTradingPeriods.map(s=>s.map(o=>new Date(`${t}T${o}+08:00`))),this._callAuction=this._rawCallAuction.map(s=>s.map(o=>new Date(`${t}T${o}+08:00`)));let r=this.getMarketOpenTime(),n=r-e.getTime();new Date(r).getDate()===e.getDate()&&n>Qr(ce.M30)&&this.goToPrevTradingDate()}}get status(){let e=new Date;if(!this.isInTradingDate(e))return Qt.Closed;if(this.isInCallAuctionTime(e))return Qt.CallAuction;if(this.isInTradingTime(e))return Qt.Opened;let t=this._tradingPeriods[0][0],r=di(di(this._tradingPeriods));return e<t?t.getTime()-e.getTime()<=Qr(ce.M30)?Qt.Preparing:Qt.Closed:e>r?Qt.Closed:Qt.Break}isInCallAuctionTime(e){if(!this._callAuction||!this._callAuction.length)return!1;let t=new Date(e);for(let r=0,n=this._callAuction.length;r<n;r++){let[s,o]=this._callAuction[r];if(s<=t&&o>=t)return!0}return!1}isInTradingTime(e){let t=new Date(e);for(let r=0,n=this._tradingPeriods.length;r<n;r++){let[s,o]=this._tradingPeriods[r];if(s<=t&&o>=t)return!0}return!1}isInTradingDate(e){let t=new Date(e);return t.setHours(0,0,0,0),this._currentTradingDate-t.getTime()===0}_getPrevDate(e){e=e?new Date(e):new Date,e.setHours(0,0,0,0);let t=e.getTime();return this._tradingDates.filter(r=>r<=t).sort((r,n)=>n-r)[1]}_getCurrentDate(e){e=e?new Date(e):new Date,e.setHours(0,0,0,0);let t=e.getTime();return this._tradingDates.filter(r=>r<=t).sort((r,n)=>n-r)[0]}_getNextDate(e){e=e?new Date(e):new Date,e.setHours(0,0,0,0);let t=e.getTime();return this._tradingDates.filter(r=>r>t).sort((r,n)=>r-n)[0]}getCurrentDate(){return this._currentTradingDate}getMarketOpenTime(){return this._tradingPeriods[0][0].getTime()}getMarketCloseTime(){return di(di(this._tradingPeriods)).getTime()+1}getCallAuctionStartTimeBeforeMarketOpen(){return!this._callAuction||!this._callAuction.length?0:this._callAuction[0][0].getTime()}getCallAuctionStartTimeBeforeMarketClose(){return this.exchange!=="SHSE"&&this.exchange!=="SZSE"?0:di(di(this._callAuction)).getTime()}goToPrevTradingDate(){this._currentTradingDate=this._prevTradingDate,this._prevTradingDate=this._getPrevDate(this._prevTradingDate),this._nextTradingDate=this._getNextDate(this._currentTradingDate),this.generatePeriods()}goToNextTradingDate(){this._prevTradingDate=this._currentTradingDate,this._currentTradingDate=this._getNextDate(this._prevTradingDate),this._nextTradingDate=this._getNextDate(this._currentTradingDate),this.generatePeriods()}}class bk{constructor(e,t){this.singleDayMode=!1;let r=e.domain[1]+1;this.fiveDayDomain=[0,r*5-1],this.intradayDoamin=e.domain,this.intradayTicks=e.ticks,this.fiveDayTicks=[],this.timers=[];for(let n=0;n<5;n++){let s=new wk(e,t);for(let o=n;o>0;o--)s.goToPrevTradingDate();this.fiveDayTicks.unshift({index:(4-n)*r+r/2,value:xk(new Date(s.getCurrentDate())),labelOnly:!0}),this.fiveDayTicks.unshift({index:(4-n)*r,value:null}),this.timers.unshift(s)}}get ticks(){return this.singleDayMode?this.intradayTicks:this.fiveDayTicks}get domain(){return this.singleDayMode?this.intradayDoamin:this.fiveDayDomain}isInCallAuctionTime(e){if(this.singleDayMode)return this.lastOne.isInCallAuctionTime(e);for(let t=4;t>=0;t--)if(this.timers[t].isInCallAuctionTime(e))return!0;return!1}isInTradingTime(e){if(this.singleDayMode)return this.lastOne.isInTradingTime(e);for(let t=4;t>=0;t--)if(this.timers[t].isInTradingTime(e))return!0;return!1}isInTradingDate(e){if(this.singleDayMode)return this.lastOne.isInTradingDate(e);for(let t=4;t>=0;t--)if(this.timers[t].isInTradingDate(e))return!0;return!1}get lastOne(){return this.timers[this.timers.length-1]}get status(){return this.lastOne.status}getCurrentDate(){return this.lastOne.getCurrentDate()}getStartDate(){return this.singleDayMode?this.lastOne.getCurrentDate():this.timers[0].getCurrentDate()}getMarketOpenTime(){return this.singleDayMode?this.lastOne.getMarketOpenTime():this.timers[0].getMarketOpenTime()}getLatestMarketOpenTime(){return this.lastOne.getMarketOpenTime()}getMarketCloseTime(){return this.lastOne.getMarketCloseTime()}getCallAuctionStartTimeBeforeMarketOpen(){return this.lastOne.getCallAuctionStartTimeBeforeMarketOpen()}getCallAuctionStartTimeBeforeMarketClose(){return this.lastOne.getCallAuctionStartTimeBeforeMarketClose()}goToPrevTradingDate(){for(let e=4;e>=0;e--)this.timers[e].goToPrevTradingDate()}goToNextTradingDate(){for(let e=4;e>=0;e--)this.timers[e].goToNextTradingDate()}useSingleDayMode(){this.singleDayMode=!0}useFiveDayMode(){this.singleDayMode=!1}}class Sk{get status(){return Qt.Opened}isInCallAuctionTime(e){return!1}isInTradingTime(e){return!0}isInTradingDate(e){return!0}getStartDate(){let e=new Date;return e.setHours(0,0,0,0),e.getTime()}getMarketOpenTime(){let e=new Date;return e.setHours(0,0,0,0),e.getTime()}getMarketCloseTime(){let e=new Date;return e.setHours(23,59,59,999),e.getTime()}getCallAuctionStartTimeBeforeMarketOpen(){return 0}getCallAuctionStartTimeBeforeMarketClose(){return 0}goToPrevTradingDate(){}goToNextTradingDate(){}}const qe=58,La=20;class St{constructor(e){this.name=e;let t=e.split(".");this.timelineDataSourceName=t[0],this.partName=t[1],this.seriesName=t[2],this.blockName=t[3],this.dataScourceName=t[2]==="main"?t[0]:t[2],this.dataViewName=`${t[0]}.${t[1]}.${t[2]}`}static getPartName(e){return e.split(".")[1]}}function qd(i,e,t){const{x:r,y:n}=kh(i,e),s=i.buttons;return{type:t,buttons:s,leftButton:s===1,middleButton:s===3,rightButton:s===2,x:r,y:n,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,altKey:i.altKey,metaKey:i.metaKey,timestamp:Date.now()}}class Ek{constructor(e){this.target=e,this.toDispose=[],this.minDragDistance=3,this._onMouseEvent=new ve,this.toDispose.push(this._onMouseEvent),this.registerListener()}get onMouseEvent(){return this._onMouseEvent.event}registerListener(){this.toDispose.push(me(this.target,ue.MOUSE_DOWN,this.handleMouseDown.bind(this),!0)),this.toDispose.push(me(this.target,ue.MOUSE_UP,this.handleMouseUp.bind(this),!0)),this.toDispose.push(me(this.target,ue.MOUSE_MOVE,this.handleMouseMove.bind(this),!0)),this.toDispose.push(me(this.target,ue.CLICK,this.handleMouseClick.bind(this),!0))}handleMouseDown(e){this._onMouseEvent.fire(qd(e,this.target,ue.MOUSE_DOWN))}handleMouseClick(e){this._onMouseEvent.fire(qd(e,this.target,ue.CLICK))}handleMouseUp(e){this.firstDragPosition=null,this.prevDragPosition=null,this._onMouseEvent.fire(qd(e,this.target,ue.MOUSE_UP))}handleMouseMove(e){let t=qd(e,this.target,ue.MOUSE_MOVE);if(t.buttons){this.firstDragPosition||(this.firstDragPosition={x:t.x,y:t.y}),this.prevDragPosition||(this.prevDragPosition={x:t.x,y:t.y});let r=t;r.type=ue.DRAG,r.firstX=this.firstDragPosition.x,r.firstY=this.firstDragPosition.y,r.previousX=this.prevDragPosition.x,r.previousY=this.prevDragPosition.y,this._onMouseEvent.fire(t),this.prevDragPosition={x:t.x,y:t.y}}else this._onMouseEvent.fire(t)}dispose(){ye(this.toDispose),this.toDispose.length=0}}class Ak{constructor(e,t){this.rootNode=t,this.toDispose=[],this.proxy=new Ek(e),this.proxy.onMouseEvent(this.handleEvent.bind(this)),this.toDispose.push(this.proxy)}dispatch(e){this.handleEvent(e)}handleEvent(e){if(this.previousEventType===ue.DRAG||this.previousEventType==ue.DRAG_START&&e.type===ue.DRAG)e.type!==ue.MOUSE_MOVE?(e.target=this.currentDragTarget,e.type=ue.DRAG_END):e.target=this.currentDragTarget;else{let t=this.rootNode.hitTest({x:e.x,y:e.y});if(t)e.type===ue.MOUSE_MOVE?this.currentTarget?t!==this.currentTarget&&(this.currentTarget.isAncestorOf(t)?(e.target=t,e.type=ue.MOUSE_OUT,this.propagationEvent(this.currentTarget,e),this.currentTarget=t,e.type=ue.MOUSE_OVER,this.propagationEvent(t,e)):(e.target=this.currentTarget,e.type=ue.MOUSE_OUT,this.propagationEvent(this.currentTarget,e),this.currentTarget=t,e.target=t,e.type=ue.MOUSE_OVER,this.propagationEvent(t,e))):(e.target=t,e.type=ue.MOUSE_OVER,this.propagationEvent(t,e),this.currentTarget=t):(e.target=t,this.propagationEvent(t,e));else{let r=this.currentTarget;r&&this.previousEventType===ue.MOUSE_MOVE?(e.target=r,e.type=ue.MOUSE_OUT,this.propagationEvent(this.currentTarget,e)):e.type!==ue.MOUSE_MOVE&&(e.target=this.rootNode,this.propagationEvent(this.rootNode,e))}}this.previousEventType=e.type,e.type===ue.MOUSE_OUT?this.currentTarget=null:e.type===ue.DRAG_END&&(this.currentDragTarget=null)}propagationEvent(e,t){let r=!1;t.stop=function(){r=!0},e.emit(t.type,t);let n=e.parent,s;for(;n&&!r;)s=n,n.emit(t.type,t),n=n.parent;s!==this.rootNode&&this.rootNode.emit(t.type,t)}dispose(){this.toDispose=ye(this.toDispose)}}const uS=typeof performance<"u"&&performance!==null&&typeof performance.now=="function"?performance:Date;class Dk{constructor(e,t){this.previousTime=e,this.currentTime=t,this.diff=t-e,this.elapsed=0}get remaining(){return Math.max(0,this.diff-this.elapsed)}}class Tk{constructor(e){this.stage=e,this.transitions=[]}add(e){Array.isArray(e)?this.transitions=this.transitions.concat(e):this.transitions.push(e)}start(){if(!this.transitions.length){this.waitingFrame&&(cancelAnimationFrame(this.waitingFrame),this.waitingFrame=0),this.waitingFrame=requestAnimationFrame(()=>{this.stage.update(),this.waitingFrame=0});return}this.run()}run(){let e=uS.now();for(let r=0,n=this.transitions.length;r<n;r++)this.transitions[r].start(e);const t=()=>{let r=uS.now();if(this.transitions.length){let n=!1;for(let s=0,o=this.transitions.length;s<o;s++){let a=this.transitions[s].getFrame(new Dk(e,r));n=n||a}this.stage.update(),n?requestAnimationFrame(t):this.transitions.length=0}e=r};t()}}var Ck=Object.defineProperty,Pk=Object.getOwnPropertyDescriptor,Ik=(i,e,t,r)=>{for(var n=r>1?void 0:r?Pk(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&Ck(e,t,n),n};function Ok(i){let e=["prependChildren","appendChildren","insertChildren","removeChildren","reverseChildren"];for(let t=0;t<e.length;t++){let r=e[t],n=i.prototype[r],s=!1;Object.defineProperty(i.prototype,r,{configurable:!0,get(){if(s||this===i.prototype||this.hasOwnProperty(r)||typeof n!="function")return n;let o=n.bind(this),a=(...l)=>{o(...l),this._refreshZIndexOfLayers()};return s=!0,Object.defineProperty(this,r,{configurable:!0,get(){return a}}),s=!1,a}})}return i}let i0=class extends vp{constructor(i,e={}){super(),this.container=i,this.toDispose=[],this.bounds={width:I_(i),height:x2(i),x:0,y:0},this.container.setAttribute("role","presentation"),this.eventHandler=new Ak(i,this),this.animator=new Tk(this),this.toDispose.push(this.eventHandler)}_appendChild(i){super._appendChild(i),this.container.appendChild(i.canvasElement)}_refreshZIndexOfLayers(){let i=this.children.length;for(let e=i-1;e>=0;e--){let t=this.children[e];t.canvasElement.style.zIndex=(i-e).toString()}}insertAbove(i){throw new Error}insertBelow(i){throw new Error}replaceWith(i){throw new Error}sendToBack(){throw new Error}bringToFront(){throw new Error}addTo(i){throw new Error}remove(){throw new Error}isAbove(i){throw new Error}isBelow(i){throw new Error}hitTest(i){if(!this.children.length)return null;let e=0,t;for(;t=this.children[e];){let r=t.hitTest(i);if(r)return r;e++}return null}hitTestAll(i){if(!this.children.length)return[];let e=[],t=0,r;for(;r=this.children[t];){let n=r.hitTestAll(i);n.length&&(e=e.concat(n)),t++}return e}contains(i){return Ae.contains(this.bounds,i)}isInside(i){return Ae.contains(i,this.bounds)}intersects(i){return Ae.intersects(this.bounds,i.bounds)}dispose(){this.toDispose=ye(this.toDispose)}update(){for(let i=0,e=this.children.length;i<e;i++)this.children[i].refresh()}};i0=Ik([Ok],i0);var $r=(i=>(i[i.ViewFocusChanged=0]="ViewFocusChanged",i[i.ViewMouseMoveEvent=1]="ViewMouseMoveEvent",i[i.ViewMouseDownEvent=2]="ViewMouseDownEvent",i[i.ViewMouseUpEvent=3]="ViewMouseUpEvent",i[i.ViewPanStartEvent=4]="ViewPanStartEvent",i[i.ViewPanRequest=5]="ViewPanRequest",i[i.ViewPanEndEvent=6]="ViewPanEndEvent",i[i.ViewZoomStartEvent=7]="ViewZoomStartEvent",i[i.ViewZoomRequest=8]="ViewZoomRequest",i[i.ViewZoomEndEvent=9]="ViewZoomEndEvent",i))($r||{});class p_{constructor(e,t,r,n,s){this.type=1,this.x=e,this.y=t,this.targetType=r,this.targetElement=n,this.targetDetail=s}}class Mk{constructor(e,t,r){this.type=2,this.x=e,this.y=t,this.target=r}}class Nk{constructor(){this.type=3}}class Rk{constructor(e,t){this.type=4,this.x=e,this.y=t}}class Lk{constructor(e,t,r,n,s,o){this.type=5,this.dx=r,this.dy=n,this.x=s,this.y=o,this.domainX=e,this.domainY=t}}class kk{constructor(e,t,r,n){this.type=6,this.startX=e,this.startY=t,this.endX=r,this.endY=n}}class Bk{constructor(){this.type=7}}class rD{constructor(e,t,r,n,s,o){this.type=8,this.factorX=e,this.factorY=n,this.centerX=t,this.centerY=s,this.domainX=r,this.domainY=o}}class Fk{constructor(){this.type=9}}class nD extends Je{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onMouseMove(e){return!1}onMouseDown(e){return!1}onMouseUp(e){return!1}onPanstart(e){return!1}onPanRequest(e){return!1}onPanEnd(e){return!1}onZoomStart(e){return!1}onZoomRequest(e){return!1}onZoomEnd(e){return!1}handleEvents(e){let t=!1;for(let r=0,n=e.length;r<n;r++){let s=e[r];switch(s.type){case $r.ViewMouseMoveEvent:this.onMouseMove(s)&&(t=!0);break;case $r.ViewMouseDownEvent:this.onMouseDown(s)&&(t=!0);break;case $r.ViewMouseUpEvent:this.onMouseUp(s)&&(t=!0);break;case $r.ViewPanStartEvent:this.onPanstart(s)&&(t=!0);break;case $r.ViewPanRequest:this.onPanRequest(s)&&(t=!0);break;case $r.ViewPanEndEvent:this.onPanEnd(s)&&(t=!0);break;case $r.ViewZoomStartEvent:this.onZoomStart(s)&&(t=!0);break;case $r.ViewZoomRequest:this.onZoomRequest(s)&&(t=!0);break;case $r.ViewZoomEndEvent:this.onZoomEnd(s)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(s)}}t&&(this._shouldRender=!0)}}class yd extends nD{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._context=null,super.dispose()}shouldRender(e){return!0}}class Uk extends St{constructor(e,t){super(e),this.container=t,this.toDispose=[],this.stage=new i0(t.getHTMLElement()),this.overlayLayer=new tc(this.stage),this.backgroundLayer=new tc(this.stage)}layout(e){this.container.size(e.width,e.height),this.size=e,this.stage.bounds={x:0,y:0,width:e.width,height:e.height},this.overlayLayer.bounds={...this.stage.bounds},this.backgroundLayer.bounds={...this.stage.bounds}}dispose(){ye(this.toDispose),this.toDispose.length=0}redraw(e){this.overlayLayer.refresh(),e&&this.backgroundLayer.refresh()}}class Tx extends yd{constructor(e,t){super(e),this.container=t,this.stage=new i0(t),this.overlayLayer=new tc(this.stage),this.backgroundLayer=new tc(this.stage),this.setShouldRender()}layout(e,t){Ls(this.container,e,t),this.size=new Ci(e,t),this.stage.bounds={x:0,y:0,width:e,height:t},this.overlayLayer.bounds={...this.stage.bounds},this.backgroundLayer.bounds={...this.stage.bounds},this.forceShouldRender()}shouldRender(){return!0}forceShouldRender(){super.forceShouldRender(),this.redrawAll=!0}setShouldRender(){super.setShouldRender(),this.redrawAll=!0}onDidRender(){this.redrawAll=!1}onMouseMove(e){return this.redrawAll=!1,!0}onMouseDown(e){return this.redrawAll=!1,!0}onMouseUp(e){return this.redrawAll=!1,!1}onPanstart(e){return this.redrawAll=!1,!0}onPanRequest(e){return this.redrawAll=!0,!0}onPanEnd(e){return this.redrawAll=!0,!0}onZoomStart(e){return!0}onZoomRequest(e){return this.redrawAll=!0,!0}onZoomEnd(e){return this.redrawAll=!0,!0}prepareRender(e){}render(e){this.overlayLayer.refresh(),this.redrawAll&&this.backgroundLayer.refresh()}}class Hr extends ic{constructor(e){super(null),this.name=e;let t=e.split(".");this.timelineDataSourceName=t[0],this.partName=t[1],this.seriesName=t[2],this.blockName=t[3],this.dataScourceName=t[2]==="main"?t[0]:t[2],this.dataViewName=`${t[0]}.${t[1]}.${t[2]}`}}const Kk=J("chart.series.main.candlestick.candleUpBroderStroke",{dark:"#ff4d4d",light:"#ed5659"}),Hk=J("chart.series.main.candlestick.candleDownBroderStroke",{dark:"#22bd87",light:"#1fbf88"}),sD=J("chart.series.main.line.lineStroke",{dark:"#2196f3",light:"#2196f3"}),ka=J("chart.series.main.candlestick.candleUpFill",{dark:"#ff4d4d",light:"#ed5659"}),zk=J("chart.series.main.candlestick.defaultBackground",{dark:"#565656",light:"#d9d9d9"}),r0=J("chart.series.main.candlestick.defaultForground",{dark:"#f0f5f8",light:"#242937"}),Ba=J("chart.series.main.candlestick.candleDownFill",{dark:"#22bd87",light:"#1fbf88"}),jk=J("chart.series.volume.volumeUp",{dark:"#ff4d4d",light:"#ed5659"}),$k=J("chart.series.volume.volumeDown",{dark:"#22bd87",light:"#1fbf88"}),hS=J("chart.series.order.openLong.fill",{dark:"#ED5A5A",light:"#ED5A5A"}),cS=J("chart.series.order.openLong.Stroke",{dark:"#D05252",light:"#D05252"}),dS=J("chart.series.order.closeLong.fill",{dark:"#8DDD54",light:"#8DDD54"}),fS=J("chart.series.order.closeLong.stroke",{dark:"#7BC546",light:"#7BC546"}),pS=J("chart.series.order.openShort.fill",{dark:"#75d1ed",light:"#75d1ed"}),mS=J("chart.series.order.openShort.Stroke",{dark:"#71b6ed",light:"#71b6ed"}),gS=J("chart.series.order.closeShort.fill",{dark:"#f4df80",light:"#f4df80"}),_S=J("chart.series.order.closeShort.stroke",{dark:"#f4cb76",light:"#f4cb76"}),Vk=J("chart.series.order.openLong.blurfill",{dark:"#bd4848",light:"#ED5A5A"}),Wk=J("chart.series.order.openLong.blurStroke",{dark:"#bd4848",light:"#D05252"}),Gk=J("chart.series.order.closeLong.blurfill",{dark:"#61993e",light:"#8DDD54"}),Yk=J("chart.series.order.closeLong.blurStroke",{dark:"#61993e",light:"#8DDD54"}),qk=J("chart.series.order.openShort.blurfill",{dark:"#78c5ff",light:"#78c5ff"}),Xk=J("chart.series.order.openShort.blurStroke",{dark:"#78c5ff",light:"#78c5ff"}),Zk=J("chart.series.order.closeShort.blurfill",{dark:"#f4df80",light:"#f4df80"}),Qk=J("chart.series.order.closeShort.blurStroke",{dark:"#f4cb76",light:"#f4cb76"}),oD=J("chart.axis",{dark:"#d9d9d9",light:"#565656"}),Jk=J("chart.grid",{dark:"#494550",light:"#f0f5f8"});var eB=Object.defineProperty,tB=Object.getOwnPropertyDescriptor,iB=(i,e,t,r)=>{for(var n=r>1?void 0:r?tB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&eB(e,t,n),n},vS=(i,e)=>(t,r)=>e(t,r,i);let sv=class extends Hr{constructor(i,e,t){super(i),this.chartService=e,this.themeService=t}hitTest(i){return null}render(i){i.save(),i.font="11px Trebuchet MS, Tahoma, Arial, Helvetica, sans-serif",i.textBaseline="top";let t=this.themeService.getTheme().getColor(oD).toString();i.fillStyle=t,i.strokeStyle=t;const r=this.chartService,n=r.timeScale;let s=Number.POSITIVE_INFINITY;const o=r.parts[this.partName];if(o){const l=o.left;l&&l.size&&(s=l.size.width)}i.beginPath(),i.moveTo(0,.5),i.lineTo(s,.5),i.stroke();let a=n.ticks;for(let l=0,c=a.length;l<c;l++){const{index:h,value:u,type:p,labelOnly:d}=a[l];let f=n.toPosition(h);if(d||(i.moveTo(f,0),i.lineTo(f,4)),u===null)continue;let m;if(typeof u=="string"?m=u:m=Ct.get(p)(u),!m)continue;const{width:g}=i.measureText(m);let _=g/2;f-_<0?i.textAlign="left":f+_>s?i.textAlign="right":i.textAlign="center",i.fillText(m,f,6)}i.stroke(),i.restore()}};sv=iB([vS(1,Ie),vS(2,je)],sv);var rB=Object.defineProperty,nB=Object.getOwnPropertyDescriptor,sB=(i,e,t,r)=>{for(var n=r>1?void 0:r?nB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&rB(e,t,n),n},oB=(i,e)=>(t,r)=>e(t,r,i);let ov=class extends Hr{constructor(i,e){super(i),this.chartService=e,this.fillColor=fl.green}hitTest(i){return null}render(i){const e=this.chartService,t=e.parts[this.partName];if(!t)return;const r=e.currentActivePart;if(!r)return;const n=e.getDataView(r.dataViewName);if(!n)return;const s=e.timeScale,o=s.snap(r.cursor.x),a=s.toPosition(o);let l=n.get(o);if(!l)return;let h=Ct.get(e.dataResolution)(l.time);i.save(),i.font="11px Trebuchet MS, Tahoma, Arial, Helvetica, sans-serif";let u=i.measureText(h).width+12,p=a-u/2,d=p+u,m=t.left.size.width,g=a;if(p<0)g-=p,p=0;else if(d>m){let _=d-m;p=m-u,g-=_}i.fillStyle="#4c525e",i.fillRect(p,0,u,La),i.fillStyle="#fff",i.textBaseline="top",i.textAlign="center",i.fillText(h,g,6),i.restore()}};ov=sB([oB(1,Ie)],ov);var aB=Object.defineProperty,lB=Object.getOwnPropertyDescriptor,uB=(i,e,t,r)=>{for(var n=r>1?void 0:r?lB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&aB(e,t,n),n},hB=(i,e)=>(t,r)=>e(t,r,i);let av=class extends Uk{constructor(i,e,t){super(i,e),this.chartService=t,this.overlayLayer.appendChildren(this.chartService.instantiationService.createInstance(ov,this.name)),this.backgroundLayer.appendChildren(this.chartService.instantiationService.createInstance(sv,this.name))}layout(i){super.layout(i),this.stage.update()}redraw(i){this.overlayLayer.refresh(),i&&this.backgroundLayer.refresh()}};av=uB([hB(2,Ie)],av);class Xd{constructor(e,t){this.top=e,this.left=t}}class cB extends yd{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=document.createElement("div"),Pe(this.domNode,"contentWidgets"),this.domNode.style.position="absolute",this.domNode.style.top="0",this.overflowingContentWidgetsDomNode=document.createElement("div"),Pe(this.overflowingContentWidgetsDomNode,"nila-overflowing-content-widgets")}dispose(){this._widgets=null,this.domNode=null}addWidget(e){const t=new dB(null,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode)}setWidgetPosition(e,t,r){this._widgets[e.getId()].setPosition(t,r)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const r=this._widgets[t];delete this._widgets[t];const n=r.domNode;n.parentNode.removeChild(n),n.removeAttribute("nila-visible-content-widget")}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){let t=Object.keys(this._widgets);for(let r=0,n=t.length;r<n;r++){const s=t[r];this._widgets[s].onBeforeRender(e)}}prepareRender(e){let t=Object.keys(this._widgets);for(let r=0,n=t.length;r<n;r++){const s=t[r];this._widgets[s].prepareRender(e)}}render(e){let t=Object.keys(this._widgets);for(let r=0,n=t.length;r<n;r++){const s=t[r];this._widgets[s].render(e)}}}class dB{constructor(e,t,r){this._viewDomNode=t,this._actual=r,this.domNode=this._actual.getDomNode(),this.id=this._actual.getId(),this.suppressMouseDown=this._actual.suppressMouseDown||!1,this.allowEditorOverflow=!0,this._contentWidth=100,this._contentLeft=0,this._lineHeight=0,this._setPosition(null),this._preference=null,this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.style.position="absolute",this.domNode.style.visibility="hidden",this.domNode.setAttribute("widgetId",this.id),this.domNode.style.maxWidth=this._maxWidth.toString()}_setPosition(e){this._position=e}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,r,n){let s=e.top,o=s,a=e.top+this._lineHeight,l=n.height-a,c=s-r,h=o>=r,u=a,p=l>=r,d=e.left;return{aboveTop:c,fitsAbove:h,belowTop:u,fitsBelow:p,left:d}}_layoutBoxInPage(e,t,r,n){let s=e.left,o=e.top-r,a=e.top,l=s+this._contentLeft,c=gf(this._viewDomNode),h=c.top+o,u=c.top+a,p=c.left+l,d=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,f=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,m=22,g=22,_=h>=m,v=u+r<=f-g;if(p+t+20>d){let y=p-(d-t-20);p-=y,l-=y}if(p<0){let y=p;p-=y,l-=y}return o=h,a=u,l=p,{aboveTop:o,fitsAbove:_,belowTop:a,fitsBelow:v,left:l}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Xd(e.top,e.left+this._contentLeft)}_getTopLeft(e){return this._position?new Xd(this._position.top,this._position.left):null}_prepareRenderWidget(e,t){if(!e)return null;let r=null,n=()=>{if(!r){if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){const s=this.domNode;this._cachedDomNodeClientWidth=s.clientWidth,this._cachedDomNodeClientHeight=s.clientHeight}this.allowEditorOverflow?r=this._layoutBoxInPage(e,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,t):r=this._layoutBoxInViewport(e,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,t)}};for(let s=1;s<=2;s++)for(let o=0;o<this._preference.length;o++){let a=this._preference[o];if(a===oc.ABOVE){if(n(),!r)return null;if(s===2||r.fitsAbove)return new Xd(r.aboveTop,r.left)}else if(a===oc.BELOW){if(n(),!r)return null;if(s===2||r.fitsBelow)return new Xd(r.belowTop,r.left)}else return this.allowEditorOverflow?this._prepareRenderWidgetAtExactPositionOverflowing(e):e}return null}onBeforeRender(e){this.domNode.style.maxWidth=this._maxWidth+"px"}prepareRender(e){const t=this._getTopLeft(e);this._renderData=this._prepareRenderWidget(t,e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("nila-visible-content-widget"),this._isVisible=!1,this.domNode.style.visibility="hidden");return}this.domNode.style.top=this._renderData.top+"px",this.domNode.style.left=this._renderData.left+"px",this._isVisible||(this.domNode.style.visibility="inherit",this.domNode.setAttribute("nila-visible-content-widget","true"),this._isVisible=!0)}}const aD='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-2.4 120.9 14 14" width="14" height="14" enable-background="new -2.4 120.9 600 600"><path d="M-2.4 120.9v14h14v-14zm3.34 2.123l3.66 3.66 3.66-3.66 1.217 1.22-3.66 3.658 3.66 3.66-1.22 1.22-3.658-3.66-3.66 3.66-1.22-1.22 3.66-3.66-3.66-3.66z"></path></svg>',fB='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14" style="user-select: none;"><path d="M14 14V0H0v14zm-7-2L4.2 9H6V3h2v6h1.8z" style="user-select: none;"></path></svg>';var pB=Object.defineProperty,mB=Object.getOwnPropertyDescriptor,Cx=(i,e,t,r)=>{for(var n=r>1?void 0:r?mB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&pB(e,t,n),n},Ys=(i,e)=>(t,r)=>e(t,r,i);const gB={0:"",1:", ",2:", "};let lv=class extends St{constructor(i,e,t){super(i),this.chartService=e,this.themeService=t,this.toDispose=[]}mount(i){let e=this.chartService.getDataView(this.name),t=new St(e.name),r=Le(`div.pane-legend-line.pane-legend-wrap.${t.seriesName}`).appendTo(i),n=Le("span.pane-legend-label.pane-legend-line").appendTo(r),s=e.alias||e.name;this.seriesName==="main"&&this.partName==="main"&&(s+=gB[this.chartService.dataAdjust]),n.safeInnerHtml(s);let o=Le("div.pane-legend-icon-container").appendTo(r),a=[];e.moveable&&a.push({icon:fB,handler:this._move}),(!["main","volume"].includes(this.partName)||this.seriesName!=="main")&&a.push({icon:aD,handler:this._removeSeries});for(let l=0,c=a.length;l<c;l++){const{icon:h,handler:u}=a[l];let p=Le("span.pane-legend-icon").innerHtml(h).appendTo(o);this.toDispose.push(me(p.getHTMLElement(),ue.CLICK,u.bind(this)))}this.valueContainer=document.createElement("div"),this.valueContainer.className="pane-legend-item-value-container",this.container=r.getHTMLElement(),this.container.appendChild(this.valueContainer)}_toggleVisibility(){}_toggleFormat(){}_move(){this.chartService.moveSeries(this.name)}_removeSeries(){this.chartService.removeSeries(this.name,!0)}render(i){let e=this.valueContainer.childElementCount;for(let t=0,r=i.length;t<r;t++){const{text:n,label:s,color:o}=i[t];if(t<e){let a=this.valueContainer.children[t],l=a.firstChild;l.innerText=s;let c=a.lastChild;c.innerText=n,o&&(c.style.color=o)}else{let a=document.createElement("span");a.className="pane-legend-item-value-wrap";let l=document.createElement("span");l.className="pane-legend-item-value-title pane-legend-line",l.innerText=s,a.appendChild(l);let c=document.createElement("span");c.className="pane-legend-item-value pane-legend-line",c.innerText=n,a.appendChild(c),o&&(c.style.color=o),this.valueContainer.appendChild(a)}}}update(i){let e;this.partName==="main"?e="price":this.partName==="volume"?e="volume":e="smart";let t=Ct.get(e),r=this.chartService.getDataView(this.name);if(r.isEmpty())return;let n=Tr(i)?r.last():r.get(i),s=Tr(i)?r.getInv(-2):r.get(i-1);if(!n){this.valueContainer.innerHTML="";return}let o=Ct.get(this.chartService.dataResolution===ce.Day?"date":"datetime"),a=this.themeService.getTheme(),l=[],c;r.fillRule&&(c=a.getColor(r.fillRule(n)).toString()),this.partName==="main"&&this.seriesName==="main"&&l.push({color:c,label:"",text:o(n.time)});for(let h=0,u=r.fields.length;h<u;h++){const{name:p,label:d,color:f}=r.fields[h];let m=n[p];m===void 0&&(m="");let g=n?t(m):"";l.push({color:f?a.getColor(f).toString():c,label:d,text:g})}if(s&&this.partName==="main"&&this.seriesName==="main"){let h=n.close-s.close;l.push({color:c,label:"",text:Ct.get("delta")(h)}),l.push({color:c,label:"",text:Ct.get("percentage")(h/s.close)})}this.render(l)}dispose(){ye(this.toDispose),Le(this.container).destroy(),this.valueContainer=null,this.container=null,this.toDispose.length=0}};lv=Cx([Ys(1,Ie),Ys(2,je)],lv);let uv=class extends St{constructor(i,e,t,r,n){super(i),this.showTimestring=e,this.chartService=t,this.chart=r,this.themeService=n,this.toDispose=[]}mount(i){let e=this.chartService.getDataView(this.name),t=new St(e.name),r=Le(`div.pane-legend-line.pane-legend-wrap.${t.seriesName}`).appendTo(i),n=Le("span.pane-legend-label.pane-legend-line").appendTo(r);n.safeInnerHtml(e.alias||e.name);let s=this.themeService.getTheme(),o;t.seriesName.startsWith("compare")?o=s.getColor("chart.compare."+this.seriesName).toString():o=s.getColor(sD).toString(),n.style("color",o);let a=Le("div.pane-legend-icon-container").appendTo(r);if(this.seriesName!=="main"){let l=Le("span.pane-legend-icon").innerHtml(aD).appendTo(a);this.toDispose.push(me(l.getHTMLElement(),ue.CLICK,()=>{this.chartService.removeSeries(this.name,!0)}))}this.valueContainer=document.createElement("div"),this.valueContainer.className="pane-legend-item-value-container",this.container=r.getHTMLElement(),this.container.appendChild(this.valueContainer)}update(i){let e=this.chartService.getDataView(this.name);if(e.isEmpty())return;let t=Tr(i)?e.last():e.get(i),r=this.valueContainer.childElementCount,n=this.themeService.getTheme();if(!t){this.valueContainer.innerHTML="";return}let s=t.close,o=e.origin,a=s-o,l=(s-o)/o,c=Ct.get("price"),h=[];if(this.showTimestring){let u=Ct.get("datetime");h.push(u(t.time))}else h.push("");h=h.concat([c(s),Ct.get("delta")(a),Ct.get("percentage")(l)]);for(let u=0;u<4;u++){let p=h[u];if(u<r){let d=this.valueContainer.children[u],f=d.firstChild;f.innerText="";let m=d.lastChild;if(m.innerText=p,e.fillRule&&t){let g=n.getColor(e.fillRule(t));m.style.color=g.toString()}}else{let d=document.createElement("span");d.className="pane-legend-item-value-wrap";let f=document.createElement("span");f.className="pane-legend-item-value-title pane-legend-line",f.innerText="",d.appendChild(f);let m=document.createElement("span");if(m.className="pane-legend-item-value pane-legend-line",m.innerText=p,d.appendChild(m),t){let g=n.getColor(e.fillRule(t));m.style.color=g.toString()}this.valueContainer.appendChild(d)}}}dispose(){ye(this.toDispose),Le(this.container).destroy(),this.valueContainer=null,this.container=null,this.toDispose.length=0}};uv=Cx([Ys(2,Ie),Ys(3,gt),Ys(4,je)],uv);let hv=class extends yd{constructor(i,e,t,r){super(i),this.parent=e,this.chartService=t,this.instantiationService=r,this.lines={},this.container=document.createElement("div"),Pe(this.container,"pane-legend"),this._disableUpdate=!1,this.mount()}mount(){this.parent.appendChild(this.container),this._register(me(this.container,ue.MOUSE_ENTER,this._handleMouseEnter.bind(this))),this._register(me(this.container,ue.MOUSE_LEAVE,this._handleMouseLeave.bind(this)))}shouldRender(i){return i?i.event===ue.MOUSE_MOVE:!0}onMouseMove(i){return!0}prepareRender(){let e=this.chartService.getSeriesInParts(this._context.partName).map(s=>s.name),t=Object.keys(this.lines),r=[];for(let s=0,o=e.length;s<o;s++){let a=e[s];t.indexOf(a)===-1&&r.push(a)}let n=[];for(let s=0,o=t.length;s<o;s++){let a=t[s];e.indexOf(a)===-1&&n.push(a)}if(n.length){for(let a=0,l=n.length;a<l;a++){let c=n[a];this.lines[c].dispose(),delete this.lines[c]}this.container.querySelector(":hover")||(this._disableUpdate=!1)}if(r.length)for(let s=0,o=r.length;s<o;s++){let a=r[s],l=new St(a),c;l.seriesName.startsWith("order")||((l.seriesName==="main"||l.seriesName.startsWith("compare"))&&l.partName==="main"&&(this.chartService.dataRange===Te.Intraday||this.chartService.dataRange===Te.FiveDay)?c=this.instantiationService.createInstance(uv,a,l.seriesName==="main"):c=this.instantiationService.createInstance(lv,a),this.lines[c.name]=c,c.mount(this.container))}}_handleMouseEnter(i){this._disableUpdate=!0}_handleMouseLeave(i){this._disableUpdate=!1}render(){if(this._disableUpdate)return;const i=this.chartService,e=i.currentActivePart,t=i.timeScale;let r;if(e){let s=t.snap(e.cursor.x);t.includes(s)&&(r=s)}let n=Object.keys(this.lines);for(let s=0,o=n.length;s<o;s++){let a=this.lines[n[s]];a!==void 0&&a.update(r)}}};hv=Cx([Ys(2,Ie),Ys(3,Nt)],hv);class _B extends St{constructor(e,t,r){super(e),this.privateViewEventBus=t,this.viewModel=r}addEventHandler(e){this.privateViewEventBus.addEventHandler(e)}removeEventHandler(e){this.privateViewEventBus.removeEventHandler(e)}}class vB{constructor(e){this._eventHandlerGateKeeper=e,this._eventHandlers=[],this._eventQueue=null,this._isConsumingQueue=!1}addEventHandler(e){for(let t=0,r=this._eventHandlers.length;t<r;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}emit(e){this._eventQueue?this._eventQueue.push(e):this._eventQueue=[e],this._isConsumingQueue||this.consumeQueue()}emitMany(e){this._eventQueue?this._eventQueue=this._eventQueue.concat(e):this._eventQueue=e,this._isConsumingQueue||this.consumeQueue()}consumeQueue(){this._eventHandlerGateKeeper(()=>{try{this._isConsumingQueue=!0,this._doConsumeQueue()}finally{this._isConsumingQueue=!1}})}_doConsumeQueue(){for(;this._eventQueue;){let e=this._eventQueue;this._eventQueue=null;let t=this._eventHandlers.slice(0);for(let r=0,n=t.length;r<n;r++)t[r].handleEvents(e)}}}class yB extends Je{constructor(){super(),this.onViewMouseDown=null,this.onViewMouseMove=null,this.onViewMouseUp=null,this.onViewPanStart=null,this.onViewPan=null,this.onViewPanEnd=null,this.onViewZoomStart=null,this.onViewZoom=null,this.onViewZoomEnd=null}emitViewMouseDown(e){this.onViewMouseDown&&this.onViewMouseDown(e)}emitViewMouseUp(e){this.onViewMouseUp&&this.onViewMouseUp(e)}emitViewPanStart(){this.onViewPanStart&&this.onViewPanStart(void 0)}emitViewPan(){this.onViewPan&&this.onViewPan(void 0)}emitViewPanEnd(){this.onViewPanEnd&&this.onViewPanEnd(void 0)}emitViewZoomStart(){this.onViewZoomStart&&this.onViewZoomStart(void 0)}emitViewZoom(){this.onViewZoom&&this.onViewZoom(void 0)}emitViewZoomEnd(){this.onViewZoomEnd&&this.onViewZoomEnd(void 0)}}var xB=Object.defineProperty,wB=Object.getOwnPropertyDescriptor,bB=(i,e,t,r)=>{for(var n=r>1?void 0:r?wB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&xB(e,t,n),n},yS=(i,e)=>(t,r)=>e(t,r,i);let n0=class extends Hr{constructor(i,e,t,r){super(i),this.chartService=t,this.themeService=r,this.useValue=e.useValue,this.alignLeft=e.align==="left"}hitTest(i){return null}render(i){const e=this.chartService,t=e.getDataView(this.dataViewName),r=e.parts[this.partName];if(!r)return;const{height:n}=r.viewModel;let s=qe,o=e.getDataView(this.dataViewName);i.save(),i.font="11px Trebuchet MS, Tahoma, Arial, Helvetica, sans-serif",this.alignLeft?i.textAlign=cr.Left:i.textAlign=cr.Right;let a=this.themeService.getTheme(),l=a.getColor(oD).toString();if(i.fillStyle=l,i.strokeStyle=l,i.lineWidth=1,i.beginPath(),this.alignLeft?(i.moveTo(.5,0),i.lineTo(.5,n)):(i.moveTo(s-.5,0),i.lineTo(s-.5,n)),i.stroke(),t.isEmpty()){i.restore();return}if(this.partName!=="main"&&!this.alignLeft){i.restore();return}const c=6,h=r.viewModel.priceScale;let u=h.ticks,p;this.partName==="main"?p="price":this.partName==="volume"?p="volume":p="smart";let d=Ct.get(p);i.beginPath();for(let f=0,m=u.length;f<m;f++){let g=u[f],_=h.toPosition(g.value);this.alignLeft?(i.moveTo(0,_),i.lineTo(4,_)):(i.moveTo(s,_),i.lineTo(s-4,_))}i.stroke();for(let f=0,m=u.length;f<m;f++){let g=u[f],_=h.toPosition(g.value);_-c<0?i.textBaseline="top":_+c>n?i.textBaseline="bottom":i.textBaseline="middle",(this.chartService.dataRange===Te.Intraday||this.chartService.dataRange===Te.FiveDay)&&(i.fillStyle=a.getColor(o.fillRule?o.fillRule({close:g.value}):r0).toString());let v=(this.useValue?d(g.value):g.label)||d(g.value);this.alignLeft?i.fillText(v,6,_):i.fillText(v,s-6,_)}i.restore()}};n0=bB([yS(2,Ie),yS(3,je)],n0);var SB=Object.defineProperty,EB=Object.getOwnPropertyDescriptor,AB=(i,e,t,r)=>{for(var n=r>1?void 0:r?EB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&SB(e,t,n),n},DB=(i,e)=>(t,r)=>e(t,r,i);let s0=class extends Hr{constructor(i,e,t){super(i),this.chartService=t,this.alignLeft=e.align==="left"}hitTest(i){return null}render(i){const e=this.chartService,t=e.parts[this.partName];if(!t||!e.currentActivePart||t!==e.currentActivePart)return;let n;this.partName==="main"?n="price":this.partName==="volume"?n="volume":n="smart";let s=Ct.get(n);const o=t.viewModel.priceScale;let a=t.cursor.y,l=a;a<9&&(a=9),a+9>t.viewModel.height&&(a=t.viewModel.height-9);const c=o.toValue(l);i.save(),this.alignLeft?i.textAlign=cr.Left:i.textAlign=cr.Right,i.fillStyle="#4c525e";let h;(this.chartService.dataRange===Te.Intraday||this.chartService.dataRange===Te.FiveDay)&&o.origin&&!this.alignLeft?h=((c-o.origin)/o.origin*100).toFixed(2)+"%":h=s(c);let{width:u}=i.measureText(h),p=6;this.alignLeft?(i.fillRect(1,a-9,u+2*p,18),i.beginPath(),i.moveTo(1,l),i.lineTo(p/2,l)):(i.fillRect(qe-u-2*p-1,a-9,u+2*p,18),i.beginPath(),i.moveTo(qe-1,l),i.lineTo(qe-p/2-1,l)),i.strokeStyle="#fff",i.stroke(),i.fillStyle="#fff",i.font="11px Trebuchet MS, Tahoma, Arial, Helvetica, sans-serif",i.textBaseline="middle",this.alignLeft?i.fillText(h,p,a):i.fillText(h,qe-p,a),i.restore()}};s0=AB([DB(2,Ie)],s0);var TB=Object.defineProperty,CB=Object.getOwnPropertyDescriptor,PB=(i,e,t,r)=>{for(var n=r>1?void 0:r?CB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&TB(e,t,n),n},m_=(i,e)=>(t,r)=>e(t,r,i);const Ei=9;function IB(i,e){return Math.abs(i-e)<Ei*2}let o0=class extends Hr{constructor(i,e,t,r,n){super(i),this.chartService=t,this.configurationService=r,this.themeService=n,this.alignLeft=e.align==="left",this.labels=[]}hitTest(i){return null}renderOneLabel(i,e,t,r,n){const{width:s}=i.measureText(e);let o=6,a=t-Ei,l=t+Ei,c=n>a&&n<l;i.fillStyle=r,i.strokeStyle="#fff",this.alignLeft?(i.fillRect(1,t-Ei,s+2*o,2*Ei),c&&(i.beginPath(),i.moveTo(1,n),i.lineTo(o/2,n),i.stroke())):(i.fillRect(qe-s-2*o-1,t-Ei,s+2*o,2*Ei),c&&(i.beginPath(),i.moveTo(qe-1,n),i.lineTo(qe-o/2-1,n),i.stroke())),i.fillStyle="#fff",this.alignLeft?i.fillText(e,o,t):i.fillText(e,qe-o,t)}calculateLabels(){this.labels.length=0;const i=this.chartService,e=i.parts[this.partName];if(!e)return;const{height:t}=e.viewModel;this.partHeight=t;let r=this.chartService.getSeriesInParts(this.partName),n=this.configurationService.inspect("chart.label.symbolLastValue"),s=this.configurationService.inspect("chart.label.indicatorLastValue"),o=n.value,a=s.value;const l=this.themeService.getTheme();let c=e.viewModel.priceScale;r.forEach(h=>{const u=h.get(i.timeScale.lastIndex);if(!u)return;let p=new St(h.name),d;this.partName==="main"?d="price":this.partName==="volume"?d="volume":d="smart";let f=Ct.get(d);if(p.partName==="main"&&p.seriesName==="main"){if(!o)return;let m=u.close;h.points.length===1&&!m&&(m=u.open);const g=e.viewModel.priceScale.toPosition(u.close);let _;(this.chartService.dataRange===Te.Intraday||this.chartService.dataRange===Te.FiveDay)&&c.origin&&!this.alignLeft?_=((m-c.origin)/c.origin*100).toFixed(2)+"%":_=f(m);let v=l.getColor(h.fillRule(u)).toString();v===l.getColor(r0).toString()&&(v=l.getColor(zk).toString()),this.labels.push({y:g,yDisplay:g,color:v,text:_})}else if(p.partName==="volume"&&p.seriesName==="main"){if(!o)return;const m=e.viewModel.priceScale.toPosition(u.volume);this.labels.push({y:m,yDisplay:m,text:f(u.volume),color:l.getColor(h.fillRule(u)).toString()})}else if(h.compareOrigin&&o){let m=new St(h.name);const g=e.viewModel.priceScale.toPosition(u.compareClose);this.labels.push({y:g,yDisplay:g,text:f(u.close),color:l.getColor("chart.compare."+m.seriesName).toString()})}else{if(!a)return;h.fields.forEach(m=>{let g=u[m.name];const _=e.viewModel.priceScale.toPosition(g);this.labels.push({y:_,yDisplay:_,text:f(u[m.name]),color:m.color?l.getColor(m.color).toString():"#ff6a00"})})}})}adjustLabelsIfNeeded(){if(!this.configurationService.getValue("chart.label.noOverlapping"))return;let i=this.labels.length;this.labels=this.labels.sort((r,n)=>r.yDisplay-n.yDisplay);let e=[];this.labels[0].yDisplay>Ei&&e.push({from:0,to:this.labels[0].yDisplay-Ei});for(let r=1;r<i;r++){let n=this.labels[r-1],s=this.labels[r],o=!1;for(let a=r-1;a>=0;a--){let l=this.labels[a];IB(l.yDisplay,s.yDisplay)&&(o=!0)}o?s.yDisplay=n.yDisplay+Ei*2:e.push({from:n.yDisplay+Ei,to:s.yDisplay-Ei})}if(!e.length)return;let t=this.labels[i-1];for(;e.length&&t.yDisplay+Ei>this.partHeight;){let r=t.yDisplay+Ei-this.partHeight,n=e.pop(),s=n.to-n.from,o=Math.min(r,s);for(let a=0;a<i;a++){let l=this.labels[a];l.yDisplay<n.from||(l.yDisplay-=o)}}}render(i){if(this.calculateLabels(),!!this.labels.length){this.adjustLabelsIfNeeded(),i.save(),this.alignLeft?i.textAlign=cr.Left:i.textAlign=cr.Right,i.font="11px Trebuchet MS, Tahoma, Arial, Helvetica, sans-serif",i.textBaseline=is.Middle;for(let e=0,t=this.labels.length;e<t;e++){let r=this.labels[e];this.renderOneLabel(i,r.text,r.yDisplay,r.color,r.y)}i.restore()}}};o0=PB([m_(2,Ie),m_(3,it),m_(4,je)],o0);var OB=Object.defineProperty,MB=Object.getOwnPropertyDescriptor,lD=(i,e,t,r)=>{for(var n=r>1?void 0:r?MB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&OB(e,t,n),n},il=(i,e)=>(t,r)=>e(t,r,i);let cv=class extends Tx{constructor(i,e,t,r,n,s){super(i,t),this.chartService=r,this.chart=n,this.configurationService=s,this.isMousedown=!1,this.nameInstance=new St(e),this.container.style.cursor="default",this.backgroundLayer.appendChildren(this.chartService.instantiationService.createInstance(n0,e,{useValue:!0,align:"left"})),this.backgroundLayer.appendChildren(this.chartService.instantiationService.createInstance(o0,e,{align:"left"})),this.priceEdge=this.chartService.instantiationService.createInstance(s0,e,{align:"left"}),this.overlayLayer.appendChildren(this.priceEdge),this.registerListener()}registerListener(){if(this._context.partName==="main"){let i=this.container;this._register(me(i,ue.MOUSE_DOWN,this.handleMouseDown.bind(this))),this._register(me(i,ue.MOUSE_MOVE,this.handleMouseMove.bind(this))),this._register(me(i,ue.MOUSE_UP,this.handleMouseUp.bind(this))),this._register(me(i,ue.BLUR,this.handleMouseUp.bind(this)))}}updateSeries(){}handleMouseDown(i){this.isMousedown=!0,this.snapshot=this._context.viewModel.priceScale.snapshot;let e=this.snapshot.range;this.centerY=(e[0]+e[1])/2,this.distance=Math.abs(e[0]-e[1]),this.dragStart=i.clientY}handleMouseMove(i){if(!this.isMousedown||i.buttons!==1||this.chartService.priceScaleMode!==bt.Normal)return;let e=i.clientY-this.dragStart;this._context.viewModel.priceScale.domain=this.snapshot.domain;let t=Math.abs(e/this.distance)*1.5,r=e>0?1+t:1-t;this._context.privateViewEventBus.emit(new rD(0,0,[0,0],r,this.centerY,this.snapshot.range))}handleMouseUp(){this.snapshot=null,this.dragStart=null,this.isMousedown=!1}dispose(){super.dispose(),tt.Signal.disconnectAll(this)}};cv=lD([il(3,Ie),il(4,gt),il(5,it)],cv);let dv=class extends Tx{constructor(i,e,t,r,n,s){if(super(i,t),this.chartService=r,this.chart=n,this.configurationService=s,this.nameInstance=new St(e),this.container.style.cursor="default",this.backgroundLayer.appendChildren(this.chartService.instantiationService.createInstance(n0,e,{useValue:!1,align:"right"})),this.nameInstance.partName==="main"){this.priceEdge=this.chartService.instantiationService.createInstance(s0,e,{align:"right"}),this.overlayLayer.appendChildren(this.priceEdge);let o=this.configurationService.inspect("chart.label.symbolLastValue").value;this.label=this.chartService.instantiationService.createInstance(o0,e,{align:"right"}),this.backgroundLayer.appendChildren(this.label),this.label.isVisible=o,this._register(this.configurationService.onDidChangeConfiguration(this._handleConfigurationChange.bind(this)))}}_handleConfigurationChange(i){i.affectedKeys.includes("chart.label.symbolLastValue")&&(this.label.isVisible=this.configurationService.inspect("chart.label.symbolLastValue").value)}dispose(){super.dispose()}};dv=lD([il(3,Ie),il(4,gt),il(5,it)],dv);let xS=2*Math.PI;class Ze extends Hr{static renderHandle(e,t,r){e.beginPath(),e.arc(t,r,3.5,0,xS),e.fill(),e.arc(t,r,3.5,0,xS),e.stroke()}static setHanldeStyle(e){e.fillStyle="#d6d6d6",e.strokeStyle="#777777",e.lineWidth=.5}constructor(e){super(e),this.type=$t.SERIES}static serialize(e,t){let r=t.dependencies.map(n=>n.name);return{name:e,dataSource:r.length===1?r[0]:r,fields:t.fields.slice(),transformer:t.transformer,alias:t.alias,visualMap:t.visualMap,moveable:t.moveable,additional:t.additional,origin:t.origin,compareOrigin:t.compareOrigin}}serialize(){throw new Error("abstract method serialize()")}}var NB=Object.defineProperty,RB=Object.getOwnPropertyDescriptor,LB=(i,e,t,r)=>{for(var n=r>1?void 0:r?RB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&NB(e,t,n),n},wS=(i,e)=>(t,r)=>e(t,r,i);function kB(i,e,t,r,n){return{x:r-t,y:i,width:t*2,height:e-i,index:n}}function bS(i,e){const{x:t,y:r,width:n,height:s}=e;i.fillRect(t,r,n,s)}let a0=class extends Ze{constructor(i,e,t){super(i),this.chartService=e,this.themeService=t,this.upBars=[],this.downBars=[]}serialize(){return Ze.serialize(this.seriesName,this.chartService.getDataView(this.dataViewName))}createBars(){this.upBars.length=0,this.downBars.length=0;const i=this.chartService,e=i.getDataView(this.dataViewName);if(e.isEmpty())return;const t=i.parts[this.partName];if(!t)return;const r=t.viewModel.priceScale,n=i.timeScale,s=n.firstIndex,o=n.lastIndex,a=n.columnWidth;let l=Math.max(a/2-.5,.5),c=r.range[0];for(let h=s;h<=o;h++){let u=e.get(h);const{open:p,volume:d,close:f}=u;let m=kB(r.toPosition(d),c,l,n.toPosition(h),h);p>f?this.downBars.push(m):this.upBars.push(m)}}hitTest(i){if(!this.isVisible)return null;for(let e=0,t=this.upBars.length;e<t;e++){let r=this.upBars[e];if(Ae.contains(r,i))return this}for(let e=0,t=this.downBars.length;e<t;e++){let r=this.downBars[e];if(Ae.contains(r,i))return this}return null}render(i){this.createBars();let e=this.themeService.getTheme();i.save(),i.lineWidth=.5,i.fillStyle=e.getColor(jk).toString();for(let t=0,r=this.upBars.length;t<r;t++)bS(i,this.upBars[t]);i.fill(),i.fillStyle=e.getColor($k).toString();for(let t=0,r=this.downBars.length;t<r;t++)bS(i,this.downBars[t]);if(i.fill(),this.isSelected){Ze.setHanldeStyle(i);for(let t=0,r=this.upBars.length;t<r;t++){let n=this.upBars[t];if(n.index%10===0){let{x:s,y:o,width:a}=n;Ze.renderHandle(i,s+a/2,o)}}for(let t=0,r=this.downBars.length;t<r;t++){let n=this.downBars[t];if(n.index%10===0){let{x:s,y:o,width:a}=n;Ze.renderHandle(i,s+a/2,o)}}}i.restore()}};a0=LB([wS(1,Ie),wS(2,je)],a0);var BB=Object.defineProperty,FB=Object.getOwnPropertyDescriptor,UB=(i,e,t,r)=>{for(var n=r>1?void 0:r?FB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&BB(e,t,n),n},SS=(i,e)=>(t,r)=>e(t,r,i);function KB(i,e,t,r,n,s,o){return{h:Math.min(i,r),l:Math.max(i,r),hh:e,ll:t,center:s,left:s-n,right:s+n,index:o}}function g_(i,e){const{hh:t,h:r,l:n,ll:s,left:o,center:a,right:l}=e;i.moveTo(a,t),i.lineTo(a,s),r!==n?i.rect(o,r,l-o,n-r):(i.moveTo(o,r),i.lineTo(l,r))}let fv=class extends Ze{constructor(i,e,t){super(i),this.chartService=e,this.themeService=t,this.upCandles=[],this.downCandles=[],this.emptyCandles=[]}serialize(){return Ze.serialize(this.seriesName,this.chartService.getDataView(this.dataViewName))}createCandles(){const i=this.chartService,e=i.getDataView(this.dataViewName);if(e.isEmpty()){this.upCandles.length=0,this.downCandles.length=0,this.emptyCandles.length=0;return}const t=i.parts[this.partName];if(!t)return;const r=t.viewModel.priceScale,n=i.timeScale;this.downCandles.length=0,this.upCandles.length=0,this.emptyCandles.length=0;const s=n.firstIndex,o=n.lastIndex;let l=n.columnWidth/2*.6;for(let c=s;c<=o;c++){let h=e.get(c);const{open:u,high:p,low:d,close:f}=h;let m=KB(r.toPosition(u),r.toPosition(p),r.toPosition(d),r.toPosition(f),l,n.toPosition(c),c);u>f?this.downCandles.push(m):this.upCandles.push(m)}}hitTest(i){if(!this.isVisible)return null;for(let e=0,t=this.upCandles.length;e<t;e++){const{hh:r,ll:n,left:s,right:o}=this.upCandles[e];if(Ae.contains({x:s,y:r,width:o-s,height:n-r},i))return this}for(let e=0,t=this.downCandles.length;e<t;e++){const{hh:r,ll:n,left:s,right:o}=this.downCandles[e];if(Ae.contains({x:s,y:r,width:o-s,height:n-r},i))return this}for(let e=0,t=this.emptyCandles.length;e<t;e++){const{hh:r,ll:n,left:s,right:o}=this.emptyCandles[e];if(Ae.contains({x:s,y:r,width:o-s,height:n-r},i))return this}return null}render(i){this.createCandles(),i.save();let e=this.themeService.getTheme();i.lineWidth=1.2,i.fillStyle=e.getColor(Ba).toString(),i.strokeStyle=e.getColor(Hk).toString(),i.beginPath();for(let t=0,r=this.downCandles.length;t<r;t++)g_(i,this.downCandles[t]);i.stroke(),i.fill(),i.fillStyle=e.getColor(ka).toString(),i.strokeStyle=e.getColor(Kk).toString(),i.beginPath();for(let t=0,r=this.upCandles.length;t<r;t++)g_(i,this.upCandles[t]);i.stroke(),i.fill(),i.beginPath();for(let t=0,r=this.emptyCandles.length;t<r;t++)g_(i,this.emptyCandles[t]);if(i.stroke(),this.isSelected){Ze.setHanldeStyle(i);for(let t=0,r=this.upCandles.length;t<r;t++){let n=this.upCandles[t];if(n.index%10===0){const{h:s,l:o,center:a}=n;Ze.renderHandle(i,a,(s+o)/2)}}for(let t=0,r=this.downCandles.length;t<r;t++){let n=this.downCandles[t];if(n.index%10===0){const{h:s,l:o,center:a}=n;Ze.renderHandle(i,a,(s+o)/2)}}for(let t=0,r=this.emptyCandles.length;t<r;t++){let n=this.emptyCandles[t];if(n.index%10===0){const{h:s,l:o,center:a}=n;Ze.renderHandle(i,a,(s+o)/2)}}}i.restore()}};fv=UB([SS(1,Ie),SS(2,je)],fv);var HB=Object.defineProperty,zB=Object.getOwnPropertyDescriptor,jB=(i,e,t,r)=>{for(var n=r>1?void 0:r?zB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&HB(e,t,n),n},$B=(i,e)=>(t,r)=>e(t,r,i);let pv=class extends Hr{constructor(i,e){super(i),this.chartService=e}hitTest(i){return null}render(i){const e=this.chartService,t=e.parts[this.partName];if(!t)return;const r=e.currentActivePart;if(!r||r.cursor.cursorStyle===Di.Arrow||r.inTransformMode.get())return;const n=e.timeScale;let s=this.root;const{width:o,height:a}=s.bounds,l=n.snap(r.cursor.x),c=n.toPosition(l);if(i.save(),i.setLineDash([5,6]),i.strokeStyle="#768595",i.lineWidth=1,i.beginPath(),i.moveTo(c,0),i.lineTo(c,a),i.stroke(),t===e.currentActivePart){const h=t.cursor.y;i.beginPath(),i.moveTo(0,h),i.lineTo(o,h),i.stroke()}i.restore()}};pv=jB([$B(1,Ie)],pv);var VB=Object.defineProperty,WB=Object.getOwnPropertyDescriptor,GB=(i,e,t,r)=>{for(var n=r>1?void 0:r?WB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&VB(e,t,n),n},ES=(i,e)=>(t,r)=>e(t,r,i);function YB(i,e){const{y1:t,y2:r,x1:n,x2:s}=e;i.moveTo(n,t),i.lineTo(s,r)}const AS=4;function qB(i,e){i.ellipse(e.x1,e.y1,AS+2,AS,0,0,Py),i.fill()}let Gh=class extends Ze{constructor(i,e,t){super(i),this.chartService=e,this.themeService=t,this.segments=[]}serialize(){return Ze.serialize(this.seriesName,this.chartService.getDataView(this.dataViewName))}createPath(){const i=this.chartService,e=i.getDataView(this.dataViewName);if(this.segments.length=0,this.firstSeg=null,e.isEmpty())return;const t=i.parts[this.partName];if(!t)return;const r=t.viewModel.priceScale,n=i.timeScale,s=e.compareOrigin?h=>h.compareClose:h=>h.close,o=n.firstIndex,a=n.lastIndex;let l=e.get(o),c=e.get(0);if(c){this.firstSeg={x1:n.toPosition(-.5),y1:r.toPosition(c.open),x2:n.toPosition(0),y2:r.toPosition(c.close)},(c.open!==c.high||c.open!==c.low)&&this.segments.push(this.firstSeg);for(let h=o+1;h<=a;h++){let u=e.get(h);if(!u)break;this.segments.push({x1:n.toPosition(h-1),y1:r.toPosition(s(l)),x2:n.toPosition(h),y2:r.toPosition(s(u))}),l=u}}}hitTest(i){if(!this.isVisible)return null;for(let e=0,t=this.segments.length;e<t;e++){let r=this.segments[e];if(Fe.contains(r.x1,r.y1,r.x2,r.y2,3,i.x,i.y))return this}return null}render(i){this.createPath();let e=this.segments.length;i.save();let t=this.themeService.getTheme(),r;if(this.seriesName==="main"?r=t.getColor(sD).toString():r=t.getColor("chart.compare."+this.seriesName).toString(),i.strokeStyle=r,i.beginPath(),e){i.lineWidth=1.5;for(let n=0,s=this.segments.length;n<s;n++)YB(i,this.segments[n]);if(i.stroke(),this.isSelected){Ze.setHanldeStyle(i);for(let n=0;n<this.segments.length;n++){let s=this.segments[n];n%10===0&&Ze.renderHandle(i,s.x2,s.y2)}}}else this.firstSeg&&(i.lineWidth=2,i.fillStyle=r,qB(i,this.firstSeg),i.stroke());i.restore()}};Gh=GB([ES(1,Ie),ES(2,je)],Gh);var XB=Object.defineProperty,ZB=Object.getOwnPropertyDescriptor,QB=(i,e,t,r)=>{for(var n=r>1?void 0:r?ZB(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&XB(e,t,n),n},DS=(i,e)=>(t,r)=>e(t,r,i);let mv=class extends Ze{constructor(i,e,t){super(i),this.chartService=e,this.themeService=t,this.signalSegments=[],this.macdSegments=[],this.histogramLines=[]}serialize(){return Ze.serialize(this.seriesName,this.chartService.getDataView(this.dataViewName))}createPath(){const i=this.chartService,e=i.getDataView(this.dataViewName);if(e.isEmpty()){this.signalSegments.length=0,this.macdSegments.length=0,this.histogramLines.length=0;return}e.fields.forEach(p=>{p.name==="macd"&&(this.macdColor=p.color),p.name==="dif"&&(this.histogramColor=p.color),p.name==="dea"&&(this.signalColor=p.color)});const t=i.parts[this.partName];if(!t)return;const r=t.viewModel.priceScale,n=i.timeScale;this.signalSegments.length=0,this.macdSegments.length=0,this.histogramLines.length=0;const s=p=>p.macd,o=p=>p.dif,a=p=>p.dea,l=n.firstIndex,c=n.lastIndex;let h=e.get(l),u=r.toPosition(0);for(let p=l+1;p<=c;p++){let d=e.get(p),f={x1:n.toPosition(p-1),y1:r.toPosition(s(h)),x2:n.toPosition(p),y2:r.toPosition(s(d))},m={x1:n.toPosition(p-1),y1:r.toPosition(a(h)),x2:n.toPosition(p),y2:r.toPosition(a(d))},g=o(d);if(!isNaN(g)){let _={x:n.toPosition(p),y1:u,y2:r.toPosition(o(d))};this.histogramLines.push(_)}this.macdSegments.push(f),this.signalSegments.push(m),h=d}}hitTest(i){if(!this.isVisible)return null;for(let e=0;e<this.macdSegments.length;e++){let t=this.macdSegments[e];if(Fe.contains(t.x1,t.y1,t.x2,t.y2,2,i.x,i.y))return this}for(let e=0;e<this.signalSegments.length;e++){let t=this.signalSegments[e];if(Fe.contains(t.x1,t.y1,t.x2,t.y2,2,i.x,i.y))return this}for(let e=0;e<this.histogramLines.length;e++){let t=this.histogramLines[e];if(Fe.contains(t.x,t.y1,t.x,t.y2,2,i.x,i.y))return this}return null}render(i){if(this.createPath(),!this.signalSegments.length||!this.macdSegments.length||!this.histogramLines.length)return;i.save(),i.lineWidth=.5;let e=this.themeService.getTheme();i.strokeStyle=e.getColor(this.macdColor).toString(),i.beginPath();for(let t=0;t<this.macdSegments.length;t++){let r=this.macdSegments[t];i.moveTo(r.x1,r.y1),i.lineTo(r.x2,r.y2)}i.stroke(),i.strokeStyle=e.getColor(this.signalColor).toString(),i.beginPath();for(let t=0;t<this.signalSegments.length;t++){let r=this.signalSegments[t];i.moveTo(r.x1,r.y1),i.lineTo(r.x2,r.y2)}i.stroke(),i.strokeStyle=e.getColor(this.histogramColor).toString(),i.beginPath();for(let t=0;t<this.histogramLines.length;t++){let r=this.histogramLines[t];i.moveTo(r.x,r.y1),i.lineTo(r.x,r.y2)}if(i.stroke(),this.isSelected){Ze.setHanldeStyle(i);for(let t=0;t<this.macdSegments.length;t++){let r=this.macdSegments[t];t%10===0&&Ze.renderHandle(i,r.x2,r.y2)}for(let t=0;t<this.signalSegments.length;t++){let r=this.signalSegments[t];t%10===0&&Ze.renderHandle(i,r.x2,r.y2)}for(let t=0;t<this.histogramLines.length;t++){let r=this.histogramLines[t];t%10===0&&Ze.renderHandle(i,r.x,r.y2)}}i.restore()}};mv=QB([DS(1,Ie),DS(2,je)],mv);class Px extends Ze{constructor(e,t,r){super(e),this.chartService=t,this.themeService=r,this.segments=Object.create(null),this.colors=Object.create(null)}serialize(){return Ze.serialize(this.seriesName,this.chartService.getDataView(this.dataViewName))}createPath(){const e=this.chartService,t=e.getDataView(this.dataViewName);if(t.isEmpty()){this.segments=Object.create(null);return}const r=e.parts[this.partName];if(!r)return;const n=r.viewModel.priceScale,s=e.timeScale;this.segments=Object.create(null),this.colors=Object.create(null);let o=[];t.fields.forEach(h=>{o.push(h.name),h.color&&(this.colors[h.name]=h.color)});const a=s.firstIndex,l=s.lastIndex;let c=t.get(a);for(let h=a+1;h<=l;h++){let u=t.get(h);for(let p=0,d=o.length;p<d;p++){let f=o[p];this.segments[f]||(this.segments[f]=[]),this.segments[f].push([[s.toPosition(h-1),n.toPosition(c[f])],[s.toPosition(h),n.toPosition(u[f])]])}c=u}}hitTest(e){if(!this.isVisible)return null;let t=Object.keys(this.segments),r=t.length;for(let n=0;n<r;n++){let s=this.segments[t[n]],o=s.length;for(let a=0;a<o;a++){let[l,c]=s[a];if(Fe.contains(l[0],l[1],c[0],c[1],2,e.x,e.y))return this}}return null}renderHandle(e){if(this.isSelected){Ze.setHanldeStyle(e);let t=Object.keys(this.segments);for(let r=0,n=t.length;r<n;r++){e.beginPath();let s=this.segments[t[r]];for(let o=0,a=s.length;o<a;o++)if(o%10===0){const l=s[o][0];Ze.renderHandle(e,l[0],l[1])}e.stroke()}}}renderLine(e){let t=this.themeService.getTheme();e.lineWidth=.8;let r=Object.keys(this.segments);for(let n=0,s=r.length;n<s;n++){e.beginPath();let o=r[n],a=this.segments[o];for(let c=0,h=a.length;c<h;c++){const[u,p]=a[c];e.moveTo(u[0],u[1]),e.lineTo(p[0],p[1])}let l=this.colors[o];l?e.strokeStyle=t.getColor(l).toString():e.strokeStyle="#ff6a00",e.stroke()}}render(e){this.createPath(),e.save(),this.renderLine(e),this.renderHandle(e),e.restore()}}var JB=Object.defineProperty,eF=Object.getOwnPropertyDescriptor,tF=(i,e,t,r)=>{for(var n=r>1?void 0:r?eF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&JB(e,t,n),n},TS=(i,e)=>(t,r)=>e(t,r,i);let gv=class extends Px{constructor(i,e,t){super(i,e,t)}};gv=tF([TS(1,Ie),TS(2,je)],gv);class uD extends vp{constructor(e,t){super(),this.parent=e,this.data=t}}function iF(){let i=this.parent;i&&i.removeChildren(this)}function rF(i,e){return function(){this[i]=e}}function nF(i,e){return function(){let t=e.apply(this,arguments);this[i]=t}}function sF(i){return function(){return i}}let CS="$";function oF(i,e,t,r,n,s){let o=0,a,l=e.length,c=s.length;for(;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):t[o]=new uD(i,s[o]);for(;o<l;++o)(a=e[o])&&(n[o]=a)}function aF(i,e,t,r,n,s,o){let a,l,c={},h=e.length,u=s.length,p=new Array(h),d;for(a=0;a<h;++a)(l=e[a])&&(p[a]=d=CS+o.call(l,l.__data__,a,e),d in c?n[a]=l:c[d]=l);for(a=0;a<u;++a)d=CS+o.call(i,s[a],a,s),(l=c[d])?(r[a]=l,l.__data__=s[a],c[d]=null):t[a]=new uD(i,s[a]);for(a=0;a<h;++a)(l=e[a])&&c[p[a]]===l&&(n[a]=l)}class Vr{constructor(e,t){this.parents=Array.isArray(t)?t:[t],this.groups=e}static from(e){return new Vr([[e]],e)}select(e){let t=this.groups,r=t.length,n=new Array(r);for(let s=0;s<r;++s)for(let o=t[s],a=o.length,l=n[s]=new Array(a),c,h,u=0;u<a;++u)(c=o[u])&&(h=c.select(e))&&(l[u]=h);return new Vr(n,this.parents)}selectAll(e){for(var t=this.groups,r=t.length,n=[],s=[],o=0;o<r;++o)for(var a=t[o],l=a.length,c,h=0;h<l;++h)(c=a[h])&&(n.push(c.selectAll(e)),s.push(c));return new Vr(n,s)}forEach(e){for(let t=this.groups,r=0,n=t.length;r<n;++r)for(let s=t[r],o=0,a=s.length,l;o<a;++o)(l=s[o])&&e.call(l,l,o,s);return this}filter(e){let t;for(let r=this.groups,n=r.length,s=new Array(n),o=0;o<n;++o)for(let a=r[o],l=a.length,c=s[o]=[],h,u=0;u<l;++u)(h=a[u])&&e(h,u,a)&&c.push(h);return new Vr(t,this.parents)}on(e,t){return this.forEach(r=>r.addEventListener(e,t)),this}once(e,t){return this.forEach(r=>r.once(e,t)),this}off(e,t){return this.forEach(r=>r.removeListener(e,t)),this}size(){let e=0;return this.forEach(function(){++e}),e}node(){for(let e=this.groups,t=0,r=e.length;t<r;++t)for(let n=e[t],s=0,o=n.length;s<o;++s){let a=n[s];if(a)return a}return null}nodes(){let e=new Array(this.size()),t=-1;return this.forEach(function(){e[++t]=this}),e}merge(e){for(var t=this.groups,r=e.groups,n=t.length,s=r.length,o=Math.min(n,s),a=new Array(n),l=0;l<o;++l)for(let c=t[l],h=r[l],u=c.length,p=a[l]=new Array(u),d,f=0;f<u;++f)(d=c[f]||h[f])&&(p[f]=d);for(;l<n;++l)a[l]=t[l];return new Vr(a,this.parents)}call(){let e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}remove(){return this.forEach(iF)}datum(e){return arguments.length?this.property("data",arguments[0]):this.node().data}property(e,t){return arguments.length>1?this.forEach((typeof t=="function"?nF:rF)(e,t)):this.node()[e]}data(e,t){if(!e){let p=new Array(this.size()),d=-1;return this.forEach(function(f){p[++d]=f}),p}let r=t?aF:oF,n=this.parents,s=this.groups;typeof e!="function"&&(e=sF(e));for(var o=s.length,a=new Array(o),l=new Array(o),c=new Array(o),h=0;h<o;++h){let p=n[h],d=s[h],f=d.length,m=e.call(p,p&&p.data,h,n),g=m.length,_=l[h]=new Array(g),v=a[h]=new Array(g),y=c[h]=new Array(f);r(p,d,_,v,y,m,t);for(let x=0,A=0,w,D;x<g;++x)if(w=_[x]){for(x>=A&&(A=x+1);!(D=v[A])&&++A<g;);w._next=D||null}}let u=new Vr(a,n);return u._enter=l,u._exit=c,u}enter(){return new Vr(this._enter||[[]],this.parents)}exit(){return new Vr(this._exit||[[]],this.parents)}transition(e){let t=new Map;return this.forEach(r=>{let n=r.root;if(n){let s=t.get(n),o=e(r);s?s.push(o):s=[o],t.set(n,s)}}),t.forEach((r,n)=>{n.animator.add(r)}),this}}function lF(i){return Vr.from(i)}var uF=Object.defineProperty,hF=Object.getOwnPropertyDescriptor,cF=(i,e,t,r)=>{for(var n=r>1?void 0:r?hF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&uF(e,t,n),n},PS=(i,e)=>(t,r)=>e(t,r,i);let _v=class extends Hr{constructor(i,e,t){super(i),this.chartService=e,this.themeService=t}hitTest(i){return null}render(i){const e=this.chartService,t=e.parts[this.partName];if(!t)return;const r=t.viewModel.priceScale,n=e.timeScale;if(!t.size)return;let{height:s,width:o}=t.size,a=r.ticks,l=n.ticks;i.save();let c=this.themeService.getTheme();i.strokeStyle=c.getColor(Jk).toString(),i.lineWidth=.8;for(let u=0,p=l.length;u<p;u++){const d=l[u];if(d.labelOnly)continue;let f=n.toPosition(d.index);i.beginPath(),i.moveTo(f,0),i.lineTo(f,s),i.stroke()}for(let u=0,p=a.length;u<p;u++){let d=a[u],f=r.toPosition(d.value);i.beginPath(),i.moveTo(0,f),i.lineTo(o,f),i.stroke()}let h=this.chartService.dataProvider.views[this.dataViewName];if(h&&isFinite(h.origin)&&this.chartService.dataRange===Te.Intraday){i.setLineDash([8,10]),i.strokeStyle="#8999a9",i.lineWidth=1;let u=r.toPosition(h.origin);i.beginPath(),i.moveTo(0,u),i.lineTo(o,u),i.stroke()}i.restore()}};_v=cF([PS(1,Ie),PS(2,je)],_v);var dF=Object.defineProperty,fF=Object.getOwnPropertyDescriptor,pF=(i,e,t,r)=>{for(var n=r>1?void 0:r?fF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&dF(e,t,n),n},IS=(i,e)=>(t,r)=>e(t,r,i);class mF extends ic{}const gF=2*Math.PI;function Wn(i,e,t){let{x:r,y:n,value:s}=e;i.beginPath(),i.arc(r,n,t,0,gF),i.fill(),i.stroke(),t>4&&(i.save(),i.fillStyle="#ffffff",i.fillText(s.toString(),r,n),i.restore())}let vv=class extends Hr{constructor(i,e,t){super(i),this.chartService=e,this.themeService=t,this.openLongOrders=[],this.closeLongOrders=[],this.openShortOrders=[],this.closeShortOrders=[],this.orderToHighlight=[],this.cachedShapeForHitTest=new mF(this),this.cachedShapeForHitTest.type=$t.ORDER,this.registerListeners()}serialize(){return Ze.serialize(this.seriesName,this.chartService.getDataView(this.dataViewName))}registerListeners(){this.cachedShapeForHitTest.on(ue.MOUSE_OVER,this.handleMouseOver.bind(this)),this.cachedShapeForHitTest.on(ue.MOUSE_OUT,this.handleMouseOut.bind(this))}handleMouseOver(i){let e=i.target;this.orderToHighlight=[e.id],this.root.update()}handleMouseOut(i){this.orderToHighlight=[],this.root.update()}createOrders(){const i=this.chartService,e=i.getDataView(this.dataViewName),t=i.parts[this.partName];if(!t)return;const r=t.viewModel.priceScale,n=i.timeScale;this.openLongOrders.length=0,this.closeLongOrders.length=0,this.openShortOrders.length=0,this.closeShortOrders.length=0;const s=n.firstIndex,o=n.lastIndex,a=n.itemWidth;this.radius=Math.max(a/2,8);let l=Math.max(this.radius*2,5),h=e.points.length;for(let u=0;u<h;u++){if(u<s||u>o)continue;let p=e.get(u);const{index:d,type:f,count:m,close:g,id:_}=p;let v=n.toPosition(d);switch(f){case xr.OpenLong:this.openLongOrders.push({id:_,x:v,y:r.toPosition(g)+l,value:m,orderType:f});break;case xr.CloseLong:this.closeLongOrders.push({id:_,x:v,y:r.toPosition(g)-l,value:m,orderType:f});break;case xr.OpenShort:let y=fs(e.points,A=>A.index===d&&A.type===xr.CloseLong);this.openShortOrders.push({id:_,x:v,y:y?r.toPosition(g)-l-this.radius*2.5:r.toPosition(g)-l,value:m,orderType:f});break;case xr.CloseShort:let x=fs(e.points,A=>A.index===d&&A.type===xr.OpenLong);this.closeShortOrders.push({id:_,x:v,y:x?r.toPosition(g)+l+this.radius*2.5:r.toPosition(g)+l,value:m,orderType:f});break}}}select(i){let e;for(let t=0,r=this.openLongOrders.length;t<r;t++){let n=this.openLongOrders[t];if(i(n)){e=n;break}}for(let t=0,r=this.closeLongOrders.length;t<r;t++){let n=this.closeLongOrders[t];if(i(n)){e=n;break}}for(let t=0,r=this.openShortOrders.length;t<r;t++){let n=this.openShortOrders[t];if(i(n)){e=n;break}}for(let t=0,r=this.closeShortOrders.length;t<r;t++){let n=this.closeShortOrders[t];if(i(n)){e=n;break}}if(e){let{cachedShapeForHitTest:t}=this;return t.x=e.x,t.y=e.y,t.radius=this.radius,t.value=e.value,t.id=e.id,t.orderType=e.orderType,t}return null}hitTest(i){if(!this.isVisible)return null;let e;for(let t=0,r=this.openLongOrders.length;t<r;t++){let n=this.openLongOrders[t];if(oe.euclideanMetric(oe.subtract(n,i))<=this.radius+2){e=n;break}}for(let t=0,r=this.closeLongOrders.length;t<r;t++){let n=this.closeLongOrders[t];if(oe.euclideanMetric(oe.subtract(n,i))<=this.radius+2){e=n;break}}for(let t=0,r=this.openShortOrders.length;t<r;t++){let n=this.openShortOrders[t];if(oe.euclideanMetric(oe.subtract(n,i))<=this.radius+2){e=n;break}}for(let t=0,r=this.closeShortOrders.length;t<r;t++){let n=this.closeShortOrders[t];if(oe.euclideanMetric(oe.subtract(n,i))<=this.radius+2){e=n;break}}if(e){let{cachedShapeForHitTest:t}=this;return t.x=e.x,t.y=e.y,t.radius=this.radius,t.value=e.value,t.id=e.id,t.orderType=e.orderType,t}return null}render(i){this.createOrders();let e=this.themeService.getTheme();if(i.save(),i.font=`${this.radius}px arial`,i.textBaseline="middle",i.textAlign="center",i.lineWidth=1,this.openLongOrders.length){this.orderToHighlight.length?(i.fillStyle=e.getColor(Vk).toString(),i.strokeStyle=e.getColor(Wk).toString()):(i.fillStyle=e.getColor(hS).toString(),i.strokeStyle=e.getColor(cS).toString());for(let t=0,r=this.openLongOrders.length;t<r;t++){let n=this.openLongOrders[t];this.orderToHighlight.indexOf(n.id)>-1?(i.save(),i.fillStyle=e.getColor(hS).toString(),i.strokeStyle=e.getColor(cS).toString(),i.font=`${this.radius*1.5}px arial`,Wn(i,n,this.radius*1.5),i.restore()):Wn(i,n,this.radius)}}if(this.closeLongOrders.length){this.orderToHighlight.length?(i.fillStyle=e.getColor(Gk).toString(),i.strokeStyle=e.getColor(Yk).toString()):(i.fillStyle=e.getColor(dS).toString(),i.strokeStyle=e.getColor(fS).toString());for(let t=0,r=this.closeLongOrders.length;t<r;t++){let n=this.closeLongOrders[t];this.orderToHighlight.indexOf(n.id)>-1?(i.save(),i.fillStyle=e.getColor(dS).toString(),i.strokeStyle=e.getColor(fS).toString(),i.font=`${this.radius*1.5}px arial`,Wn(i,n,this.radius*1.5),i.restore()):Wn(i,n,this.radius)}}if(this.openShortOrders.length){this.orderToHighlight.length?(i.fillStyle=e.getColor(qk).toString(),i.strokeStyle=e.getColor(Xk).toString()):(i.fillStyle=e.getColor(pS).toString(),i.strokeStyle=e.getColor(mS).toString());for(let t=0,r=this.openShortOrders.length;t<r;t++){let n=this.openShortOrders[t];this.orderToHighlight.indexOf(n.id)>-1?(i.save(),i.fillStyle=e.getColor(pS).toString(),i.strokeStyle=e.getColor(mS).toString(),i.font=`${this.radius*1.5}px arial`,Wn(i,n,this.radius*1.5),i.restore()):Wn(i,n,this.radius)}}if(this.closeShortOrders.length){this.orderToHighlight.length?(i.fillStyle=e.getColor(Zk).toString(),i.strokeStyle=e.getColor(Qk).toString()):(i.fillStyle=e.getColor(gS).toString(),i.strokeStyle=e.getColor(_S).toString());for(let t=0,r=this.closeShortOrders.length;t<r;t++){let n=this.closeShortOrders[t];this.orderToHighlight.indexOf(n.id)>-1?(i.save(),i.fillStyle=e.getColor(gS).toString(),i.strokeStyle=e.getColor(_S).toString(),i.font=`${this.radius*1.5}px arial`,Wn(i,n,this.radius*1.5),i.restore()):Wn(i,n,this.radius)}}i.restore()}};vv=pF([IS(1,Ie),IS(2,je)],vv);var _F=Object.defineProperty,vF=Object.getOwnPropertyDescriptor,yF=(i,e,t,r)=>{for(var n=r>1?void 0:r?vF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&_F(e,t,n),n},OS=(i,e)=>(t,r)=>e(t,r,i);let yv=class extends Ze{constructor(i,e,t){super(i),this.chartService=e,this.themeService=t}serialize(){return Ze.serialize(this.seriesName,this.chartService.getDataView(this.dataViewName))}createPath(){const i=this.chartService,e=i.getDataView(this.dataViewName);if(e.isEmpty()){this.points=[];return}const t=i.parts[this.partName];if(!t)return;const r=t.viewModel.priceScale,n=i.timeScale;this.points=[],this.color=null;let s=e.fields[0].name;e.fields[0].color&&(this.color=e.fields[0].color);const o=n.firstIndex,a=n.lastIndex;for(let l=o+1;l<=a;l++){let c=e.get(l);this.points.push([n.toPosition(l),r.toPosition(c[s])])}}hitTest(i){if(!this.isVisible)return null;let e=this.points.length;for(let t=0;t<e;t++){let[r,n]=this.points[t];if(Fe.contains(r-1.5,n,r+1.5,n,2,i.x,i.y))return this;if(Fe.contains(r,n-1.5,r,n+1.5,2,i.x,i.y))return this}return null}render(i){if(this.createPath(),!this.points.length)return;let e=this.themeService.getTheme();i.save(),i.lineWidth=1,i.beginPath();for(let t=0,r=this.points.length;t<r;t++){const[n,s]=this.points[t];i.moveTo(n-1.5,s),i.lineTo(n+1.5,s),i.moveTo(n,s-1.5),i.lineTo(n,s+1.5)}if(this.color?i.strokeStyle=e.getColor(this.color).toString():i.strokeStyle="#fff",i.stroke(),this.isSelected){Ze.setHanldeStyle(i);for(let t=0,r=this.points.length;t<r;t++){if(i.beginPath(),t%10===0){const[n,s]=this.points[t];Ze.renderHandle(i,n,s)}i.stroke()}}i.restore()}};yv=yF([OS(1,Ie),OS(2,je)],yv);var xF=Object.defineProperty,wF=Object.getOwnPropertyDescriptor,bF=(i,e,t,r)=>{for(var n=r>1?void 0:r?wF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&xF(e,t,n),n},MS=(i,e)=>(t,r)=>e(t,r,i);let xv=class extends Px{constructor(i,e,t){super(i,e,t)}renderArea(i){i.lineWidth=.8,i.beginPath();let e=this.segments.ub,t=this.segments.lb,[r]=e[0][0];i.moveTo(r[0],r[1]);for(let n=0,s=e.length;n<s;n++){let o=e[n][1];i.lineTo(o[0],o[1])}for(let n=t.length-1;n>=0;n--){let s=t[n][1];i.lineTo(s[0],s[1])}i.closePath(),i.globalAlpha=.1,i.fillStyle="#138484",i.fill(),i.globalAlpha=1}render(i){this.createPath();let e=Object.keys(this.segments);if(e.length){for(let t=0,r=e.length;t<r;t++)if(!this.segments[e[t]].length)return;i.save(),this.renderArea(i),this.renderLine(i),this.renderHandle(i),i.restore()}}};xv=bF([MS(1,Ie),MS(2,je)],xv);var SF=Object.defineProperty,EF=Object.getOwnPropertyDescriptor,AF=(i,e,t,r)=>{for(var n=r>1?void 0:r?EF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&SF(e,t,n),n},NS=(i,e)=>(t,r)=>e(t,r,i);let wv=class extends Px{constructor(i,e,t){super(i,e,t)}renderArea(i){const e=this.chartService,t=e.getDataView(this.dataViewName);if(t.isEmpty())return;const r=e.parts[this.partName];if(!r)return;const n=r.viewModel.priceScale;let{width:s}=r.size;if(!s)return;let o=t.additional,a=n.toPosition(o.lower),l=n.toPosition(o.upper);i.globalAlpha=.1,i.fillStyle="#cccccc",i.fillRect(0,l,s,a-l),i.globalAlpha=1,i.setLineDash([3,3]),i.beginPath(),i.moveTo(0,a),i.lineTo(s,a),i.moveTo(s,l),i.lineTo(0,l),i.strokeStyle="#eee",i.stroke(),i.setLineDash([])}render(i){this.createPath(),i.save(),i.lineWidth=.8,this.renderArea(i),this.renderLine(i),this.renderHandle(i),i.restore()}};wv=AF([NS(1,Ie),NS(2,je)],wv);var DF=Object.defineProperty,TF=Object.getOwnPropertyDescriptor,CF=(i,e,t,r)=>{for(var n=r>1?void 0:r?TF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&DF(e,t,n),n},__=(i,e)=>(t,r)=>e(t,r,i);const yn=9;function PF(i,e){return Math.abs(i-e)<yn*2}let l0=class extends Hr{constructor(i,e,t,r){super(i),this.chartService=e,this.configurationService=t,this.themeService=r,this.labels=[]}hitTest(i){return null}renderOneLabel(i,e,t,r){const{width:n}=i.measureText(e);let s=4;i.fillStyle=r,i.fillRect(this.canvasWidth-n-2*s,t-yn,n*2*s,18),i.fillStyle="#fff",i.fillText(e,this.canvasWidth-s,t)}createLabels(){this.labels.length=0;const i=this.chartService,e=i.parts[this.partName];if(!e)return;let{height:t,centerWidth:r}=e.viewModel;this.partHeight=t,this.canvasWidth=r;let n=this.configurationService.inspect("chart.label.symbol"),s=this.configurationService.inspect("chart.label.indicator"),o=n.value,a=s.value;const l=this.themeService.getTheme();this.chartService.getSeriesInParts(this.partName).forEach(h=>{const u=h.get(i.timeScale.lastIndex);if(!u)return;let p=new St(h.name);if(p.seriesName==="main"&&p.partName==="main"){if(!o)return;const d=e.viewModel.priceScale.toPosition(u.close);this.labels.push({text:h.alias,y:d,yDisplay:d,color:l.getColor(h.fillRule(u)).toString()})}else if(p.seriesName==="main"&&p.partName==="volume"){if(!o)return;const d=e.viewModel.priceScale.toPosition(u.volume);this.labels.push({text:h.alias,y:d,yDisplay:d,color:l.getColor(h.fillRule(u)).toString()})}else if(h.compareOrigin&&o){let d=new St(h.name);const f=e.viewModel.priceScale.toPosition(u.compareClose);this.labels.push({text:h.alias,y:f,yDisplay:f,color:l.getColor("chart.compare."+d.seriesName).toString()})}else{if(!a)return;h.fields.forEach(d=>{const f=e.viewModel.priceScale.toPosition(u[d.name]);this.labels.push({text:d.label||h.alias,y:f,yDisplay:f,color:d.color?l.getColor(d.color).toString():"#ff6a00"})})}})}adjustLabelsIfNeeded(){if(!this.configurationService.getValue("chart.label.noOverlapping"))return;let i=this.labels.length;this.labels=this.labels.sort((r,n)=>r.yDisplay-n.yDisplay);let e=[];this.labels[0].yDisplay>yn&&e.push({from:0,to:this.labels[0].yDisplay-yn});for(let r=1;r<i;r++){let n=this.labels[r-1],s=this.labels[r],o=!1;for(let a=r-1;a>=0;a--){let l=this.labels[a];PF(l.yDisplay,s.yDisplay)&&(o=!0)}o?s.yDisplay=n.yDisplay+yn*2:e.push({from:n.yDisplay+yn,to:s.yDisplay-yn})}if(!e.length)return;let t=this.labels[i-1];for(;e.length&&t.yDisplay+yn>this.partHeight;){let r=t.yDisplay+yn-this.partHeight,n=e.pop(),s=n.to-n.from,o=Math.min(r,s);for(let a=0;a<i;a++){let l=this.labels[a];l.yDisplay<n.from||(l.yDisplay-=o)}}}render(i){if(this.createLabels(),!!this.labels.length){this.adjustLabelsIfNeeded(),i.save(),i.font="11px Trebuchet MS, Tahoma, Arial, Helvetica, sans-serif",i.textBaseline=is.Middle,i.textAlign=cr.Right;for(let e=0,t=this.labels.length;e<t;e++){let r=this.labels[e];this.renderOneLabel(i,r.text,r.yDisplay,r.color)}i.restore()}}};l0=CF([__(1,Ie),__(2,it),__(3,je)],l0);var IF=Object.defineProperty,OF=Object.getOwnPropertyDescriptor,MF=(i,e,t,r)=>{for(var n=r>1?void 0:r?OF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&IF(e,t,n),n},RS=(i,e)=>(t,r)=>e(t,r,i);let bv=class extends Hr{constructor(i,e,t){super(i),this.chartService=e,this.themeService=t}hitTest(i){return null}render(i){if(!this.isVisible)return;const e=this.chartService,t=e.parts[this.partName];if(!t)return;let r=e.getDataView(this.dataViewName);const n=r.get(e.timeScale.lastIndex);if(!n)return;const s=this.themeService.getTheme();let o=this.root;const{width:a}=o.bounds,l=t.viewModel.priceScale.toPosition(n.close);i.save(),i.setLineDash([1,2]),i.strokeStyle=s.getColor(r.fillRule(n)).toString(),i.lineWidth=1,i.beginPath(),i.moveTo(0,l),i.lineTo(a,l),i.stroke(),i.restore()}};bv=MF([RS(1,Ie),RS(2,je)],bv);var NF=Object.defineProperty,RF=Object.getOwnPropertyDescriptor,LF=(i,e,t,r)=>{for(var n=r>1?void 0:r?RF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&NF(e,t,n),n},Zd=(i,e)=>(t,r)=>e(t,r,i);let Sv=class extends Tx{constructor(i,e,t,r,n,s,o){super(i,t),this.chartService=r,this.contextKeyService=n,this.configurationService=s,this.chart=o,this._seriesRef=Object.create(null),this._isDragging=!1,this._wheeling=!1,this._wheelTimer=null,this.nameInstance=new St(e),this.createChildren(),this.registerListener()}createChildren(){this.overlayLayer.appendChildren(this.chartService.instantiationService.createInstance(pv,this.nameInstance.name)),this.backgroundLayer.appendChildren(this.chartService.instantiationService.createInstance(_v,this.nameInstance.name)),this.nameInstance.partName==="main"&&this.backgroundLayer.appendChildren(this.chartService.instantiationService.createInstance(bv,this.nameInstance.name)),this.chartService.getSeriesInParts(this.nameInstance.partName).forEach(e=>{let t=e.name,r;if(this.nameInstance.partName==="main"){let n=new St(t);if(n.seriesName==="main"){let s;this.chartService.dataRange===Te.Continuous?s=fv:s=Gh,r=this.chartService.instantiationService.createInstance(s,t),this._dataSeriesName=r.name}else n.seriesName.startsWith("compare")?(this.chartService.dataRange===Te.Intraday||this.chartService.dataRange===Te.FiveDay)&&(r=this.chartService.instantiationService.createInstance(Gh,t)):r=this._createSeries(e.visualMap,t)}else this.nameInstance.partName==="volume"?r=this.chartService.instantiationService.createInstance(a0,t):r=this._createSeries(e.visualMap,t);r&&(this._seriesRef[r.name]=r,this.backgroundLayer.appendChildren(r))}),this.backgroundLayer.appendChildren(this.chartService.instantiationService.createInstance(l0,this.nameInstance.name))}updateSeries(){let e=this.chartService.getSeriesInParts(this.nameInstance.partName).map(a=>a.name),t=Object.keys(this._seriesRef),r=$x(e,t),n=$x(t,e),o=this.configurationService.inspect("chart.label.indicator").value;r.length&&r.forEach(a=>{let l=this.chartService.getDataView(a),c=l.name;if(this._seriesRef[c])return;let h=this._createSeries(l.visualMap,c);if(h){let u=this.chartService.instantiationService.createInstance(l0,c);u.isVisible=o,this._seriesRef[h.name]=h,this.backgroundLayer.appendChildren(h),this.backgroundLayer.appendChildren(u)}}),n.length&&n.forEach(a=>{let l=this._seriesRef[a];this.backgroundLayer.removeChildren(l),l.dispose(),delete this._seriesRef[a]})}serialize(){return Object.keys(this._seriesRef).map(i=>this._seriesRef[i].serialize())}registerListener(){this.toDispose.push(this.stage.on(ue.MOUSE_DOWN,this.handleMouseDown.bind(this))),this.toDispose.push(this.chart.onBlur(this.handleChartBlur.bind(this))),this.toDispose.push(me(this.container,ue.MOUSE_UP,this.handleMouseUp.bind(this))),this.toDispose.push(me(this.container,ue.WHEEL,this.handleWheel.bind(this))),this.toDispose.push(me(this.container,ue.MOUSE_MOVE,this.handleMouseMove.bind(this))),this.toDispose.push(this.stage.on(ue.MOUSE_OVER,this.handleShapeHover.bind(this))),this.toDispose.push(this.stage.on(ue.MOUSE_OUT,this.handleShapeLeave.bind(this)))}onMouseMove(i){return this.redrawAll=!0,!0}_createSeries(i,e){let t=null;return i==="boll"&&(t=this.chartService.instantiationService.createInstance(xv,e)),i==="macd"&&(t=this.chartService.instantiationService.createInstance(mv,e)),i==="multiline"&&(t=this.chartService.instantiationService.createInstance(gv,e)),i==="order"&&(t=this.chartService.instantiationService.createInstance(vv,e)),i==="range"&&(t=this.chartService.instantiationService.createInstance(wv,e)),i==="sar"&&(t=this.chartService.instantiationService.createInstance(yv,e)),i==="volume"?t=this.chartService.instantiationService.createInstance(a0,e):new St(e).seriesName.startsWith("compare")&&(t=this.chartService.instantiationService.createInstance(Gh,e)),t}handleMouseDown(i){let e=null;if(i.target!==this.stage&&!this.chart.inDrawingMode.get()){let t=i.target;t.parent instanceof Vt&&(t=t.parent),e=t,t instanceof Ze&&this._bringSeriesToFront(t)}this._context.privateViewEventBus.emit(new Mk(i.x,i.y,e)),this.chart.inDrawingMode.get()||(this._priceScaleSnapshot=this.chart.viewModel.priceScale.snapshot,this._timeScaleSnapshot=this.chart.viewModel.timeScale.snapshot,this._startPoint={x:i.x,y:i.y}),this.stage.update()}handleChartBlur(){let i=lF(this.stage).selectAll(e=>e.isSelected===!0);i.size()&&i.forEach(e=>e.isSelected=!1),this.stage.update()}_bringSeriesToFront(i){i.bringToFront()}handleMouseMove(i){const e=kh(i,this.container);if(i.buttons===1&&this._startPoint&&this.chartService.priceScaleMode!==bt.Locked)this._isDragging||(this._isDragging=!0,this._context.privateViewEventBus.emit(new Rk(e.x,e.y))),this.pan(e);else{let t=$t.EMPTY;this._hoveredShape&&(t=this._hoveredShape instanceof Vt?$t.DRAWING:this._hoveredShape.type),this._context.privateViewEventBus.emit(new p_(e.x,e.y,t,this._hoveredShape,null))}}pan(i){const{x:e,y:t}=oe.subtract(i,this._startPoint);this._context.privateViewEventBus.emit(new Lk(this._timeScaleSnapshot.domain,this._priceScaleSnapshot.domain,e,t,i.x,i.y))}handleMouseUp(i){if(!this._startPoint)return;const e=kh(i,this.container);this._isDragging?(this._isDragging=!1,this._context.privateViewEventBus.emit(new kk(this._startPoint.x,this._startPoint.y,e.x,e.y))):this._context.privateViewEventBus.emit(new Nk),this._startPoint=null}handleWheel(i){this.chartService.priceScaleMode!==bt.Locked&&(this._wheeling?this._wheelZoom(i):this._wheelStart(i))}_wheelStart(i){this._wheeling=!0,this._context.privateViewEventBus.emit(new Bk),this._wheelZoom(i)}_wheelZoom(i){this._wheelTimer&&clearTimeout(this._wheelTimer);const e=i.deltaY<0?1.05:.95,t=kh(i,this.container);this._context.privateViewEventBus.emit(new rD(e,t.x,[0,0],0,0,[0,0])),this._wheelTimer=setTimeout(()=>{this._wheelEnd()},50)}_wheelEnd(){this._wheeling=!1,this._wheelTimer=null,this._context.privateViewEventBus.emit(new Fk)}handleShapeHover(i){this._hoveredShape=i.target;let e=i.target,t=e instanceof Vt?$t.DRAWING:e.type;this._context.privateViewEventBus.emit(new p_(i.x,i.y,t,i.target,i.target.key))}handleShapeLeave(i){this._hoveredShape=void 0,this._context.privateViewEventBus.emit(new p_(i.x,i.y,$t.EMPTY,i.target,i.target.key))}};Sv=LF([Zd(3,Ie),Zd(4,mr),Zd(5,it),Zd(6,gt)],Sv);var kF=Object.defineProperty,BF=Object.getOwnPropertyDescriptor,FF=(i,e,t,r)=>{for(var n=r>1?void 0:r?BF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&kF(e,t,n),n},LS=(i,e)=>(t,r)=>e(t,r,i);let Ev=class{constructor(i,e,t,r){this.configurationService=r,this.x=-1,this.y=-1,this.mouseTarget=$t.EMPTY,this._onDidChangeSelection=new ve,this.onDidChangeSelection=this._onDidChangeSelection.event,this._cursorStyle=Di.Cross,this._container=i,this._cursorStyleTarget=e,this._selections=[],this._savedCursor=[],this._toDispose=[this._onDidChangeSelection,t.onBlur(()=>this.restoreCursorStyle())]}get cursorStyle(){return this._cursorStyle}set cursorStyle(i){this._changeCursor(i,this._cursorStyle),this._cursorStyle=i}getPosition(){return{top:this.y,left:this.x}}toLocalPosition(i){return kh(i,this._container)}toDrawingAreaPosition(i){let{x:e,y:t}=this.toLocalPosition(i);return this.configurationService.inspect("chart.axis.leftAxis").value&&(e-=qe),{x:e,y:t}}getSelections(){return this._selections}setSelection(i){this.setSelections(i?[i]:[])}setSelections(i){if(!this._selections.length&&!i.length)return;let t=this._selections.length;for(let r=0;r<t;r++)this._selections[r].isSelected=!1;this._selections.length=0,this._selections=i;for(let r=0,n=this._selections.length;r<n;r++)this._selections[r].isSelected=!0;this._onDidChangeSelection.fire(i)}remove(i){let e=this._selections.indexOf(i);e>-1&&this._selections.splice(e,1)}saveCursorStyle(){this._savedCursor.push(this._cursorStyle)}restoreCursorStyle(){this._savedCursor.length&&this._cursorStyle!==this._savedCursor[this._savedCursor.length-1]&&(this.cursorStyle=this._savedCursor.pop())}setIdle(){this.setSelections([]),this.mouseTarget=$t.EMPTY}_changeCursor(i,e){switch(e){case Di.Cross:ut(this._cursorStyleTarget,"cross-cursor");break;case Di.Dot:ut(this._cursorStyleTarget,"dot-cursor");break;case Di.Arrow:ut(this._cursorStyleTarget,"arrow-cursor");break;case Di.Grabbing:ut(this._cursorStyleTarget,"grabbing-cursor");break;default:ut(this._cursorStyleTarget,"pointer-cursor");break}switch(i){case Di.Cross:Pe(this._cursorStyleTarget,"cross-cursor");break;case Di.Dot:Pe(this._cursorStyleTarget,"dot-cursor");break;case Di.Arrow:Pe(this._cursorStyleTarget,"arrow-cursor");break;case Di.Grabbing:Pe(this._cursorStyleTarget,"grabbing-cursor");break;default:Pe(this._cursorStyleTarget,"pointer-cursor");break}}dispose(){ye(this._toDispose),this._toDispose.length=0}};Ev=FF([LS(2,gt),LS(3,it)],Ev);var UF=Object.defineProperty,KF=Object.getOwnPropertyDescriptor,HF=(i,e,t,r)=>{for(var n=r>1?void 0:r?KF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&UF(e,t,n),n},zF=(i,e)=>(t,r)=>e(t,r,i);const jF={[Qt.Closed]:"",[Qt.Preparing]:"",[Qt.CallAuction]:"",[Qt.Opened]:"",[Qt.Break]:""};let Av=class extends yd{constructor(i,e,t){super(i),this.parent=e,this.chartService=t,this.container=document.createElement("div"),pr(this.container,"chart-status-picture","market-statu"),this.label=document.createElement("div"),Pe(this.label,"market-status__label");let r=document.createElement("div");Pe(r,"market-status__dot"),this.time=document.createElement("div"),Pe(this.time,"market-status__time"),this.container.appendChild(r),this.container.appendChild(this.label),this.container.appendChild(this.time),this.parent.appendChild(this.container),this.startTimer(),this._register(me(document,"visibilitychange",()=>{document.hidden?this.timer&&clearTimeout(this.timer):this.startTimer()}))}shouldRender(i){return!1}startTimer(){this.timer=setTimeout(()=>{this.render(),this.startTimer()},this.getMSToNextSecond())}getMSToNextSecond(){let i=new Date,e=i.getTime();return i.setMilliseconds(0),i.getTime()+1e3-e}prepareRender(){}render(){let i=Ct.get("localDatetime");this.time.innerText=i(Date.now());let e=this.chartService.marketStatus;At(e)||(this.label.innerText=jF[e])}dispose(){super.dispose(),this.timer&&clearTimeout(this.timer)}};Av=HF([zF(2,Ie)],Av);var $F=Object.defineProperty,VF=Object.getOwnPropertyDescriptor,WF=(i,e,t,r)=>{for(var n=r>1?void 0:r?VF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&$F(e,t,n),n},v_=(i,e)=>(t,r)=>e(t,r,i);function GF(i,e,t,r,n){const s=t.clientWidth,o=t.clientHeight,a=10;return i+s+a>r?(i-=s+a,i=i<0?0:i):i+=a,e+o+a>n?(e-=o+a,e=e<0?0:e):e+=a,[i,e]}let Dv=class extends yd{constructor(i,e,t,r,n){super(i),this.parent=e,this.chartService=t,this.chart=r,this.instantiationService=n,this.currentIndex=null,this.visible=!1,this.container=document.createElement("div"),Pe(this.container,"tip"),this.parent.appendChild(this.container),this.mount()}mount(){this.chartService.dataRange===Te.Continuous&&(this.toDispose.push(me(window,ue.KEY_DOWN,i=>{let e=new _i(i);e.keyCode===E.LeftArrow?this.showPrevOne():e.keyCode===E.RightArrow?this.showNextOne():this.hide()})),this.toDispose.push(me(window,ue.MOUSE_MOVE,i=>{this.hide()})))}showPrevOne(){let i=this.chartService.getDataView(this.chart.dataViewName);if(i.isEmpty()){this.hide();return}const e=this.chartService.parts.main;if(!e){this.hide();return}const t=e.viewModel.priceScale,r=this.chartService.timeScale;this.currentIndex!==null?this.currentIndex-=1:this.chart===this.chartService.currentActivePart&&(this.currentIndex=r.snap(this.chart.cursor.x));let n;this.currentIndex!==null&&(n=i.get(this.currentIndex)),n||(n=i.last(),this.currentIndex=n.i);let s=i.get(this.currentIndex-1);if(!n||!s){this.hide();return}let o=t.toPosition(n.close),a=r.toPosition(n.i);this.show(n,s,a,o)}showNextOne(){let i=this.chartService.getDataView(this.chart.dataViewName);if(i.isEmpty()){this.hide();return}const e=this.chartService.parts.main;if(!e){this.hide();return}const t=e.viewModel.priceScale,r=this.chartService.timeScale;this.currentIndex!==null?this.currentIndex+=1:this.chart===this.chartService.currentActivePart&&(this.currentIndex=r.snap(this.chart.cursor.x));let n;this.currentIndex!==null&&(n=i.get(this.currentIndex)),n||(n=i.first(),this.currentIndex=n.i);let s=i.get(this.currentIndex-1);if(!n||!s){this.hide();return}let o=t.toPosition(n.close),a=r.toPosition(n.i);this.show(n,s,a,o)}show(i,e,t,r){this.visible=!0;let n=Ct.get("price"),s=Ct.get("volume"),o=Ct.get("percentage"),a=Ct.get(this.chartService.dataResolution===ce.Day?"date":"datetime");this.currentIndex=i.i;let l=i.high-i.low;this.container.innerHTML=`
        <div class="chart-tip">
          <div>${a(i.time)}</div>
          <table>
            <tr>
              <td></td>
              <td>${n(i.open)}(${o((i.open-e.close)/e.close)})</td>
            </tr>
            <tr>
              <td></td>
              <td>${n(i.high)}(${o((i.high-e.close)/e.close)})</td>
            </tr>
            <tr>
              <td></td>
              <td>${n(i.low)}(${o((i.low-e.close)/e.close)})</td>
            </tr>
            <tr>
              <td></td>
              <td>${n(i.close)}(${o((i.close-e.close)/e.close)})</td>
            </tr>
            <tr>
              <td></td>
              <td>${s(i.volume)}</td>
            </tr>
            <tr>
              <td></td>
              <td>${n(l)}(${o(l/e.close)})</td>
            </tr>
          </table>
        <div>
      `,this.chart.view.cursor.x=t,this.chart.view.cursor.y=r,this.chartService.currentActivePart=this.chart;let[c,h]=GF(t,r,this.container,this.chart.viewModel.centerWidth,this.chart.viewModel.height);this.container.style.visibility="visible",this.container.style.left=c+"px",this.container.style.top=h+"px",this.chartService.redraw()}hide(){this.visible&&(this.currentIndex=null,this.container.style.visibility="hidden",this.chartService.redraw())}prepareRender(){}render(){}dispose(){ye(this.toDispose),this.toDispose.length=0}};Dv=WF([v_(2,Ie),v_(3,gt),v_(4,Nt)],Dv);var YF=Object.defineProperty,qF=Object.getOwnPropertyDescriptor,XF=(i,e,t,r)=>{for(var n=r>1?void 0:r?qF(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&YF(e,t,n),n},kS=(i,e)=>(t,r)=>e(t,r,i);let Tv=class extends nD{constructor(i,e,t,r,n){super(),this.domNode=i,this.partName=e,this.viewModel=t,this.instantiationService=r,this.configurationService=n,this._renderAnimationFrame=null,this.outgoingEvents=new yB,this.eventDispatcher=new vB(s=>this._renderOnce(s)),this.eventDispatcher.addEventHandler(this),this.context=new _B(this.partName,this.eventDispatcher,t),this.viewParts=[],this.createViewParts(),this.cursor=r.createInstance(Ev,this.domNode,this.center.container),this._register(this.cursor),this.setLayout(this.domNode.clientWidth,this.domNode.clientHeight),this._registerListener()}_registerListener(){this._register(this.configurationService.onDidChangeConfiguration(this._handleConfigurationChanged.bind(this)))}_handleConfigurationChanged(i){i.affectedKeys.includes("chart.axis.leftAxis")&&this.setLayout(this.domNode.clientWidth,this.domNode.clientHeight)}createViewParts(){let i=Le("div.axis-stage").appendTo(this.domNode).position("0","0","0",`calc(100% - ${qe}px)`).getHTMLElement();this.axis=this.instantiationService.createInstance(cv,this.context,`${this.context.name}.axis`,i),this.viewParts.push(this.axis);let e=Le("div.center-stage").tabindex(0).appendTo(this.domNode).position(0,qe,0,qe).getHTMLElement();this.center=this.instantiationService.createInstance(Sv,this.context,`${this.context.name}.center`,e),this.viewParts.push(this.center);let t=Le("div.left-stage").appendTo(this.domNode).position("0","","0","0").getHTMLElement();this.leftAxis=this.instantiationService.createInstance(dv,this.context,`${this.context.name}.left-axis`,t),this.viewParts.push(this.leftAxis),this.legend=this.instantiationService.createInstance(hv,this.context,e),this.viewParts.push(this.legend),this.context.partName==="main"&&(this.viewParts.push(this.instantiationService.createInstance(Av,this.context,e)),this.viewParts.push(this.instantiationService.createInstance(Dv,this.context,this.domNode))),this.contentWidgets=new cB(this.context,this.domNode),this.viewParts.push(this.contentWidgets),document.body.appendChild(this.contentWidgets.overflowingContentWidgetsDomNode)}setLayout(i,e){this.configurationService.inspect("chart.axis.leftAxis").value?(this.center.container.style.left=qe+"px",rs(this.leftAxis.container),this.leftAxis.container.style.width=qe+"px",this.center.layout(i-2*qe,e),this.axis.layout(qe,e),this.leftAxis.layout(qe,e)):(this.center.container.style.left="0",Gr(this.leftAxis.container),this.center.layout(i-qe,e),this.axis.layout(qe,e),this.leftAxis.layout(0,e))}onMouseMove(i){this.cursor.x=i.x,this.cursor.y=i.y;let e=i.targetType;return e===$t.SERIES||e===$t.DRAWING||e===$t.ORDER?this.cursor.cursorStyle!==Di.Pointer&&(this.cursor.saveCursorStyle(),this.cursor.cursorStyle=Di.Pointer):this.cursor.restoreCursorStyle(),this.outgoingEvents.onViewMouseMove(i),!0}onMouseDown(i){return this.outgoingEvents.onViewMouseDown(i),this.cursor.setSelection(i.target),!1}onMouseUp(i){return this.outgoingEvents.onViewMouseUp(i),!1}onPanstart(i){return this.cursor.saveCursorStyle(),this.cursor.cursorStyle=Di.Grabbing,this.outgoingEvents.onViewPanStart(void 0),!1}onPanRequest(i){return this.cursor.x=i.x,this.cursor.y=i.y,this.viewModel.pan(i.dx,i.domainX,i.dy,i.domainY),this.outgoingEvents.onViewPan(void 0),!0}onPanEnd(i){return this.cursor.restoreCursorStyle(),this.outgoingEvents.onViewPanEnd(void 0),!0}onZoomStart(i){return this.outgoingEvents.onViewZoomStart(void 0),!1}onZoomRequest(i){const{factorX:e,factorY:t}=i;if(e===0&&t===0)return!1;if(e){let r=this.viewModel.timeScale;if(e<1&&r.columnWidth>=50||e>1&&r.columnWidth<=1)return!1}return this.viewModel.zoom(i),this.outgoingEvents.onViewZoom(void 0),!0}onZoomEnd(i){return this.outgoingEvents.onViewZoomEnd(void 0),!0}fromWidgets(i){return ds(i,this.contentWidgets.overflowingContentWidgetsDomNode)?$t.CONTENT_WIDGET:$t.EMPTY}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),document.body.removeChild(this.contentWidgets.overflowingContentWidgetsDomNode),this.eventDispatcher.removeEventHandler(this),this.outgoingEvents.dispose();for(let i=0,e=this.viewParts.length;i<e;i++)this.viewParts[i].dispose();this.viewParts=[],super.dispose()}_renderOnce(i){let e=BS(i);return this._scheduleRender(),e}_scheduleRender(){this._renderNow(null)}_renderNow(i){BS(()=>this._actualRender(i))}_getViewPartsToRender(i){let e=[],t=0;for(let r=0,n=this.viewParts.length;r<n;r++){let s=this.viewParts[r];s.shouldRender(i)&&(e[t++]=s)}return e}_actualRender(i){let e=this._getViewPartsToRender(i),t={startIndex:0,endIndex:0,fromY:0,toY:0};this.contentWidgets.shouldRender()&&this.contentWidgets.onBeforeRender(t);let r={width:0,height:0,viewportData:t};for(let n=0,s=e.length;n<s;n++)e[n].prepareRender(r);for(let n=0,s=e.length;n<s;n++){let o=e[n];o.render(r),o.onDidRender()}}render(i,e){if(i)for(let t=0,r=this.viewParts.length;t<r;t++)this.viewParts[t].forceShouldRender();this._renderNow(e)}addContentWidget(i){this.contentWidgets.addWidget(i.widget),this.layoutContentWidget(i),this._scheduleRender()}layoutContentWidget(i){let e=i.position?i.position.position:null,t=i.position?i.position.preference:null;this.contentWidgets.setWidgetPosition(i.widget,e,t),this._scheduleRender()}removeContentWidget(i){this.contentWidgets.removeWidget(i.widget),this._scheduleRender()}insertShape(i){this.center.backgroundLayer.appendChildren(i),this.cursor.setSelection(i)}removeShape(i){this.center.backgroundLayer.removeChildren(i),this.cursor.remove(i)}updateSeries(){this.center.updateSeries()}getInternalEventBus(){return this.outgoingEvents}serialize(){return this.center.serialize()}};Tv=XF([kS(3,Nt),kS(4,it)],Tv);function BS(i){try{return i()}catch(e){Pl(e)}}function ZF(i,e,t){let r=-1,n=Math.max(0,Math.ceil((e-i)/t))|0,s=new Array(n);for(;++r<n;)s[r]=i+r*t;return s}const QF=Math.sqrt(50),JF=Math.sqrt(10),eU=Math.sqrt(2);function tU(i,e,t){let r=iU(i,e,t);return ZF(Math.ceil(i/r)*r,Math.floor(e/r)*r+r/2,r)}function iU(i,e,t){let r=Math.abs(e-i)/Math.max(0,t),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;return s>=QF?n*=10:s>=JF?n*=5:s>=eU&&(n*=2),e<i?-n:n}const rU=30,nU=56;function sU(i,e,t){let r=Math.floor(t/rU),n=Math.ceil(t/nU),s=Math.round((r+n)/2);return tU(i,e,s)}class du extends St{constructor(e){super(e),this._onDomainChanged=new ve,this.onDomainChanged=this._onDomainChanged.event,this._onRangeChanged=new ve,this.onRangeChanged=this._onRangeChanged.event,this._domain=[NaN,NaN],this._range=[NaN,NaN]}get domain(){return this._domain}get range(){return this._range}set domain(e){this._domain=e,this._refreshTicks(),this._onDomainChanged.fire(e)}set range(e){this._range=e,this._refreshTicks(),this._onRangeChanged.fire(e)}_refreshTicks(){this.ticks=sU(this.domain[0],this.domain[1],Math.abs(this.range[1]-this.range[0])).map(e=>({value:e}))}toValue(e){let t=this.domain[1]-this.domain[0],r=this.range[1]-this.range[0];return(e-this.range[0])/r*t+this.domain[0]}toPosition(e){let t=this.domain[1]-this.domain[0],r=this.range[1]-this.range[0];return(e-this.domain[0])/t*r+this.range[0]}equals(e){return this.domain[0]===e.domain[0]&&this.domain[1]===e.domain[1]&&this.range[0]===e.range[0]&&this.range[1]===e.range[1]}get snapshot(){return{domain:[this.domain[0],this.domain[1]],range:[this.range[0],this.range[1]]}}dispose(){this._onRangeChanged.dispose(),this._onDomainChanged.dispose()}}var oU=Object.defineProperty,aU=Object.getOwnPropertyDescriptor,tg=(i,e,t,r)=>{for(var n=r>1?void 0:r?aU(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&oU(e,t,n),n},ig=(i,e)=>(t,r)=>e(t,r,i);let Cv=class extends du{constructor(i,e){super(i),this.chartService=e,this.domain=this.dataView.getExtent()}get dataView(){return this.chartService.getDataView(this.dataViewName)}refresh(){this.domain=this.dataView.getExtent()}setDomain(i,e){this.domain=[i,e]}};Cv=tg([ig(1,Ie)],Cv);let u0=class extends du{constructor(i,e){super(i),this.chartService=e,this.domain=[0,this.dataView.getExtent()[1]]}get dataView(){return this.chartService.getDataView(this.dataViewName)}refresh(){this.domain=[0,this.dataView.getExtent()[1]]}setDomain(i,e){this.domain=[0,Math.max(i,e)]}};u0=tg([ig(1,Ie)],u0);let Pv=class extends du{constructor(i,e){super(i),this.chartService=e,this.origin=this.dataView.origin,this.domain=this._getDomain()}_getDomain(){let i=this.chartService.getSeriesInParts(this.partName);if(!i.length)return[NaN,NaN];let e=[];for(let r of i){let n=new St(r.name);if(n.seriesName==="main"||n.seriesName.startsWith("compare")){let s=r.getExtent();if(isFinite(s[0])&&isFinite(s[1])){let o,a;r.compareOrigin?(o=Math.abs(s[0]-r.compareOrigin),a=Math.abs(s[1]-r.compareOrigin)):(o=Math.abs(s[0]-r.origin),a=Math.abs(s[1]-r.origin));let l=Math.max(o,a);l||(l=r.origin*.01),e.push(l)}}}if(!e.length)return[NaN,NaN];let t=Math.max.apply(null,e);return[this.origin-t,this.origin+t]}_refreshTicks(){let i=(this.domain[1]-this.origin)/3;this.ticks=[];for(let e=-3;e<=3;e++){let t=this.origin+e*i,r=(t-this.origin)/this.origin*100;this.ticks.push({value:t,label:r.toFixed(2)+"%"})}}get dataView(){return this.chartService.getDataView(this.dataViewName)}refresh(){this.domain=this._getDomain()}setDomain(i,e){this.refresh()}};Pv=tg([ig(1,Ie)],Pv);let FS=class extends du{constructor(i,e,t){super(i),this.chartService=t,this.origin=e,this.domain=this.dataView.getExtent()}_refreshTicks(){super._refreshTicks(),this.ticks.forEach(i=>{i.label=((i.value-this.origin)/this.origin*100).toFixed(2)+"%"})}get dataView(){return this.chartService.getDataView(this.dataViewName)}refresh(){this.domain=this.dataView.getExtent()}setDomain(i,e){this.refresh()}};FS=tg([ig(2,Ie)],FS);var lU=Object.defineProperty,uU=Object.getOwnPropertyDescriptor,hU=(i,e,t,r)=>{for(var n=r>1?void 0:r?uU(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&lU(e,t,n),n},Qd=(i,e)=>(t,r)=>e(t,r,i);let Iv=class{constructor(i,e,t,r,n){this.instantiationService=e,this.configurationService=t,this.chartService=r,this.chart=n,this.leftWidth=0,this.rightWidth=qe,this.name=new St(i),this.name.partName==="volume"?this.priceScale=this.instantiationService.createInstance(u0,this.name.name):this.name.partName==="main"&&(this.chartService.dataRange===Te.Intraday||this.chartService.dataRange===Te.FiveDay)&&(this.priceScale=this.instantiationService.createInstance(Pv,this.name.name)),this.priceScale||(this.priceScale=this.instantiationService.createInstance(Cv,this.name.name)),this.toDispose=[],this.toDispose.push(this.priceScale),this.toDispose.push(this.timeScale.onDomainChanged(this.update.bind(this))),this.toDispose.push(this.configurationService.onDidChangeConfiguration(this._handleConfigurationChanged.bind(this)))}_handleConfigurationChanged(i){i.affectedKeys.includes("chart.axis.leftAxis")&&this._calculateWidth()}_calculateWidth(){this.configurationService.inspect("chart.axis.leftAxis").value?this.leftWidth=qe:this.leftWidth=0,this.centerWidth=this.totalWidth-this.leftWidth-this.rightWidth}get timeScale(){return this.chartService.timeScale}get dataView(){return this.chartService.getDataView(this.name.dataViewName)}get priceScaleMode(){return this.name.partName==="volume"?bt.AutoFit:this.chartService.priceScaleMode}get timeScaleMode(){return this.chartService.timeScaleMode}_resetPriceScaleDomain(i){let e=this.timeScale.snap(0),t=this.timeScale.snap(i),r=this.dataView.getExtent(e,t);this.priceScale.setDomain(r[0],r[1])}setPriceScaleRange(i,e){this.priceScale instanceof u0?this.priceScale.range=[i,e]:this.priceScale.range=[i-3,e+23]}changeViewport(i,e){i!==this.leftWidth+this.centerWidth+this.rightWidth&&(this.totalWidth=i,this._calculateWidth(),this.update()),e!==this.height&&(this.height=e,this.setPriceScaleRange(this.height,0))}pan(i,e,t,r){if(this.timeScaleMode!==bt.Locked&&i){let n=Math.round(i/this.timeScale.columnWidth);this.timeScale.domain=[e[0]-n,e[1]-n]}if(this.priceScaleMode===bt.Normal&&t){let n=this.priceScale.toValue(0),s=this.priceScale.toValue(t)-n;this.priceScale.domain=[r[0]-s,r[1]-s]}else(this.priceScaleMode===bt.AutoFit||this.name.partName==="volume")&&this._resetPriceScaleDomain(this.centerWidth)}zoom(i){const{factorX:e,factorY:t}=i;if(e){let r=this.timeScale,n=i.centerX,s=r.range.map(o=>n+(o-n)*e).map(o=>r.toValue(o));r.domain=[s[0],s[1]],this._resetPriceScaleDomain(this.centerWidth)}if(t){let r=this.priceScale,n=i.centerY,s=r.range.map(o=>n+(o-n)*t).map(o=>r.toValue(o));this.priceScale.domain=[s[0],s[1]]}}update(){this._resetPriceScaleDomain(this.centerWidth)}dispose(){ye(this.toDispose),this.toDispose.length=0}};Iv=hU([Qd(1,Nt),Qd(2,it),Qd(3,Ie),Qd(4,gt)],Iv);var cU=Object.defineProperty,dU=Object.getOwnPropertyDescriptor,fU=(i,e,t,r)=>{for(var n=r>1?void 0:r?dU(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&cU(e,t,n),n},y_=(i,e)=>(t,r)=>e(t,r,i);let Tl=class extends ar.Widget{constructor(i,e,t,r){super({node:Tl.createNode(i)}),this.name=i,this.chartService=t,this.toDispose=[],this._chartFocus=new kx,this._chartWidgetFocus=new kx,this._onMouseDown=new ve,this.onMouseDown=this._onMouseDown.event,this._onMouseMove=new ve,this.onMouseMove=this._onMouseMove.event,this._onMouseUp=new ve,this.onMouseUp=this._onMouseUp.event,this._onClick=new ve,this.onClick=this._onClick.event,this._onPanStart=new ve,this.onPanStart=this._onPanStart.event,this._onPan=new ve,this.onPan=this._onPan.event,this._onPanEnd=new ve,this.onPanEnd=this._onPanEnd.event,this._onZoomStart=new ve,this.onZoomStart=this._onZoomStart.event,this._onZoom=new ve,this.onZoom=this._onZoom.event,this._onZoomEnd=new ve,this.onZoomEnd=this._onZoomEnd.event,this._onResize2=new ve,this.onResize2=this._onResize2.event,this._onShapeHover=new ve,this.onShapeHover=this._onShapeHover.event,this._onDidChangeSelection=new tt.Signal(this),this.size=new Ci(0,0);let n=i.split(".");this.timelineDataSourceName=n[0],this.partName=n[1],this.seriesName=n[2],this.blockName=n[3],this.dataScourceName=n[2]==="main"?n[0]:n[2],this.dataViewName=`${n[0]}.${n[1]}.${n[2]}`,this.contextKeyService=r.createScoped(this.node),this.toDispose.push(this.contextKeyService),this.inDrawingMode=Cf.InDrawingMode.bindTo(this.contextKeyService),this.inTransformMode=jt.inTransformMode.bindTo(this.contextKeyService),this.chartFocus=jt.focus.bindTo(this.contextKeyService),this.chartReadonly=jt.readOnly.bindTo(this.contextKeyService),this.chartReadonly=jt.readOnly.bindTo(this.contextKeyService),this.hasMultipleSelections=jt.hasMultipleSelections.bindTo(this.contextKeyService),this.hasNonEmptySelection=jt.hasNonEmptySelection.bindTo(this.contextKeyService),this.hasSeriesSelection=jt.hasSeriesSelection.bindTo(this.contextKeyService),this.hasDrawingSelection=jt.hasDrawingSelection.bindTo(this.contextKeyService),this.hasOrderSelection=jt.hasOrderSelection.bindTo(this.contextKeyService);let s=new Qh;s.set(mr,this.contextKeyService),s.set(gt,this),this._instantiationService=e.createChild(s),this.createViewModel(),this.createView(),this.contentWidgets={},this._contributions={};let o=this._getContributions();for(let a=0,l=o.length;a<l;a++){let c=o[a];try{let h=this._instantiationService.createInstance(c);this._contributions[h.id]=h}catch(h){Pl(h)}}this.toDispose.push(this._onMouseDown,this._onMouseUp,this._onMouseMove,this._onPanStart,this._onPan,this._onPanEnd,this._onZoomStart,this._onZoom,this._onZoomEnd,this._onResize2,this._onClick,this._chartFocus,this._chartWidgetFocus,this._onShapeHover)}get onFocus(){return this._chartFocus.onDidChangeToTrue}get onBlur(){return this._chartFocus.onDidChangeToFalse}get onDidChangeSelection(){return this._onDidChangeSelection}static createNode(i){return Le(`div.nila-chart.chart-part.${i}-part`).style("position","relative").tabindex(0).getHTMLElement()}createViewModel(){this.viewModel=this._instantiationService.createInstance(Iv,this.name),this.toDispose.push(this.viewModel)}createView(){this.view=this._instantiationService.createInstance(Tv,this.node,this.name,this.viewModel),this.toDispose.push(this.view),this.toDispose.push(this.cursor.onDidChangeSelection(this._updateFromSelection.bind(this))),this.toDispose.push(me(this.node,ue.MOUSE_OVER,this.handleMouseEnter.bind(this))),this.toDispose.push(me(this.node,ue.MOUSE_OUT,this.handleMouseLeave.bind(this))),this.toDispose.push(me(this.node,ue.FOCUS,this.handleFocus.bind(this))),this.toDispose.push(me(this.node,ue.BLUR,this.handleBlur.bind(this),!0));const i=this.view.getInternalEventBus();i.onViewMouseUp=()=>this._onMouseUp.fire(),i.onViewMouseMove=e=>{this.chartService.currentActivePart!==this&&(this.chartService.currentActivePart=this),this._onMouseMove.fire(e)},i.onViewMouseDown=e=>this._onMouseDown.fire(e),i.onViewZoomStart=()=>{this._onZoomStart.fire()},i.onViewZoom=()=>this._onZoom.fire(),i.onViewZoomEnd=()=>{this.inTransformMode.set(!1),this._onZoomEnd.fire()},i.onViewPanStart=()=>{this.inTransformMode.set(!0),this._onPanStart.fire()},i.onViewPan=()=>{this._onPan.fire()},i.onViewPanEnd=()=>{this.inTransformMode.set(!1),this._onPanEnd.fire()}}get cursor(){return this.view.cursor}select(i){return null}handleMouseEnter(i){this.chartService.currentActivePart!==this&&(this.chartService.currentActivePart=this)}handleMouseLeave(i){this.chartService.currentActivePart===this&&(this.chartService.currentActivePart=null),this.cursor.mouseTarget=$t.EMPTY}handleFocus(){this._chartFocus.setValue(!0),this._updateFromFocus(!0)}handleBlur(){let i=this.hasNonEmptySelection.get();this.inDrawingMode.get()||this.cursor.setSelections([]),this._chartFocus.setValue(!1),this.cursor.mouseTarget=$t.EMPTY,this._updateFromFocus(!1),i&&this.redraw(!0)}_updateFromFocus(i){this.chartFocus.set(i)}onResize(i){this._fit(i)}onFitRequest(){this._fit(this.node.getBoundingClientRect())}_fit(i){const{width:e,height:t}=i;this.size=new Ci(e,t),this.viewModel.changeViewport(e,t),this.view.setLayout(e,t),this._onResize2.fire(),this.redraw(!0)}invokeWithinContext(i){return this._instantiationService.invokeFunction(i)}getContribution(i){return this._contributions[i]||null}_getContributions(){return bf.getChartContributions()}_getActions(){return bf.getChartActions()}insertShape(i){this.view.insertShape(i)}removeShape(i){this.view.removeShape(i)}_updateFromSelection(i){if(!i.length)this.hasMultipleSelections.reset(),this.hasNonEmptySelection.reset(),this.hasOrderSelection.reset(),this.hasSeriesSelection.reset(),this.hasDrawingSelection.reset();else{this.hasMultipleSelections.set(i.length>1),this.hasNonEmptySelection.set(i.length>=1);let e=i[0];e.type==="series"?(this.hasSeriesSelection.set(!0),this.hasDrawingSelection.set(!1),this.hasOrderSelection.set(!1)):e.type==="order"?(this.hasOrderSelection.set(!0),this.hasSeriesSelection.set(!1),this.hasDrawingSelection.set(!1)):(this.hasDrawingSelection.set(!0),this.hasSeriesSelection.set(!1),this.hasOrderSelection.set(!1))}this._onDidChangeSelection.emit(this.cursor.getSelections())}addContentWidget(i){let e={widget:i,position:i.getPosition()};this.contentWidgets.hasOwnProperty(i.getId())&&console.warn("Overwriting a content widget with the same id."),this.contentWidgets[i.getId()]=e,this.view&&this.view.addContentWidget(e)}layoutContentWidget(i){let e=i.getId();if(this.contentWidgets.hasOwnProperty(e)){let t=this.contentWidgets[e];t.position=i.getPosition(),this.view&&this.view.layoutContentWidget(t)}}removeContentWidget(i){let e=i.getId();if(this.contentWidgets.hasOwnProperty(e)){let t=this.contentWidgets[e];delete this.contentWidgets[e],this.view&&this.view.removeContentWidget(t)}}redraw(i=!1){this.view.render(i)}fitData(){this.viewModel.update(),this._onResize2.fire()}updateSeries(){this.view.updateSeries()}serialize(){return{name:this.partName,series:this.view.serialize(),height:this.viewModel.height}}dispose(){let i=Object.keys(this._contributions);for(let e=0,t=i.length;e<t;e++){let r=i[e];this._contributions[r].dispose()}this._contributions={},ye(this.toDispose),this.toDispose.length=0,super.dispose()}};Tl=fU([y_(1,Nt),y_(2,Ie),y_(3,mr)],Tl);var pU=Object.defineProperty,mU=Object.getOwnPropertyDescriptor,gU=(i,e,t,r)=>{for(var n=r>1?void 0:r?mU(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&pU(e,t,n),n},US=(i,e)=>(t,r)=>e(t,r,i);let Ov=class extends ar.Widget{constructor(i,e,t){super({node:Tl.createNode(i)}),this.name=i,this.chartService=e,this.configurationService=t;let r=i.split(".");this.timelineDataSourceName=r[0],this.partName=r[1],this.seriesName=r[2],this.blockName=r[3],this.dataScourceName=r[2]==="main"?r[0]:r[2],this.dataViewName=`${r[0]}.${r[1]}.${r[2]}`,this.toDispose=[],this.createStage(),this.toDispose.push(this.configurationService.onDidChangeConfiguration(this.handleConfigurationChanged.bind(this)))}static createNode(i){return Le(`div.chart-part.${i}-part`).style("position","relative").getHTMLElement()}createStage(){let i=Le("div.left-stage").appendTo(Le(this.container)).position(0,qe,0,0),e=Le("div.center-stage").appendTo(Le(this.container)).position(0,qe,0,0),t=Le("div.axis-stage").appendTo(Le(this.container)).position("0","0","0",`calc(100% - ${qe}px)`);this.left=this.chartService.instantiationService.createInstance(av,`${this.name}.center`,e),this.leftEl=i.getHTMLElement(),this.centerEl=e.getHTMLElement(),this.rightEl=t.getHTMLElement(),this.configurationService.inspect("chart.axis.leftAxis").value?(this.leftEl.style.width=qe+"px",this.centerEl.style.left=qe+"px"):(this.leftEl.style.width="0",this.centerEl.style.left="0")}get timeScale(){return this.chartService.timeScale}get container(){return this.node}get dataProvider(){return this.chartService.dataProvider}handleConfigurationChanged(i){i.affectedKeys.includes("chart.axis.leftAxis")&&this.setLayout(this.container.clientWidth,this.container.clientHeight)}setLayout(i,e){this.size=new Ci(i,e);let t=i-qe;this.configurationService.inspect("chart.axis.leftAxis").value?(t-=qe,this.leftEl.style.width=qe+"px",this.centerEl.style.left=qe+"px"):(this.leftEl.style.width="0",this.centerEl.style.left="0"),this.left.layout(new Ci(t,e))}onResize(i){this.setLayout(i.width,i.height)}redraw(){let i=this.chartService.needFullRedraw;this.left.redraw(i)}dispose(){ye(this.toDispose),super.dispose()}};Ov=gU([US(1,Ie),US(2,it)],Ov);function _U(i){return i?i[0]:void 0}function Jd(i){let e=i?i.length:0;return e?i[e-1]:void 0}const Mv=i=>new Date(i).getFullYear(),Nv=i=>Math.floor(new Date(i).getMonth()/6),Rv=i=>Math.floor(new Date(i).getMonth()/3),Lv=i=>new Date(i).getMonth(),Fs=i=>new Date(i).getDate(),_c=i=>new Date(i).getHours(),kv=i=>Math.floor(new Date(i).getMinutes()/5),vc=(i,e)=>Mv(i)===Mv(e),KS=(i,e)=>vc(i,e)?Nv(i)===Nv(e):!1,HS=(i,e)=>vc(i,e)?Rv(i)===Rv(e):!1,Bv=(i,e)=>vc(i,e)?Lv(i)===Lv(e):!1,h0=(i,e)=>Bv(i,e)?Fs(i)===Fs(e):!1,vU=(i,e)=>h0(i,e)?_c(i)===_c(e):!1,zS=(i,e)=>{if(!h0(i,e))return!1;let t=_c(i),r=_c(e);return t===r||r===15&&t===14},jS=(i,e)=>vU(i,e)?kv(i)===kv(e):!1;class yU{constructor(){this.allDivided=e=>()=>{const t=Jd(this.layers);let r=!0;return t.forEach(n=>{r=r&&(n.count===1||e(n.start,n.end))}),r},this.allUnder=e=>()=>{const t=Jd(this.layers);let r=!0;return t.forEach(n=>{r=r&&Fs(n.end)-Fs(n.start)<=e}),r},this.allDividedByYear=this.allDivided(vc),this.allDividedByHalfYear=this.allDivided(KS),this.allDividedBySeason=this.allDivided(HS),this.allDividedByMonth=this.allDivided(Bv),this.allDividedByDate=this.allDivided(h0),this.allDividedByHour=this.allDivided(zS),this.allDividedByFiveMinutes=this.allDivided(jS),this.allDividedByInterval=this.allDividedByFiveMinutes,this.divideIntoTwoHalf=(e,t,r)=>n=>{let s=n.startIndex+Math.floor(n.count/2),o=e(this.bars[s]),a,l;for(a=s;a>0;a--){let u=e(this.bars[a]);if(t(u,o))break}for(l=s;l<n.endIndex;l++){let u=e(this.bars[l]);if(t(u,o))break}s=l-s<s-a?l-1:a;let c={start:n.start,startIndex:n.startIndex,startInterval:n.startInterval,end:this.bars[s],endIndex:s,count:s-n.startIndex+1,endInterval:r,left:null,right:null},h={start:this.bars[s+1],startIndex:s+1,startInterval:r,end:n.end,endIndex:n.endIndex,endInterval:n.endInterval,count:n.endIndex-s,left:null,right:null};return[c,h]},this.divideIntoTwoHalfByYear=this.divideIntoTwoHalf(Mv,(e,t)=>e!==t,ce.Year),this.divideIntoTwoHalfByHalfYear=this.divideIntoTwoHalf(Nv,(e,t)=>e!==t,ce.Month),this.divideIntoTwoHalfBySeason=this.divideIntoTwoHalf(Rv,(e,t)=>e!==t,ce.Month),this.divideIntoTwoHalfByMonth=this.divideIntoTwoHalf(Lv,(e,t)=>e!==t,ce.Month),this.divideIntoTwoHalfByDate=this.divideIntoTwoHalf(Fs,(e,t)=>e!==t,ce.Day),this.divideIntoTwoHalfByHour=this.divideIntoTwoHalf(_c,(e,t)=>e!==t,ce.Hour),this.divideIntoTwoHalfByFiveMinutes=this.divideIntoTwoHalf(kv,(e,t)=>e!==t,ce.M),this.divideBy=(e,t)=>()=>Jd(this.layers).reduce((r,n)=>(e(n.start,n.end)?r.push(n):r=r.concat(t(n)),r),[]),this.divideByYear=this.divideBy(vc,this.divideIntoTwoHalfByYear),this.divideByHalfYear=this.divideBy(KS,this.divideIntoTwoHalfByHalfYear),this.divideBySeason=this.divideBy(HS,this.divideIntoTwoHalfBySeason),this.divideByMonth=this.divideBy(Bv,this.divideIntoTwoHalfByMonth),this.divideByDate=this.divideBy(h0,this.divideIntoTwoHalfByDate),this.divideByHour=this.divideBy(zS,this.divideIntoTwoHalfByHour),this.divideByFiveMinutes=this.divideBy(jS,this.divideIntoTwoHalfByFiveMinutes),this.divideTwoPart=e=>this.divideBy((t,r)=>Fs(r)-Fs(t)<=e,this.divideIntoTwoHalfByDate),this.layers=[],this.bars=[]}prepareTicks(e){if(!e||!e.length||e.length<30)return;this.bars=e.map(r=>r.time),this.layers=[];const t=[{start:_U(this.bars),startIndex:0,startInterval:ce.Day,end:Jd(this.bars),endIndex:this.bars.length-1,endInterval:ce.Day,count:this.bars.length}];this.layers=[t],this._divide()}_divide(){let e=0;for(;!this.allDividedByInterval()&&e<1e5;){if(e=e+1,!this.allDividedByYear()){this.layers.push(this.divideByYear());continue}if(!this.allDividedByHalfYear()){this.layers.push(this.divideByHalfYear());continue}if(!this.allDividedBySeason()){this.layers.push(this.divideBySeason());continue}if(!this.allDividedByMonth()){this.layers.push(this.divideByMonth());continue}if(!this.allUnder(15)()){this.layers.push(this.divideTwoPart(15)());continue}if(!this.allUnder(8)()){this.layers.push(this.divideTwoPart(8)());continue}if(!this.allUnder(4)()){this.layers.push(this.divideTwoPart(4)());continue}if(!this.allDividedByDate()){this.layers.push(this.divideByDate());continue}if(!this.allDividedByHour()){this.layers.push(this.divideByHour());continue}this.allDividedByFiveMinutes()||this.layers.push(this.divideByFiveMinutes())}}calculateTicks(e,t){if(!t)return[];if(!t.length)return[];if(t.length<30)return[];if(!this.layers)return[];let[r,n]=e;const s=t[0].i;r=Math.max(0,Math.ceil(r-s)),n=Math.min(t.length,Math.floor(n-s));let o=this._walk(r,n),a=[];return o.length>=4&&o.forEach((l,c)=>{if(c===0)return;let h=l.startIndex,u=t[h];u&&a.push({value:u.time,index:h+s,type:l.startInterval})}),a}_walk(e,t){let r=[];for(let n=0,s=this.layers.length;n<s;n++){let o=this.layers[n],a=o.length;for(let l=0;l<a;l++)if(o[l].endIndex>=e){for(let c=a-1;c>-1;c--)if(o[c].startIndex<=t){let h=o.slice(l,c+1);if(r=h,h.length>4)return h}}}return r}}var xU=Object.defineProperty,wU=Object.getOwnPropertyDescriptor,hD=(i,e,t,r)=>{for(var n=r>1?void 0:r?wU(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&xU(e,t,n),n},cD=(i,e)=>(t,r)=>e(t,r,i);let Fv=class extends du{constructor(i,e){super(i),this.chartService=e,this.firstIndex=-1,this.lastIndex=-1,this.ticksHelper=new yU;let t=this.dataView.getDomain();this.firstIndex=t[0],this.lastIndex=t[1],this.domain=[t[0]-.5,t[1]+.5],this.ticks=[],this.onDomainChanged(()=>{this.resetIndex()})}resetIndex(){if(isFinite(this.domain[0])&&isFinite(this.domain[1])){let i=this.dataView.getDomain();this.firstIndex=i[0],this.lastIndex=Math.min(Math.floor(this.domain[1]),i[1])}}move(i){if(isFinite(this.domain[0])&&isFinite(this.domain[1])){const[e,t]=this.domain;this.domain=[e+i,t+i]}}resetDomain(i=0){let e=this.dataView.getDomain();this.domain=[e[0]-.5,e[1]+.5+i]}_refreshTicks(){let i=this.chartService.getDataSource(this.name);i&&(this.ticksHelper.prepareTicks(i.points),this.ticks=this.ticksHelper.calculateTicks(this.domain,i.points))}get columnWidth(){let i=Math.abs(this.range[0]-this.range[1]),e=Math.abs(this.domain[0]-this.domain[1]);return e?i/e:0}get itemWidth(){return this.columnWidth*.8}get dataView(){return this.chartService.getDataView(`${this.timelineDataSourceName}.main.main`)}includes(i){return i<=this.lastIndex&&i>=this.firstIndex}snap(i){return Math.round(this.toValue(i))}equals(i){return this.domain[0]===i.domain[0]&&this.domain[1]===i.domain[1]&&this.range[0]===i.range[0]&&this.range[1]===i.range[1]&&this.firstIndex===i.firstIndex&&this.lastIndex===i.lastIndex&&this.columnWidth===i.columnWidth&&this.itemWidth===i.itemWidth}get snapshot(){return{domain:[this.domain[0],this.domain[1]],range:[this.range[0],this.range[1]],firstIndex:this.firstIndex,lastIndex:this.lastIndex,columnWidth:this.columnWidth,itemWidth:this.itemWidth}}};Fv=hD([cD(1,Ie)],Fv);let Uv=class extends du{constructor(i,e){super(i),this.chartService=e,this.firstIndex=-1,this.lastIndex=-1,this.ticks=[];let t=qr.get(this.name),r=this.dataView.getDomain();this.firstIndex=0,this.lastIndex=r[1],this.columnCount=t.domain[1]+1,this.domain=[t.domain[0]-.5,t.domain[1]+.5],this.onDomainChanged(()=>{this.resetIndex()})}resetIndex(){let i=this.dataView.getDomain();this.firstIndex=0,this.lastIndex=i[1]}move(i){this.lastIndex+=i}resetDomain(i=0){let e=qr.get(this.name).domain;this.domain=[e[0]-.5,e[1]+.5]}_refreshTicks(){let i=qr.get(this.name);this.ticks=i.ticks.slice()}get columnWidth(){let i=Math.abs(this.range[0]-this.range[1]);return this.columnCount?i/this.columnCount:0}get itemWidth(){return this.columnWidth*.8}get dataView(){return this.chartService.getDataView(`${this.timelineDataSourceName}.main.main`)}includes(i){return i<=this.lastIndex&&i>=this.firstIndex}snap(i){return Math.round(this.toValue(i))}equals(i){return this.domain[0]===i.domain[0]&&this.domain[1]===i.domain[1]&&this.range[0]===i.range[0]&&this.range[1]===i.range[1]&&this.firstIndex===i.firstIndex&&this.lastIndex===i.lastIndex&&this.columnWidth===i.columnWidth&&this.itemWidth===i.itemWidth}get snapshot(){return{domain:[this.domain[0],this.domain[1]],range:[this.range[0],this.range[1]],firstIndex:this.firstIndex,lastIndex:this.lastIndex,columnWidth:this.columnWidth,itemWidth:this.itemWidth}}};Uv=hD([cD(1,Ie)],Uv);var ts=(i=>(i.New="New",i.Update="Update",i.Append="Append",i.Prepend="Prepend",i.ReWrite="Rewrite",i.Insert="Insert",i))(ts||{});class ff{constructor(e=[]){this.points=e,this.dependents=[]}get(e){return this.points[e]}getInv(e){return this.points[this.points.length+e]}first(){return this.points[0]}last(){return this.points[this.points.length-1]}get dependencies(){return[]}clear(){this.points.length=0}update(e,t){let r=Array.isArray(e)?e:[e];r=r.sort((o,a)=>o.time-a.time);let n;if(!r.length&&!t)return;t&&(this.points.length=0);let s=0;if(!this.points.length)this.points=r.slice().map((o,a)=>({...o,i:a})),n=ts.New;else{let o=this.points[0],a=this.points[this.points.length-1],l=r[0],c=r[r.length-1];if(l.time>a.time){n=ts.Append;let h=this.points.length,u=this.points[h-1].i,p=r.map((d,f)=>({...d,i:u+f+1}));this.points.push(...p),s=p.length}else if(c.time<o.time){n=ts.Prepend;let h=this.points[0].i,u=r.length,p=r.map((d,f)=>({...d,i:h-u+f}));this.points=p.concat(this.points)}else{n=ts.Update;for(let d=0,f=r.length;d<f;d++){let m=r[d],g=cs(this.points,_=>_.time===m.time);if(g>-1){let _=this.points[g];this.points[g]={..._,...m}}else{s++;let _=cs(this.points,v=>v.time>m.time);_>-1?this.points.splice(_,0,m):this.points.push(m)}}let h,u;for(let d=0,f=this.points.length;d<f;d++)At(this.points[d].i)||(u=d,h=this.points[d].i);let p=h-u;for(let d=0,f=this.points.length;d<f;d++)this.points[d].i=d+p}}return t&&(n=ts.ReWrite),s||n}}function bU(i){let e=[],t={};function r(n,s=[]){let o=n.id;if(t[o])return;let a=Array.isArray(s)?s:[];a.push(n),t[o]=!0,n.dependents.forEach(function(l){const c=l.id;if(a.indexOf(l)>=0)throw new Error("Circular chain found: "+o+" must be before "+c+" due to a direct order specification, but "+c+" must be before "+o+" based on other specifications.");r(l,a.slice())}),e.unshift(n)}return Object.keys(i).forEach(n=>r(i[n])),e}class SU{constructor(){this.views={},this.sources={},this.nodes={}}sort(){try{this.list=bU(this.nodes)}catch(e){console.error(e)}}link(e,t){e.dependents.includes(t)||e.dependents.push(t),t.dependencies.includes(e)||t.dependencies.push(e),this.nodes[e.id]||(this.nodes[e.id]=e),this.nodes[t.id]||(this.nodes[t.id]=t),this.views[t.id]||(this.views[t.id]=t),e instanceof ff?this.sources[e.id]||(this.sources[e.id]=e):this.views[e.id]||(this.views[e.id]=e)}add(e){let t=Array.isArray(e.dependencies)&&e.dependencies.length;this.nodes[e.id]||(this.nodes[e.id]=e),t?this.views[e.id]&&(this.views[e.id]=e):this.sources[e.id]||(this.sources[e.id]=e),e.dependencies.forEach(r=>{this.views[r.id]&&(this.views[r.id]=r)})}remove(e){e.dependencies.forEach(t=>{let r=t.dependents.indexOf(e);r>-1&&t.dependents.splice(r,1)}),e.dependencies.length=0,e.dependents.forEach(t=>{let r=t.dependencies.indexOf(e);r>-1&&t.dependencies.splice(r,1)}),e.dependents.length=0,this.nodes[e.id]&&delete this.nodes[e.id],this.sources[e.id]&&delete this.sources[e.id],this.views[e.id]&&delete this.views[e.id]}update(e,t,r=!1){let n;typeof e=="string"?n=this.sources[e]:n=e;let s=n.update(t,r);return this.sort(),this.list.forEach(o=>{n.dependents.indexOf(o)>-1&&o.refresh()}),s}dispose(){this.views=null,this.sources=null,this.nodes=null,this.list=null}}class x_{constructor(e=[]){this.moveable=!1,this.additional=Object.create(null),this.points=e,this.dependents=[],this.dependencies=[],this.fields=[],this.transformer=t=>t[0].points.slice()}isEmpty(){return!this.points.length}clear(){this.points.length=0}get(e){let t=this.points[0],r=t&&t.i||0;return this.points[e-r]}getInv(e){return this.points[this.points.length+e]}first(){return this.points[0]}last(){return this.points[this.points.length-1]}getExtent(e,t){if(!this.points.length)return[NaN,NaN];let r=this.getDomain(),n,s;arguments.length?(n=Math.max(e,r[0]),s=Math.min(t,r[1])):(n=r[0],s=r[1]);let o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=this.points.length,c;this.compareOrigin?c=["compareClose"]:c=this.fields.map(h=>h.name).filter(h=>h!=="i");for(let h=0;h<l;h++){let u=this.points[h];if(u.i<n)continue;if(u.i>s)break;let p=c.map(d=>u[d]).filter(d=>d!==void 0);p.length&&(o=Math.min.call(null,o,...p),a=Math.max.call(null,a,...p))}return[o,a]}getDomain(){let e=this.points.length;if(!e)return[NaN,NaN];let t=this.points[0],r=this.points[e-1];return[t.i,r.i]}refresh(){this.points.length=0,this.points=this.transformer(this.dependencies)}}var EU=Object.defineProperty,AU=Object.getOwnPropertyDescriptor,DU=(i,e,t,r)=>{for(var n=r>1?void 0:r?AU(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&EU(e,t,n),n},Os=(i,e)=>(t,r)=>e(t,r,i);let Kv=class extends ar.Widget{constructor(i,e,t,r,n,s,o,a){super({node:i}),this.dataService=e,this.partService=t,this.instantiationService=r,this.themeService=n,this.configurationService=s,this.commandService=o,this.environmentService=a,this.parts={},this._currentActivePart=null,this.priceScaleMode=bt.Normal,this.timeScaleMode=bt.Normal,this.needFullRedraw=!1,this.toDispose=[],this.focusTracker=new ar.FocusTracker,this._onSelectionChanged=new tt.Signal(this),this._currentChanged=new tt.Signal(this),this._activeChanged=new tt.Signal(this),this._panDispose=[],this.compareSymbols=[],this.dataProvider=new SU,this.toDispose.push(this.dataProvider),this.toDispose.push(this.focusTracker)}get currentActivePart(){return this._currentActivePart}get onSelectionChanged(){return this._onSelectionChanged}get currentPart(){let i=this.focusTracker.currentWidget;return i||(this.parts.main?this.parts.main:null)}get activePart(){return this.focusTracker.activeWidget}get currentChanged(){return this._currentChanged}get activeChanged(){return this._activeChanged}_create(){this.container=Le("div.chart-table-layout").appendTo(this.node),this.container.position(0,0,0,0),this.panel=new ar.SplitPanel({orientation:"vertical",spacing:1}),this.timeAxisPanel=new ar.BoxPanel,Le(this.panel.node).position(0,0,La,0),this.timeAxisPanel.node.style.height=`${La}px`,Le(this.timeAxisPanel.node).position(void 0,0,0,0);let i=this.container.getHTMLElement();ar.Widget.attach(this.panel,i),ar.Widget.attach(this.timeAxisPanel,i)}get dataRange(){return this._dataRange}set dataRange(i){this._dataRange=i,this._dataRange===Te.Continuous?(this.configurationService.updateValue("chart.axis.leftAxis",!1,Be.MEMORY),this.priceScaleMode=bt.Normal,this.timeScaleMode=bt.Normal,this.configurationService.updateValue("chart.label.symbolLastValue",!0,Be.MEMORY),this.configurationService.updateValue("chart.label.symbol",!1,Be.MEMORY),this.configurationService.updateValue("chart.label.indicator",!1,Be.MEMORY),this.configurationService.updateValue("chart.label.indicatorLastValue",!0,Be.MEMORY)):(this.configurationService.updateValue("chart.axis.leftAxis",!0,Be.MEMORY),this.priceScaleMode=bt.Locked,this.timeScaleMode=bt.Locked,this.configurationService.updateValue("chart.label.symbolLastValue",!0,Be.MEMORY),this.configurationService.updateValue("chart.label.symbol",!1,Be.MEMORY),this.configurationService.updateValue("chart.label.indicator",!1,Be.MEMORY),this.configurationService.updateValue("chart.label.indicatorLastValue",!0,Be.MEMORY)),this.timeScale&&(this.timeScale.dispose(),this.timeScale=null),this._dataRange===Te.Continuous?this.timeScale=this.instantiationService.createInstance(Fv,this.timelineDataSourceName):this.timeScale=this.instantiationService.createInstance(Uv,this.timelineDataSourceName)}get dsName(){return this._dsName}get alias(){return this._alias}init(i){this.dataResolution=i.dataResolution,this.dataAdjust=i.dataAdjust,this._create(),this._createDataModel(i),this.dataRange=i.dataRange||Te.Continuous,this._createView(i),this._layoutPart(i),this.registerListeners()}registerListeners(){const i=this.container.getHTMLElement();this.toDispose.push(me(i,ue.MOUSE_MOVE,e=>this.redraw(e.buttons===1))),this.toDispose.push(me(i,ue.MOUSE_DOWN,e=>this.redraw(!0))),this.toDispose.push(me(i,ue.MOUSE_UP,e=>this.redraw(!0))),this.toDispose.push(me(i,ue.WHEEL,()=>this.redraw(!0))),this.toDispose.push(me(i,ue.MOUSE_OUT,this.handleMouseOut.bind(this))),this.focusTracker.currentChanged.connect(this.handleCurrentChanged,this),this.focusTracker.currentChanged.connect(this.handleActiveChanged,this),this.toDispose.push(this.themeService.onThemeChange(()=>this.redraw(!0))),this.toDispose.push(this.configurationService.onDidChangeConfiguration(this.handleConfigurationChanged.bind(this)))}handleCurrentChanged(i,e){this._currentChanged.emit(e)}handleActiveChanged(i,e){this._activeChanged.emit(e)}handleMouseOut(){this.currentActivePart=null,this.redraw(!0)}handleConfigurationChanged(i){i.affectedKeys.includes("chart.axis.leftAxis")&&this._resetTimescaleRange(this.container.getClientArea().width)}_resetTimescaleRange(i){this.configurationService.inspect("chart.axis.leftAxis").value?this.timeScale.range=[0,i-2*qe]:this.timeScale.range=[0,i-qe]}set currentActivePart(i){this._currentActivePart=i}_createDataModel(i){const{dataSources:e,parts:t}=i;let r={};e.forEach(a=>{let l=new ff;l.name=a,l.id=a,r[a]=l});let n=fs(t,a=>a.name==="main"),s=fs(n.series,a=>a.name==="main"),o=s.dataSource;Array.isArray(o)?this.timelineDataSourceName=o[0]:this.timelineDataSourceName=s.dataSource,t.forEach(a=>{const{series:l,name:c,yAxis:h}=a;for(let u=0,p=l.length;u<p;u++){let d=l[u],f=new x_;if(f.name=`${this.timelineDataSourceName}.${c}.${d.name}`,f.id=f.name,f.fields=d.fields.slice(),f.alias=d.alias,f.additional=d.additional,d.transformer&&(f.transformer=d.transformer.bind(this)),f.visualMap=d.visualMap,f.moveable=d.moveable,f.additional=d.additional,f.origin=d.origin,d.name==="main"&&c==="main"?(this._dsName=d.dataSource,this._alias=f.alias):d.name.startsWith("compare")&&(this.compareSymbols.push([d.dataSource,f.alias]),f.compareOrigin=h.origin,f.transformer=m=>m[0].points.map(_=>({..._,compareClose:(_.close-f.origin)/f.origin*h.origin+h.origin}))),c==="main"&&((i.dataRange===Te.Intraday||i.dataRange===Te.FiveDay)&&isFinite(d.origin)?f.fillRule=({close:m})=>m>d.origin?ka:m<d.origin?Ba:r0:f.fillRule=({open:m,close:g})=>m>g?Ba:ka),c==="volume"&&(f.fillRule=({open:m,close:g})=>m>g?Ba:ka),ci(d.dataSource)){let m=r[d.dataSource];this.dataProvider.link(m,f)}else d.dataSource.forEach(m=>{let g=r[m];this.dataProvider.link(g,f)});f.refresh()}})}_createView(i){const{parts:e}=i;e.forEach(s=>{const{name:o}=s;let a=`${this.timelineDataSourceName}.${o}.main`,l=this.instantiationService.createInstance(Tl,a);l.onDidChangeSelection.connect(this._onChartSelectionChanged,this),this.panel.addWidget(l),this.focusTracker.add(l),this.parts[o]=l});let t="timeline",r=`${this.timelineDataSourceName}.${t}.main`,n=this.instantiationService.createInstance(Ov,r);this.parts[t]=n,n.node.style.height=La.toString(),this.timeAxisPanel.addWidget(n)}_layoutPart(i){let e=!0,t={};if(i.parts.forEach(r=>{r.height?(e=e&&!0,t[r.name]=r.height):e=!1}),e){let r=this.node.getBoundingClientRect(),{height:n,width:s}=r,o=Object.keys(this.parts).reduce((h,u,p)=>{let d=u==="timeline"?0:t[u]||1;return h+d},0),a=(n-La)/o,l=Object.keys(this.parts);this.timeScale&&this._resetTimescaleRange(s);let c=[];for(let h=0,u=l.length;h<u;h++){let p=l[h],f=this.parts[p].partName;f!=="timeline"&&c.push(a*(t[f]||1))}this.panel.setRelativeSizes(c),this.panel.fit(),this.panel.widgets.forEach(h=>h.fit()),this.timeAxisPanel.fit()}else this._layoutView(void 0,!0)}_layoutView(i,e=!1){let t=i||this.node.getBoundingClientRect(),{height:r,width:n}=t;if(e){let s={main:3,volume:.75},o=Object.keys(this.parts).reduce((h,u,p)=>{let d=u==="timeline"?0:s[u]||1;return h+d},0),a=(r-La)/o,l=Object.keys(this.parts);this.timeScale&&this._resetTimescaleRange(n);let c=[];for(let h=0,u=l.length;h<u;h++){let p=l[h],f=this.parts[p].partName;f!=="timeline"&&c.push(a*(s[f]||1))}this.panel.setRelativeSizes(c)}else this._resetTimescaleRange(n);this.panel.fit(),this.panel.widgets.forEach(s=>s.fit()),this.timeAxisPanel.fit()}redraw(i=!1){if(!this.panel.isAttached)return;i&&(this.needFullRedraw=!0);let e=Object.keys(this.parts);for(let t=0,r=e.length;t<r;t++){let n=e[t];this.parts[n].redraw(this.needFullRedraw)}this.needFullRedraw&&(this.needFullRedraw=!1)}getSeriesInParts(i){return Object.keys(this.dataProvider.views).filter(t=>St.getPartName(t)===i).map(t=>this.dataProvider.views[t])}getDataSource(i){return this.dataProvider.sources[i]}getDataView(i){return this.dataProvider.views[i]}updateData(i,e,t=!1){if(!e.length&&!t||!this.dataProvider.sources[i])return;let r=this.dataProvider.update(i,e,t);r===ts.Prepend?this.timeScale.resetIndex():r===ts.New?this.timeScale.resetDomain(10):ll(r)&&(this.dataRange===Te.Continuous?this.timeScale.move(r):this.timeScale.resetDomain(0)),Object.keys(this.parts).filter(n=>n!=="timeline").forEach(n=>{this.parts[n].fitData()}),this.redraw(!0)}clearData(i){let e=this.dataProvider.nodes;Object.keys(e).forEach(t=>{t!==i&&this.dataProvider.nodes[t].clear()})}addNewPart(i){const{series:e,name:t}=i;for(let s=0,o=e.length;s<o;s++){let a=e[s],l=new x_;l.name=`${this.timelineDataSourceName}.${t}.${a.name}`,l.id=l.name,l.fields=a.fields.slice(),l.alias=a.alias,l.visualMap=a.visualMap,l.additional=a.additional;let c=a.dataSource||this.timelineDataSourceName,h=this.getDataSource(c);this.dataProvider.link(h,l),l.transformer=a.transformer.bind(this),l.refresh()}let r=`${this.timelineDataSourceName}.${t}.main`,n=this.instantiationService.createInstance(Tl,r,void 0);n.onDidChangeSelection.connect(this._onChartSelectionChanged,this),this.panel.addWidget(n),this.parts[t]=n,this._layoutView(void 0,!0),this.redraw(!0)}addSeries(i,e){let t=new x_;t.name=`${this.timelineDataSourceName}.${i}.${e.name}`,t.id=t.name,t.fields=e.fields.slice(),t.alias=e.alias,t.visualMap=e.visualMap,t.moveable=!!e.moveable,t.additional=e.additional,e.transformer&&(t.transformer=e.transformer.bind(this)),t.origin=e.origin;let r=[];e.dataSource&&(r=Array.isArray(e.dataSource)?e.dataSource:[e.dataSource]);let n=this.panel.children().next();if(r.length||r.unshift(n.dataScourceName),e.name.startsWith("compare")){this.compareSymbols.push([e.dataSource,t.alias]);let o=this.getDataView(`${this.timelineDataSourceName}.main.main`);t.compareOrigin=o.origin,t.transformer=a=>a[0].points.map(c=>({...c,compareClose:(c.close-t.origin)/t.origin*o.origin+o.origin}))}i==="main"&&((this.dataRange===Te.Intraday||this.dataRange===Te.FiveDay)&&isFinite(e.origin)?t.fillRule=({close:o})=>o>e.origin?ka:o<e.origin?Ba:r0:t.fillRule=({open:o,close:a})=>o>a?Ba:ka);for(let o=0,a=r.length;o<a;o++){let l=r[o];l==="main"&&(l=n.dataScourceName);let c=this.getDataSource(l)||this.getDataView(l);c||(c=new ff,c.name=l,c.id=l,this.dataProvider.add(c)),this.dataProvider.link(c,t)}t.refresh(),this.parts[i].updateSeries(),this.redraw(!0)}moveSeries(i){let e=new St(i),t=this.panel.children(),r,n,s;for(;r=t.next();)if(n||(n=r),r.partName===e.partName){s=r;break}let o=t.next();o||(o=n);let a=this.getDataView(i),l=a.dependencies.filter(c=>c.id!==s.name).map(c=>c.id);l.unshift(o.name),this.dataProvider.remove(a),a.name=`${this.timelineDataSourceName}.${o.partName}.${e.seriesName}`,a.id=a.name,l.forEach(c=>{let h=this.getDataSource(c)||this.getDataView(c);h||(h=new ff,h.name=c,h.id=c,this.dataProvider.add(h)),this.dataProvider.link(h,a)}),a.refresh(),s.updateSeries(),o.updateSeries(),this.redraw(!0)}removeSeries(i,e=!0){let t=this.getDataView(i);if(!t)return;this.dataProvider.remove(t);let r=new St(i),n=this.parts[r.partName];!this.getSeriesInParts(r.partName).length?(this.focusTracker.remove(n),n.dispose(),this.currentActivePart=null,delete this.parts[r.partName],this._layoutView(void 0,!0)):n.updateSeries(),this.redraw(!0),r.seriesName.startsWith("compare")&&(this.environmentService.isEmbeded&&!e&&window.parent.postMessage({type:"chart-compare-removed",payload:{name:Na(r.seriesName.replace("compare_",""))}},"*"),this.dataService.removeCompareSymbol(r.seriesName.replace("compare_","")))}_onChartSelectionChanged(i,e){if(!this.focusTracker.activeWidget){this._onSelectionChanged.emit([]);return}this.focusTracker.activeWidget===i&&this._onSelectionChanged.emit(e)}getFocusedPart(){return this.focusTracker.activeWidget}executeCommand(i,...e){let t=this.currentActivePart||this.currentPart;t&&this.commandService.executeCommand(i,t,...e)}serialize(){return{dataResolution:this.dataResolution,dataRange:this.dataRange,dataAdjust:this.dataAdjust,dataSources:Object.keys(this.dataProvider.sources),parts:Object.keys(this.parts).filter(i=>i!=="timeline").map(i=>this.parts[i].serialize())}}getAppliedIndicators(){let i=[];return this.serialize().parts.forEach(t=>{t.series.forEach(r=>{let[n]=r.name.split("_");if(n)if(n==="main"){let[s]=t.name.split("_");s&&s!=="main"&&s!=="volume"&&i.push(s)}else i.push(n)})}),i}dispose(){super.dispose(),Object.keys(this.parts).forEach(i=>{this.parts[i].dispose(),this.parts[i]=null}),tt.Signal.disconnectAll(this.focusTracker),this._panDispose.length&&(ye(this._panDispose),this._panDispose.length=0),this._shapeHoverDispose&&(ye(this._shapeHoverDispose),this._shapeHoverDispose=null),this.timeScale&&(this.timeScale.dispose(),this.timeScale=null),ye(this.toDispose),this.toDispose.length=0,tt.Signal.disconnectAll(this)}};Kv=DU([Os(1,Nc),Os(2,la),Os(3,Nt),Os(4,je),Os(5,it),Os(6,ms),Os(7,xc)],Kv);function TU(i,e,t,r){return`${i}#${e}#${t}#${r}`}class CU extends Je{constructor(){super(),this._onWakeUp=new ve,this._register(this._onWakeUp),this._register(me(document,"visibilitychange",()=>{document.hidden?this.clearTimer():this.startTimer()})),this.startTimer()}get onWakeUp(){return this._onWakeUp.event}clearTimer(){this.timer&&clearInterval(this.timer)}startTimer(){let e=Date.now();this.timer=setInterval(()=>{let t=Date.now();t-e>1500&&this._onWakeUp.fire(e),e=t},1e3)}}function dD(i){return{time:i,open:0,high:Number.NEGATIVE_INFINITY,low:Number.POSITIVE_INFINITY,close:0,volume:0,amount:0}}class PU{constructor(e,t,r,n,s,o,a){this.adapter=e,this.dsName=t,this.markerTimer=r,this.preClose=n,this.resolution=s,this.range=o,this.adjust=a}}class fD{constructor(){}consume(e,t){let r={...t};return e.sort((n,s)=>n.time-s.time).forEach(n=>{r.open=n.price,r.high=n.price,r.low=n.price,r.close=n.price}),[r]}}class Hv{constructor(e){this.ctx=e}consume(e,t){let r=Object.create(null),n=[];for(let l=0,c=e.length;l<c;l++){let h=e[l];if(!this.ctx.markerTimer.isInTradingTime(h.time))continue;let u=pi(this.ctx.resolution,h.time).getTime();r[u]||(r[u]=[],n.push(u)),r[u].push({...h,time:u})}n.sort((l,c)=>l-c);let s=[t];for(let l=0,c=n.length;l<c;l++){let h=n[l],u=r[h].sort((f,m)=>f.time-m.time),p=this._compositeBar(u,h),d=s[s.length-1];d.time===p.time?(d.open||(d.open=p.open),d.high=Math.max(d.high,p.high),d.low=Math.min(d.low,p.low),d.close=p.close,d.volume+=p.volume,d.amount+=p.amount):s.push(p)}let o=Math.max.apply(null,n)+1,a=s[0].time;return this._fillMissingBar(s,a,o,s[0].close)}_compositeBar(e,t){let r=Object.create(null);if(r.time=t,this.ctx.markerTimer.isInCallAuctionTime(t)){let{price:n}=di(e.sort((s,o)=>s.time-o.time));r.close=n,r.open=n,r.high=n,r.low=n,r.volume=0,r.amount=0}else{const{price:n}=e[0];r.open=n,r.high=n,r.low=n,r.close=n,r.volume=0,r.amount=0;for(let s=0,o=e.length;s<o;s++){let{price:a,volume:l}=e[s];l&&(r.close=a,r.high=Math.max(r.high,a),r.low=Math.min(r.low,a),r.volume+=l,r.amount+=l*a)}}return r}_fillMissingBar(e,t,r,n){let s=t,o=n,a=[],l=Qr(this.ctx.resolution);for(;s<r;){if(this.ctx.markerTimer.isInTradingTime(s)){let c=cs(e,h=>h.time===s);if(c>-1){let h=e[c];o=h.close,a.push(h)}else a.push({time:s,open:o,high:o,low:o,close:o,volume:0,amount:0})}s=s+l}return a}}class pD{constructor(e){this.ctx=e}async load(e,t){let r=e||this.ctx.markerTimer.getCallAuctionStartTimeBeforeMarketOpen()||this.ctx.markerTimer.getMarketOpenTime(),n=t||Date.now();this.endTimeOfTradeQuery=n;let s;r<n?s=await this.ctx.adapter.fetchTrades(this.ctx.dsName,r,n):s=[];let o=this.ctx.markerTimer.getMarketOpenTime();this.noTrades=!!s.length;let a=dD(o);if(s.length)return new fD().consume(s,a);{let l=this.ctx.preClose;return a.open=l,a.high=l,a.low=l,a.close=l,[a]}}}class mD{constructor(e){this.ctx=e}async load(e){return this.ctx.range===Te.Intraday||this.ctx.range===Te.FiveDay?this.loadIntraday(e):this.loadAcrossday(e)}async loadIntraday(e){let t=Date.now(),r=await this.fetchIntradayMajor(e);if(this.ctx.markerTimer.isInTradingTime(t)){let s=await this.fetchTrades();s.length&&r.push(...s)}let n=this.ctx.markerTimer.getMarketOpenTime();return this._fillMissingBar(r,e||n,pi(this.ctx.resolution,this.endTimeOfTradeQuery).getTime()+1)}async loadAcrossday(e){let t,r=Date.now();if(e?t=await this.fetchSpecifiedMajors(e):t=await this.fetchMajor(),this.ctx.markerTimer.isInTradingTime(r)){let n=null;this.ctx.resolution!==ce.M&&(n=await this.fetchMinor());let s=await this.fetchTrades(n);s.length&&t.push(...s)}return t}async fetchIntradayMajor(e){let t,r=pi(this.ctx.resolution).getTime(),n=e||this.ctx.markerTimer.getMarketOpenTime(),s=this.ctx.markerTimer.getMarketCloseTime(),o=Date.now()<s?r:s;return this.endTimeOfMajorQuery=r,n>=o?[]:(t=await this.ctx.adapter.fetchBars({name:this.ctx.dsName,startTime:new Date(n).toISOString(),endTime:new Date(o).toISOString(),resolution:this.ctx.resolution,range:this.ctx.range,adjust:this.ctx.adjust}),t=await this._fillMissingBar(t,n,o),t.length&&(this.ctx.preClose=di(t).close),t)}async fetchSpecifiedMajors(e){let t=pi(this.ctx.resolution,e),r=pi(this.ctx.resolution);return this.endTimeOfMajorQuery=r.getTime(),t.getTime()-r.getTime()===0?[]:await this.ctx.adapter.fetchBars({name:this.ctx.dsName,startTime:t.toISOString(),endTime:r.toISOString(),resolution:this.ctx.resolution,range:this.ctx.range,adjust:this.ctx.adjust})}async fetchMajor(){let e,t=pi(this.ctx.resolution),r={name:this.ctx.dsName,count:150,endTime:t.toISOString(),resolution:this.ctx.resolution,range:this.ctx.range,adjust:this.ctx.adjust};return this.endTimeOfMajorQuery=t.getTime(),e=await this.ctx.adapter.fetchBarsN(r),e.length?e:(console.warn("why no bar",r),[])}async fetchMinor(){let e=this.endTimeOfMajorQuery+Qr(this.ctx.resolution),t=new Date(e+1e3),r=pi(ce.M),n=await this.ctx.adapter.fetchBars({name:this.ctx.dsName,startTime:t.toISOString(),endTime:r.toISOString(),resolution:ce.M,range:this.ctx.range,adjust:this.ctx.adjust});return this.endTimeOfMinorQuery=r.getTime(),this.mergeBars(n,e)}async fetchTrades(e){let t=this.endTimeOfMajorQuery?this.endTimeOfMajorQuery:this.ctx.markerTimer.getMarketOpenTime(),r=Date.now(),n=await this.ctx.adapter.fetchTrades(this.ctx.dsName,t,r);this.endTimeOfTradeQuery=r;let s=e||dD(t);return this.noTrades=!!n.length,n.length?new Hv(this.ctx).consume(n,s):e?[e]:[]}mergeBars(e,t){if(!e.length)return null;let r={...e[0],time:t};for(let n=1,s=e.length;n<s;n++){let o=e[n];r.high=Math.max(r.high,o.high),r.low=Math.min(r.low,o.low),r.close=o.close,r.volume+=o.volume,r.amont+=o.amount}return r}_fillMissingBar(e,t,r){let n=t,s=this.ctx.preClose,o=[],a=Qr(this.ctx.resolution);for(;n<r;){if(this.ctx.markerTimer.isInTradingTime(n)){let l=cs(e,c=>c.time===n);if(l>-1){let c=e[l];s=c.close,o.push({...c})}else o.push({time:n,open:s,high:s,low:s,close:s,volume:0,amount:0})}n+=a}return o}}class IU extends Je{constructor(e,t){super(),this.ctx=e,this._onBar=new ve,this._onInternalStatus=new ve,this._onStatus=new ve,this._integrityCheckAt=t,this.ctx.markerTimer.isInTradingTime(Date.now())&&this._startContinuousAuctionCheckTimer(),this._startStatusUpdater(),this._register(me(document,"visibilitychange",async()=>{document.hidden?(this._suspendedAt=Date.now(),this._stopContinuousAuctionCheckTimer(),this._stopStatusUpdater()):(this._startStatusUpdater(),this.check(Math.min(this._integrityCheckAt,this._suspendedAt)))})),this._register(this._onBar),this._register(this._onInternalStatus),this._register(this._onStatus),this._wakeupDetecher=new CU,this._register(this._wakeupDetecher.onWakeUp(r=>{this.check(r)}))}get onBar(){return this._onBar.event}get onInternalStatus(){return this._onInternalStatus.event}get onStatus(){return this._onStatus.event}async check(e){this.ctx.markerTimer.isInTradingTime(e)?this.ctx.markerTimer.isInCallAuctionTime(e)?this.checkCallAuction():this.ctx.markerTimer.isInTradingTime(e)&&(await this._completeSuspended(e),this.ctx.markerTimer.isInTradingTime(Date.now())&&this._startContinuousAuctionCheckTimer()):(this.ctx.markerTimer.isInCallAuctionTime(e)||this.ctx.markerTimer.status===Qt.Preparing)&&this.checkCallAuction()}async _completeSuspended(e){this._onInternalStatus.fire(1);let t=pi(this.ctx.resolution,e).getTime(),r=new mD(this.ctx),n=await r.load(t);this._integrityCheckAt=r.endTimeOfMajorQuery-Qr(this.ctx.resolution),this._onBar.fire(n),this._onInternalStatus.fire(2)}_startContinuousAuctionCheckTimer(){this._continuousAuctionCheckTimer=setTimeout(async()=>{await this.checkContinuousAuction(),this.ctx.markerTimer.isInTradingTime(Date.now())&&this._startContinuousAuctionCheckTimer()},this._integrityCheckTimeout)}_stopContinuousAuctionCheckTimer(){this._continuousAuctionCheckTimer&&clearTimeout(this._continuousAuctionCheckTimer)}get _integrityCheckTimeout(){return this._nextBarBeingAt+1e4}get _nextBarBeingAt(){return pi(this.ctx.resolution).getTime()+Qr(this.ctx.resolution)-Date.now()}async checkCallAuction(){let t=await new pD(this.ctx).load(this.ctx.markerTimer.getCallAuctionStartTimeBeforeMarketOpen());this._onBar.fire(t)}async checkContinuousAuction(){let e=Date.now(),t=this._integrityCheckAt+Qr(this.ctx.resolution),r=await this.ctx.adapter.fetchBars({name:this.ctx.dsName,startTime:new Date(t).toISOString(),endTime:pi(this.ctx.resolution,e).toISOString(),resolution:this.ctx.resolution,range:this.ctx.range,adjust:this.ctx.adjust}),n=pi(this.ctx.resolution).getTime()-Qr(this.ctx.resolution);if(r.length){let s=di(r);if(pi(this.ctx.resolution,s.time).getTime()!==n){console.error("bar not ready");return}this.ctx.preClose=s.close,this._onBar.fire(r)}else if(this.ctx.range===Te.Intraday||this.ctx.range===Te.FiveDay){let s=this.ctx.preClose,o={time:n,open:s,high:s,low:s,close:s,volume:0,amount:0};this._onBar.fire([o])}this._integrityCheckAt=n}_startStatusUpdater(){this._onStatus.fire(this.ctx.markerTimer.status),this._statusUpdateTimer=setTimeout(()=>{this._startStatusUpdater()},this._statusUpdateTimeout)}get _statusUpdateTimeout(){return this._nextBarBeingAt}_stopStatusUpdater(){this._statusUpdateTimer&&clearTimeout(this._statusUpdateTimer)}dispose(){super.dispose(),this._stopContinuousAuctionCheckTimer()}}class OU extends Je{constructor(e,t,r,n,s,o){super(),this.dsName=e,this.resolution=t,this.range=r,this.adjust=n,this.preClose=o,this._currentBar=null,this._onBar=new ve,this._onStatus=new ve,this.internalStatus=0,this._cachedTrades=[],this.adapter=s,this.context=TU(e,t,r,n),this.tokenSource=new l2,this._register(this.tokenSource),this._markerTimer=qr.get(this.dsName),this.ctx=new PU(this.adapter,this.dsName,this._markerTimer,this.preClose,this.resolution,this.range,this.adjust),this.start(),this._register(this._onStatus),this._register(this._onBar),this._register(me(document,"visibilitychange",()=>{document.hidden?(this.internalStatus=0,this._cachedTrades.length=0):(this.internalStatus=3,this._checker||this.installChecker())}))}get onBar(){return this._onBar.event}get onStatus(){return this._onStatus.event}get token(){return this.tokenSource.token}isCallAuctionTimeBeforeMarket(e){return e=e||Date.now(),!this._markerTimer.isInTradingTime(e)&&this._markerTimer.isInCallAuctionTime(e)}async start(){let e=Date.now(),t,r;this.internalStatus=1,this.range===Te.Intraday&&(this.isCallAuctionTimeBeforeMarket(e)||this._markerTimer.status===Qt.Preparing)?(r=new pD(this.ctx),t=await r.load()):(r=new mD(this.ctx),t=await r.load()),t.length?(this._currentBar=di(t),this._onBar.fire(t)):console.warn("ooop, no bar"),this.internalStatus=2,this._markerTimer.isInTradingDate(e)?this._onStatus.fire(this._markerTimer.status):this._onStatus.fire(Qt.Closed),this.installChecker(r.endTimeOfMajorQuery)}installChecker(e=0){if(this.resolution!==ce.Day&&this._markerTimer.isInTradingDate(Date.now())){let t=Math.max(e,this._markerTimer.getMarketOpenTime()),r=new IU(this.ctx,t);this._checker&&this._checker.dispose(),this._checker=r,this._register(r),this._register(r.onBar(n=>{n.length&&(this._currentBar=di(n),this._onBar.fire(n))})),this._register(r.onStatus(n=>{this._onStatus.fire(n)})),this._register(r.onInternalStatus(n=>{this.internalStatus=n}))}}async consume(e){switch(this.internalStatus){case 0:return;case 1:this._cachedTrades.push(e);return;case 2:case 3:this._cachedTrades.push(e);break}let{time:t}=e;if(!this._markerTimer.isInTradingDate(t))return;this.isCallAuctionTimeBeforeMarket(t)?this.consumer||(this.consumer=new fD):(!this.consumer||!(this.consumer instanceof Hv))&&(this.consumer=new Hv(this.ctx));let r=this.consumer.consume(this._cachedTrades,this._currentBar);this._cachedTrades.length=0,r.length&&(this._currentBar=di(r),this._onBar.fire(r))}dispose(){super.dispose(),tt.Signal.disconnectAll(this),this._checker&&this._checker.dispose()}}const $S=["#8b3cd5","#914C0C","#828282"];class MU extends Kv{constructor(){super(...arguments),this._workers=Object.create(null),this.dsDisposables=Object.create(null)}start(){let e=qr.get(this.dsName);this._timer=e,this.updateData("order",this.dataService.orders,!0);let t=[this.startWorker(this.dsName,e)];for(let[r,n]of this.compareSymbols)t.push(this.startWorker(r,e));return Promise.all(t).then(()=>{})}startWorker(e,t){return new Promise(async r=>{let n=await this.dataService.fetchPreClose(e,t.getStartDate()),s=new OU(e,this.dataResolution,this.dataRange,this.dataAdjust,this.dataService,n);this._workers[e]=s;let o=[];o.push(s.onBar(a=>{this.updateData(e,a),r()})),o.push(s.onStatus(a=>{this.marketStatus=a})),o.push(this.dataService.onDataPush(({dsName:a,data:l})=>{a===e&&s.consume(l)})),o.push(this.dataService.onOrder(()=>{this.updateData("order",this.dataService.orders,!0)})),o.push({dispose:()=>{s.dispose(),delete this._workers[e]}}),this.dsDisposables[e]=o})}stopWorker(e){ye(this.dsDisposables[e]),delete this.dsDisposables[e]}async addCompare(e){for(let t=0,r=e.length;t<r&&t<3;t++){const[n,s]=e[t];let o=`compare_${n}`,a=this.compareSymbols.length;J("chart.compare."+o,{light:$S[a],dark:$S[a]}),this.addSeries("main",{name:`compare_${n}`,dataSource:n,alias:s,fields:[{name:"close",label:""}],origin:await this.dataService.fetchPreClose(n,this._timer.getStartDate())}),this.startWorker(n,this._timer)}}removeCompare(e){let t=`compare_${e}`,r=`${this.timelineDataSourceName}.main.${t}`;this.removeSeries(r),this._workers[e]&&(this._workers[e].dispose(),delete this._workers[e]),this.compareSymbols=this.compareSymbols.filter(n=>n[0]!==e)}removeSeries(e,t=!1){super.removeSeries(e);let r=new St(e);if(r.seriesName.startsWith("compare")){this.environmentService.isEmbeded&&t&&window.parent.postMessage({type:"chart-compare-removed",payload:x8(r.seriesName.replace("compare_",""))},"*");let n=r.seriesName.replace("compare_","");this.dataService.removeCompareSymbol(n),this.compareSymbols=this.compareSymbols.filter(s=>s[0]!==n)}}dispose(){super.dispose();for(let e of Object.keys(this.dsDisposables))ye(this.dsDisposables[e]),delete this.dsDisposables[e]}}const NU={domain:[0,239],ticks:[{index:0,value:"9:30",type:ce.M},{index:29,value:null},{index:59,value:"10:30",type:ce.M},{index:89,value:null},{index:119,value:"13:00",type:ce.M},{index:149,value:null},{index:179,value:"14:00",type:ce.M},{index:209,value:null},{index:239,value:"15:00",type:ce.M}],tradingPeriods:[["09:30","11:29:59.999"],["13:00","15:00"]],callAuction:[["09:15","09:24:59.999"],["14:57","15:00"]]},RU={domain:[0,374],ticks:[{index:0,value:"21:00",type:ce.M},{index:89,value:"22:30",type:ce.M},{index:149,value:"09:00",type:ce.M},{index:224,value:"10:30",type:ce.M},{index:284,value:"13:30",type:ce.M},{index:374,value:"15:00",type:ce.M}],tradingPeriods:[["21:00","23:29:59.999"],["09:00","10:14:59.999"],["10:30","11:29:59.999"],["13:30","15:00"]],nightTrading:!0,callAuction:[["20:55","20:59:999"]]},LU={domain:[0,239],ticks:[{index:0,value:"9:30",type:ce.M},{index:29,value:null},{index:59,value:"10:30",type:ce.M},{index:89,value:null},{index:119,value:"13:00",type:ce.M},{index:149,value:null},{index:179,value:"14:00",type:ce.M},{index:209,value:null},{index:239,value:"15:00",type:ce.M}],tradingPeriods:[["09:30","11:29:59.999"],["13:00","15:00"]],callAuction:[["08:55","08:59:999"]]},kU={domain:[0,269],ticks:[{index:0,value:"9:15",type:ce.M},{index:44,value:"10:00",type:ce.M},{index:89,value:"10:45",type:ce.M},{index:134,value:"13:00",type:ce.M},{index:179,value:"13:45",type:ce.M},{index:224,value:"14:30",type:ce.M},{index:269,value:"15:15",type:ce.M}],tradingPeriods:[["09:15","11:29:59.999"],["13:00","15:15"]]},BU={domain:[0,554],ticks:[{index:0,value:"21:00",type:ce.M},{index:119,value:"23:00",type:ce.M},{index:239,value:"01:00",type:ce.M},{index:329,value:"09:00",type:ce.M},{index:404,value:"10:30",type:ce.M},{index:464,value:"13:30",type:ce.M},{index:554,value:"15:00",type:ce.M}],tradingPeriods:[["21:00","02:29:59.999"],["09:00","10:14:59.999"],["10:30","11:29:59.999"],["13:30","15:00"]],nightTrading:!0,callAuction:[["20:55","20:59:999"]]},FU={domain:[0,464],ticks:[{index:0,value:"21:00",type:ce.M},{index:119,value:"23:00",type:ce.M},{index:239,value:"09:00",type:ce.M},{index:314,value:"10:30",type:ce.M},{index:374,value:"13:30",type:ce.M},{index:464,value:"15:00",type:ce.M}],tradingPeriods:[["21:00","00:59:59.999"],["09:00","10:14:59.999"],["10:30","11:29:59.999"],["13:30","15:00"]],nightTrading:!0,callAuction:[["20:55","20:59:999"]]},UU={domain:[0,344],ticks:[{index:0,value:"21:00",type:ce.M},{index:59,value:"22:00",type:ce.M},{index:119,value:"09:00",type:ce.M},{index:194,value:"10:30",type:ce.M},{index:254,value:"13:30",type:ce.M},{index:344,value:"15:00",type:ce.M}],tradingPeriods:[["21:00","22:59:59.999"],["09:00","10:14:59.999"],["10:30","11:29:59.999"],["13:30","15:00"]],nightTrading:!0,callAuction:[["20:55","20:59:999"]]},w_={domain:[0,224],ticks:[{index:0,value:"09:00",type:ce.M},{index:59,value:"10:00",type:ce.M},{index:104,value:"11:00",type:ce.M},{index:164,value:"14:00",type:ce.M},{index:224,value:"15:00",type:ce.M}],tradingPeriods:[["09:00","10:14:59.999"],["10:30","11:29:59.999"],["13:30","15:00"]],callAuction:[["08:55","08:59:999"]]},KU={domain:[0,344],ticks:[{index:0,value:"21:00",type:ce.M},{index:119,value:"09:00",type:ce.M},{index:194,value:"10:30",type:ce.M},{index:254,value:"13:30",type:ce.M},{index:344,value:"15:00",type:ce.M}],tradingPeriods:[["21:00","22:59:59.999"],["09:00","10:14:59.999"],["10:30","11:29:59.999"],["13:30","15:00"]],nightTrading:!0};var HU=Object.defineProperty,zU=Object.getOwnPropertyDescriptor,jU=(i,e,t,r)=>{for(var n=r>1?void 0:r?zU(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&HU(e,t,n),n},Gn=(i,e)=>(t,r)=>e(t,r,i);function $U(i,e,t,r){return`${i}#${e}#${t}#${r}`}let gD={"SHSE_|SZSE_":NU,CFFEX_I:LU,CFFEX_T:kU,"DCE_v|DCE_pp|DCE_l|DCE_eg|DCE_c|DCE_cs|DCE_i|DCE_p|DCE_b|DCE_m|DCE_jd|DCE_y|DCE_a|DCE_j|DCE_jm":KU,"DCE_fb|DCE_bb":w_,CZCE_AP:w_,CZCE_:RU,SHFE_wr:w_,"SHFE_ag|SHFE_au|INE_":BU,"SHFE_al|SHFE_zn|SHFE_cu|SHFE_pb|SHFE_sn|SHFE_ni":FU,"SHFE_ru|SHFE_rb|SHFE_bu|SHFE_hc|SHFE_fu|SHFE_sp":UU};function VU(i){let e=Object.keys(gD);for(let t=0,r=e.length;t<r;t++)if(new RegExp(e[t],"g").test(i))return e[t];return null}const VS=["#8b3cd5","#914C0C","#828282"];let zv=class extends eg{constructor(i,e,t,r,n,s,o,a,l){super(i,{hasTitle:!1},a),this.dataAdapter=e,this.configurationService=t,this.commandService=r,this.environmentService=n,this.contextKeyService=s,this.instantiationService=o,this.partService=l,this._currentChanged=new tt.Signal(this),this._activeChanged=new tt.Signal(this),this._loadParamMemo=Object.create(null),this.dimension=null,this._charts=[],this._chartAdded=new ve,this._focusTracker=new ar.FocusTracker,this._register(this._chartAdded),this._register(this._focusTracker),this.registerListeners()}registerListeners(){this._focusTracker.currentChanged.connect(this.handleFocus,this),this._focusTracker.activeChanged.connect(this.handleActive,this),this._toDispose.push(me(window,"beforeunload",()=>{if(this.currentChart){let i=this.currentChart.getAppliedIndicators();localStorage.setItem(`nila://memo/chart/${this.environmentService.sessionId}`,JSON.stringify({resolution:this.currentChart.dataResolution,range:this.currentChart.dataRange,appliedIndicators:i}))}}))}handleFocus(i,e){const{oldValue:t,newValue:r}=e;this._currentChanged.emit({newValue:r,oldValue:t})}handleActive(i,e){const{oldValue:t,newValue:r}=e;this._activeChanged.emit({newValue:r,oldValue:t})}get currentChart(){return this._focusTracker.currentWidget?this._focusTracker.currentWidget:this._charts.length?this._charts[0]:null}get activeChart(){return this._focusTracker.activeWidget?this._focusTracker.activeWidget:null}get currentChanged(){return this._currentChanged}get activeChanged(){return this._activeChanged}get chartAdded(){return this._chartAdded.event}createContentArea(i){let e=document.createElement("div");return Pe(e,"part-content"),i.appendChild(e),this.container=document.createElement("div"),Pe(this.container,"part-container"),e.appendChild(this.container),this._panel=new ar.BoxPanel,ks(this._panel.node,0,0,0,0),ar.Widget.attach(this._panel,this.container),e}layout(i){let e=super.layout(i);if(this.dimension&&e.width===this.dimension.width&&e.height===this.dimension.height)return e;this.dimension=e;let t=this.container.getBoundingClientRect();return this._panel.fit(),this._panel.widgets.forEach(r=>r._layoutView(t)),e}createChart(i){const e=document.createElement("div");Pe(e,"chart"),ks(e,0,0,0,0);const t=this.instantiationService.createChild(new Qh([mr,this.contextKeyService.createScoped(e)]));let r=new Qh;const s=t.createChild(r).createInstance(MU,e);return r.set(Ie,s),this._panel.addWidget(s),this._focusTracker.add(s),s.init(i),this._charts.push(s),this._chartAdded.fire(s),s}removeAllCharts(){this._panel.widgets.forEach(e=>{this._focusTracker.remove(e),e.dispose()}),this._charts.length=0}setMaskVisibility(i){this.partService.setMaskHidden(!i)}async _registerMarketTimer(i){if(!qr.get(i))if(this.configurationService.getValue("data.resolution.showIntradayData")){let t=await this.dataAdapter.fetchTradingDate(i),r=VU(i),n=i.split("_")[0];this.toDispose.push(qr.register(r,new bk({...gD[r],tradingDates:t},n)))}else this.toDispose.push(qr.register(".+",new Sk))}async loadChart({dsName:i,alias:e="",resolution:t=ce.M,range:r=Te.Intraday,adjust:n=vi.None,forceReload:s=!1,compare:o=[]}){this.setMaskVisibility(!0);let a=JSON.parse(localStorage.getItem(`nila://memo/chart/${this.environmentService.sessionId}`)||"{}");localStorage.removeItem(`nila://memo/chart/${this.environmentService.sessionId}`),!At(a.resolution)&&!At(a.range)&&!At(a.adjust)&&(t=a.resolution,r=a.range,n=a.adjust),this._loadParamMemo.dsName=i,this._loadParamMemo.alias=e,this._loadParamMemo.resolution=t,this._loadParamMemo.range=r,this._loadParamMemo.adjust=n,this.environmentService.isEmbeded&&window.parent.postMessage({type:"load-chart-internal",payload:this._loadParamMemo},"*");let l,c=[],h=$U(i,t,r,n);if(this._ctx=h,await this._registerMarketTimer(i),this._ctx!==h)return;let u=qr.get(i);if(r===Te.Intraday||Te.FiveDay,this._charts.length&&!s){let f=this.currentChart.serialize(),m=this.currentChart.timelineDataSourceName;this.removeAllCharts(),f.parts.forEach(g=>{g.name==="main"&&(g.series=g.series.filter(_=>!_.name.startsWith("compare")),g.series.forEach(async _=>{_.name==="main"&&(_.alias=e,_.origin=await this.dataAdapter.fetchPreClose(i,u.getStartDate()))})),g.series.forEach(_=>{ci(_.dataSource)?_.dataSource=i:Array.isArray(_.dataSource)&&(_.dataSource=_.dataSource.map(y=>y===m?i:y));let v=_.name.split("_")[0];v&&c.push(v)})}),f.dataSources=[i,"order"],l=f}else{let f=await this.dataAdapter.fetchPreClose(i,u.getStartDate());l={dataResolution:t,dataRange:r,dataAdjust:n,dataSources:[i,"order"],parts:[{yAxis:{origin:f},name:"main",series:[{name:"main",dataSource:i,alias:e,fields:[{name:"open",label:"O"},{name:"high",label:"H"},{name:"low",label:"L"},{name:"close",label:"C"}],origin:f}]},{name:"volume",series:[{name:"main",dataSource:i,alias:"Volume",fields:[{name:"volume",label:""}]}]}]};for(let m=0,g=o.length;m<g&&m<3;m++){const[_,v]=o[m];let y=`compare_${_}`;J("chart.compare."+y,{light:VS[m],dark:VS[m]}),l.parts[0].series.push({name:y,dataSource:_,alias:v,fields:[{name:"close",label:""}],origin:await this.dataAdapter.fetchPreClose(_,u.getStartDate())}),l.dataSources.push(_)}}if(this._ctx!==h)return;s&&this.removeAllCharts();let p=this.createChart(l),d=(a.appliedIndicators||[]).filter(f=>f==="vwap"?!1:f==="ma"?r!==Te.Intraday:!0);c.indexOf("order")===-1&&d.push("order"),r===Te.Intraday?d.push("vwap"):r===Te.Continuous&&d.push("ma"),d.length&&this.commandService.executeCommand("workbench.action.applyIndicator",d),await p.start(),this.setMaskVisibility(!1)}dispose(){tt.Signal.disconnectAll(this),tt.Signal.disconnectAll(this._focusTracker),this.removeAllCharts();try{this._panel.dispose()}catch{}finally{this._panel=null}super.dispose()}};zv=jU([Gn(1,Nc),Gn(2,it),Gn(3,ms),Gn(4,xc),Gn(5,mr),Gn(6,Nt),Gn(7,je),Gn(8,la)],zv);var WU=Object.defineProperty,GU=Object.getOwnPropertyDescriptor,YU=(i,e,t,r)=>{for(var n=r>1?void 0:r?GU(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&WU(e,t,n),n},qU=(i,e)=>(t,r)=>e(t,r,i);const XU=0,ZU=52,QU=28;let jv=class{constructor(i,e,t,r){this.partService=r,this.parent=i,this.workbenchContainer=e,this.headerbar=t.headerbar,this.chart=t.chart,this.sidebar=t.sidebar,this.mask=t.mask,this.toUnbind=[],this.partLayoutInfo=this.getPartLayoutInfo()}getPartLayoutInfo(){return{headerbar:{height:QU},sidebar:{width:ZU},statusbar:{height:XU}}}layout(i){const e=ay(this.parent),t=!this.partService.isVisible(zi.HEADERBAR_PART),r=!this.partService.isVisible(zi.SIDEBAR_PART),n=!this.partService.isVisible(zi.MARK_PART),s=r?0:this.partLayoutInfo.sidebar.width,o=e.height,a=new Ci(s,o),l=e.width-s,c=this.partLayoutInfo.statusbar.height,h=t?0:this.partLayoutInfo.headerbar.height,u=l,p=new Ci(u,h),d=e.height-h-c,f=new Ci(l,d);ks(this.workbenchContainer,0,0,0,0,"relative"),Ls(this.workbenchContainer,e.width,e.height);const m=this.workbenchContainer;m.scrollTop>0&&(m.scrollTop=0),m.scrollLeft>0&&(m.scrollLeft=0);let g=this.headerbar.getContainer(),_=this.sidebar.getContainer(),v=this.chart.getContainer(),y=this.mask.getContainer();t?this.headerbar.hide():this.headerbar.show(),r?this.sidebar.hide():this.sidebar.show(),n?Gr(y):rs(y),Ls(v,f.width,f.height),Ls(_,a.width,a.height),Ls(g,p.width,p.height),Ls(y,e.width,e.height),ks(v,h,0,c,s),ks(g,0,0,c+d,s),ks(_,0,u,0,0),ks(y,0,0,0,0),this.chart.layout(f),this.headerbar.layout(p),this.sidebar.layout(a),this.mask.layout(e)}dispose(){this.toUnbind&&(ye(this.toUnbind),this.toUnbind=null)}};jv=YU([qU(3,la)],jv);class JU{constructor(e,t){this.listenerCleanup=[],this.setContainer(e),this.contextViewService=t,this.actionRunner=new cy,this.menuContainerElement=null,this.toDispose=[];let r=!1;this.toDispose.push(this.actionRunner.onDidBeforeRun(n=>{r=!!n.retainActionItem,r||this.contextViewService.hideContextView(!1)})),this.toDispose.push(this.actionRunner.onDidRun(n=>{r&&this.contextViewService.hideContextView(!1),r=!1}))}setContainer(e){this.$el&&(ye(this.listenerCleanup),this.listenerCleanup.length=0,this.$el=null),e&&(this.$el=Le(e),this.listenerCleanup.push(me(this.$el.getHTMLElement(),ue.MOUSE_DOWN,t=>this.onMouseDown(t))))}showContextMenu(e){e.getActions().then(t=>{t.length&&this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),anchorAlignment:e.anchorAlignment,anchorPosition:e.anchorPosition,canRelayout:!1,render:r=>{this.menuContainerElement=r;let n=e.getMenuClassName?e.getMenuClassName():"";n&&(r.className+=" "+n);let s=new EE(r,t,{actionItemProvider:e.getActionItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:this.actionRunner,getKeyBinding:e.getKeyBinding}),o=s.onDidCancel(()=>{this.contextViewService.hideContextView(!0)}),a=s.onDidBlur(()=>{this.contextViewService.hideContextView(!0)});return s.focus(),H0([o,a,s])},onHide:r=>{e.onHide&&e.onHide(r),this.menuContainerElement=null}})})}onMouseDown(e){if(!this.menuContainerElement)return;let r=new br(e).target;for(;r;){if(r===this.menuContainerElement)return;r=r.parentElement}this.contextViewService.hideContextView()}dispose(){this.setContainer(null),ye(this.toDispose),this.toDispose.length=0}}class eK{constructor(e,t){this._onDidContextMenu=new ve,this.contextMenuHandler=new JU(e,t)}dispose(){this.contextMenuHandler.dispose()}setContainer(e){this.contextMenuHandler.setContainer(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(e),this._onDidContextMenu.fire()}get onDidContextMenu(){return this._onDidContextMenu.event}}var tK=Object.defineProperty,iK=Object.getOwnPropertyDescriptor,rK=(i,e,t,r)=>{for(var n=r>1?void 0:r?iK(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&tK(e,t,n),n},nK=(i,e)=>(t,r)=>e(t,r,i);let $v=class extends eg{constructor(i,e){super(i,{hasTitle:!1},e)}createContentArea(i){let e=document.createElement("div");Pe(e,"spinner-container");let t=document.createElement("div");t.className="nila-spinner";for(let r=1;r<=3;r++){let n=document.createElement("div");n.className=`nila-spinner_bounce${r}`,t.appendChild(n)}return i.appendChild(e),e.appendChild(t),null}};$v=rK([nK(1,je)],$v);var sK=Object.defineProperty,oK=Object.getOwnPropertyDescriptor,aK=(i,e,t,r)=>{for(var n=r>1?void 0:r?oK(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&sK(e,t,n),n},_h=(i,e)=>(t,r)=>e(t,r,i);const jr={WORKBENCH_CONTAINER:"workbench.main.container",HEADERBAR_PART:"workbench.parts.headerbar",SIDEBAR_PART:"workbench.parts.sidebar",CHART_PART:"workbench.parts.chart",STATUSBAR_PART:"workbench.parts.statusbar",MASK_PART:"workbench.parts.mask"};let Vv=class{constructor(i,e,t,r,n,s,o,a){this.instantiationService=r,this.lifecycleService=n,this.configurationService=s,this.contextViewService=o,this.environmentService=a,this.container=e,this.workbenchParams={serviceCollection:t},this.toDispose=[]}startup(){return this.workbenchStarted=!0,this.createWorkbench(),this.initServices(),this.initSettings(),this.renderWorkbench(),this.createWorkbenchLayout(),Promise.resolve(null)}initServices(){const{serviceCollection:i}=this.workbenchParams;i.set(la,this);let e=this.instantiationService.createInstance(eK,document.body,this.contextViewService);i.set(wc,e),this.toDispose.push(e),this.contextKeyService=this.instantiationService.createInstance(R1),i.set(mr,this.contextKeyService),this.keybindingService=this.instantiationService.createInstance(gc,window),this.toDispose.push(this.keybindingService),i.set(bR,this.keybindingService),this.sidebarPart=this.instantiationService.createInstance(rv,jr.SIDEBAR_PART),this.toDispose.push(this.sidebarPart),i.set(mk,this.sidebarPart),this.headerbarPart=this.instantiationService.createInstance(nv,jr.HEADERBAR_PART),this.toDispose.push(this.headerbarPart),i.set(yk,this.headerbarPart),this.chartPart=this.instantiationService.createInstance(zv,jr.CHART_PART),this.toDispose.push(this.chartPart),i.set(Ue,this.chartPart),this.maskPart=this.instantiationService.createInstance($v,jr.MASK_PART);const t=hC();for(let r of t)i.set(r.id,r.descriptor);Qe.as(pt.Workbench).start(this.instantiationService,this.lifecycleService)}initSettings(){this.sideBarHidden=!this.configurationService.getValue("workbench.sidebar.showExpaned"),this.headerBarHidden=!this.configurationService.getValue("workbench.headerbar.show"),this.maskHidden=!0}isStarted(){return this.workbenchStarted&&!this.workbenchShutdown}getContainer(i){let e=null;switch(i){case zi.SIDEBAR_PART:e=this.sidebarPart.getContainer();break;case zi.HEADERBAR_PART:e=this.headerbarPart.getContainer();break;case zi.CHART_PART:e=this.chartPart.getContainer();break;case zi.MARK_PART:e=this.maskPart.getContainer();break}return e}isVisible(i){switch(i){case zi.SIDEBAR_PART:return!this.sideBarHidden;case zi.HEADERBAR_PART:return!this.headerBarHidden;case zi.MARK_PART:return!this.maskHidden;default:return!0}}setSideBarHidden(i){this.sideBarHidden=i,this.workbenchLayout.layout()}setHeaderBarHidden(i,e){this.headerBarHidden=i,e||this.workbenchLayout.layout()}setMaskHidden(i){this.maskHidden=i,this.environmentService.isEmbeded&&window.parent.postMessage({type:"chart-mask-visibility",payload:!i},"*"),this.workbenchLayout.layout()}dispose(){Qe.as(pt.Workbench).reset(),this.toDispose=ye(this.toDispose),this.toDispose.length=0}layout(i){this.isStarted()&&this.workbenchLayout.layout(i)}createWorkbenchLayout(){this.workbenchLayout=this.instantiationService.createInstance(jv,this.container,this.workbench,{headerbar:this.headerbarPart,chart:this.chartPart,sidebar:this.sidebarPart,mask:this.maskPart}),this.toDispose.push(this.workbenchLayout)}createWorkbench(){this.workbench=document.createElement("div"),this.workbench.id=jr.WORKBENCH_CONTAINER,Pe(this.workbench,"nila-workbench"),this.toDispose.push(me(this.workbench,ue.SCROLL,()=>{this.workbench.scrollTop=0}))}renderWorkbench(){this.container.appendChild(this.workbench),this.createHeaderBarPart(),this.createSidebarPart(),this.createChartPart(),this.createMaskPart()}createHeaderBarPart(){const i=Le(this.workbench).div({class:["part","headerbar"],id:jr.HEADERBAR_PART});this.headerbarPart.create(i.getHTMLElement())}createSidebarPart(){const i=Le(this.workbench).div({class:["part","sidebar"],id:jr.SIDEBAR_PART});this.sidebarPart.create(i.getHTMLElement())}createChartPart(){const i=Le(this.workbench).div({class:["part","chart","nila-chart-background","empty"],id:jr.CHART_PART,role:"main"});this.chartPart.create(i.getHTMLElement())}createMaskPart(){const i=Le(this.workbench).div({class:["part","mask"],id:jr.MASK_PART});this.maskPart.create(i.getHTMLElement())}getWorkbenchElementId(){return jr.WORKBENCH_CONTAINER}getWorkbenchElement(){return this.workbench}};Vv=aK([_h(3,Nt),_h(4,X0),_h(5,it),_h(6,Z0),_h(7,xc)],Vv);const lK=Et("themeService"),pf="nila",mf="nila-dark",uK="nila-dark",WS="nila-dark",Xa="workbench.colorTheme",hK=Qe.as(pt.Configuration),cK={type:"string",description:de.localize("colorTheme","Specifies the color theme used in the workbench."),default:uK,enum:[],enumDescriptions:[],errorMessage:de.localize("colorThemeError","Theme is unknown or not installed.")},dK={id:"workbench",order:7.1,type:"object",properties:{[Xa]:cK}};hK.registerConfiguration(dK);let fK=Qe.as(_E.ColorContribution);class rl{constructor(){this.colorMap={},this.customColorMap={}}getColor(e,t){let r=this.customColorMap[e];return r||(r=this.colorMap[e],t!==!1&&Tr(r)&&(r=this.getDefault(e)),r)}getDefault(e){return fK.resolveDefaultColor(e,this)}defines(e){return this.customColorMap.hasOwnProperty(e)||this.colorMap.hasOwnProperty(e)}hasEqualData(e){return Sn(this.colorMap,e.colorMap)}get baseTheme(){return this.id.split(" ")[0]}get type(){switch(this.baseTheme){case pf:return"light";default:return"dark"}}static createEmptyTheme(e,t){let r=new rl;return r.id=e,r.label="",r.settingsId=t,r}static createStandaloneTheme(e,t){let r=new rl;r.id=e,r.settingsId=e,r.label=e;const{colors:n}=t;if(n)for(let s in n)typeof n[s]=="string"&&(r.colorMap[s]=We.fromHex(n[s]));return r}}const pK={base:"nila",inherit:!1,colors:{"editor.background":"#FFFFFF","editor.foreground":"#000000","editor.inactiveSelectionBackground":"#E5EBF1","editorIndentGuide.background":"#D3D3D3","editorIndentGuide.activeBackground":"#939393","editor.selectionHighlightBackground":"#ADD6FF4D","editorSuggestWidget.background":"#F3F3F3","activityBarBadge.background":"#007ACC","sideBarTitle.foreground":"#6F6F6F","list.hoverBackground":"#E8E8E8","input.placeholderForeground":"#767676","settings.textInputBorder":"#CECECE","settings.numberInputBorder":"#CECECE"}},mK={base:"nila-dark",inherit:!1,colors:{"editor.background":"#1E1E1E","editor.foreground":"#D4D4D4","editor.inactiveSelectionBackground":"#3A3D41","editorIndentGuide.background":"#404040","editorIndentGuide.activeBackground":"#707070","editor.selectionHighlightBackground":"#ADD6FF26","list.dropBackground":"#383B3D","activityBarBadge.background":"#007ACC","sideBarTitle.foreground":"#BBBBBB","input.placeholderForeground":"#A6A6A6","settings.textInputBackground":"#292929","settings.numberInputBackground":"#292929","menu.background":"#252526","menu.foreground":"#CCCCCC"}};var gK=Object.defineProperty,_K=Object.getOwnPropertyDescriptor,_D=(i,e,t,r)=>{for(var n=r>1?void 0:r?_K(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&gK(e,t,n),n},Wv=(i,e)=>(t,r)=>e(t,r,i);const vK="contributedColorTheme";let Gv=class{constructor(i,e,t){this.configurationService=e,this.instantiationService=t,this._toDispose=[],this.builtInThemes=Object.create(null),this.builtInThemes[mf]=rl.createStandaloneTheme(mf,mK),this.builtInThemes[pf]=rl.createStandaloneTheme(pf,pK),this.onColorThemeChange=new ve,this._toDispose.push(this.onColorThemeChange),this.currentColorTheme=rl.createEmptyTheme("light","default-light"),this.initialize(),this.installConfigurationListener()}get onDidColorThemeChange(){return this.onColorThemeChange.event}get onThemeChange(){return this.onColorThemeChange.event}initialize(){let i=this.configurationService.getValue(Xa),e=this.findThemeDataBySettingsId(i,WS);return this.setColorTheme(e&&e.id,null)}findThemeDataBySettingsId(i,e){let t=Object.keys(this.builtInThemes),r;for(let n=0,s=t.length;n<s;n++){let o=this.builtInThemes[t[n]];if(o.settingsId===i)return o;o.id===e&&(r=o)}return r}installConfigurationListener(){this.configurationService.onDidChangeConfiguration(i=>{if(i.affectsConfiguration(Xa)){let e=this.configurationService.getValue(Xa);if(e!==this.currentColorTheme.settingsId){let t=this.findThemeDataBySettingsId(e,null);t&&this.setColorTheme(t.id,null)}}})}getColorTheme(){return this.currentColorTheme}getTheme(){return this.getColorTheme()}setColorTheme(i,e){if(!i)return Promise.resolve(null);if(i===this.currentColorTheme.id)return this.writeColorThemeConfiguration(e);let t=this.builtInThemes[i]||this.builtInThemes[WS];return t?i===this.currentColorTheme.id&&this.currentColorTheme.hasEqualData(t)?(this.currentColorTheme=t,Promise.resolve(t)):(this.updateDynamicCSSRules(t),this.applyTheme(t,e)):null}updateDynamicCSSRules(i){let e=[],t={},r={addRule:n=>{t[n]||(e.push(n),t[n]=!0)}};Qe.as(NE.ThemingContribution).getThemingParticipants().forEach(n=>n(i,r)),yK(e.join(`
`),vK)}applyTheme(i,e,t=!1){return this.currentColorTheme?Zh(document.body,this.currentColorTheme.id):Zh(document.body,pf,mf),pr(document.body,i.id),this.currentColorTheme=i,t?Promise.resolve(null):(this.onColorThemeChange.fire(this.currentColorTheme),this.writeColorThemeConfiguration(e))}writeColorThemeConfiguration(i){return At(i)?Promise.resolve(this.currentColorTheme):this.configurationWriter.writeConfiguration(Xa,this.currentColorTheme.settingsId,i).then(e=>this.currentColorTheme)}get configurationWriter(){return this._configurationWriter||(this._configurationWriter=this.instantiationService.createInstance(Yv)),this._configurationWriter}dispose(){ye(this._toDispose),this._toDispose.length=0}};Gv=_D([Wv(1,it),Wv(2,Nt)],Gv);let Yv=class{constructor(i){this.configurationService=i}writeConfiguration(i,e,t){let r=this.configurationService.inspect(i);if(t===Be.USER){if(e===r.user)return Promise.resolve(null);if(e===r.default){if(Tr(r.user))return Promise.resolve(null);e=void 0}}else if(t===Be.WORKSPACE&&e===r.value)return Promise.resolve(null);return this.configurationService.updateValue(i,e,t)}};Yv=_D([Wv(0,it)],Yv);function yK(i,e){let t=document.head.getElementsByClassName(e);if(t.length===0){let r=document.createElement("style");r.type="text/css",r.className=e,r.innerHTML=i,document.head.appendChild(r)}else t[0].innerHTML=i}class xK{constructor(e,t){this.container=e,this.configurationService=t.configurationService,this.environmentService=t.environmentService,this.storageService=t.storageService,this.dataService=t.dataService,this.toUnbind=[]}createContents(e){const t=document.createElement("div");e.appendChild(t);const[r,n]=this.initServiceCollection(e);this.instantiationService=r,this.toUnbind.push(this.instantiationService),this.workbench=this.createWorkbench(r,n,e,t);const s=setTimeout(()=>{console.warn("Workbench did not finish loading in 10 seconds, that might be a problem that should be reported.")},1e4);return this.lifecycleService.when(Ti.Running).then(()=>{clearTimeout(s)}),t}createWorkbench(e,t,r,n){try{const s=e.createInstance(Vv,r,n,t);return this.lifecycleService.phase=Ti.Restoring,s.startup().then(o=>{this.lifecycleService.phase=Ti.Running;let a=setTimeout(()=>{a=void 0,this.lifecycleService.phase=Ti.Eventually},100);this.toUnbind.push({dispose:()=>{a&&clearTimeout(a)}})}),s}catch(s){throw s}}initServiceCollection(e){const t=new Qh;t.set(it,this.configurationService),t.set(xc,this.environmentService),t.set(LT,this.storageService),t.set(Nc,this.dataService);const r=new hy(t,!0);return this.themeService=r.createInstance(Gv,e),t.set(lK,this.themeService),this.storageService=r.createInstance(QT),t.set(JT,this.storageService),this.lifecycleService=r.createInstance(t6),t.set(X0,this.lifecycleService),this.toUnbind.push(this.lifecycleService),t.set(ms,new yr(L_)),this.contextViewService=r.createInstance(MT,document.body),t.set(Z0,this.contextViewService),[r,t]}open(){return Rx(e=>{console.error(e)}),Pe(this.container,"nila-component"),Pe(this.container,"nila-shell"),this.content=document.createElement("div"),Pe(this.content,"nila-shell-content"),this.container.appendChild(this.content),this.contentsContainer=this.createContents(this.content),this.layout(),this.registerListeners(),this}registerListeners(){this.toUnbind.push(me(window,ue.RESIZE,()=>this.layout()))}onUnexpectedError(e){const t=D2(e,!0);if(!t)return;const r=Date.now();t===this.previousErrorValue&&r-this.previousErrorTime<=1e3||(this.previousErrorTime=r,this.previousErrorValue=t,console.error(t))}layout(){const e=ay(this.container);this.contentsContainer.style.width=`${e.width}px`,this.contentsContainer.style.height=`${e.height}px`,this.contextViewService.layout(),this.workbench.layout()}invokeFunction(e){this.instantiationService.invokeFunction(e)}dispose(){this.lifecycleService.shutdown(void 0),this.workbench&&(this.workbench.dispose(),this.workbench=null),ut(this.container,"nila-shell"),ut(this.container,"nila-component"),this.configurationService.dispose(),this.configurationService=null,this.contextViewService.dispose(),this.contextViewService=null,this.themeService.dispose(),this.themeService=null,this.dataService.dispose(),this.dataService=null,this.toUnbind=ye(this.toUnbind),Le(this.container).empty(),Rx(null)}}class wK{constructor(e,t){}store(e,t,r,n,s){return Promise.resolve(null)}swap(e,t,r,n,s){}remove(e,t){}get(e,t,r){return""}clear(e,t){}}class bK{constructor(){this.store={}}get length(){return Object.keys(this.store).length}key(e){const t=Object.keys(this.store);return t.length>e?t[e]:null}clear(){this.store={}}setItem(e,t){this.store[e]=t.toString()}getItem(e){const t=this.store[e];return At(t)?null:t}removeItem(e){delete this.store[e]}}const GS=new bK;Et("configurationService");const SK="vscode://schemas/settings/default",EK="vscode://schemas/settings/user",AK="vscode://schemas/settings/workspace";class Ir{constructor(e={},t=[],r=[]){this._contents=e,this._keys=t,this._overrides=r,this.isFrozen=!1}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}getValue(e){return e?N_(this.contents,e):this.contents}override(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let r={};for(const n of g2([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[n],o=t[n];o&&(typeof s=="object"&&typeof o=="object"?(s=Ia(s),this.mergeContents(s,o)):s=o),r[n]=s}return new Ir(r)}merge(...e){const t=Ia(this.contents),r=Ia(this.overrides),n=[...this.keys];for(const s of e){this.mergeContents(t,s.contents);for(const o of s.overrides){const[a]=r.filter(l=>f2(l.identifiers,o.identifiers));a?this.mergeContents(a.contents,o.contents):r.push(Ia(o))}for(const o of s.keys)n.indexOf(o)===-1&&n.push(o)}return new Ir(t,n,r)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const r of Object.keys(t)){if(r in e&&lr(e[r])&&lr(t[r])){this.mergeContents(e[r],t[r]);continue}e[r]=Ia(t[r])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?UT(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(t.identifiers.indexOf(e)!==-1)return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),uy(this.contents,e,t,r=>{throw new Error(r)})}removeValue(e){this.removeKey(e)&&$T(this.contents,e)}addKey(e){let t=this.keys.length;for(let r=0;r<t;r++)e.indexOf(this.keys[r])===0&&(t=r);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class YS extends Ir{constructor(){const e=WT(),t=VT(),r=[];for(const n of Object.keys(e))Y0.test(n)&&r.push({identifiers:[I2(n).trim()],contents:q0(e[n],s=>console.error(`Conflict in default settings file: ${s}`))});super(e,t,r)}}class qv{constructor(e){this._name=e,this._configurationModel=null,this._parseErrors=[]}get configurationModel(){return this._configurationModel||new Ir}get errors(){return this._parseErrors}parse(e){const t=this.parseContent(e),r=this.parseRaw(t);this._configurationModel=new Ir(r.contents,r.keys,r.overrides)}parseContent(e){let t={},r=null,n=[],s=[];function o(l){Array.isArray(n)?n.push(l):r&&(n[r]=l)}let a={onObjectBegin:()=>{let l={};o(l),s.push(n),n=l,r=null},onObjectProperty:l=>{r=l},onObjectEnd:()=>{n=s.pop()},onArrayBegin:()=>{let l=[];o(l),s.push(n),n=l,r=null},onArrayEnd:()=>{n=s.pop()},onLiteralValue:o,onError:l=>{}};if(e)try{J3(e,a),t=n[0]||{}}catch(l){console.error(`Error while parsing settings file ${this._name}: ${l}`),this._parseErrors=[l]}return t}parseRaw(e){const t=q0(e,s=>console.error(`Conflict in settings file ${this._name}: ${s}`)),r=Object.keys(e),n=jT(e,s=>console.error(`Conflict in settings file ${this._name}: ${s}`));return{contents:t,keys:r,overrides:n}}}let DK=class{constructor(e,t,r,n=new Ir){this._defaultConfiguration=e,this._userConfiguration=t,this._workspaceConfiguration=r,this._memoryConfiguration=n,this._workspaceConsolidatedConfiguration=null}getValue(e,t,r){return this.getConsolidateConfigurationModel(t,r).getValue(e)}updateValue(e,t,r={}){let n=this._memoryConfiguration;t===void 0?n.removeValue(e):n.setValue(e,t),r.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,r){const n=this.getConsolidateConfigurationModel(t,r),s=this._memoryConfiguration;return{default:t.overrideIdentifier?this._defaultConfiguration.override(t.overrideIdentifier).getValue(e):this._defaultConfiguration.getValue(e),user:t.overrideIdentifier?this._userConfiguration.override(t.overrideIdentifier).getValue(e):this._userConfiguration.getValue(e),memory:t.overrideIdentifier?s.override(t.overrideIdentifier).getValue(e):s.getValue(e),workspace:t.overrideIdentifier?this._workspaceConfiguration.override(t.overrideIdentifier).getValue(e):this._workspaceConfiguration.getValue(e),value:n.getValue(e)}}keys(e){return{default:this._defaultConfiguration.keys,user:this._userConfiguration.keys,workspace:this._workspaceConfiguration.keys}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null}updateUserConfiguration(e){this._userConfiguration=e,this._workspaceConsolidatedConfiguration=null}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null}get defaults(){return this._defaultConfiguration}get user(){return this._userConfiguration}get workspace(){return this._workspaceConfiguration}getConsolidateConfigurationModel(e,t){let r=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?r.override(e.overrideIdentifier):r}getConsolidatedConfigurationModelForResource({resource:e},t){return this.getWorkspaceConsolidatedConfiguration()}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this._userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this._userConfiguration.contents,overrides:this._userConfiguration.overrides,keys:this._userConfiguration.keys},isComplete:!0}}allKeys(e){let t=this.keys(e),r=[...t.default];const n=s=>{for(const o of s)r.indexOf(o)===-1&&r.push(o)};return n(t.user),n(t.workspace),r}};class vD{doesConfigurationContains(e,t){let r=e.contents,n=q0({[t]:!0},()=>{}),s;for(;typeof n=="object"&&(s=Object.keys(n)[0]);){if(r=r[s],!r)return!1;n=n[s]}return!0}updateKeys(e,t,r){for(const n of t)e.setValue(n,{})}}class qs extends vD{constructor(e=new Ir,t=new xp){super(),this._changedConfiguration=e,this._changedConfigurationByResource=t}get changedConfiguration(){return this._changedConfiguration}get changedConfigurationByResource(){return this._changedConfigurationByResource}change(e,t){if(e instanceof qs){this._changedConfiguration=this._changedConfiguration.merge(e._changedConfiguration);for(const r of e._changedConfigurationByResource.keys()){let n=this.getOrSetChangedConfigurationForResource(r);n=n.merge(e._changedConfigurationByResource.get(r)),this._changedConfigurationByResource.set(r,n)}}else this.changeWithKeys(e,t);return this}telemetryData(e,t){return this._source=e,this._sourceConfig=t,this}get affectedKeys(){const e=[...this._changedConfiguration.keys];return this._changedConfigurationByResource.forEach(t=>e.push(...t.keys)),g2(e)}get source(){return this._source}get sourceConfig(){return this._sourceConfig}affectsConfiguration(e,t){let r=[this._changedConfiguration];if(t){let n=this._changedConfigurationByResource.get(t);n&&r.push(n)}else r.push(...this._changedConfigurationByResource.values());for(const n of r)if(this.doesConfigurationContains(n,e))return!0;return!1}changeWithKeys(e,t){let r=t?this.getOrSetChangedConfigurationForResource(t):this._changedConfiguration;this.updateKeys(r,e)}getOrSetChangedConfigurationForResource(e){let t=this._changedConfigurationByResource.get(e);return t||(t=new Ir,this._changedConfigurationByResource.set(e,t)),t}}class TK extends Je{constructor(e){super(),this._onDidChangeConfiguration=this._register(new ve),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this.userConfigModelWatcher=new eD(e,{changeBufferDelay:300,onError:t=>Pl(t),defaultConfig:new qv(e),parse:(t,r)=>{const n=new qv(e);return n.parse(t),[...n.errors],n}}),this._register(this.userConfigModelWatcher),this._register(this.userConfigModelWatcher.onDidUpdateConfiguration(()=>this._onDidChangeConfiguration.fire(this.configurationModel)))}get configurationModel(){return this.userConfigModelWatcher.getConfig().configurationModel}reload(){return new Promise(e=>this.userConfigModelWatcher.reload(()=>e(null)))}}class CK extends DK{constructor(e,t,r,n,s=null){super(e,t,r),this._workspace=s}getValue(e,t={}){return super.getValue(e,t,this._workspace)}inspect(e,t={}){return super.inspect(e,t,this._workspace)}keys(){return super.keys(this._workspace)}compareAndUpdateUserConfiguration(e){const{added:t,updated:r,removed:n}=jx(this.user,e);let s=[...t,...r,...n];if(s.length){const o=s.map(a=>this.getValue(a));super.updateUserConfiguration(e),s=s.filter((a,l)=>!Sn(o[l],this.getValue(a)))}return new qs().change(s)}compareAndUpdateWorkspaceConfiguration(e){const{added:t,updated:r,removed:n}=jx(this.workspace,e);let s=[...t,...r,...n];return s.length&&super.updateWorkspaceConfiguration(e),new qs().change(s)}compare(e){const t=[];for(const r of this.allKeys())Sn(this.getValue(r),e.getValue(r))||t.push(r);return t}allKeys(){return super.allKeys(this._workspace)}}class PK extends vD{constructor(e,t,r){super(),this._configuration=e,this.source=t,this.sourceConfig=r,this._changedConfiguration=null}get changedConfiguration(){return this._changedConfiguration||(this._changedConfiguration=new Ir,this.updateKeys(this._changedConfiguration,this.affectedKeys)),this._changedConfiguration}get changedConfigurationByResource(){return new xp}get affectedKeys(){return this._configuration.allKeys()}affectsConfiguration(e,t){return this.doesConfigurationContains(this.changedConfiguration,e)}}class IK{constructor(e){this.configurationChangeEvent=e}get changedConfiguration(){return this.configurationChangeEvent.changedConfiguration}get affectedKeys(){return this.configurationChangeEvent.affectedKeys}get source(){return this.configurationChangeEvent.source}get sourceConfig(){return this.configurationChangeEvent.sourceConfig}affectsConfiguration(e,t){return!!this.configurationChangeEvent.affectsConfiguration(e,t)}}Et("contextService");class OK{constructor(e,t="",r=null,n){this._id=e,this._name=t,this._configuration=r,this._ctime=n}update(e){this._id=e.id,this._name=e.name,this._configuration=e.configuration,this._ctime=e.ctime}get id(){return this._id}get ctime(){return this._ctime}get name(){return this._name}set name(e){this._name=e}get configuration(){return this._configuration}set configuration(e){this._configuration=e}toJSON(){return{id:this.id,name:this.name,configuration:this.configuration}}}class MK extends Je{constructor(e){super(),this._onDidUpdateConfiguration=this._register(new ve),this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this._configurationModelParser=new qv(""),this._configurationModelParser.parse(e)}getConfiguration(){return this._configurationModelParser.configurationModel}dispose(){super.dispose()}}class NK extends Je{constructor(e){super(),this._onDidChangeConfiguration=this._register(new ve),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this.defaultConfiguration=new YS,this.userConfiguration=this._register(new TK("")),this.workspaceConfiguration=this._register(new MK(e)),this._register(this.userConfiguration.onDidChangeConfiguration(()=>this.onUserConfigurationChanged())),this._register(this.workspaceConfiguration.onDidUpdateConfiguration(()=>this.onWorkspaceConfigurationChanged())),this._register(Qe.as(pt.Configuration).onDidSchemaChange(t=>this.registerConfigurationSchemas())),this._register(Qe.as(pt.Configuration).onDidRegisterConfiguration(t=>this.onDefaultConfigurationChanged(t))),this._register(this._onDidChangeConfiguration)}getConfigurationData(){return this._configuration.toData()}getValue(e,t){const r=typeof e=="string"?e:void 0,n=cg(e)?e:cg(t)?t:void 0;return this._configuration.getValue(r,n)}updateValue(e,t,r,n,s){const o=cg(r)?r:void 0,a=this.deriveConfigurationTarget(e,t,o,o?n:r);return a?this.writeConfigurationValue(e,t,a,o,s):Promise.resolve(null)}reloadConfiguration(){return this.reloadUserConfiguration().then(()=>this.reloadWorkspaceConfiguration()).then(()=>this.loadConfiguration())}inspect(e,t){return this._configuration.inspect(e,t)}keys(){return this._configuration.keys()}initialize(e=()=>null){this.updateWorkspaceAndInitializeConfiguration(this.createWorkspace(),e)}reloadUserConfiguration(e){return this.userConfiguration.reload()}reloadWorkspaceConfiguration(e){return Promise.resolve(null)}createWorkspace(e){return this.createEmptyWorkspace()}createEmptyWorkspace(){return new OK("")}updateWorkspaceAndInitializeConfiguration(e,t){this.workspace=e,this.initializeConfiguration(),t()}initializeConfiguration(){this.registerConfigurationSchemas(),this.loadConfiguration()}registerConfigurationSchemas(){if(this.workspace){const e=Qe.as(pt.JSONContribution),t={properties:Ks.properties,patternProperties:Ks.patternProperties,additionalProperties:!1,errorMessage:"Unknown configuration setting"},r={properties:{...nf.properties,...sf.properties},patternProperties:Ks.patternProperties,additionalProperties:!1,errorMessage:"Unknown configuration setting"};e.registerSchema(SK,t),e.registerSchema(EK,t),e.registerSchema(AK,r)}}loadConfiguration(){const e=this._configuration;if(this._configuration=new CK(this.defaultConfiguration,this.userConfiguration.configurationModel,this.workspaceConfiguration.getConfiguration(),new Ir),e){const t=this._configuration.compare(e);this.triggerConfigurationChange(new qs().change(t),Be.WORKSPACE)}else this._onDidChangeConfiguration.fire(new PK(this._configuration,Be.WORKSPACE,this.getTargetConfiguration(Be.WORKSPACE)))}onDefaultConfigurationChanged(e){this.defaultConfiguration=new YS,this.registerConfigurationSchemas(),this.workspace&&this._configuration&&(this._configuration.updateDefaultConfiguration(this.defaultConfiguration),this.triggerConfigurationChange(new qs().change(e),Be.DEFAULT))}onUserConfigurationChanged(){let e=this._configuration.compareAndUpdateUserConfiguration(this.userConfiguration.configurationModel);this.triggerConfigurationChange(e,Be.USER)}onWorkspaceConfigurationChanged(){if(this.workspace&&this.workspace.configuration&&this._configuration){const e=this._configuration.compareAndUpdateWorkspaceConfiguration(this.workspaceConfiguration.getConfiguration());this.triggerConfigurationChange(e,Be.WORKSPACE)}return Promise.resolve(null)}deriveConfigurationTarget(e,t,r,n){if(n)return n;if(t===void 0)return;const s=this.inspect(e,r);if(!Sn(t,s.value))return s.workspace!==void 0?Be.WORKSPACE:Be.USER}writeConfigurationValue(e,t,r,n,s){if(r===Be.DEFAULT)return Promise.reject(new Error("Invalid configuration target"));if(r===Be.MEMORY){this._configuration.updateValue(e,t,n);let o=new qs;return n&&n.overrideIdentifier?o.change([GT(n.overrideIdentifier)],n.resource):o.change([e],void 0),this.triggerConfigurationChange(o,r),Promise.resolve(null)}switch(r){case Be.USER:return this.reloadUserConfiguration();case Be.WORKSPACE:return this.reloadWorkspaceConfiguration()}return Promise.resolve(null)}triggerConfigurationChange(e,t){e.affectedKeys.length&&(e.telemetryData(t,this.getTargetConfiguration(t)),this._onDidChangeConfiguration.fire(new IK(e)))}getTargetConfiguration(e){switch(e){case Be.DEFAULT:return this._configuration.defaults.contents;case Be.USER:return this._configuration.user.contents;case Be.WORKSPACE:return this._configuration.workspace.contents}return{}}dispose(){super.dispose(),this._configuration=null,this.defaultConfiguration=null,this.userConfiguration=null}}class RK{constructor(e){this._provider=e}async provideSuggestionItems(e,t){const r=await this._provider.provideSuggestionItems(e,t),n={suggestions:[]};let s=r;for(let o=0;o<s.length;o++){const a=s[o];a&&n.suggestions.push(a.suggestion)}return n}async resolveSuggestionItem(e,t){return typeof this._provider.resolveSuggestionItem!="function"?Promise.resolve(void 0):this._provider.resolveSuggestionItem(e,t)}}function LK(i,e){let t=new RK(e);return My.register(i,{triggerKeys:e.triggerKeys,provideSuggestionItems:(r,n)=>t.provideSuggestionItems(r,n),resolveSuggestionItem:(r,n)=>t.resolveSuggestionItem(r,n)})}function Yn(i,e){return Ct.register(i,e)}function qn(i,e){return Ct.register(i,e)}function ef(...i){throw i.length&&console.error(...i),new Error("not implemented")}const kK=[{volume:210800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:3807818,pre_close:0,low:18.030000686645508,position:0,close:18.100000381469727,open:18.059999465942383,strtime:"2016-05-04T09:30:00+08:00",utc_time:14623254e5},{volume:232e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:4199616,pre_close:0,low:18.09000015258789,position:0,close:18.100000381469727,open:18.100000381469727,strtime:"2016-05-04T09:31:00+08:00",utc_time:146232546e4},{volume:123300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:2236764,pre_close:0,low:18.1200008392334,position:0,close:18.1299991607666,open:18.139999389648438,strtime:"2016-05-04T09:32:00+08:00",utc_time:146232552e4},{volume:250800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.18000030517578,amount:4551686,pre_close:0,low:18.1200008392334,position:0,close:18.170000076293945,open:18.139999389648438,strtime:"2016-05-04T09:33:00+08:00",utc_time:146232558e4},{volume:161900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.200000762939453,amount:2945024,pre_close:0,low:18.170000076293945,position:0,close:18.190000534057617,open:18.170000076293945,strtime:"2016-05-04T09:34:00+08:00",utc_time:146232564e4},{volume:294900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.200000762939453,amount:5359796,pre_close:0,low:18.139999389648438,position:0,close:18.149999618530273,open:18.190000534057617,strtime:"2016-05-04T09:35:00+08:00",utc_time:14623257e5},{volume:123900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.200000762939453,amount:2253448,pre_close:0,low:18.149999618530273,position:0,close:18.190000534057617,open:18.18000030517578,strtime:"2016-05-04T09:36:00+08:00",utc_time:146232576e4},{volume:126100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.200000762939453,amount:2293968,pre_close:0,low:18.18000030517578,position:0,close:18.190000534057617,open:18.190000534057617,strtime:"2016-05-04T09:37:00+08:00",utc_time:146232582e4},{volume:288700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.190000534057617,amount:5248900,pre_close:0,low:18.15999984741211,position:0,close:18.190000534057617,open:18.190000534057617,strtime:"2016-05-04T09:38:00+08:00",utc_time:146232588e4},{volume:237200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.209999084472656,amount:4317456,pre_close:0,low:18.149999618530273,position:0,close:18.209999084472656,open:18.190000534057617,strtime:"2016-05-04T09:39:00+08:00",utc_time:146232594e4},{volume:210200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.219999313354492,amount:3828252,pre_close:0,low:18.200000762939453,position:0,close:18.209999084472656,open:18.209999084472656,strtime:"2016-05-04T09:40:00+08:00",utc_time:1462326e6},{volume:167600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.209999084472656,amount:3050048,pre_close:0,low:18.18000030517578,position:0,close:18.200000762939453,open:18.209999084472656,strtime:"2016-05-04T09:41:00+08:00",utc_time:146232606e4},{volume:239100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.209999084472656,amount:4350680,pre_close:0,low:18.18000030517578,position:0,close:18.209999084472656,open:18.200000762939453,strtime:"2016-05-04T09:42:00+08:00",utc_time:146232612e4},{volume:87500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.200000762939453,amount:1592408,pre_close:0,low:18.190000534057617,position:0,close:18.200000762939453,open:18.200000762939453,strtime:"2016-05-04T09:43:00+08:00",utc_time:146232618e4},{volume:202900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.200000762939453,amount:3690176,pre_close:0,low:18.18000030517578,position:0,close:18.18000030517578,open:18.190000534057617,strtime:"2016-05-04T09:44:00+08:00",utc_time:146232624e4},{volume:74800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.190000534057617,amount:1360580,pre_close:0,low:18.18000030517578,position:0,close:18.18000030517578,open:18.18000030517578,strtime:"2016-05-04T09:45:00+08:00",utc_time:14623263e5},{volume:67900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.18000030517578,amount:1233532,pre_close:0,low:18.15999984741211,position:0,close:18.15999984741211,open:18.18000030517578,strtime:"2016-05-04T09:46:00+08:00",utc_time:146232636e4},{volume:2e4,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.170000076293945,amount:364508,pre_close:0,low:18.15999984741211,position:0,close:18.15999984741211,open:18.170000076293945,strtime:"2016-05-04T09:47:00+08:00",utc_time:146232642e4},{volume:74300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.170000076293945,amount:1349664,pre_close:0,low:18.15999984741211,position:0,close:18.170000076293945,open:18.170000076293945,strtime:"2016-05-04T09:48:00+08:00",utc_time:146232648e4},{volume:23900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.170000076293945,amount:434120,pre_close:0,low:18.15999984741211,position:0,close:18.170000076293945,open:18.170000076293945,strtime:"2016-05-04T09:49:00+08:00",utc_time:146232654e4},{volume:62500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.18000030517578,amount:1135388,pre_close:0,low:18.15999984741211,position:0,close:18.15999984741211,open:18.15999984741211,strtime:"2016-05-04T09:50:00+08:00",utc_time:14623266e5},{volume:58e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.15999984741211,amount:1051648,pre_close:0,low:18.149999618530273,position:0,close:18.149999618530273,open:18.15999984741211,strtime:"2016-05-04T09:51:00+08:00",utc_time:146232666e4},{volume:74100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:1344616,pre_close:0,low:18.139999389648438,position:0,close:18.149999618530273,open:18.149999618530273,strtime:"2016-05-04T09:52:00+08:00",utc_time:146232672e4},{volume:209100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:3790284,pre_close:0,low:18.110000610351562,position:0,close:18.1299991607666,open:18.1299991607666,strtime:"2016-05-04T09:53:00+08:00",utc_time:146232678e4},{volume:125800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:2282692,pre_close:0,low:18.1299991607666,position:0,close:18.149999618530273,open:18.1299991607666,strtime:"2016-05-04T09:54:00+08:00",utc_time:146232684e4},{volume:70100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.170000076293945,amount:1274200,pre_close:0,low:18.149999618530273,position:0,close:18.170000076293945,open:18.149999618530273,strtime:"2016-05-04T09:55:00+08:00",utc_time:14623269e5},{volume:111600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.15999984741211,amount:2025336,pre_close:0,low:18.139999389648438,position:0,close:18.15999984741211,open:18.149999618530273,strtime:"2016-05-04T09:56:00+08:00",utc_time:146232696e4},{volume:23600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.170000076293945,amount:428512,pre_close:0,low:18.149999618530273,position:0,close:18.149999618530273,open:18.15999984741211,strtime:"2016-05-04T09:57:00+08:00",utc_time:146232702e4},{volume:104200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.15999984741211,amount:1891400,pre_close:0,low:18.139999389648438,position:0,close:18.15999984741211,open:18.15999984741211,strtime:"2016-05-04T09:58:00+08:00",utc_time:146232708e4},{volume:189800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:3438488,pre_close:0,low:18.100000381469727,position:0,close:18.139999389648438,open:18.139999389648438,strtime:"2016-05-04T09:59:00+08:00",utc_time:146232714e4},{volume:72600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:1315376,pre_close:0,low:18.100000381469727,position:0,close:18.1200008392334,open:18.139999389648438,strtime:"2016-05-04T10:00:00+08:00",utc_time:14623272e5},{volume:68800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:1247032,pre_close:0,low:18.1200008392334,position:0,close:18.1299991607666,open:18.1200008392334,strtime:"2016-05-04T10:01:00+08:00",utc_time:146232726e4},{volume:114500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:2074448,pre_close:0,low:18.110000610351562,position:0,close:18.110000610351562,open:18.1299991607666,strtime:"2016-05-04T10:02:00+08:00",utc_time:146232732e4},{volume:107400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:1946152,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.1299991607666,strtime:"2016-05-04T10:03:00+08:00",utc_time:146232738e4},{volume:182100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:3297264,pre_close:0,low:18.09000015258789,position:0,close:18.110000610351562,open:18.110000610351562,strtime:"2016-05-04T10:04:00+08:00",utc_time:146232744e4},{volume:61300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:1109432,pre_close:0,low:18.09000015258789,position:0,close:18.100000381469727,open:18.100000381469727,strtime:"2016-05-04T10:05:00+08:00",utc_time:14623275e5},{volume:146600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:2650392,pre_close:0,low:18.06999969482422,position:0,close:18.079999923706055,open:18.100000381469727,strtime:"2016-05-04T10:06:00+08:00",utc_time:146232756e4},{volume:107200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:1937296,pre_close:0,low:18.06999969482422,position:0,close:18.06999969482422,open:18.06999969482422,strtime:"2016-05-04T10:07:00+08:00",utc_time:146232762e4},{volume:171300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:3094480,pre_close:0,low:18.049999237060547,position:0,close:18.049999237060547,open:18.059999465942383,strtime:"2016-05-04T10:08:00+08:00",utc_time:146232768e4},{volume:262900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.06999969482422,amount:4745304,pre_close:0,low:18.030000686645508,position:0,close:18.049999237060547,open:18.049999237060547,strtime:"2016-05-04T10:09:00+08:00",utc_time:146232774e4},{volume:97e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.06999969482422,amount:1750608,pre_close:0,low:18.040000915527344,position:0,close:18.040000915527344,open:18.049999237060547,strtime:"2016-05-04T10:10:00+08:00",utc_time:14623278e5},{volume:72800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.059999465942383,amount:1314640,pre_close:0,low:18.040000915527344,position:0,close:18.049999237060547,open:18.040000915527344,strtime:"2016-05-04T10:11:00+08:00",utc_time:146232786e4},{volume:64700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:1168584,pre_close:0,low:18.049999237060547,position:0,close:18.079999923706055,open:18.049999237060547,strtime:"2016-05-04T10:12:00+08:00",utc_time:146232792e4},{volume:140900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:2546248,pre_close:0,low:18.059999465942383,position:0,close:18.059999465942383,open:18.079999923706055,strtime:"2016-05-04T10:13:00+08:00",utc_time:146232798e4},{volume:35400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:640152,pre_close:0,low:18.059999465942383,position:0,close:18.09000015258789,open:18.06999969482422,strtime:"2016-05-04T10:14:00+08:00",utc_time:146232804e4},{volume:466700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:8446024,pre_close:0,low:18.059999465942383,position:0,close:18.079999923706055,open:18.09000015258789,strtime:"2016-05-04T10:15:00+08:00",utc_time:14623281e5},{volume:304700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:5518704,pre_close:0,low:18.06999969482422,position:0,close:18.1299991607666,open:18.06999969482422,strtime:"2016-05-04T10:16:00+08:00",utc_time:146232816e4},{volume:355400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:6426024,pre_close:0,low:18.049999237060547,position:0,close:18.049999237060547,open:18.1299991607666,strtime:"2016-05-04T10:17:00+08:00",utc_time:146232822e4},{volume:257300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:4657696,pre_close:0,low:18.049999237060547,position:0,close:18.1200008392334,open:18.100000381469727,strtime:"2016-05-04T10:18:00+08:00",utc_time:146232828e4},{volume:123700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:2241536,pre_close:0,low:18.1200008392334,position:0,close:18.1299991607666,open:18.1200008392334,strtime:"2016-05-04T10:19:00+08:00",utc_time:146232834e4},{volume:134900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:2441680,pre_close:0,low:18.06999969482422,position:0,close:18.110000610351562,open:18.1200008392334,strtime:"2016-05-04T10:20:00+08:00",utc_time:14623284e5},{volume:129300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:2342656,pre_close:0,low:18.06999969482422,position:0,close:18.1200008392334,open:18.06999969482422,strtime:"2016-05-04T10:21:00+08:00",utc_time:146232846e4},{volume:103400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:1870304,pre_close:0,low:18.06999969482422,position:0,close:18.079999923706055,open:18.1200008392334,strtime:"2016-05-04T10:22:00+08:00",utc_time:146232852e4},{volume:44300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:802544,pre_close:0,low:18.079999923706055,position:0,close:18.1299991607666,open:18.079999923706055,strtime:"2016-05-04T10:23:00+08:00",utc_time:146232858e4},{volume:110600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:2004496,pre_close:0,low:18.1200008392334,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T10:24:00+08:00",utc_time:146232864e4},{volume:36e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:652528,pre_close:0,low:18.1200008392334,position:0,close:18.139999389648438,open:18.1200008392334,strtime:"2016-05-04T10:25:00+08:00",utc_time:14623287e5},{volume:17500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:317296,pre_close:0,low:18.1200008392334,position:0,close:18.1299991607666,open:18.1200008392334,strtime:"2016-05-04T10:26:00+08:00",utc_time:146232876e4},{volume:59700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:1082352,pre_close:0,low:18.1200008392334,position:0,close:18.1299991607666,open:18.139999389648438,strtime:"2016-05-04T10:27:00+08:00",utc_time:146232882e4},{volume:56100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:1017184,pre_close:0,low:18.1299991607666,position:0,close:18.139999389648438,open:18.1299991607666,strtime:"2016-05-04T10:28:00+08:00",utc_time:146232888e4},{volume:39600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:718096,pre_close:0,low:18.1299991607666,position:0,close:18.1299991607666,open:18.1299991607666,strtime:"2016-05-04T10:29:00+08:00",utc_time:146232894e4},{volume:109800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:1991520,pre_close:0,low:18.1200008392334,position:0,close:18.1299991607666,open:18.1299991607666,strtime:"2016-05-04T10:30:00+08:00",utc_time:1462329e6},{volume:72e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:1306064,pre_close:0,low:18.1299991607666,position:0,close:18.139999389648438,open:18.1299991607666,strtime:"2016-05-04T10:31:00+08:00",utc_time:146232906e4},{volume:31100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:564224,pre_close:0,low:18.1299991607666,position:0,close:18.149999618530273,open:18.1299991607666,strtime:"2016-05-04T10:32:00+08:00",utc_time:146232912e4},{volume:92400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:1675952,pre_close:0,low:18.1299991607666,position:0,close:18.149999618530273,open:18.149999618530273,strtime:"2016-05-04T10:33:00+08:00",utc_time:146232918e4},{volume:65900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:1195072,pre_close:0,low:18.1299991607666,position:0,close:18.149999618530273,open:18.1299991607666,strtime:"2016-05-04T10:34:00+08:00",utc_time:146232924e4},{volume:48400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:877568,pre_close:0,low:18.1200008392334,position:0,close:18.1200008392334,open:18.149999618530273,strtime:"2016-05-04T10:35:00+08:00",utc_time:14623293e5},{volume:35900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:650768,pre_close:0,low:18.1200008392334,position:0,close:18.149999618530273,open:18.1200008392334,strtime:"2016-05-04T10:36:00+08:00",utc_time:146232936e4},{volume:42100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:763264,pre_close:0,low:18.1200008392334,position:0,close:18.1299991607666,open:18.149999618530273,strtime:"2016-05-04T10:37:00+08:00",utc_time:146232942e4},{volume:34e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:616160,pre_close:0,low:18.1200008392334,position:0,close:18.1200008392334,open:18.1299991607666,strtime:"2016-05-04T10:38:00+08:00",utc_time:146232948e4},{volume:87800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:1592624,pre_close:0,low:18.1200008392334,position:0,close:18.1200008392334,open:18.1299991607666,strtime:"2016-05-04T10:39:00+08:00",utc_time:146232954e4},{volume:90300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:1634304,pre_close:0,low:18.079999923706055,position:0,close:18.110000610351562,open:18.139999389648438,strtime:"2016-05-04T10:40:00+08:00",utc_time:14623296e5},{volume:37900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:685936,pre_close:0,low:18.079999923706055,position:0,close:18.1299991607666,open:18.110000610351562,strtime:"2016-05-04T10:41:00+08:00",utc_time:146232966e4},{volume:142e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:2573104,pre_close:0,low:18.1200008392334,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T10:42:00+08:00",utc_time:146232972e4},{volume:43600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:790080,pre_close:0,low:18.1200008392334,position:0,close:18.1299991607666,open:18.1200008392334,strtime:"2016-05-04T10:43:00+08:00",utc_time:146232978e4},{volume:65500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:1186992,pre_close:0,low:18.110000610351562,position:0,close:18.1299991607666,open:18.1200008392334,strtime:"2016-05-04T10:44:00+08:00",utc_time:146232984e4},{volume:22400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:405600,pre_close:0,low:18.100000381469727,position:0,close:18.100000381469727,open:18.110000610351562,strtime:"2016-05-04T10:45:00+08:00",utc_time:14623299e5},{volume:54700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:990480,pre_close:0,low:18.09000015258789,position:0,close:18.110000610351562,open:18.100000381469727,strtime:"2016-05-04T10:46:00+08:00",utc_time:146232996e4},{volume:5100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:92352,pre_close:0,low:18.100000381469727,position:0,close:18.110000610351562,open:18.110000610351562,strtime:"2016-05-04T10:47:00+08:00",utc_time:146233002e4},{volume:22700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:411184,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T10:48:00+08:00",utc_time:146233008e4},{volume:46800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:847520,pre_close:0,low:18.100000381469727,position:0,close:18.100000381469727,open:18.1200008392334,strtime:"2016-05-04T10:49:00+08:00",utc_time:146233014e4},{volume:403200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:73e5,pre_close:0,low:18.100000381469727,position:0,close:18.110000610351562,open:18.100000381469727,strtime:"2016-05-04T10:50:00+08:00",utc_time:14623302e5},{volume:72300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:1308800,pre_close:0,low:18.09000015258789,position:0,close:18.09000015258789,open:18.100000381469727,strtime:"2016-05-04T10:51:00+08:00",utc_time:146233026e4},{volume:128100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:2322240,pre_close:0,low:18.09000015258789,position:0,close:18.1299991607666,open:18.09000015258789,strtime:"2016-05-04T10:52:00+08:00",utc_time:146233032e4},{volume:30300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:549440,pre_close:0,low:18.1200008392334,position:0,close:18.139999389648438,open:18.1299991607666,strtime:"2016-05-04T10:53:00+08:00",utc_time:146233038e4},{volume:20900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:378992,pre_close:0,low:18.1200008392334,position:0,close:18.139999389648438,open:18.1299991607666,strtime:"2016-05-04T10:54:00+08:00",utc_time:146233044e4},{volume:28400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:514704,pre_close:0,low:18.1200008392334,position:0,close:18.1200008392334,open:18.1299991607666,strtime:"2016-05-04T10:55:00+08:00",utc_time:14623305e5},{volume:116500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:2110992,pre_close:0,low:18.1200008392334,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T10:56:00+08:00",utc_time:146233056e4},{volume:35600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:645168,pre_close:0,low:18.100000381469727,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T10:57:00+08:00",utc_time:146233062e4},{volume:35500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:643328,pre_close:0,low:18.1200008392334,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T10:58:00+08:00",utc_time:146233068e4},{volume:23200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:421840,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.110000610351562,strtime:"2016-05-04T10:59:00+08:00",utc_time:146233074e4},{volume:48900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:884384,pre_close:0,low:18.110000610351562,position:0,close:18.1299991607666,open:18.110000610351562,strtime:"2016-05-04T11:00:00+08:00",utc_time:14623308e5},{volume:315e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:5708288,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.1299991607666,strtime:"2016-05-04T11:01:00+08:00",utc_time:146233086e4},{volume:62900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:1138848,pre_close:0,low:18.100000381469727,position:0,close:18.1200008392334,open:18.110000610351562,strtime:"2016-05-04T11:02:00+08:00",utc_time:146233092e4},{volume:143700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:2603136,pre_close:0,low:18.100000381469727,position:0,close:18.1200008392334,open:18.100000381469727,strtime:"2016-05-04T11:03:00+08:00",utc_time:146233098e4},{volume:89300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:1618704,pre_close:0,low:18.110000610351562,position:0,close:18.110000610351562,open:18.1200008392334,strtime:"2016-05-04T11:04:00+08:00",utc_time:146233104e4},{volume:163400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:2959568,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.110000610351562,strtime:"2016-05-04T11:05:00+08:00",utc_time:14623311e5},{volume:46100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:835584,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.1299991607666,strtime:"2016-05-04T11:06:00+08:00",utc_time:146233116e4},{volume:73100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:1323568,pre_close:0,low:18.100000381469727,position:0,close:18.1200008392334,open:18.110000610351562,strtime:"2016-05-04T11:07:00+08:00",utc_time:146233122e4},{volume:15900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:287952,pre_close:0,low:18.110000610351562,position:0,close:18.110000610351562,open:18.110000610351562,strtime:"2016-05-04T11:08:00+08:00",utc_time:146233128e4},{volume:29300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:531312,pre_close:0,low:18.100000381469727,position:0,close:18.100000381469727,open:18.110000610351562,strtime:"2016-05-04T11:09:00+08:00",utc_time:146233134e4},{volume:152700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:2763456,pre_close:0,low:18.100000381469727,position:0,close:18.100000381469727,open:18.110000610351562,strtime:"2016-05-04T11:10:00+08:00",utc_time:14623314e5},{volume:88600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:1604304,pre_close:0,low:18.09000015258789,position:0,close:18.09000015258789,open:18.100000381469727,strtime:"2016-05-04T11:11:00+08:00",utc_time:146233146e4},{volume:19100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:344624,pre_close:0,low:18.09000015258789,position:0,close:18.100000381469727,open:18.09000015258789,strtime:"2016-05-04T11:12:00+08:00",utc_time:146233152e4},{volume:85700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:1549696,pre_close:0,low:18.09000015258789,position:0,close:18.09000015258789,open:18.09000015258789,strtime:"2016-05-04T11:13:00+08:00",utc_time:146233158e4},{volume:176400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:3191136,pre_close:0,low:18.079999923706055,position:0,close:18.079999923706055,open:18.100000381469727,strtime:"2016-05-04T11:14:00+08:00",utc_time:146233164e4},{volume:413600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:7477472,pre_close:0,low:18.06999969482422,position:0,close:18.079999923706055,open:18.09000015258789,strtime:"2016-05-04T11:15:00+08:00",utc_time:14623317e5},{volume:75600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:1367024,pre_close:0,low:18.079999923706055,position:0,close:18.09000015258789,open:18.079999923706055,strtime:"2016-05-04T11:16:00+08:00",utc_time:146233176e4},{volume:447600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:8096416,pre_close:0,low:18.06999969482422,position:0,close:18.100000381469727,open:18.09000015258789,strtime:"2016-05-04T11:17:00+08:00",utc_time:146233182e4},{volume:16500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:298464,pre_close:0,low:18.06999969482422,position:0,close:18.09000015258789,open:18.06999969482422,strtime:"2016-05-04T11:18:00+08:00",utc_time:146233188e4},{volume:78400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:1418816,pre_close:0,low:18.09000015258789,position:0,close:18.100000381469727,open:18.09000015258789,strtime:"2016-05-04T11:19:00+08:00",utc_time:146233194e4},{volume:28800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:522608,pre_close:0,low:18.09000015258789,position:0,close:18.110000610351562,open:18.09000015258789,strtime:"2016-05-04T11:20:00+08:00",utc_time:1462332e6},{volume:26e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:470512,pre_close:0,low:18.09000015258789,position:0,close:18.09000015258789,open:18.100000381469727,strtime:"2016-05-04T11:21:00+08:00",utc_time:146233206e4},{volume:78200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:1415408,pre_close:0,low:18.09000015258789,position:0,close:18.100000381469727,open:18.100000381469727,strtime:"2016-05-04T11:22:00+08:00",utc_time:146233212e4},{volume:28800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:520672,pre_close:0,low:18.100000381469727,position:0,close:18.1200008392334,open:18.100000381469727,strtime:"2016-05-04T11:23:00+08:00",utc_time:146233218e4},{volume:24500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:442912,pre_close:0,low:18.100000381469727,position:0,close:18.110000610351562,open:18.1200008392334,strtime:"2016-05-04T11:24:00+08:00",utc_time:146233224e4},{volume:39e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:707136,pre_close:0,low:18.100000381469727,position:0,close:18.110000610351562,open:18.110000610351562,strtime:"2016-05-04T11:25:00+08:00",utc_time:14623323e5},{volume:16900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:305152,pre_close:0,low:18.100000381469727,position:0,close:18.100000381469727,open:18.110000610351562,strtime:"2016-05-04T11:26:00+08:00",utc_time:146233236e4},{volume:21300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:386576,pre_close:0,low:18.100000381469727,position:0,close:18.110000610351562,open:18.100000381469727,strtime:"2016-05-04T11:27:00+08:00",utc_time:146233242e4},{volume:32300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:585024,pre_close:0,low:18.100000381469727,position:0,close:18.110000610351562,open:18.100000381469727,strtime:"2016-05-04T11:28:00+08:00",utc_time:146233248e4},{volume:9e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:163024,pre_close:0,low:18.100000381469727,position:0,close:18.110000610351562,open:18.110000610351562,strtime:"2016-05-04T11:29:00+08:00",utc_time:146233254e4},{volume:135800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:2459216,pre_close:0,low:18.100000381469727,position:0,close:18.1299991607666,open:18.110000610351562,strtime:"2016-05-04T13:00:00+08:00",utc_time:1462338e6},{volume:15500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:280864,pre_close:0,low:18.100000381469727,position:0,close:18.1200008392334,open:18.100000381469727,strtime:"2016-05-04T13:01:00+08:00",utc_time:146233806e4},{volume:18500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:335312,pre_close:0,low:18.110000610351562,position:0,close:18.1299991607666,open:18.1200008392334,strtime:"2016-05-04T13:02:00+08:00",utc_time:146233812e4},{volume:23600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:426896,pre_close:0,low:18.110000610351562,position:0,close:18.110000610351562,open:18.1200008392334,strtime:"2016-05-04T13:03:00+08:00",utc_time:146233818e4},{volume:17900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:324224,pre_close:0,low:18.110000610351562,position:0,close:18.1299991607666,open:18.110000610351562,strtime:"2016-05-04T13:04:00+08:00",utc_time:146233824e4},{volume:63800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:1157232,pre_close:0,low:18.110000610351562,position:0,close:18.1299991607666,open:18.110000610351562,strtime:"2016-05-04T13:05:00+08:00",utc_time:14623383e5},{volume:119600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:2170016,pre_close:0,low:18.1299991607666,position:0,close:18.1299991607666,open:18.1299991607666,strtime:"2016-05-04T13:06:00+08:00",utc_time:146233836e4},{volume:24800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:449728,pre_close:0,low:18.1299991607666,position:0,close:18.1299991607666,open:18.139999389648438,strtime:"2016-05-04T13:07:00+08:00",utc_time:146233842e4},{volume:29700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:538464,pre_close:0,low:18.1200008392334,position:0,close:18.1299991607666,open:18.1299991607666,strtime:"2016-05-04T13:08:00+08:00",utc_time:146233848e4},{volume:15900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:288128,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T13:09:00+08:00",utc_time:146233854e4},{volume:19300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:350096,pre_close:0,low:18.1200008392334,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T13:10:00+08:00",utc_time:14623386e5},{volume:57400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:1040816,pre_close:0,low:18.1200008392334,position:0,close:18.139999389648438,open:18.1299991607666,strtime:"2016-05-04T13:11:00+08:00",utc_time:146233866e4},{volume:26500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:478752,pre_close:0,low:18.110000610351562,position:0,close:18.139999389648438,open:18.1200008392334,strtime:"2016-05-04T13:12:00+08:00",utc_time:146233872e4},{volume:17800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:322720,pre_close:0,low:18.1200008392334,position:0,close:18.139999389648438,open:18.139999389648438,strtime:"2016-05-04T13:13:00+08:00",utc_time:146233878e4},{volume:19800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:359216,pre_close:0,low:18.1200008392334,position:0,close:18.1299991607666,open:18.1299991607666,strtime:"2016-05-04T13:14:00+08:00",utc_time:146233884e4},{volume:21700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:393296,pre_close:0,low:18.1200008392334,position:0,close:18.1200008392334,open:18.1299991607666,strtime:"2016-05-04T13:15:00+08:00",utc_time:14623389e5},{volume:60500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:1097648,pre_close:0,low:18.1200008392334,position:0,close:18.1299991607666,open:18.1200008392334,strtime:"2016-05-04T13:16:00+08:00",utc_time:146233896e4},{volume:11100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:201248,pre_close:0,low:18.1200008392334,position:0,close:18.139999389648438,open:18.1200008392334,strtime:"2016-05-04T13:17:00+08:00",utc_time:146233902e4},{volume:26e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:471472,pre_close:0,low:18.1299991607666,position:0,close:18.1299991607666,open:18.139999389648438,strtime:"2016-05-04T13:18:00+08:00",utc_time:146233908e4},{volume:65800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:1191824,pre_close:0,low:18.110000610351562,position:0,close:18.110000610351562,open:18.1299991607666,strtime:"2016-05-04T13:19:00+08:00",utc_time:146233914e4},{volume:19200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:348192,pre_close:0,low:18.110000610351562,position:0,close:18.1299991607666,open:18.110000610351562,strtime:"2016-05-04T13:20:00+08:00",utc_time:14623392e5},{volume:60100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:1090128,pre_close:0,low:18.110000610351562,position:0,close:18.110000610351562,open:18.1299991607666,strtime:"2016-05-04T13:21:00+08:00",utc_time:146233926e4},{volume:40600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:735456,pre_close:0,low:18.110000610351562,position:0,close:18.110000610351562,open:18.110000610351562,strtime:"2016-05-04T13:22:00+08:00",utc_time:146233932e4},{volume:93200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:1687728,pre_close:0,low:18.100000381469727,position:0,close:18.100000381469727,open:18.110000610351562,strtime:"2016-05-04T13:23:00+08:00",utc_time:146233938e4},{volume:148800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:2693776,pre_close:0,low:18.100000381469727,position:0,close:18.100000381469727,open:18.100000381469727,strtime:"2016-05-04T13:24:00+08:00",utc_time:146233944e4},{volume:68400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:1238688,pre_close:0,low:18.09000015258789,position:0,close:18.110000610351562,open:18.100000381469727,strtime:"2016-05-04T13:25:00+08:00",utc_time:14623395e5},{volume:26400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:478368,pre_close:0,low:18.100000381469727,position:0,close:18.100000381469727,open:18.1299991607666,strtime:"2016-05-04T13:26:00+08:00",utc_time:146233956e4},{volume:81800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:1482608,pre_close:0,low:18.100000381469727,position:0,close:18.1299991607666,open:18.100000381469727,strtime:"2016-05-04T13:27:00+08:00",utc_time:146233962e4},{volume:28e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:507504,pre_close:0,low:18.110000610351562,position:0,close:18.139999389648438,open:18.1299991607666,strtime:"2016-05-04T13:28:00+08:00",utc_time:146233968e4},{volume:7e4,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:1269360,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.139999389648438,strtime:"2016-05-04T13:29:00+08:00",utc_time:146233974e4},{volume:52800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.149999618530273,amount:956752,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.149999618530273,strtime:"2016-05-04T13:30:00+08:00",utc_time:14623398e5},{volume:59100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:1070928,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T13:31:00+08:00",utc_time:146233986e4},{volume:46100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:835232,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.110000610351562,strtime:"2016-05-04T13:32:00+08:00",utc_time:146233992e4},{volume:44700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:810144,pre_close:0,low:18.1200008392334,position:0,close:18.139999389648438,open:18.1200008392334,strtime:"2016-05-04T13:33:00+08:00",utc_time:146233998e4},{volume:37600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:681808,pre_close:0,low:18.1299991607666,position:0,close:18.1299991607666,open:18.139999389648438,strtime:"2016-05-04T13:34:00+08:00",utc_time:146234004e4},{volume:59800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:1083904,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.1299991607666,strtime:"2016-05-04T13:35:00+08:00",utc_time:14623401e5},{volume:73300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:1327872,pre_close:0,low:18.110000610351562,position:0,close:18.110000610351562,open:18.1200008392334,strtime:"2016-05-04T13:36:00+08:00",utc_time:146234016e4},{volume:14200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:257184,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.110000610351562,strtime:"2016-05-04T13:37:00+08:00",utc_time:146234022e4},{volume:56500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:1023648,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T13:38:00+08:00",utc_time:146234028e4},{volume:36e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:652352,pre_close:0,low:18.110000610351562,position:0,close:18.1299991607666,open:18.1200008392334,strtime:"2016-05-04T13:39:00+08:00",utc_time:146234034e4},{volume:45200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:819200,pre_close:0,low:18.110000610351562,position:0,close:18.1299991607666,open:18.110000610351562,strtime:"2016-05-04T13:40:00+08:00",utc_time:14623404e5},{volume:38900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:705280,pre_close:0,low:18.1200008392334,position:0,close:18.139999389648438,open:18.1299991607666,strtime:"2016-05-04T13:41:00+08:00",utc_time:146234046e4},{volume:74700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:1353696,pre_close:0,low:18.110000610351562,position:0,close:18.139999389648438,open:18.139999389648438,strtime:"2016-05-04T13:42:00+08:00",utc_time:146234052e4},{volume:28700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.139999389648438,amount:520320,pre_close:0,low:18.1200008392334,position:0,close:18.1200008392334,open:18.139999389648438,strtime:"2016-05-04T13:43:00+08:00",utc_time:146234058e4},{volume:29300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:530976,pre_close:0,low:18.1200008392334,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T13:44:00+08:00",utc_time:146234064e4},{volume:39800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:721216,pre_close:0,low:18.1200008392334,position:0,close:18.1299991607666,open:18.1299991607666,strtime:"2016-05-04T13:45:00+08:00",utc_time:14623407e5},{volume:45500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:824384,pre_close:0,low:18.110000610351562,position:0,close:18.110000610351562,open:18.1200008392334,strtime:"2016-05-04T13:46:00+08:00",utc_time:146234076e4},{volume:38700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:701152,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T13:47:00+08:00",utc_time:146234082e4},{volume:27900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:505536,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T13:48:00+08:00",utc_time:146234088e4},{volume:47700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:863872,pre_close:0,low:18.110000610351562,position:0,close:18.110000610351562,open:18.110000610351562,strtime:"2016-05-04T13:49:00+08:00",utc_time:146234094e4},{volume:12900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:233664,pre_close:0,low:18.110000610351562,position:0,close:18.1200008392334,open:18.1200008392334,strtime:"2016-05-04T13:50:00+08:00",utc_time:1462341e6},{volume:116400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:2107872,pre_close:0,low:18.100000381469727,position:0,close:18.110000610351562,open:18.110000610351562,strtime:"2016-05-04T13:51:00+08:00",utc_time:146234106e4},{volume:133300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:2413120,pre_close:0,low:18.100000381469727,position:0,close:18.100000381469727,open:18.110000610351562,strtime:"2016-05-04T13:52:00+08:00",utc_time:146234112e4},{volume:131800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:2388096,pre_close:0,low:18.100000381469727,position:0,close:18.100000381469727,open:18.100000381469727,strtime:"2016-05-04T13:53:00+08:00",utc_time:146234118e4},{volume:165800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1299991607666,amount:3000192,pre_close:0,low:18.09000015258789,position:0,close:18.09000015258789,open:18.1299991607666,strtime:"2016-05-04T13:54:00+08:00",utc_time:146234124e4},{volume:120600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:2182016,pre_close:0,low:18.09000015258789,position:0,close:18.110000610351562,open:18.09000015258789,strtime:"2016-05-04T13:55:00+08:00",utc_time:14623413e5},{volume:112300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:2032064,pre_close:0,low:18.09000015258789,position:0,close:18.100000381469727,open:18.110000610351562,strtime:"2016-05-04T13:56:00+08:00",utc_time:146234136e4},{volume:100700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:1821440,pre_close:0,low:18.079999923706055,position:0,close:18.110000610351562,open:18.100000381469727,strtime:"2016-05-04T13:57:00+08:00",utc_time:146234142e4},{volume:157700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:2854240,pre_close:0,low:18.09000015258789,position:0,close:18.110000610351562,open:18.100000381469727,strtime:"2016-05-04T13:58:00+08:00",utc_time:146234148e4},{volume:125100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:2264384,pre_close:0,low:18.09000015258789,position:0,close:18.09000015258789,open:18.1200008392334,strtime:"2016-05-04T13:59:00+08:00",utc_time:146234154e4},{volume:204e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:3690912,pre_close:0,low:18.09000015258789,position:0,close:18.100000381469727,open:18.1200008392334,strtime:"2016-05-04T14:00:00+08:00",utc_time:14623416e5},{volume:179e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:3237888,pre_close:0,low:18.079999923706055,position:0,close:18.09000015258789,open:18.100000381469727,strtime:"2016-05-04T14:01:00+08:00",utc_time:146234166e4},{volume:112500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:2034944,pre_close:0,low:18.079999923706055,position:0,close:18.100000381469727,open:18.09000015258789,strtime:"2016-05-04T14:02:00+08:00",utc_time:146234172e4},{volume:157700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:2852896,pre_close:0,low:18.079999923706055,position:0,close:18.100000381469727,open:18.09000015258789,strtime:"2016-05-04T14:03:00+08:00",utc_time:146234178e4},{volume:134900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:2440384,pre_close:0,low:18.079999923706055,position:0,close:18.100000381469727,open:18.079999923706055,strtime:"2016-05-04T14:04:00+08:00",utc_time:146234184e4},{volume:183800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:3325056,pre_close:0,low:18.09000015258789,position:0,close:18.100000381469727,open:18.100000381469727,strtime:"2016-05-04T14:05:00+08:00",utc_time:14623419e5},{volume:144600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:2615200,pre_close:0,low:18.079999923706055,position:0,close:18.079999923706055,open:18.09000015258789,strtime:"2016-05-04T14:06:00+08:00",utc_time:146234196e4},{volume:129700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:2345312,pre_close:0,low:18.079999923706055,position:0,close:18.079999923706055,open:18.079999923706055,strtime:"2016-05-04T14:07:00+08:00",utc_time:146234202e4},{volume:117400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:2122912,pre_close:0,low:18.06999969482422,position:0,close:18.079999923706055,open:18.09000015258789,strtime:"2016-05-04T14:08:00+08:00",utc_time:146234208e4},{volume:112300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:2030464,pre_close:0,low:18.079999923706055,position:0,close:18.079999923706055,open:18.079999923706055,strtime:"2016-05-04T14:09:00+08:00",utc_time:146234214e4},{volume:141200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:2551264,pre_close:0,low:18.06999969482422,position:0,close:18.06999969482422,open:18.079999923706055,strtime:"2016-05-04T14:10:00+08:00",utc_time:14623422e5},{volume:135700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:2453632,pre_close:0,low:18.06999969482422,position:0,close:18.06999969482422,open:18.09000015258789,strtime:"2016-05-04T14:11:00+08:00",utc_time:146234226e4},{volume:247900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:4479680,pre_close:0,low:18.059999465942383,position:0,close:18.059999465942383,open:18.06999969482422,strtime:"2016-05-04T14:12:00+08:00",utc_time:146234232e4},{volume:135700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:2451136,pre_close:0,low:18.059999465942383,position:0,close:18.059999465942383,open:18.06999969482422,strtime:"2016-05-04T14:13:00+08:00",utc_time:146234238e4},{volume:100900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:1822848,pre_close:0,low:18.059999465942383,position:0,close:18.059999465942383,open:18.059999465942383,strtime:"2016-05-04T14:14:00+08:00",utc_time:146234244e4},{volume:142400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.06999969482422,amount:2571584,pre_close:0,low:18.049999237060547,position:0,close:18.049999237060547,open:18.06999969482422,strtime:"2016-05-04T14:15:00+08:00",utc_time:14623425e5},{volume:402300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.059999465942383,amount:7260288,pre_close:0,low:18.040000915527344,position:0,close:18.040000915527344,open:18.059999465942383,strtime:"2016-05-04T14:16:00+08:00",utc_time:146234256e4},{volume:125100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.049999237060547,amount:2256960,pre_close:0,low:18.040000915527344,position:0,close:18.040000915527344,open:18.040000915527344,strtime:"2016-05-04T14:17:00+08:00",utc_time:146234262e4},{volume:252800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.049999237060547,amount:4558912,pre_close:0,low:18.020000457763672,position:0,close:18.020000457763672,open:18.040000915527344,strtime:"2016-05-04T14:18:00+08:00",utc_time:146234268e4},{volume:17e4,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.040000915527344,amount:3064768,pre_close:0,low:18.020000457763672,position:0,close:18.030000686645508,open:18.030000686645508,strtime:"2016-05-04T14:19:00+08:00",utc_time:146234274e4},{volume:223100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.049999237060547,amount:4023168,pre_close:0,low:18.020000457763672,position:0,close:18.040000915527344,open:18.030000686645508,strtime:"2016-05-04T14:20:00+08:00",utc_time:14623428e5},{volume:360500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.059999465942383,amount:6508448,pre_close:0,low:18.040000915527344,position:0,close:18.059999465942383,open:18.040000915527344,strtime:"2016-05-04T14:21:00+08:00",utc_time:146234286e4},{volume:169500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.06999969482422,amount:3060480,pre_close:0,low:18.049999237060547,position:0,close:18.06999969482422,open:18.059999465942383,strtime:"2016-05-04T14:22:00+08:00",utc_time:146234292e4},{volume:133200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:2405696,pre_close:0,low:18.049999237060547,position:0,close:18.079999923706055,open:18.06999969482422,strtime:"2016-05-04T14:23:00+08:00",utc_time:146234298e4},{volume:181700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:3282496,pre_close:0,low:18.049999237060547,position:0,close:18.09000015258789,open:18.06999969482422,strtime:"2016-05-04T14:24:00+08:00",utc_time:146234304e4},{volume:75900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:1372960,pre_close:0,low:18.059999465942383,position:0,close:18.06999969482422,open:18.09000015258789,strtime:"2016-05-04T14:25:00+08:00",utc_time:14623431e5},{volume:59500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:1074400,pre_close:0,low:18.059999465942383,position:0,close:18.059999465942383,open:18.06999969482422,strtime:"2016-05-04T14:26:00+08:00",utc_time:146234316e4},{volume:16700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:301792,pre_close:0,low:18.059999465942383,position:0,close:18.079999923706055,open:18.09000015258789,strtime:"2016-05-04T14:27:00+08:00",utc_time:146234322e4},{volume:20400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:368640,pre_close:0,low:18.059999465942383,position:0,close:18.09000015258789,open:18.079999923706055,strtime:"2016-05-04T14:28:00+08:00",utc_time:146234328e4},{volume:84900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:1534496,pre_close:0,low:18.049999237060547,position:0,close:18.079999923706055,open:18.049999237060547,strtime:"2016-05-04T14:29:00+08:00",utc_time:146234334e4},{volume:4e4,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:723264,pre_close:0,low:18.059999465942383,position:0,close:18.09000015258789,open:18.059999465942383,strtime:"2016-05-04T14:30:00+08:00",utc_time:14623434e5},{volume:67300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:1217824,pre_close:0,low:18.06999969482422,position:0,close:18.079999923706055,open:18.09000015258789,strtime:"2016-05-04T14:31:00+08:00",utc_time:146234346e4},{volume:66400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:1201376,pre_close:0,low:18.079999923706055,position:0,close:18.09000015258789,open:18.09000015258789,strtime:"2016-05-04T14:32:00+08:00",utc_time:146234352e4},{volume:85200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:1542496,pre_close:0,low:18.09000015258789,position:0,close:18.100000381469727,open:18.100000381469727,strtime:"2016-05-04T14:33:00+08:00",utc_time:146234358e4},{volume:63700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.1200008392334,amount:1153632,pre_close:0,low:18.100000381469727,position:0,close:18.110000610351562,open:18.100000381469727,strtime:"2016-05-04T14:34:00+08:00",utc_time:146234364e4},{volume:85300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.110000610351562,amount:1543584,pre_close:0,low:18.059999465942383,position:0,close:18.059999465942383,open:18.100000381469727,strtime:"2016-05-04T14:35:00+08:00",utc_time:14623437e5},{volume:53600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:968480,pre_close:0,low:18.059999465942383,position:0,close:18.06999969482422,open:18.059999465942383,strtime:"2016-05-04T14:36:00+08:00",utc_time:146234376e4},{volume:116100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:2098272,pre_close:0,low:18.059999465942383,position:0,close:18.079999923706055,open:18.06999969482422,strtime:"2016-05-04T14:37:00+08:00",utc_time:146234382e4},{volume:64900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:1173664,pre_close:0,low:18.079999923706055,position:0,close:18.100000381469727,open:18.079999923706055,strtime:"2016-05-04T14:38:00+08:00",utc_time:146234388e4},{volume:14700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:266592,pre_close:0,low:18.09000015258789,position:0,close:18.09000015258789,open:18.09000015258789,strtime:"2016-05-04T14:39:00+08:00",utc_time:146234394e4},{volume:78600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:1420864,pre_close:0,low:18.079999923706055,position:0,close:18.100000381469727,open:18.100000381469727,strtime:"2016-05-04T14:40:00+08:00",utc_time:1462344e6},{volume:50100,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:906592,pre_close:0,low:18.09000015258789,position:0,close:18.09000015258789,open:18.09000015258789,strtime:"2016-05-04T14:41:00+08:00",utc_time:146234406e4},{volume:85e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:1536e3,pre_close:0,low:18.059999465942383,position:0,close:18.06999969482422,open:18.059999465942383,strtime:"2016-05-04T14:42:00+08:00",utc_time:146234412e4},{volume:43600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:788864,pre_close:0,low:18.059999465942383,position:0,close:18.09000015258789,open:18.059999465942383,strtime:"2016-05-04T14:43:00+08:00",utc_time:146234418e4},{volume:89e3,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:1609696,pre_close:0,low:18.06999969482422,position:0,close:18.100000381469727,open:18.079999923706055,strtime:"2016-05-04T14:44:00+08:00",utc_time:146234424e4},{volume:40700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.100000381469727,amount:735968,pre_close:0,low:18.079999923706055,position:0,close:18.100000381469727,open:18.079999923706055,strtime:"2016-05-04T14:45:00+08:00",utc_time:14623443e5},{volume:60700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:1097760,pre_close:0,low:18.06999969482422,position:0,close:18.079999923706055,open:18.079999923706055,strtime:"2016-05-04T14:46:00+08:00",utc_time:146234436e4},{volume:84200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:1521920,pre_close:0,low:18.06999969482422,position:0,close:18.06999969482422,open:18.06999969482422,strtime:"2016-05-04T14:47:00+08:00",utc_time:146234442e4},{volume:92600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:1672736,pre_close:0,low:18.06999969482422,position:0,close:18.079999923706055,open:18.079999923706055,strtime:"2016-05-04T14:48:00+08:00",utc_time:146234448e4},{volume:79900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:1443872,pre_close:0,low:18.059999465942383,position:0,close:18.06999969482422,open:18.06999969482422,strtime:"2016-05-04T14:49:00+08:00",utc_time:146234454e4},{volume:56300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.06999969482422,amount:1016864,pre_close:0,low:18.059999465942383,position:0,close:18.06999969482422,open:18.059999465942383,strtime:"2016-05-04T14:50:00+08:00",utc_time:14623446e5},{volume:51200,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.06999969482422,amount:925568,pre_close:0,low:18.059999465942383,position:0,close:18.059999465942383,open:18.059999465942383,strtime:"2016-05-04T14:51:00+08:00",utc_time:146234466e4},{volume:70700,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:1277504,pre_close:0,low:18.059999465942383,position:0,close:18.079999923706055,open:18.059999465942383,strtime:"2016-05-04T14:52:00+08:00",utc_time:146234472e4},{volume:29900,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:540416,pre_close:0,low:18.06999969482422,position:0,close:18.06999969482422,open:18.06999969482422,strtime:"2016-05-04T14:53:00+08:00",utc_time:146234478e4},{volume:26300,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:475200,pre_close:0,low:18.059999465942383,position:0,close:18.059999465942383,open:18.06999969482422,strtime:"2016-05-04T14:54:00+08:00",utc_time:146234484e4},{volume:49800,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:900096,pre_close:0,low:18.059999465942383,position:0,close:18.06999969482422,open:18.06999969482422,strtime:"2016-05-04T14:55:00+08:00",utc_time:14623449e5},{volume:46500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:839616,pre_close:0,low:18.06999969482422,position:0,close:18.079999923706055,open:18.06999969482422,strtime:"2016-05-04T14:56:00+08:00",utc_time:146234496e4},{volume:71600,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:1294112,pre_close:0,low:18.06999969482422,position:0,close:18.079999923706055,open:18.06999969482422,strtime:"2016-05-04T14:57:00+08:00",utc_time:146234502e4},{volume:52500,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.079999923706055,amount:949024,pre_close:0,low:18.06999969482422,position:0,close:18.06999969482422,open:18.06999969482422,strtime:"2016-05-04T14:58:00+08:00",utc_time:146234508e4},{volume:64400,adj_factor:0,bar_type:60,exchange:"SHSE",sec_id:"600000",flag:0,high:18.09000015258789,amount:1164416,pre_close:0,low:18.06999969482422,position:0,close:18.079999923706055,open:18.079999923706055,strtime:"2016-05-04T14:59:00+08:00",utc_time:146234514e4}],Xv=kK.map(i=>({time:i.utc_time,open:+i.open,high:+i.high,low:+i.low,close:+i.close,volume:+i.volume}));console.log(Xv.length);class BK extends Je{constructor(){super(),this.orders=[],this._onDataPush=new ve,this._onOrder=new ve,this._register(this._onDataPush),this._register(this._onOrder)}get onDataPush(){return this._onDataPush.event}get onOrder(){return this._onOrder.event}addCompareSymbol(e){ef()}removeCompareSymbol(e){ef()}changeSymbol(e){ef()}async fetchBarsN(e){return Xv.slice(0,151)}async fetchPreClose(e,t){return Xv[0].open}async fetchBars(e){return[]}async fetchTrades(e,t,r){return[]}fetchTradingDate(e){return ef()}dispose(){super.dispose(),this.client&&(this.client.end(),this.client=null)}}var yD={exports:{}};(function(i,e){(function(t,r){i.exports=r()})(P,function(){var t="millisecond",r="second",n="minute",s="hour",o="day",a="week",l="month",c="quarter",h="year",u=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,p=/\[.*?\]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(D,b,S){var T=String(D);return!T||T.length>=b?D:""+Array(b+1-T.length).join(S)+D},f={s:d,z:function(D){var b=-D.utcOffset(),S=Math.abs(b),T=Math.floor(S/60),C=S%60;return(b<=0?"+":"-")+d(T,2,"0")+":"+d(C,2,"0")},m:function(D,b){var S=12*(b.year()-D.year())+(b.month()-D.month()),T=D.clone().add(S,l),C=b-T<0,I=D.clone().add(S+(C?-1:1),l);return Number(-(S+(b-T)/(C?T-I:I-T))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:l,y:h,w:a,d:o,h:s,m:n,s:r,ms:t,Q:c}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g="en",_={};_[g]=m;var v=function(D){return D instanceof w},y=function(D,b,S){var T;if(!D)return null;if(typeof D=="string")_[D]&&(T=D),b&&(_[D]=b,T=D);else{var C=D.name;_[C]=D,T=C}return S||(g=T),T},x=function(D,b,S){if(v(D))return D.clone();var T=b?typeof b=="string"?{format:b,pl:S}:b:{};return T.date=D,new w(T)},A=f;A.l=y,A.i=v,A.w=function(D,b){return x(D,{locale:b.$L,utc:b.$u})};var w=function(){function D(S){this.$L=this.$L||y(S.locale,null,!0)||g,this.parse(S)}var b=D.prototype;return b.parse=function(S){this.$d=function(T){var C=T.date,I=T.utc;if(C===null)return new Date(NaN);if(A.u(C))return new Date;if(C instanceof Date)return new Date(C);if(typeof C=="string"&&!/Z$/i.test(C)){var M=C.match(u);if(M)return I?new Date(Date.UTC(M[1],M[2]-1,M[3]||1,M[4]||0,M[5]||0,M[6]||0,M[7]||0)):new Date(M[1],M[2]-1,M[3]||1,M[4]||0,M[5]||0,M[6]||0,M[7]||0)}return new Date(C)}(S),this.init()},b.init=function(){var S=this.$d;this.$y=S.getFullYear(),this.$M=S.getMonth(),this.$D=S.getDate(),this.$W=S.getDay(),this.$H=S.getHours(),this.$m=S.getMinutes(),this.$s=S.getSeconds(),this.$ms=S.getMilliseconds()},b.$utils=function(){return A},b.isValid=function(){return this.$d.toString()!=="Invalid Date"},b.isSame=function(S,T){var C=x(S);return this.startOf(T)<=C&&C<=this.endOf(T)},b.isAfter=function(S,T){return x(S)<this.startOf(T)},b.isBefore=function(S,T){return this.endOf(T)<x(S)},b.$g=function(S,T,C){return A.u(S)?this[T]:this.set(C,S)},b.year=function(S){return this.$g(S,"$y",h)},b.month=function(S){return this.$g(S,"$M",l)},b.day=function(S){return this.$g(S,"$W",o)},b.date=function(S){return this.$g(S,"$D","date")},b.hour=function(S){return this.$g(S,"$H",s)},b.minute=function(S){return this.$g(S,"$m",n)},b.second=function(S){return this.$g(S,"$s",r)},b.millisecond=function(S){return this.$g(S,"$ms",t)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(S,T){var C=this,I=!!A.u(T)||T,M=A.p(S),k=function(Se,R){var L=A.w(C.$u?Date.UTC(C.$y,R,Se):new Date(C.$y,R,Se),C);return I?L:L.endOf(o)},H=function(Se,R){return A.w(C.toDate()[Se].apply(C.toDate(),(I?[0,0,0,0]:[23,59,59,999]).slice(R)),C)},Y=this.$W,O=this.$M,B=this.$D,q="set"+(this.$u?"UTC":"");switch(M){case h:return I?k(1,0):k(31,11);case l:return I?k(1,O):k(0,O+1);case a:var le=this.$locale().weekStart||0,X=(Y<le?Y+7:Y)-le;return k(I?B-X:B+(6-X),O);case o:case"date":return H(q+"Hours",0);case s:return H(q+"Minutes",1);case n:return H(q+"Seconds",2);case r:return H(q+"Milliseconds",3);default:return this.clone()}},b.endOf=function(S){return this.startOf(S,!1)},b.$set=function(S,T){var C,I=A.p(S),M="set"+(this.$u?"UTC":""),k=(C={},C[o]=M+"Date",C.date=M+"Date",C[l]=M+"Month",C[h]=M+"FullYear",C[s]=M+"Hours",C[n]=M+"Minutes",C[r]=M+"Seconds",C[t]=M+"Milliseconds",C)[I],H=I===o?this.$D+(T-this.$W):T;return this.$d[k]&&this.$d[k](H),this.init(),this},b.set=function(S,T){return this.clone().$set(S,T)},b.add=function(S,T){var C,I=this;S=Number(S);var M=A.p(T),k=function(B,q){var le=I.clone().set("date",1).set(B,q+S);return le.set("date",Math.min(I.$D,le.daysInMonth()))},H=function(B){var q=new Date(I.$d);return q.setDate(q.getDate()+B*S),A.w(q,I)};if(M===l)return k(l,this.$M);if(M===h)return k(h,this.$y);if(M===o)return H(1);if(M===a)return H(7);var Y=(C={},C[n]=6e4,C[s]=36e5,C[r]=1e3,C)[M]||1,O=this.valueOf()+S*Y;return A.w(O,this)},b.subtract=function(S,T){return this.add(-1*S,T)},b.format=function(S){var T=this;if(!this.isValid())return"Invalid Date";var C=S||"YYYY-MM-DDTHH:mm:ssZ",I=A.z(this),M=this.$locale(),k=M.weekdays,H=M.months,Y=function(q,le,X,Se){return q&&q[le]||X[le].substr(0,Se)},O=function(q){return A.s(T.$H%12||12,q,"0")},B={YY:String(this.$y).slice(-2),YYYY:String(this.$y),M:String(this.$M+1),MM:A.s(this.$M+1,2,"0"),MMM:Y(M.monthsShort,this.$M,H,3),MMMM:H[this.$M],D:String(this.$D),DD:A.s(this.$D,2,"0"),d:String(this.$W),dd:Y(M.weekdaysMin,this.$W,k,2),ddd:Y(M.weekdaysShort,this.$W,k,3),dddd:k[this.$W],H:String(this.$H),HH:A.s(this.$H,2,"0"),h:O(1),hh:O(2),a:this.$H<12?"am":"pm",A:this.$H<12?"AM":"PM",m:String(this.$m),mm:A.s(this.$m,2,"0"),s:String(this.$s),ss:A.s(this.$s,2,"0"),SSS:A.s(this.$ms,3,"0"),Z:I};return C.replace(p,function(q){return q.indexOf("[")>-1?q.replace(/\[|\]/g,""):B[q]||I.replace(":","")})},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(S,T,C){var I,M=A.p(T),k=x(S),H=6e4*(k.utcOffset()-this.utcOffset()),Y=this-k,O=A.m(this,k);return O=(I={},I[h]=O/12,I[l]=O,I[c]=O/3,I[a]=(Y-H)/6048e5,I[o]=(Y-H)/864e5,I[s]=Y/36e5,I[n]=Y/6e4,I[r]=Y/1e3,I)[M]||Y,C?O:A.a(O)},b.daysInMonth=function(){return this.endOf(l).$D},b.$locale=function(){return _[this.$L]},b.locale=function(S,T){if(!S)return this.$L;var C=this.clone();return C.$L=y(S,T,!0),C},b.clone=function(){return A.w(this.toDate(),this)},b.toDate=function(){return new Date(this.$d)},b.toJSON=function(){return this.toISOString()},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},D}();return x.prototype=w.prototype,x.extend=function(D,b){return D(b,w,x),x},x.locale=y,x.isDayjs=v,x.unix=function(D){return x(1e3*D)},x.en=_[g],x.Ls=_,x})})(yD);var FK=yD.exports;const vr=bD(FK);class UK{constructor(){this.shells=new Map,this.listeners=new Map}async init({token:e,session:t="default",container:r,enablePriceAdjust:n=!0,compare:s=[]}){let o,a,l,c,h=new URL(location.href),u=new URLSearchParams(h.searchParams);o=u.get("name")||"300",a=u.get("symbol")||"SHSE.000300",c=u.get("precision")?Number(u.get("precision")):2,l=u.get("theme")||mf;let p=JSON.stringify({"workbench.colorTheme":l,"workbench.sidebar.showExpaned":!1,"data.resolution.showIntradayData":!1,"data.resolution.showFiveDayData":!1,"data.adjust.hasPriceAdjust":n,"data.adjust.effect":vi.Prev,"chart.label.noOverlapping":!0}),d=new BK;const f=new wK(GS,GS),m=new YT(e,t),g=new NK(p);g.initialize();const _=new xK(r,{configurationService:g,environmentService:m,storageService:f,dataService:d});_.open(),this.shells.set(r,_);let v;function y(A){v=A.get(Ue)}_.invokeFunction(y),LK("order",{triggerKeys:["order"],provideSuggestionItems(A,w){let{k:D,ids:b}=JSON.parse(A.triggerKey),S=+D;return d.orders.filter(T=>T.type===S&&b.indexOf(T.id)>-1).map(T=>({suggestion:{id:T.id||xt(),text:T.message}}))},resolveSuggestionItem(A,w){return window.parent.postMessage({type:"order-select",payload:{id:A.id}},"*"),Promise.resolve(null)}}),this.registerFormatters(),this.registerPrecisionFormatters(c);let x=A=>{let w=v.currentChart;switch(A.data.type){case"change-symbol":let{symbol:D,secName:b,precision:S=2}=A.data.payload,T=Na(D);w&&(this.registerPrecisionFormatters(S),d.changeSymbol(T),v.loadChart({dsName:T,alias:b,resolution:w.dataResolution,range:w.dataRange,adjust:w.dataAdjust,forceReload:!0}));break;case"change-theme":let{type:C}=A.data.payload;g.updateValue(Xa,C,Be.MEMORY);break;case"add-compares":if(w&&(w.dataRange===Te.Intraday||w.dataRange===Te.FiveDay)){let{compares:M}=A.data.payload,k=[];for(let[H,Y]of M){let O=Na(H);k.push([O,Y]),d.addCompareSymbol(O)}w.addCompare(k)}break;case"remove-compares":let{compares:I}=A.data.payload;for(let[M,k]of I){let H=Na(M);w.removeCompare(H)}break}};return this.listeners.set(r,x),window.addEventListener("message",x,!1),await v.loadChart({dsName:Na(a),alias:o,compare:s.map(([A,w])=>[Na(A),w]),range:Te.Continuous}),window.charts=v,v}registerPrecisionFormatters(e=2){qn("price",t=>t?t.toFixed(e):""),qn("delta",t=>{let r=t.toFixed(e);return t>0?"+"+r:r})}registerFormatters(){qn("localDatetime",e=>vr(e).format("MM-DD HH:mm:ss")),qn("datetime",e=>vr(e).format("YYYY-MM-DD/HH:mm")),qn("date",e=>vr(e).format("YYYY-MM-DD")),Yn(ce.Day,e=>vr(e).format("YYYY-MM-DD")),Yn(ce.Hour,e=>vr(e).format("HH:mm")),Yn(ce.M,e=>vr(e).format("HH:mm")),Yn(ce.M5,e=>vr(e).format("HH:mm")),Yn(ce.M15,e=>vr(e).format("HH:mm")),Yn(ce.M30,e=>vr(e).format("HH:mm")),Yn(ce.Month,e=>vr(e).format("YYYY-MM")),Yn(ce.Year,e=>vr(e).format("YYYY")),qn("percentage",e=>{let t=(e*100).toFixed(2)+"%";return e>0?"+"+t:t}),qn("volume",e=>e.toFixed(0)),qn("smart",e=>{let t=Math.abs(e);if(t>100)return e.toFixed(0);if(t>10)return e.toFixed(2);if(t>1)return e.toFixed(4);let r=e.toString(),n=0,s=0,o=r.length;for(;n<o&&(r[n].charCodeAt(0)>48&&s++,!(s>3));n++);return r.substr(0,n)})}teardown(e){if(this.shells.has(e)){let t=this.shells.get(e);t.dispose(),t=null,this.shells.delete(e),My.dispose(),Ct.dispose()}if(this.listeners.has(e)){let t=this.listeners.get(e);window.removeEventListener("message",t,!1)}}dispose(){this.listeners.forEach((e,t)=>{window.removeEventListener("message",e,!1)}),this.listeners.clear(),this.shells.forEach((e,t)=>{e.dispose()}),this.shells.clear(),this.listeners=null,this.shells=null,qr.dispose()}}window.addEventListener("DOMContentLoaded",async()=>{let i=new UK,e=document.getElementById("container");await i.init({container:e})});
